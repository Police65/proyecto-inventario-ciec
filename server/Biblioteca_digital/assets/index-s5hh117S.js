var nL=Object.defineProperty;var rL=(t,e,n)=>e in t?nL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xg=(t,e,n)=>rL(t,typeof e!="symbol"?e+"":e,n);function iL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Qr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aL(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var bg={exports:{}},Pu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function oL(){if(kE)return Pu;kE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:a}}return Pu.Fragment=e,Pu.jsx=n,Pu.jsxs=n,Pu}var PE;function sL(){return PE||(PE=1,bg.exports=oL()),bg.exports}var p=sL(),_g={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function lL(){if(IE)return We;IE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),v=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(L,Y,te){this.props=L,this.context=Y,this.refs=E,this.updater=te||_}C.prototype.isReactComponent={},C.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},C.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function T(){}T.prototype=C.prototype;function R(L,Y,te){this.props=L,this.context=Y,this.refs=E,this.updater=te||_}var N=R.prototype=new T;N.constructor=R,S(N,C.prototype),N.isPureReactComponent=!0;var O=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function I(L,Y,te,ie,we,ge){return te=ge.ref,{$$typeof:t,type:L,key:Y,ref:te!==void 0?te:null,props:ge}}function j(L,Y){return I(L.type,Y,void 0,void 0,void 0,L.props)}function U(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function re(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(te){return Y[te]})}var B=/\/+/g;function Z(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?re(""+L.key):Y.toString(36)}function me(){}function H(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(me,me):(L.status="pending",L.then(function(Y){L.status==="pending"&&(L.status="fulfilled",L.value=Y)},function(Y){L.status==="pending"&&(L.status="rejected",L.reason=Y)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ve(L,Y,te,ie,we){var ge=typeof L;(ge==="undefined"||ge==="boolean")&&(L=null);var ue=!1;if(L===null)ue=!0;else switch(ge){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(L.$$typeof){case t:case e:ue=!0;break;case h:return ue=L._init,ve(ue(L._payload),Y,te,ie,we)}}if(ue)return we=we(L),ue=ie===""?"."+Z(L,0):ie,O(we)?(te="",ue!=null&&(te=ue.replace(B,"$&/")+"/"),ve(we,Y,te,"",function(V){return V})):we!=null&&(U(we)&&(we=j(we,te+(we.key==null||L&&L.key===we.key?"":(""+we.key).replace(B,"$&/")+"/")+ue)),Y.push(we)),1;ue=0;var se=ie===""?".":ie+":";if(O(L))for(var pe=0;pe<L.length;pe++)ie=L[pe],ge=se+Z(ie,pe),ue+=ve(ie,Y,te,ge,we);else if(pe=x(L),typeof pe=="function")for(L=pe.call(L),pe=0;!(ie=L.next()).done;)ie=ie.value,ge=se+Z(ie,pe++),ue+=ve(ie,Y,te,ge,we);else if(ge==="object"){if(typeof L.then=="function")return ve(H(L),Y,te,ie,we);throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ue}function z(L,Y,te){if(L==null)return L;var ie=[],we=0;return ve(L,ie,"","",function(ge){return Y.call(te,ge,we++)}),ie}function K(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(te){(L._status===0||L._status===-1)&&(L._status=1,L._result=te)},function(te){(L._status===0||L._status===-1)&&(L._status=2,L._result=te)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var ye=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Ee(){}return We.Children={map:z,forEach:function(L,Y,te){z(L,function(){Y.apply(this,arguments)},te)},count:function(L){var Y=0;return z(L,function(){Y++}),Y},toArray:function(L){return z(L,function(Y){return Y})||[]},only:function(L){if(!U(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},We.Component=C,We.Fragment=n,We.Profiler=i,We.PureComponent=R,We.StrictMode=r,We.Suspense=f,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,We.__COMPILER_RUNTIME={__proto__:null,c:function(L){return D.H.useMemoCache(L)}},We.cache=function(L){return function(){return L.apply(null,arguments)}},We.cloneElement=function(L,Y,te){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ie=S({},L.props),we=L.key,ge=void 0;if(Y!=null)for(ue in Y.ref!==void 0&&(ge=void 0),Y.key!==void 0&&(we=""+Y.key),Y)!k.call(Y,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&Y.ref===void 0||(ie[ue]=Y[ue]);var ue=arguments.length-2;if(ue===1)ie.children=te;else if(1<ue){for(var se=Array(ue),pe=0;pe<ue;pe++)se[pe]=arguments[pe+2];ie.children=se}return I(L.type,we,void 0,void 0,ge,ie)},We.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},We.createElement=function(L,Y,te){var ie,we={},ge=null;if(Y!=null)for(ie in Y.key!==void 0&&(ge=""+Y.key),Y)k.call(Y,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(we[ie]=Y[ie]);var ue=arguments.length-2;if(ue===1)we.children=te;else if(1<ue){for(var se=Array(ue),pe=0;pe<ue;pe++)se[pe]=arguments[pe+2];we.children=se}if(L&&L.defaultProps)for(ie in ue=L.defaultProps,ue)we[ie]===void 0&&(we[ie]=ue[ie]);return I(L,ge,void 0,void 0,null,we)},We.createRef=function(){return{current:null}},We.forwardRef=function(L){return{$$typeof:u,render:L}},We.isValidElement=U,We.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:K}},We.memo=function(L,Y){return{$$typeof:d,type:L,compare:Y===void 0?null:Y}},We.startTransition=function(L){var Y=D.T,te={};D.T=te;try{var ie=L(),we=D.S;we!==null&&we(te,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(Ee,ye)}catch(ge){ye(ge)}finally{D.T=Y}},We.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},We.use=function(L){return D.H.use(L)},We.useActionState=function(L,Y,te){return D.H.useActionState(L,Y,te)},We.useCallback=function(L,Y){return D.H.useCallback(L,Y)},We.useContext=function(L){return D.H.useContext(L)},We.useDebugValue=function(){},We.useDeferredValue=function(L,Y){return D.H.useDeferredValue(L,Y)},We.useEffect=function(L,Y,te){var ie=D.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(L,Y)},We.useId=function(){return D.H.useId()},We.useImperativeHandle=function(L,Y,te){return D.H.useImperativeHandle(L,Y,te)},We.useInsertionEffect=function(L,Y){return D.H.useInsertionEffect(L,Y)},We.useLayoutEffect=function(L,Y){return D.H.useLayoutEffect(L,Y)},We.useMemo=function(L,Y){return D.H.useMemo(L,Y)},We.useOptimistic=function(L,Y){return D.H.useOptimistic(L,Y)},We.useReducer=function(L,Y,te){return D.H.useReducer(L,Y,te)},We.useRef=function(L){return D.H.useRef(L)},We.useState=function(L){return D.H.useState(L)},We.useSyncExternalStore=function(L,Y,te){return D.H.useSyncExternalStore(L,Y,te)},We.useTransition=function(){return D.H.useTransition()},We.version="19.1.0",We}var LE;function _l(){return LE||(LE=1,_g.exports=lL()),_g.exports}var A=_l();const J0=Qr(A),uL=iL({__proto__:null,default:J0},[A]);var wg={exports:{}},Iu={},Sg={exports:{}},Eg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function cL(){return jE||(jE=1,function(t){function e(z,K){var ye=z.length;z.push(K);e:for(;0<ye;){var Ee=ye-1>>>1,L=z[Ee];if(0<i(L,K))z[Ee]=K,z[ye]=L,ye=Ee;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var K=z[0],ye=z.pop();if(ye!==K){z[0]=ye;e:for(var Ee=0,L=z.length,Y=L>>>1;Ee<Y;){var te=2*(Ee+1)-1,ie=z[te],we=te+1,ge=z[we];if(0>i(ie,ye))we<L&&0>i(ge,ie)?(z[Ee]=ge,z[we]=ye,Ee=we):(z[Ee]=ie,z[te]=ye,Ee=te);else if(we<L&&0>i(ge,ye))z[Ee]=ge,z[we]=ye,Ee=we;else break e}}return K}function i(z,K){var ye=z.sortIndex-K.sortIndex;return ye!==0?ye:z.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],d=[],h=1,v=null,x=3,_=!1,S=!1,E=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(z){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=z)r(d),K.sortIndex=K.expirationTime,e(f,K);else break;K=n(d)}}function D(z){if(E=!1,O(z),!S)if(n(f)!==null)S=!0,k||(k=!0,Z());else{var K=n(d);K!==null&&ve(D,K.startTime-z)}}var k=!1,I=-1,j=5,U=-1;function re(){return C?!0:!(t.unstable_now()-U<j)}function B(){if(C=!1,k){var z=t.unstable_now();U=z;var K=!0;try{e:{S=!1,E&&(E=!1,R(I),I=-1),_=!0;var ye=x;try{t:{for(O(z),v=n(f);v!==null&&!(v.expirationTime>z&&re());){var Ee=v.callback;if(typeof Ee=="function"){v.callback=null,x=v.priorityLevel;var L=Ee(v.expirationTime<=z);if(z=t.unstable_now(),typeof L=="function"){v.callback=L,O(z),K=!0;break t}v===n(f)&&r(f),O(z)}else r(f);v=n(f)}if(v!==null)K=!0;else{var Y=n(d);Y!==null&&ve(D,Y.startTime-z),K=!1}}break e}finally{v=null,x=ye,_=!1}K=void 0}}finally{K?Z():k=!1}}}var Z;if(typeof N=="function")Z=function(){N(B)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,H=me.port2;me.port1.onmessage=B,Z=function(){H.postMessage(null)}}else Z=function(){T(B,0)};function ve(z,K){I=T(function(){z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(z){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var ye=x;x=K;try{return z()}finally{x=ye}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ye=x;x=z;try{return K()}finally{x=ye}},t.unstable_scheduleCallback=function(z,K,ye){var Ee=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ee+ye:Ee):ye=Ee,z){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ye+L,z={id:h++,callback:K,priorityLevel:z,startTime:ye,expirationTime:L,sortIndex:-1},ye>Ee?(z.sortIndex=ye,e(d,z),n(f)===null&&z===n(d)&&(E?(R(I),I=-1):E=!0,ve(D,ye-Ee))):(z.sortIndex=L,e(f,z),S||_||(S=!0,k||(k=!0,Z()))),z},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(z){var K=x;return function(){var ye=x;x=K;try{return z.apply(this,arguments)}finally{x=ye}}}}(Eg)),Eg}var UE;function dL(){return UE||(UE=1,Sg.exports=cL()),Sg.exports}var Cg={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function fL(){if($E)return Vn;$E=1;var t=_l();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,d,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:f,containerInfo:d,implementation:h}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Vn.createPortal=function(f,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,h)},Vn.flushSync=function(f){var d=l.T,h=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=h,r.d.f()}},Vn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},Vn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Vn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var h=d.as,v=u(h,d.crossOrigin),x=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:_}):h==="script"&&r.d.X(f,{crossOrigin:v,integrity:x,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Vn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},Vn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,v=u(h,d.crossOrigin);r.d.L(f,h,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Vn.preloadModule=function(f,d){if(typeof f=="string")if(d){var h=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},Vn.requestFormReset=function(f){r.d.r(f)},Vn.unstable_batchedUpdates=function(f,d){return f(d)},Vn.useFormState=function(f,d,h){return l.H.useFormState(f,d,h)},Vn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Vn.version="19.1.0",Vn}var FE;function PD(){if(FE)return Cg.exports;FE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cg.exports=fL(),Cg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function hL(){if(BE)return Iu;BE=1;var t=dL(),e=_l(),n=PD();function r(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,c=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(c=s.return),o=s.return;while(o)}return s.tag===3?c:null}function l(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function u(o){if(a(o)!==o)throw Error(r(188))}function f(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(r(188));return s!==o?null:o}for(var c=o,m=s;;){var b=c.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){c=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===c)return u(b),o;if(w===m)return u(b),s;w=w.sibling}throw Error(r(188))}if(c.return!==m.return)c=b,m=w;else{for(var M=!1,P=b.child;P;){if(P===c){M=!0,c=b,m=w;break}if(P===m){M=!0,m=b,c=w;break}P=P.sibling}if(!M){for(P=w.child;P;){if(P===c){M=!0,c=w,m=b;break}if(P===m){M=!0,m=w,c=b;break}P=P.sibling}if(!M)throw Error(r(189))}}if(c.alternate!==m)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?o:s}function d(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=d(o),s!==null)return s;o=o.sibling}return null}var h=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function Z(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var me=Symbol.for("react.client.reference");function H(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===me?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case k:return"SuspenseList";case U:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case N:return(o.displayName||"Context")+".Provider";case R:return(o._context.displayName||"Context")+".Consumer";case O:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return s=o.displayName||null,s!==null?s:H(o.type)||"Memo";case j:s=o._payload,o=o._init;try{return H(o(s))}catch{}}return null}var ve=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ee=[],L=-1;function Y(o){return{current:o}}function te(o){0>L||(o.current=Ee[L],Ee[L]=null,L--)}function ie(o,s){L++,Ee[L]=o.current,o.current=s}var we=Y(null),ge=Y(null),ue=Y(null),se=Y(null);function pe(o,s){switch(ie(ue,s),ie(ge,o),ie(we,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?sE(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=sE(s),o=lE(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}te(we),ie(we,o)}function V(){te(we),te(ge),te(ue)}function _e(o){o.memoizedState!==null&&ie(se,o);var s=we.current,c=lE(s,o.type);s!==c&&(ie(ge,o),ie(we,c))}function W(o){ge.current===o&&(te(we),te(ge)),se.current===o&&(te(se),Du._currentValue=ye)}var F=Object.prototype.hasOwnProperty,xe=t.unstable_scheduleCallback,Q=t.unstable_cancelCallback,be=t.unstable_shouldYield,Me=t.unstable_requestPaint,ae=t.unstable_now,Le=t.unstable_getCurrentPriorityLevel,Ye=t.unstable_ImmediatePriority,Ae=t.unstable_UserBlockingPriority,lt=t.unstable_NormalPriority,ct=t.unstable_LowPriority,Be=t.unstable_IdlePriority,qt=t.log,Pn=t.unstable_setDisableYieldValue,nt=null,Xe=null;function dt(o){if(typeof qt=="function"&&Pn(o),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(nt,o)}catch{}}var Tt=Math.clz32?Math.clz32:nn,de=Math.log,qe=Math.LN2;function nn(o){return o>>>=0,o===0?32:31-(de(o)/qe|0)|0}var yt=256,cn=4194304;function xt(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function _n(o,s,c){var m=o.pendingLanes;if(m===0)return 0;var b=0,w=o.suspendedLanes,M=o.pingedLanes;o=o.warmLanes;var P=m&134217727;return P!==0?(m=P&~w,m!==0?b=xt(m):(M&=P,M!==0?b=xt(M):c||(c=P&~o,c!==0&&(b=xt(c))))):(P=m&~w,P!==0?b=xt(P):M!==0?b=xt(M):c||(c=m&~o,c!==0&&(b=xt(c)))),b===0?0:s!==0&&s!==b&&(s&w)===0&&(w=b&-b,c=s&-s,w>=c||w===32&&(c&4194048)!==0)?s:b}function Ne(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function Je(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jt(){var o=yt;return yt<<=1,(yt&4194048)===0&&(yt=256),o}function dn(){var o=cn;return cn<<=1,(cn&62914560)===0&&(cn=4194304),o}function Bn(o){for(var s=[],c=0;31>c;c++)s.push(o);return s}function Dt(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ni(o,s,c,m,b,w){var M=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var P=o.entanglements,$=o.expirationTimes,J=o.hiddenUpdates;for(c=M&~c;0<c;){var le=31-Tt(c),he=1<<le;P[le]=0,$[le]=-1;var ee=J[le];if(ee!==null)for(J[le]=null,le=0;le<ee.length;le++){var ne=ee[le];ne!==null&&(ne.lane&=-536870913)}c&=~he}m!==0&&Jo(o,m,0),w!==0&&b===0&&o.tag!==0&&(o.suspendedLanes|=w&~(M&~s))}function Jo(o,s,c){o.pendingLanes|=s,o.suspendedLanes&=~s;var m=31-Tt(s);o.entangledLanes|=s,o.entanglements[m]=o.entanglements[m]|1073741824|c&4194090}function Zo(o,s){var c=o.entangledLanes|=s;for(o=o.entanglements;c;){var m=31-Tt(c),b=1<<m;b&s|o[m]&s&&(o[m]|=s),c&=~b}}function $l(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Fl(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Lc(){var o=K.p;return o!==0?o:(o=window.event,o===void 0?32:AE(o.type))}function dm(o,s){var c=K.p;try{return K.p=o,s()}finally{K.p=c}}var Fr=Math.random().toString(36).slice(2),fn="__reactFiber$"+Fr,hn="__reactProps$"+Fr,ta="__reactContainer$"+Fr,na="__reactEvents$"+Fr,fm="__reactListeners$"+Fr,Bl="__reactHandles$"+Fr,jc="__reactResources$"+Fr,Ja="__reactMarker$"+Fr;function Qo(o){delete o[fn],delete o[hn],delete o[na],delete o[fm],delete o[Bl]}function vi(o){var s=o[fn];if(s)return s;for(var c=o.parentNode;c;){if(s=c[ta]||c[fn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(o=fE(o);o!==null;){if(c=o[fn])return c;o=fE(o)}return s}o=c,c=o.parentNode}return null}function ra(o){if(o=o[fn]||o[ta]){var s=o.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return o}return null}function Za(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(r(33))}function xi(o){var s=o[jc];return s||(s=o[jc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function rn(o){o[Ja]=!0}var Uc=new Set,$c={};function bi(o,s){ce(o,s),ce(o+"Capture",s)}function ce(o,s){for($c[o]=s,o=0;o<s.length;o++)Uc.add(s[o])}var Pe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},Vt={};function Xt(o){return F.call(Vt,o)?!0:F.call(Ze,o)?!1:Pe.test(o)?Vt[o]=!0:(Ze[o]=!0,!1)}function xr(o,s,c){if(Xt(s))if(c===null)o.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var m=s.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+c)}}function Fc(o,s,c){if(c===null)o.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+c)}}function _i(o,s,c,m){if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(s,c,""+m)}}var hm,e_;function es(o){if(hm===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);hm=s&&s[1]||"",e_=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hm+o+e_}var mm=!1;function pm(o,s){if(!o||mm)return"";mm=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(s){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ne){var ee=ne}Reflect.construct(o,[],he)}else{try{he.call()}catch(ne){ee=ne}o.call(he.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(he=o())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),M=w[0],P=w[1];if(M&&P){var $=M.split(`
`),J=P.split(`
`);for(b=m=0;m<$.length&&!$[m].includes("DetermineComponentFrameRoot");)m++;for(;b<J.length&&!J[b].includes("DetermineComponentFrameRoot");)b++;if(m===$.length||b===J.length)for(m=$.length-1,b=J.length-1;1<=m&&0<=b&&$[m]!==J[b];)b--;for(;1<=m&&0<=b;m--,b--)if($[m]!==J[b]){if(m!==1||b!==1)do if(m--,b--,0>b||$[m]!==J[b]){var le=`
`+$[m].replace(" at new "," at ");return o.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",o.displayName)),le}while(1<=m&&0<=b);break}}}finally{mm=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?es(c):""}function Xk(o){switch(o.tag){case 26:case 27:case 5:return es(o.type);case 16:return es("Lazy");case 13:return es("Suspense");case 19:return es("SuspenseList");case 0:case 15:return pm(o.type,!1);case 11:return pm(o.type.render,!1);case 1:return pm(o.type,!0);case 31:return es("Activity");default:return""}}function t_(o){try{var s="";do s+=Xk(o),o=o.return;while(o);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function br(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function n_(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Jk(o){var s=n_(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),m=""+o[s];if(!o.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,w=c.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return b.call(this)},set:function(M){m=""+M,w.call(this,M)}}),Object.defineProperty(o,s,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Bc(o){o._valueTracker||(o._valueTracker=Jk(o))}function r_(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var c=s.getValue(),m="";return o&&(m=n_(o)?o.checked?"true":"false":o.value),o=m,o!==c?(s.setValue(o),!0):!1}function qc(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Zk=/[\n"\\]/g;function _r(o){return o.replace(Zk,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function gm(o,s,c,m,b,w,M,P){o.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?o.type=M:o.removeAttribute("type"),s!=null?M==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+br(s)):o.value!==""+br(s)&&(o.value=""+br(s)):M!=="submit"&&M!=="reset"||o.removeAttribute("value"),s!=null?ym(o,M,br(s)):c!=null?ym(o,M,br(c)):m!=null&&o.removeAttribute("value"),b==null&&w!=null&&(o.defaultChecked=!!w),b!=null&&(o.checked=b&&typeof b!="function"&&typeof b!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?o.name=""+br(P):o.removeAttribute("name")}function i_(o,s,c,m,b,w,M,P){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),s!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||s!=null))return;c=c!=null?""+br(c):"",s=s!=null?""+br(s):c,P||s===o.value||(o.value=s),o.defaultValue=s}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=P?o.checked:!!m,o.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(o.name=M)}function ym(o,s,c){s==="number"&&qc(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function ts(o,s,c,m){if(o=o.options,s){s={};for(var b=0;b<c.length;b++)s["$"+c[b]]=!0;for(c=0;c<o.length;c++)b=s.hasOwnProperty("$"+o[c].value),o[c].selected!==b&&(o[c].selected=b),b&&m&&(o[c].defaultSelected=!0)}else{for(c=""+br(c),s=null,b=0;b<o.length;b++){if(o[b].value===c){o[b].selected=!0,m&&(o[b].defaultSelected=!0);return}s!==null||o[b].disabled||(s=o[b])}s!==null&&(s.selected=!0)}}function a_(o,s,c){if(s!=null&&(s=""+br(s),s!==o.value&&(o.value=s),c==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=c!=null?""+br(c):""}function o_(o,s,c,m){if(s==null){if(m!=null){if(c!=null)throw Error(r(92));if(ve(m)){if(1<m.length)throw Error(r(93));m=m[0]}c=m}c==null&&(c=""),s=c}c=br(s),o.defaultValue=c,m=o.textContent,m===c&&m!==""&&m!==null&&(o.value=m)}function ns(o,s){if(s){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=s;return}}o.textContent=s}var Qk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function s_(o,s,c){var m=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":m?o.setProperty(s,c):typeof c!="number"||c===0||Qk.has(s)?s==="float"?o.cssFloat=c:o[s]=(""+c).trim():o[s]=c+"px"}function l_(o,s,c){if(s!=null&&typeof s!="object")throw Error(r(62));if(o=o.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||s!=null&&s.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var b in s)m=s[b],s.hasOwnProperty(b)&&c[b]!==m&&s_(o,b,m)}else for(var w in s)s.hasOwnProperty(w)&&s_(o,w,s[w])}function vm(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eP=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tP=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vc(o){return tP.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var xm=null;function bm(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var rs=null,is=null;function u_(o){var s=ra(o);if(s&&(o=s.stateNode)){var c=o[hn]||null;e:switch(o=s.stateNode,s.type){case"input":if(gm(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+_r(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var m=c[s];if(m!==o&&m.form===o.form){var b=m[hn]||null;if(!b)throw Error(r(90));gm(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(s=0;s<c.length;s++)m=c[s],m.form===o.form&&r_(m)}break e;case"textarea":a_(o,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&ts(o,!!c.multiple,s,!1)}}}var _m=!1;function c_(o,s,c){if(_m)return o(s,c);_m=!0;try{var m=o(s);return m}finally{if(_m=!1,(rs!==null||is!==null)&&(Nd(),rs&&(s=rs,o=is,is=rs=null,u_(s),o)))for(s=0;s<o.length;s++)u_(o[s])}}function ql(o,s){var c=o.stateNode;if(c===null)return null;var m=c[hn]||null;if(m===null)return null;c=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(r(231,s,typeof c));return c}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wm=!1;if(wi)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){wm=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{wm=!1}var ia=null,Sm=null,zc=null;function d_(){if(zc)return zc;var o,s=Sm,c=s.length,m,b="value"in ia?ia.value:ia.textContent,w=b.length;for(o=0;o<c&&s[o]===b[o];o++);var M=c-o;for(m=1;m<=M&&s[c-m]===b[w-m];m++);return zc=b.slice(o,1<m?1-m:void 0)}function Gc(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Hc(){return!0}function f_(){return!1}function Zn(o){function s(c,m,b,w,M){this._reactName=c,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=M,this.currentTarget=null;for(var P in o)o.hasOwnProperty(P)&&(c=o[P],this[P]=c?c(w):w[P]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Hc:f_,this.isPropagationStopped=f_,this}return h(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Hc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Hc)},persist:function(){},isPersistent:Hc}),s}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=Zn(Qa),zl=h({},Qa,{view:0,detail:0}),nP=Zn(zl),Em,Cm,Gl,Yc=h({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Am,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Gl&&(Gl&&o.type==="mousemove"?(Em=o.screenX-Gl.screenX,Cm=o.screenY-Gl.screenY):Cm=Em=0,Gl=o),Em)},movementY:function(o){return"movementY"in o?o.movementY:Cm}}),h_=Zn(Yc),rP=h({},Yc,{dataTransfer:0}),iP=Zn(rP),aP=h({},zl,{relatedTarget:0}),Tm=Zn(aP),oP=h({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),sP=Zn(oP),lP=h({},Qa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),uP=Zn(lP),cP=h({},Qa,{data:0}),m_=Zn(cP),dP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mP(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=hP[o])?!!s[o]:!1}function Am(){return mP}var pP=h({},zl,{key:function(o){if(o.key){var s=dP[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Gc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?fP[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Am,charCode:function(o){return o.type==="keypress"?Gc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Gc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),gP=Zn(pP),yP=h({},Yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p_=Zn(yP),vP=h({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Am}),xP=Zn(vP),bP=h({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),_P=Zn(bP),wP=h({},Yc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),SP=Zn(wP),EP=h({},Qa,{newState:0,oldState:0}),CP=Zn(EP),TP=[9,13,27,32],Nm=wi&&"CompositionEvent"in window,Hl=null;wi&&"documentMode"in document&&(Hl=document.documentMode);var AP=wi&&"TextEvent"in window&&!Hl,g_=wi&&(!Nm||Hl&&8<Hl&&11>=Hl),y_=" ",v_=!1;function x_(o,s){switch(o){case"keyup":return TP.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b_(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var as=!1;function NP(o,s){switch(o){case"compositionend":return b_(s);case"keypress":return s.which!==32?null:(v_=!0,y_);case"textInput":return o=s.data,o===y_&&v_?null:o;default:return null}}function DP(o,s){if(as)return o==="compositionend"||!Nm&&x_(o,s)?(o=d_(),zc=Sm=ia=null,as=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return g_&&s.locale!=="ko"?null:s.data;default:return null}}var MP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function __(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!MP[o.type]:s==="textarea"}function w_(o,s,c,m){rs?is?is.push(m):is=[m]:rs=m,s=Pd(s,"onChange"),0<s.length&&(c=new Kc("onChange","change",null,c,m),o.push({event:c,listeners:s}))}var Kl=null,Yl=null;function OP(o){nE(o,0)}function Wc(o){var s=Za(o);if(r_(s))return o}function S_(o,s){if(o==="change")return s}var E_=!1;if(wi){var Dm;if(wi){var Mm="oninput"in document;if(!Mm){var C_=document.createElement("div");C_.setAttribute("oninput","return;"),Mm=typeof C_.oninput=="function"}Dm=Mm}else Dm=!1;E_=Dm&&(!document.documentMode||9<document.documentMode)}function T_(){Kl&&(Kl.detachEvent("onpropertychange",A_),Yl=Kl=null)}function A_(o){if(o.propertyName==="value"&&Wc(Yl)){var s=[];w_(s,Yl,o,bm(o)),c_(OP,s)}}function RP(o,s,c){o==="focusin"?(T_(),Kl=s,Yl=c,Kl.attachEvent("onpropertychange",A_)):o==="focusout"&&T_()}function kP(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Wc(Yl)}function PP(o,s){if(o==="click")return Wc(s)}function IP(o,s){if(o==="input"||o==="change")return Wc(s)}function LP(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var ar=typeof Object.is=="function"?Object.is:LP;function Wl(o,s){if(ar(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var c=Object.keys(o),m=Object.keys(s);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var b=c[m];if(!F.call(s,b)||!ar(o[b],s[b]))return!1}return!0}function N_(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function D_(o,s){var c=N_(o);o=0;for(var m;c;){if(c.nodeType===3){if(m=o+c.textContent.length,o<=s&&m>=s)return{node:c,offset:s-o};o=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=N_(c)}}function M_(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?M_(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function O_(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=qc(o.document);s instanceof o.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)o=s.contentWindow;else break;s=qc(o.document)}return s}function Om(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var jP=wi&&"documentMode"in document&&11>=document.documentMode,os=null,Rm=null,Xl=null,km=!1;function R_(o,s,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;km||os==null||os!==qc(m)||(m=os,"selectionStart"in m&&Om(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Xl&&Wl(Xl,m)||(Xl=m,m=Pd(Rm,"onSelect"),0<m.length&&(s=new Kc("onSelect","select",null,s,c),o.push({event:s,listeners:m}),s.target=os)))}function eo(o,s){var c={};return c[o.toLowerCase()]=s.toLowerCase(),c["Webkit"+o]="webkit"+s,c["Moz"+o]="moz"+s,c}var ss={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionrun:eo("Transition","TransitionRun"),transitionstart:eo("Transition","TransitionStart"),transitioncancel:eo("Transition","TransitionCancel"),transitionend:eo("Transition","TransitionEnd")},Pm={},k_={};wi&&(k_=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function to(o){if(Pm[o])return Pm[o];if(!ss[o])return o;var s=ss[o],c;for(c in s)if(s.hasOwnProperty(c)&&c in k_)return Pm[o]=s[c];return o}var P_=to("animationend"),I_=to("animationiteration"),L_=to("animationstart"),UP=to("transitionrun"),$P=to("transitionstart"),FP=to("transitioncancel"),j_=to("transitionend"),U_=new Map,Im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Im.push("scrollEnd");function Br(o,s){U_.set(o,s),bi(s,[o])}var $_=new WeakMap;function wr(o,s){if(typeof o=="object"&&o!==null){var c=$_.get(o);return c!==void 0?c:(s={value:o,source:s,stack:t_(s)},$_.set(o,s),s)}return{value:o,source:s,stack:t_(s)}}var Sr=[],ls=0,Lm=0;function Xc(){for(var o=ls,s=Lm=ls=0;s<o;){var c=Sr[s];Sr[s++]=null;var m=Sr[s];Sr[s++]=null;var b=Sr[s];Sr[s++]=null;var w=Sr[s];if(Sr[s++]=null,m!==null&&b!==null){var M=m.pending;M===null?b.next=b:(b.next=M.next,M.next=b),m.pending=b}w!==0&&F_(c,b,w)}}function Jc(o,s,c,m){Sr[ls++]=o,Sr[ls++]=s,Sr[ls++]=c,Sr[ls++]=m,Lm|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function jm(o,s,c,m){return Jc(o,s,c,m),Zc(o)}function us(o,s){return Jc(o,null,null,s),Zc(o)}function F_(o,s,c){o.lanes|=c;var m=o.alternate;m!==null&&(m.lanes|=c);for(var b=!1,w=o.return;w!==null;)w.childLanes|=c,m=w.alternate,m!==null&&(m.childLanes|=c),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(b=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,b&&s!==null&&(b=31-Tt(c),o=w.hiddenUpdates,m=o[b],m===null?o[b]=[s]:m.push(s),s.lane=c|536870912),w):null}function Zc(o){if(50<_u)throw _u=0,Vp=null,Error(r(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var cs={};function BP(o,s,c,m){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(o,s,c,m){return new BP(o,s,c,m)}function Um(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Si(o,s){var c=o.alternate;return c===null?(c=or(o.tag,s,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=s,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,s=o.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function B_(o,s){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,s=c.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function Qc(o,s,c,m,b,w){var M=0;if(m=o,typeof o=="function")Um(o)&&(M=1);else if(typeof o=="string")M=VI(o,c,we.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case U:return o=or(31,c,s,b),o.elementType=U,o.lanes=w,o;case S:return no(c.children,b,w,s);case E:M=8,b|=24;break;case C:return o=or(12,c,s,b|2),o.elementType=C,o.lanes=w,o;case D:return o=or(13,c,s,b),o.elementType=D,o.lanes=w,o;case k:return o=or(19,c,s,b),o.elementType=k,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case T:case N:M=10;break e;case R:M=9;break e;case O:M=11;break e;case I:M=14;break e;case j:M=16,m=null;break e}M=29,c=Error(r(130,o===null?"null":typeof o,"")),m=null}return s=or(M,c,s,b),s.elementType=o,s.type=m,s.lanes=w,s}function no(o,s,c,m){return o=or(7,o,m,s),o.lanes=c,o}function $m(o,s,c){return o=or(6,o,null,s),o.lanes=c,o}function Fm(o,s,c){return s=or(4,o.children!==null?o.children:[],o.key,s),s.lanes=c,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var ds=[],fs=0,ed=null,td=0,Er=[],Cr=0,ro=null,Ei=1,Ci="";function io(o,s){ds[fs++]=td,ds[fs++]=ed,ed=o,td=s}function q_(o,s,c){Er[Cr++]=Ei,Er[Cr++]=Ci,Er[Cr++]=ro,ro=o;var m=Ei;o=Ci;var b=32-Tt(m)-1;m&=~(1<<b),c+=1;var w=32-Tt(s)+b;if(30<w){var M=b-b%5;w=(m&(1<<M)-1).toString(32),m>>=M,b-=M,Ei=1<<32-Tt(s)+b|c<<b|m,Ci=w+o}else Ei=1<<w|c<<b|m,Ci=o}function Bm(o){o.return!==null&&(io(o,1),q_(o,1,0))}function qm(o){for(;o===ed;)ed=ds[--fs],ds[fs]=null,td=ds[--fs],ds[fs]=null;for(;o===ro;)ro=Er[--Cr],Er[Cr]=null,Ci=Er[--Cr],Er[Cr]=null,Ei=Er[--Cr],Er[Cr]=null}var Hn=null,Kt=null,gt=!1,ao=null,ri=!1,Vm=Error(r(519));function oo(o){var s=Error(r(418,""));throw Ql(wr(s,o)),Vm}function V_(o){var s=o.stateNode,c=o.type,m=o.memoizedProps;switch(s[fn]=o,s[hn]=m,c){case"dialog":it("cancel",s),it("close",s);break;case"iframe":case"object":case"embed":it("load",s);break;case"video":case"audio":for(c=0;c<Su.length;c++)it(Su[c],s);break;case"source":it("error",s);break;case"img":case"image":case"link":it("error",s),it("load",s);break;case"details":it("toggle",s);break;case"input":it("invalid",s),i_(s,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Bc(s);break;case"select":it("invalid",s);break;case"textarea":it("invalid",s),o_(s,m.value,m.defaultValue,m.children),Bc(s)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||m.suppressHydrationWarning===!0||oE(s.textContent,c)?(m.popover!=null&&(it("beforetoggle",s),it("toggle",s)),m.onScroll!=null&&it("scroll",s),m.onScrollEnd!=null&&it("scrollend",s),m.onClick!=null&&(s.onclick=Id),s=!0):s=!1,s||oo(o)}function z_(o){for(Hn=o.return;Hn;)switch(Hn.tag){case 5:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:Hn=Hn.return}}function Jl(o){if(o!==Hn)return!1;if(!gt)return z_(o),gt=!0,!1;var s=o.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||ag(o.type,o.memoizedProps)),c=!c),c&&Kt&&oo(o),z_(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8)if(c=o.data,c==="/$"){if(s===0){Kt=Vr(o.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;o=o.nextSibling}Kt=null}}else s===27?(s=Kt,ba(o.type)?(o=ug,ug=null,Kt=o):Kt=s):Kt=Hn?Vr(o.stateNode.nextSibling):null;return!0}function Zl(){Kt=Hn=null,gt=!1}function G_(){var o=ao;return o!==null&&(tr===null?tr=o:tr.push.apply(tr,o),ao=null),o}function Ql(o){ao===null?ao=[o]:ao.push(o)}var zm=Y(null),so=null,Ti=null;function aa(o,s,c){ie(zm,s._currentValue),s._currentValue=c}function Ai(o){o._currentValue=zm.current,te(zm)}function Gm(o,s,c){for(;o!==null;){var m=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),o===c)break;o=o.return}}function Hm(o,s,c,m){var b=o.child;for(b!==null&&(b.return=o);b!==null;){var w=b.dependencies;if(w!==null){var M=b.child;w=w.firstContext;e:for(;w!==null;){var P=w;w=b;for(var $=0;$<s.length;$++)if(P.context===s[$]){w.lanes|=c,P=w.alternate,P!==null&&(P.lanes|=c),Gm(w.return,c,o),m||(M=null);break e}w=P.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(r(341));M.lanes|=c,w=M.alternate,w!==null&&(w.lanes|=c),Gm(M,c,o),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===o){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function eu(o,s,c,m){o=null;for(var b=s,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var P=b.type;ar(b.pendingProps.value,M.value)||(o!==null?o.push(P):o=[P])}}else if(b===se.current){if(M=b.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(o!==null?o.push(Du):o=[Du])}b=b.return}o!==null&&Hm(s,o,c,m),s.flags|=262144}function nd(o){for(o=o.firstContext;o!==null;){if(!ar(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function lo(o){so=o,Ti=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function qn(o){return H_(so,o)}function rd(o,s){return so===null&&lo(o),H_(o,s)}function H_(o,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Ti===null){if(o===null)throw Error(r(308));Ti=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else Ti=Ti.next=s;return c}var qP=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(c,m){o.push(m)}};this.abort=function(){s.aborted=!0,o.forEach(function(c){return c()})}},VP=t.unstable_scheduleCallback,zP=t.unstable_NormalPriority,mn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Km(){return{controller:new qP,data:new Map,refCount:0}}function tu(o){o.refCount--,o.refCount===0&&VP(zP,function(){o.controller.abort()})}var nu=null,Ym=0,hs=0,ms=null;function GP(o,s){if(nu===null){var c=nu=[];Ym=0,hs=Xp(),ms={status:"pending",value:void 0,then:function(m){c.push(m)}}}return Ym++,s.then(K_,K_),s}function K_(){if(--Ym===0&&nu!==null){ms!==null&&(ms.status="fulfilled");var o=nu;nu=null,hs=0,ms=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function HP(o,s){var c=[],m={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return o.then(function(){m.status="fulfilled",m.value=s;for(var b=0;b<c.length;b++)(0,c[b])(s)},function(b){for(m.status="rejected",m.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),m}var Y_=z.S;z.S=function(o,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&GP(o,s),Y_!==null&&Y_(o,s)};var uo=Y(null);function Wm(){var o=uo.current;return o!==null?o:Mt.pooledCache}function id(o,s){s===null?ie(uo,uo.current):ie(uo,s.pool)}function W_(){var o=Wm();return o===null?null:{parent:mn._currentValue,pool:o}}var ru=Error(r(460)),X_=Error(r(474)),ad=Error(r(542)),Xm={then:function(){}};function J_(o){return o=o.status,o==="fulfilled"||o==="rejected"}function od(){}function Z_(o,s,c){switch(c=o[c],c===void 0?o.push(s):c!==s&&(s.then(od,od),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ew(o),o;default:if(typeof s.status=="string")s.then(od,od);else{if(o=Mt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=s,o.status="pending",o.then(function(m){if(s.status==="pending"){var b=s;b.status="fulfilled",b.value=m}},function(m){if(s.status==="pending"){var b=s;b.status="rejected",b.reason=m}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,ew(o),o}throw iu=s,ru}}var iu=null;function Q_(){if(iu===null)throw Error(r(459));var o=iu;return iu=null,o}function ew(o){if(o===ru||o===ad)throw Error(r(483))}var oa=!1;function Jm(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zm(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function sa(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function la(o,s,c){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(bt&2)!==0){var b=m.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),m.pending=s,s=Zc(o),F_(o,null,c),s}return Jc(o,m,s,c),Zc(o)}function au(o,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var m=s.lanes;m&=o.pendingLanes,c|=m,s.lanes=c,Zo(o,c)}}function Qm(o,s){var c=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var b=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?b=w=M:w=w.next=M,c=c.next}while(c!==null);w===null?b=w=s:w=w.next=s}else b=w=s;c={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=s:o.next=s,c.lastBaseUpdate=s}var ep=!1;function ou(){if(ep){var o=ms;if(o!==null)throw o}}function su(o,s,c,m){ep=!1;var b=o.updateQueue;oa=!1;var w=b.firstBaseUpdate,M=b.lastBaseUpdate,P=b.shared.pending;if(P!==null){b.shared.pending=null;var $=P,J=$.next;$.next=null,M===null?w=J:M.next=J,M=$;var le=o.alternate;le!==null&&(le=le.updateQueue,P=le.lastBaseUpdate,P!==M&&(P===null?le.firstBaseUpdate=J:P.next=J,le.lastBaseUpdate=$))}if(w!==null){var he=b.baseState;M=0,le=J=$=null,P=w;do{var ee=P.lane&-536870913,ne=ee!==P.lane;if(ne?(ft&ee)===ee:(m&ee)===ee){ee!==0&&ee===hs&&(ep=!0),le!==null&&(le=le.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ve=o,Ue=P;ee=s;var Et=c;switch(Ue.tag){case 1:if(Ve=Ue.payload,typeof Ve=="function"){he=Ve.call(Et,he,ee);break e}he=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Ue.payload,ee=typeof Ve=="function"?Ve.call(Et,he,ee):Ve,ee==null)break e;he=h({},he,ee);break e;case 2:oa=!0}}ee=P.callback,ee!==null&&(o.flags|=64,ne&&(o.flags|=8192),ne=b.callbacks,ne===null?b.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:P.tag,payload:P.payload,callback:P.callback,next:null},le===null?(J=le=ne,$=he):le=le.next=ne,M|=ee;if(P=P.next,P===null){if(P=b.shared.pending,P===null)break;ne=P,P=ne.next,ne.next=null,b.lastBaseUpdate=ne,b.shared.pending=null}}while(!0);le===null&&($=he),b.baseState=$,b.firstBaseUpdate=J,b.lastBaseUpdate=le,w===null&&(b.shared.lanes=0),ga|=M,o.lanes=M,o.memoizedState=he}}function tw(o,s){if(typeof o!="function")throw Error(r(191,o));o.call(s)}function nw(o,s){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)tw(c[o],s)}var ps=Y(null),sd=Y(0);function rw(o,s){o=Pi,ie(sd,o),ie(ps,s),Pi=o|s.baseLanes}function tp(){ie(sd,Pi),ie(ps,ps.current)}function np(){Pi=sd.current,te(ps),te(sd)}var ua=0,et=null,wt=null,an=null,ld=!1,gs=!1,co=!1,ud=0,lu=0,ys=null,KP=0;function Jt(){throw Error(r(321))}function rp(o,s){if(s===null)return!1;for(var c=0;c<s.length&&c<o.length;c++)if(!ar(o[c],s[c]))return!1;return!0}function ip(o,s,c,m,b,w){return ua=w,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,z.H=o===null||o.memoizedState===null?Fw:Bw,co=!1,w=c(m,b),co=!1,gs&&(w=aw(s,c,m,b)),iw(o),w}function iw(o){z.H=pd;var s=wt!==null&&wt.next!==null;if(ua=0,an=wt=et=null,ld=!1,lu=0,ys=null,s)throw Error(r(300));o===null||wn||(o=o.dependencies,o!==null&&nd(o)&&(wn=!0))}function aw(o,s,c,m){et=o;var b=0;do{if(gs&&(ys=null),lu=0,gs=!1,25<=b)throw Error(r(301));if(b+=1,an=wt=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}z.H=eI,w=s(c,m)}while(gs);return w}function YP(){var o=z.H,s=o.useState()[0];return s=typeof s.then=="function"?uu(s):s,o=o.useState()[0],(wt!==null?wt.memoizedState:null)!==o&&(et.flags|=1024),s}function ap(){var o=ud!==0;return ud=0,o}function op(o,s,c){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~c}function sp(o){if(ld){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}ld=!1}ua=0,an=wt=et=null,gs=!1,lu=ud=0,ys=null}function Qn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?et.memoizedState=an=o:an=an.next=o,an}function on(){if(wt===null){var o=et.alternate;o=o!==null?o.memoizedState:null}else o=wt.next;var s=an===null?et.memoizedState:an.next;if(s!==null)an=s,wt=o;else{if(o===null)throw et.alternate===null?Error(r(467)):Error(r(310));wt=o,o={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},an===null?et.memoizedState=an=o:an=an.next=o}return an}function lp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uu(o){var s=lu;return lu+=1,ys===null&&(ys=[]),o=Z_(ys,o,s),s=et,(an===null?s.memoizedState:an.next)===null&&(s=s.alternate,z.H=s===null||s.memoizedState===null?Fw:Bw),o}function cd(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return uu(o);if(o.$$typeof===N)return qn(o)}throw Error(r(438,String(o)))}function up(o){var s=null,c=et.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var m=et.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(s={data:m.data.map(function(b){return b.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=lp(),et.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(o),m=0;m<o;m++)c[m]=re;return s.index++,c}function Ni(o,s){return typeof s=="function"?s(o):s}function dd(o){var s=on();return cp(s,wt,o)}function cp(o,s,c){var m=o.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var b=o.baseQueue,w=m.pending;if(w!==null){if(b!==null){var M=b.next;b.next=w.next,w.next=M}s.baseQueue=b=w,m.pending=null}if(w=o.baseState,b===null)o.memoizedState=w;else{s=b.next;var P=M=null,$=null,J=s,le=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(ft&he)===he:(ua&he)===he){var ee=J.revertLane;if(ee===0)$!==null&&($=$.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===hs&&(le=!0);else if((ua&ee)===ee){J=J.next,ee===hs&&(le=!0);continue}else he={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(P=$=he,M=w):$=$.next=he,et.lanes|=ee,ga|=ee;he=J.action,co&&c(w,he),w=J.hasEagerState?J.eagerState:c(w,he)}else ee={lane:he,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(P=$=ee,M=w):$=$.next=ee,et.lanes|=he,ga|=he;J=J.next}while(J!==null&&J!==s);if($===null?M=w:$.next=P,!ar(w,o.memoizedState)&&(wn=!0,le&&(c=ms,c!==null)))throw c;o.memoizedState=w,o.baseState=M,o.baseQueue=$,m.lastRenderedState=w}return b===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function dp(o){var s=on(),c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var m=c.dispatch,b=c.pending,w=s.memoizedState;if(b!==null){c.pending=null;var M=b=b.next;do w=o(w,M.action),M=M.next;while(M!==b);ar(w,s.memoizedState)||(wn=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,m]}function ow(o,s,c){var m=et,b=on(),w=gt;if(w){if(c===void 0)throw Error(r(407));c=c()}else c=s();var M=!ar((wt||b).memoizedState,c);M&&(b.memoizedState=c,wn=!0),b=b.queue;var P=uw.bind(null,m,b,o);if(cu(2048,8,P,[o]),b.getSnapshot!==s||M||an!==null&&an.memoizedState.tag&1){if(m.flags|=2048,vs(9,fd(),lw.bind(null,m,b,c,s),null),Mt===null)throw Error(r(349));w||(ua&124)!==0||sw(m,s,c)}return c}function sw(o,s,c){o.flags|=16384,o={getSnapshot:s,value:c},s=et.updateQueue,s===null?(s=lp(),et.updateQueue=s,s.stores=[o]):(c=s.stores,c===null?s.stores=[o]:c.push(o))}function lw(o,s,c,m){s.value=c,s.getSnapshot=m,cw(s)&&dw(o)}function uw(o,s,c){return c(function(){cw(s)&&dw(o)})}function cw(o){var s=o.getSnapshot;o=o.value;try{var c=s();return!ar(o,c)}catch{return!0}}function dw(o){var s=us(o,2);s!==null&&dr(s,o,2)}function fp(o){var s=Qn();if(typeof o=="function"){var c=o;if(o=c(),co){dt(!0);try{c()}finally{dt(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:o},s}function fw(o,s,c,m){return o.baseState=c,cp(o,wt,typeof m=="function"?m:Ni)}function WP(o,s,c,m,b){if(md(o))throw Error(r(485));if(o=s.action,o!==null){var w={payload:b,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){w.listeners.push(M)}};z.T!==null?c(!0):w.isTransition=!1,m(w),c=s.pending,c===null?(w.next=s.pending=w,hw(s,w)):(w.next=c.next,s.pending=c.next=w)}}function hw(o,s){var c=s.action,m=s.payload,b=o.state;if(s.isTransition){var w=z.T,M={};z.T=M;try{var P=c(b,m),$=z.S;$!==null&&$(M,P),mw(o,s,P)}catch(J){hp(o,s,J)}finally{z.T=w}}else try{w=c(b,m),mw(o,s,w)}catch(J){hp(o,s,J)}}function mw(o,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){pw(o,s,m)},function(m){return hp(o,s,m)}):pw(o,s,c)}function pw(o,s,c){s.status="fulfilled",s.value=c,gw(s),o.state=c,s=o.pending,s!==null&&(c=s.next,c===s?o.pending=null:(c=c.next,s.next=c,hw(o,c)))}function hp(o,s,c){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do s.status="rejected",s.reason=c,gw(s),s=s.next;while(s!==m)}o.action=null}function gw(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function yw(o,s){return s}function vw(o,s){if(gt){var c=Mt.formState;if(c!==null){e:{var m=et;if(gt){if(Kt){t:{for(var b=Kt,w=ri;b.nodeType!==8;){if(!w){b=null;break t}if(b=Vr(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){Kt=Vr(b.nextSibling),m=b.data==="F!";break e}}oo(m)}m=!1}m&&(s=c[0])}}return c=Qn(),c.memoizedState=c.baseState=s,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yw,lastRenderedState:s},c.queue=m,c=jw.bind(null,et,m),m.dispatch=c,m=fp(!1),w=vp.bind(null,et,!1,m.queue),m=Qn(),b={state:s,dispatch:null,action:o,pending:null},m.queue=b,c=WP.bind(null,et,b,w,c),b.dispatch=c,m.memoizedState=o,[s,c,!1]}function xw(o){var s=on();return bw(s,wt,o)}function bw(o,s,c){if(s=cp(o,s,yw)[0],o=dd(Ni)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var m=uu(s)}catch(M){throw M===ru?ad:M}else m=s;s=on();var b=s.queue,w=b.dispatch;return c!==s.memoizedState&&(et.flags|=2048,vs(9,fd(),XP.bind(null,b,c),null)),[m,w,o]}function XP(o,s){o.action=s}function _w(o){var s=on(),c=wt;if(c!==null)return bw(s,c,o);on(),s=s.memoizedState,c=on();var m=c.queue.dispatch;return c.memoizedState=o,[s,m,!1]}function vs(o,s,c,m){return o={tag:o,create:c,deps:m,inst:s,next:null},s=et.updateQueue,s===null&&(s=lp(),et.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=o.next=o:(m=c.next,c.next=o,o.next=m,s.lastEffect=o),o}function fd(){return{destroy:void 0,resource:void 0}}function ww(){return on().memoizedState}function hd(o,s,c,m){var b=Qn();m=m===void 0?null:m,et.flags|=o,b.memoizedState=vs(1|s,fd(),c,m)}function cu(o,s,c,m){var b=on();m=m===void 0?null:m;var w=b.memoizedState.inst;wt!==null&&m!==null&&rp(m,wt.memoizedState.deps)?b.memoizedState=vs(s,w,c,m):(et.flags|=o,b.memoizedState=vs(1|s,w,c,m))}function Sw(o,s){hd(8390656,8,o,s)}function Ew(o,s){cu(2048,8,o,s)}function Cw(o,s){return cu(4,2,o,s)}function Tw(o,s){return cu(4,4,o,s)}function Aw(o,s){if(typeof s=="function"){o=o();var c=s(o);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function Nw(o,s,c){c=c!=null?c.concat([o]):null,cu(4,4,Aw.bind(null,s,o),c)}function mp(){}function Dw(o,s){var c=on();s=s===void 0?null:s;var m=c.memoizedState;return s!==null&&rp(s,m[1])?m[0]:(c.memoizedState=[o,s],o)}function Mw(o,s){var c=on();s=s===void 0?null:s;var m=c.memoizedState;if(s!==null&&rp(s,m[1]))return m[0];if(m=o(),co){dt(!0);try{o()}finally{dt(!1)}}return c.memoizedState=[m,s],m}function pp(o,s,c){return c===void 0||(ua&1073741824)!==0?o.memoizedState=s:(o.memoizedState=c,o=kS(),et.lanes|=o,ga|=o,c)}function Ow(o,s,c,m){return ar(c,s)?c:ps.current!==null?(o=pp(o,c,m),ar(o,s)||(wn=!0),o):(ua&42)===0?(wn=!0,o.memoizedState=c):(o=kS(),et.lanes|=o,ga|=o,s)}function Rw(o,s,c,m,b){var w=K.p;K.p=w!==0&&8>w?w:8;var M=z.T,P={};z.T=P,vp(o,!1,s,c);try{var $=b(),J=z.S;if(J!==null&&J(P,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var le=HP($,m);du(o,s,le,cr(o))}else du(o,s,m,cr(o))}catch(he){du(o,s,{then:function(){},status:"rejected",reason:he},cr())}finally{K.p=w,z.T=M}}function JP(){}function gp(o,s,c,m){if(o.tag!==5)throw Error(r(476));var b=kw(o).queue;Rw(o,b,s,ye,c===null?JP:function(){return Pw(o),c(m)})}function kw(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:ye},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:c},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function Pw(o){var s=kw(o).next.queue;du(o,s,{},cr())}function yp(){return qn(Du)}function Iw(){return on().memoizedState}function Lw(){return on().memoizedState}function ZP(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var c=cr();o=sa(c);var m=la(s,o,c);m!==null&&(dr(m,s,c),au(m,s,c)),s={cache:Km()},o.payload=s;return}s=s.return}}function QP(o,s,c){var m=cr();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},md(o)?Uw(s,c):(c=jm(o,s,c,m),c!==null&&(dr(c,o,m),$w(c,s,m)))}function jw(o,s,c){var m=cr();du(o,s,c,m)}function du(o,s,c,m){var b={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(md(o))Uw(s,b);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var M=s.lastRenderedState,P=w(M,c);if(b.hasEagerState=!0,b.eagerState=P,ar(P,M))return Jc(o,s,b,0),Mt===null&&Xc(),!1}catch{}finally{}if(c=jm(o,s,b,m),c!==null)return dr(c,o,m),$w(c,s,m),!0}return!1}function vp(o,s,c,m){if(m={lane:2,revertLane:Xp(),action:m,hasEagerState:!1,eagerState:null,next:null},md(o)){if(s)throw Error(r(479))}else s=jm(o,c,m,2),s!==null&&dr(s,o,2)}function md(o){var s=o.alternate;return o===et||s!==null&&s===et}function Uw(o,s){gs=ld=!0;var c=o.pending;c===null?s.next=s:(s.next=c.next,c.next=s),o.pending=s}function $w(o,s,c){if((c&4194048)!==0){var m=s.lanes;m&=o.pendingLanes,c|=m,s.lanes=c,Zo(o,c)}}var pd={readContext:qn,use:cd,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt},Fw={readContext:qn,use:cd,useCallback:function(o,s){return Qn().memoizedState=[o,s===void 0?null:s],o},useContext:qn,useEffect:Sw,useImperativeHandle:function(o,s,c){c=c!=null?c.concat([o]):null,hd(4194308,4,Aw.bind(null,s,o),c)},useLayoutEffect:function(o,s){return hd(4194308,4,o,s)},useInsertionEffect:function(o,s){hd(4,2,o,s)},useMemo:function(o,s){var c=Qn();s=s===void 0?null:s;var m=o();if(co){dt(!0);try{o()}finally{dt(!1)}}return c.memoizedState=[m,s],m},useReducer:function(o,s,c){var m=Qn();if(c!==void 0){var b=c(s);if(co){dt(!0);try{c(s)}finally{dt(!1)}}}else b=s;return m.memoizedState=m.baseState=b,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:b},m.queue=o,o=o.dispatch=QP.bind(null,et,o),[m.memoizedState,o]},useRef:function(o){var s=Qn();return o={current:o},s.memoizedState=o},useState:function(o){o=fp(o);var s=o.queue,c=jw.bind(null,et,s);return s.dispatch=c,[o.memoizedState,c]},useDebugValue:mp,useDeferredValue:function(o,s){var c=Qn();return pp(c,o,s)},useTransition:function(){var o=fp(!1);return o=Rw.bind(null,et,o.queue,!0,!1),Qn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,c){var m=et,b=Qn();if(gt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=s(),Mt===null)throw Error(r(349));(ft&124)!==0||sw(m,s,c)}b.memoizedState=c;var w={value:c,getSnapshot:s};return b.queue=w,Sw(uw.bind(null,m,w,o),[o]),m.flags|=2048,vs(9,fd(),lw.bind(null,m,w,c,s),null),c},useId:function(){var o=Qn(),s=Mt.identifierPrefix;if(gt){var c=Ci,m=Ei;c=(m&~(1<<32-Tt(m)-1)).toString(32)+c,s="«"+s+"R"+c,c=ud++,0<c&&(s+="H"+c.toString(32)),s+="»"}else c=KP++,s="«"+s+"r"+c.toString(32)+"»";return o.memoizedState=s},useHostTransitionStatus:yp,useFormState:vw,useActionState:vw,useOptimistic:function(o){var s=Qn();s.memoizedState=s.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=vp.bind(null,et,!0,c),c.dispatch=s,[o,s]},useMemoCache:up,useCacheRefresh:function(){return Qn().memoizedState=ZP.bind(null,et)}},Bw={readContext:qn,use:cd,useCallback:Dw,useContext:qn,useEffect:Ew,useImperativeHandle:Nw,useInsertionEffect:Cw,useLayoutEffect:Tw,useMemo:Mw,useReducer:dd,useRef:ww,useState:function(){return dd(Ni)},useDebugValue:mp,useDeferredValue:function(o,s){var c=on();return Ow(c,wt.memoizedState,o,s)},useTransition:function(){var o=dd(Ni)[0],s=on().memoizedState;return[typeof o=="boolean"?o:uu(o),s]},useSyncExternalStore:ow,useId:Iw,useHostTransitionStatus:yp,useFormState:xw,useActionState:xw,useOptimistic:function(o,s){var c=on();return fw(c,wt,o,s)},useMemoCache:up,useCacheRefresh:Lw},eI={readContext:qn,use:cd,useCallback:Dw,useContext:qn,useEffect:Ew,useImperativeHandle:Nw,useInsertionEffect:Cw,useLayoutEffect:Tw,useMemo:Mw,useReducer:dp,useRef:ww,useState:function(){return dp(Ni)},useDebugValue:mp,useDeferredValue:function(o,s){var c=on();return wt===null?pp(c,o,s):Ow(c,wt.memoizedState,o,s)},useTransition:function(){var o=dp(Ni)[0],s=on().memoizedState;return[typeof o=="boolean"?o:uu(o),s]},useSyncExternalStore:ow,useId:Iw,useHostTransitionStatus:yp,useFormState:_w,useActionState:_w,useOptimistic:function(o,s){var c=on();return wt!==null?fw(c,wt,o,s):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:up,useCacheRefresh:Lw},xs=null,fu=0;function gd(o){var s=fu;return fu+=1,xs===null&&(xs=[]),Z_(xs,o,s)}function hu(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function yd(o,s){throw s.$$typeof===v?Error(r(525)):(o=Object.prototype.toString.call(s),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function qw(o){var s=o._init;return s(o._payload)}function Vw(o){function s(G,q){if(o){var X=G.deletions;X===null?(G.deletions=[q],G.flags|=16):X.push(q)}}function c(G,q){if(!o)return null;for(;q!==null;)s(G,q),q=q.sibling;return null}function m(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function b(G,q){return G=Si(G,q),G.index=0,G.sibling=null,G}function w(G,q,X){return G.index=X,o?(X=G.alternate,X!==null?(X=X.index,X<q?(G.flags|=67108866,q):X):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function M(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function P(G,q,X,fe){return q===null||q.tag!==6?(q=$m(X,G.mode,fe),q.return=G,q):(q=b(q,X),q.return=G,q)}function $(G,q,X,fe){var Re=X.type;return Re===S?le(G,q,X.props.children,fe,X.key):q!==null&&(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===j&&qw(Re)===q.type)?(q=b(q,X.props),hu(q,X),q.return=G,q):(q=Qc(X.type,X.key,X.props,null,G.mode,fe),hu(q,X),q.return=G,q)}function J(G,q,X,fe){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=Fm(X,G.mode,fe),q.return=G,q):(q=b(q,X.children||[]),q.return=G,q)}function le(G,q,X,fe,Re){return q===null||q.tag!==7?(q=no(X,G.mode,fe,Re),q.return=G,q):(q=b(q,X),q.return=G,q)}function he(G,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=$m(""+q,G.mode,X),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return X=Qc(q.type,q.key,q.props,null,G.mode,X),hu(X,q),X.return=G,X;case _:return q=Fm(q,G.mode,X),q.return=G,q;case j:var fe=q._init;return q=fe(q._payload),he(G,q,X)}if(ve(q)||Z(q))return q=no(q,G.mode,X,null),q.return=G,q;if(typeof q.then=="function")return he(G,gd(q),X);if(q.$$typeof===N)return he(G,rd(G,q),X);yd(G,q)}return null}function ee(G,q,X,fe){var Re=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Re!==null?null:P(G,q,""+X,fe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case x:return X.key===Re?$(G,q,X,fe):null;case _:return X.key===Re?J(G,q,X,fe):null;case j:return Re=X._init,X=Re(X._payload),ee(G,q,X,fe)}if(ve(X)||Z(X))return Re!==null?null:le(G,q,X,fe,null);if(typeof X.then=="function")return ee(G,q,gd(X),fe);if(X.$$typeof===N)return ee(G,q,rd(G,X),fe);yd(G,X)}return null}function ne(G,q,X,fe,Re){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return G=G.get(X)||null,P(q,G,""+fe,Re);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case x:return G=G.get(fe.key===null?X:fe.key)||null,$(q,G,fe,Re);case _:return G=G.get(fe.key===null?X:fe.key)||null,J(q,G,fe,Re);case j:var tt=fe._init;return fe=tt(fe._payload),ne(G,q,X,fe,Re)}if(ve(fe)||Z(fe))return G=G.get(X)||null,le(q,G,fe,Re,null);if(typeof fe.then=="function")return ne(G,q,X,gd(fe),Re);if(fe.$$typeof===N)return ne(G,q,X,rd(q,fe),Re);yd(q,fe)}return null}function Ve(G,q,X,fe){for(var Re=null,tt=null,je=q,$e=q=0,En=null;je!==null&&$e<X.length;$e++){je.index>$e?(En=je,je=null):En=je.sibling;var ht=ee(G,je,X[$e],fe);if(ht===null){je===null&&(je=En);break}o&&je&&ht.alternate===null&&s(G,je),q=w(ht,q,$e),tt===null?Re=ht:tt.sibling=ht,tt=ht,je=En}if($e===X.length)return c(G,je),gt&&io(G,$e),Re;if(je===null){for(;$e<X.length;$e++)je=he(G,X[$e],fe),je!==null&&(q=w(je,q,$e),tt===null?Re=je:tt.sibling=je,tt=je);return gt&&io(G,$e),Re}for(je=m(je);$e<X.length;$e++)En=ne(je,G,$e,X[$e],fe),En!==null&&(o&&En.alternate!==null&&je.delete(En.key===null?$e:En.key),q=w(En,q,$e),tt===null?Re=En:tt.sibling=En,tt=En);return o&&je.forEach(function(Ca){return s(G,Ca)}),gt&&io(G,$e),Re}function Ue(G,q,X,fe){if(X==null)throw Error(r(151));for(var Re=null,tt=null,je=q,$e=q=0,En=null,ht=X.next();je!==null&&!ht.done;$e++,ht=X.next()){je.index>$e?(En=je,je=null):En=je.sibling;var Ca=ee(G,je,ht.value,fe);if(Ca===null){je===null&&(je=En);break}o&&je&&Ca.alternate===null&&s(G,je),q=w(Ca,q,$e),tt===null?Re=Ca:tt.sibling=Ca,tt=Ca,je=En}if(ht.done)return c(G,je),gt&&io(G,$e),Re;if(je===null){for(;!ht.done;$e++,ht=X.next())ht=he(G,ht.value,fe),ht!==null&&(q=w(ht,q,$e),tt===null?Re=ht:tt.sibling=ht,tt=ht);return gt&&io(G,$e),Re}for(je=m(je);!ht.done;$e++,ht=X.next())ht=ne(je,G,$e,ht.value,fe),ht!==null&&(o&&ht.alternate!==null&&je.delete(ht.key===null?$e:ht.key),q=w(ht,q,$e),tt===null?Re=ht:tt.sibling=ht,tt=ht);return o&&je.forEach(function(tL){return s(G,tL)}),gt&&io(G,$e),Re}function Et(G,q,X,fe){if(typeof X=="object"&&X!==null&&X.type===S&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case x:e:{for(var Re=X.key;q!==null;){if(q.key===Re){if(Re=X.type,Re===S){if(q.tag===7){c(G,q.sibling),fe=b(q,X.props.children),fe.return=G,G=fe;break e}}else if(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===j&&qw(Re)===q.type){c(G,q.sibling),fe=b(q,X.props),hu(fe,X),fe.return=G,G=fe;break e}c(G,q);break}else s(G,q);q=q.sibling}X.type===S?(fe=no(X.props.children,G.mode,fe,X.key),fe.return=G,G=fe):(fe=Qc(X.type,X.key,X.props,null,G.mode,fe),hu(fe,X),fe.return=G,G=fe)}return M(G);case _:e:{for(Re=X.key;q!==null;){if(q.key===Re)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){c(G,q.sibling),fe=b(q,X.children||[]),fe.return=G,G=fe;break e}else{c(G,q);break}else s(G,q);q=q.sibling}fe=Fm(X,G.mode,fe),fe.return=G,G=fe}return M(G);case j:return Re=X._init,X=Re(X._payload),Et(G,q,X,fe)}if(ve(X))return Ve(G,q,X,fe);if(Z(X)){if(Re=Z(X),typeof Re!="function")throw Error(r(150));return X=Re.call(X),Ue(G,q,X,fe)}if(typeof X.then=="function")return Et(G,q,gd(X),fe);if(X.$$typeof===N)return Et(G,q,rd(G,X),fe);yd(G,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(c(G,q.sibling),fe=b(q,X),fe.return=G,G=fe):(c(G,q),fe=$m(X,G.mode,fe),fe.return=G,G=fe),M(G)):c(G,q)}return function(G,q,X,fe){try{fu=0;var Re=Et(G,q,X,fe);return xs=null,Re}catch(je){if(je===ru||je===ad)throw je;var tt=or(29,je,null,G.mode);return tt.lanes=fe,tt.return=G,tt}finally{}}}var bs=Vw(!0),zw=Vw(!1),Tr=Y(null),ii=null;function ca(o){var s=o.alternate;ie(pn,pn.current&1),ie(Tr,o),ii===null&&(s===null||ps.current!==null||s.memoizedState!==null)&&(ii=o)}function Gw(o){if(o.tag===22){if(ie(pn,pn.current),ie(Tr,o),ii===null){var s=o.alternate;s!==null&&s.memoizedState!==null&&(ii=o)}}else da()}function da(){ie(pn,pn.current),ie(Tr,Tr.current)}function Di(o){te(Tr),ii===o&&(ii=null),te(pn)}var pn=Y(0);function vd(o){for(var s=o;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||lg(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function xp(o,s,c,m){s=o.memoizedState,c=c(m,s),c=c==null?s:h({},s,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var bp={enqueueSetState:function(o,s,c){o=o._reactInternals;var m=cr(),b=sa(m);b.payload=s,c!=null&&(b.callback=c),s=la(o,b,m),s!==null&&(dr(s,o,m),au(s,o,m))},enqueueReplaceState:function(o,s,c){o=o._reactInternals;var m=cr(),b=sa(m);b.tag=1,b.payload=s,c!=null&&(b.callback=c),s=la(o,b,m),s!==null&&(dr(s,o,m),au(s,o,m))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var c=cr(),m=sa(c);m.tag=2,s!=null&&(m.callback=s),s=la(o,m,c),s!==null&&(dr(s,o,c),au(s,o,c))}};function Hw(o,s,c,m,b,w,M){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,w,M):s.prototype&&s.prototype.isPureReactComponent?!Wl(c,m)||!Wl(b,w):!0}function Kw(o,s,c,m){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,m),s.state!==o&&bp.enqueueReplaceState(s,s.state,null)}function fo(o,s){var c=s;if("ref"in s){c={};for(var m in s)m!=="ref"&&(c[m]=s[m])}if(o=o.defaultProps){c===s&&(c=h({},c));for(var b in o)c[b]===void 0&&(c[b]=o[b])}return c}var xd=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Yw(o){xd(o)}function Ww(o){console.error(o)}function Xw(o){xd(o)}function bd(o,s){try{var c=o.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(m){setTimeout(function(){throw m})}}function Jw(o,s,c){try{var m=o.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function _p(o,s,c){return c=sa(c),c.tag=3,c.payload={element:null},c.callback=function(){bd(o,s)},c}function Zw(o){return o=sa(o),o.tag=3,o}function Qw(o,s,c,m){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var w=m.value;o.payload=function(){return b(w)},o.callback=function(){Jw(s,c,m)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(o.callback=function(){Jw(s,c,m),typeof b!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var P=m.stack;this.componentDidCatch(m.value,{componentStack:P!==null?P:""})})}function tI(o,s,c,m,b){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(s=c.alternate,s!==null&&eu(s,c,b,!0),c=Tr.current,c!==null){switch(c.tag){case 13:return ii===null?Gp():c.alternate===null&&Yt===0&&(Yt=3),c.flags&=-257,c.flags|=65536,c.lanes=b,m===Xm?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([m]):s.add(m),Kp(o,m,b)),!1;case 22:return c.flags|=65536,m===Xm?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([m]):c.add(m)),Kp(o,m,b)),!1}throw Error(r(435,c.tag))}return Kp(o,m,b),Gp(),!1}if(gt)return s=Tr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=b,m!==Vm&&(o=Error(r(422),{cause:m}),Ql(wr(o,c)))):(m!==Vm&&(s=Error(r(423),{cause:m}),Ql(wr(s,c))),o=o.current.alternate,o.flags|=65536,b&=-b,o.lanes|=b,m=wr(m,c),b=_p(o.stateNode,m,b),Qm(o,b),Yt!==4&&(Yt=2)),!1;var w=Error(r(520),{cause:m});if(w=wr(w,c),bu===null?bu=[w]:bu.push(w),Yt!==4&&(Yt=2),s===null)return!0;m=wr(m,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,o=b&-b,c.lanes|=o,o=_p(c.stateNode,m,o),Qm(c,o),!1;case 1:if(s=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ya===null||!ya.has(w))))return c.flags|=65536,b&=-b,c.lanes|=b,b=Zw(b),Qw(b,o,c,m),Qm(c,b),!1}c=c.return}while(c!==null);return!1}var eS=Error(r(461)),wn=!1;function In(o,s,c,m){s.child=o===null?zw(s,null,c,m):bs(s,o.child,c,m)}function tS(o,s,c,m,b){c=c.render;var w=s.ref;if("ref"in m){var M={};for(var P in m)P!=="ref"&&(M[P]=m[P])}else M=m;return lo(s),m=ip(o,s,c,M,w,b),P=ap(),o!==null&&!wn?(op(o,s,b),Mi(o,s,b)):(gt&&P&&Bm(s),s.flags|=1,In(o,s,m,b),s.child)}function nS(o,s,c,m,b){if(o===null){var w=c.type;return typeof w=="function"&&!Um(w)&&w.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=w,rS(o,s,w,m,b)):(o=Qc(c.type,null,m,s,s.mode,b),o.ref=s.ref,o.return=s,s.child=o)}if(w=o.child,!Dp(o,b)){var M=w.memoizedProps;if(c=c.compare,c=c!==null?c:Wl,c(M,m)&&o.ref===s.ref)return Mi(o,s,b)}return s.flags|=1,o=Si(w,m),o.ref=s.ref,o.return=s,s.child=o}function rS(o,s,c,m,b){if(o!==null){var w=o.memoizedProps;if(Wl(w,m)&&o.ref===s.ref)if(wn=!1,s.pendingProps=m=w,Dp(o,b))(o.flags&131072)!==0&&(wn=!0);else return s.lanes=o.lanes,Mi(o,s,b)}return wp(o,s,c,m,b)}function iS(o,s,c){var m=s.pendingProps,b=m.children,w=o!==null?o.memoizedState:null;if(m.mode==="hidden"){if((s.flags&128)!==0){if(m=w!==null?w.baseLanes|c:c,o!==null){for(b=s.child=o.child,w=0;b!==null;)w=w|b.lanes|b.childLanes,b=b.sibling;s.childLanes=w&~m}else s.childLanes=0,s.child=null;return aS(o,s,m,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&id(s,w!==null?w.cachePool:null),w!==null?rw(s,w):tp(),Gw(s);else return s.lanes=s.childLanes=536870912,aS(o,s,w!==null?w.baseLanes|c:c,c)}else w!==null?(id(s,w.cachePool),rw(s,w),da(),s.memoizedState=null):(o!==null&&id(s,null),tp(),da());return In(o,s,b,c),s.child}function aS(o,s,c,m){var b=Wm();return b=b===null?null:{parent:mn._currentValue,pool:b},s.memoizedState={baseLanes:c,cachePool:b},o!==null&&id(s,null),tp(),Gw(s),o!==null&&eu(o,s,m,!0),null}function _d(o,s){var c=s.ref;if(c===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(o===null||o.ref!==c)&&(s.flags|=4194816)}}function wp(o,s,c,m,b){return lo(s),c=ip(o,s,c,m,void 0,b),m=ap(),o!==null&&!wn?(op(o,s,b),Mi(o,s,b)):(gt&&m&&Bm(s),s.flags|=1,In(o,s,c,b),s.child)}function oS(o,s,c,m,b,w){return lo(s),s.updateQueue=null,c=aw(s,m,c,b),iw(o),m=ap(),o!==null&&!wn?(op(o,s,w),Mi(o,s,w)):(gt&&m&&Bm(s),s.flags|=1,In(o,s,c,w),s.child)}function sS(o,s,c,m,b){if(lo(s),s.stateNode===null){var w=cs,M=c.contextType;typeof M=="object"&&M!==null&&(w=qn(M)),w=new c(m,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=bp,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=m,w.state=s.memoizedState,w.refs={},Jm(s),M=c.contextType,w.context=typeof M=="object"&&M!==null?qn(M):cs,w.state=s.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(xp(s,c,M,m),w.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(M=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),M!==w.state&&bp.enqueueReplaceState(w,w.state,null),su(s,m,w,b),ou(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),m=!0}else if(o===null){w=s.stateNode;var P=s.memoizedProps,$=fo(c,P);w.props=$;var J=w.context,le=c.contextType;M=cs,typeof le=="object"&&le!==null&&(M=qn(le));var he=c.getDerivedStateFromProps;le=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function",P=s.pendingProps!==P,le||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P||J!==M)&&Kw(s,w,m,M),oa=!1;var ee=s.memoizedState;w.state=ee,su(s,m,w,b),ou(),J=s.memoizedState,P||ee!==J||oa?(typeof he=="function"&&(xp(s,c,he,m),J=s.memoizedState),($=oa||Hw(s,c,$,m,ee,J,M))?(le||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=J),w.props=m,w.state=J,w.context=M,m=$):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{w=s.stateNode,Zm(o,s),M=s.memoizedProps,le=fo(c,M),w.props=le,he=s.pendingProps,ee=w.context,J=c.contextType,$=cs,typeof J=="object"&&J!==null&&($=qn(J)),P=c.getDerivedStateFromProps,(J=typeof P=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M!==he||ee!==$)&&Kw(s,w,m,$),oa=!1,ee=s.memoizedState,w.state=ee,su(s,m,w,b),ou();var ne=s.memoizedState;M!==he||ee!==ne||oa||o!==null&&o.dependencies!==null&&nd(o.dependencies)?(typeof P=="function"&&(xp(s,c,P,m),ne=s.memoizedState),(le=oa||Hw(s,c,le,m,ee,ne,$)||o!==null&&o.dependencies!==null&&nd(o.dependencies))?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,ne,$),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,ne,$)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||M===o.memoizedProps&&ee===o.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&ee===o.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=ne),w.props=m,w.state=ne,w.context=$,m=le):(typeof w.componentDidUpdate!="function"||M===o.memoizedProps&&ee===o.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&ee===o.memoizedState||(s.flags|=1024),m=!1)}return w=m,_d(o,s),m=(s.flags&128)!==0,w||m?(w=s.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,o!==null&&m?(s.child=bs(s,o.child,null,b),s.child=bs(s,null,c,b)):In(o,s,c,b),s.memoizedState=w.state,o=s.child):o=Mi(o,s,b),o}function lS(o,s,c,m){return Zl(),s.flags|=256,In(o,s,c,m),s.child}var Sp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ep(o){return{baseLanes:o,cachePool:W_()}}function Cp(o,s,c){return o=o!==null?o.childLanes&~c:0,s&&(o|=Ar),o}function uS(o,s,c){var m=s.pendingProps,b=!1,w=(s.flags&128)!==0,M;if((M=w)||(M=o!==null&&o.memoizedState===null?!1:(pn.current&2)!==0),M&&(b=!0,s.flags&=-129),M=(s.flags&32)!==0,s.flags&=-33,o===null){if(gt){if(b?ca(s):da(),gt){var P=Kt,$;if($=P){e:{for($=P,P=ri;$.nodeType!==8;){if(!P){P=null;break e}if($=Vr($.nextSibling),$===null){P=null;break e}}P=$}P!==null?(s.memoizedState={dehydrated:P,treeContext:ro!==null?{id:Ei,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},$=or(18,null,null,0),$.stateNode=P,$.return=s,s.child=$,Hn=s,Kt=null,$=!0):$=!1}$||oo(s)}if(P=s.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return lg(P)?s.lanes=32:s.lanes=536870912,null;Di(s)}return P=m.children,m=m.fallback,b?(da(),b=s.mode,P=wd({mode:"hidden",children:P},b),m=no(m,b,c,null),P.return=s,m.return=s,P.sibling=m,s.child=P,b=s.child,b.memoizedState=Ep(c),b.childLanes=Cp(o,M,c),s.memoizedState=Sp,m):(ca(s),Tp(s,P))}if($=o.memoizedState,$!==null&&(P=$.dehydrated,P!==null)){if(w)s.flags&256?(ca(s),s.flags&=-257,s=Ap(o,s,c)):s.memoizedState!==null?(da(),s.child=o.child,s.flags|=128,s=null):(da(),b=m.fallback,P=s.mode,m=wd({mode:"visible",children:m.children},P),b=no(b,P,c,null),b.flags|=2,m.return=s,b.return=s,m.sibling=b,s.child=m,bs(s,o.child,null,c),m=s.child,m.memoizedState=Ep(c),m.childLanes=Cp(o,M,c),s.memoizedState=Sp,s=b);else if(ca(s),lg(P)){if(M=P.nextSibling&&P.nextSibling.dataset,M)var J=M.dgst;M=J,m=Error(r(419)),m.stack="",m.digest=M,Ql({value:m,source:null,stack:null}),s=Ap(o,s,c)}else if(wn||eu(o,s,c,!1),M=(c&o.childLanes)!==0,wn||M){if(M=Mt,M!==null&&(m=c&-c,m=(m&42)!==0?1:$l(m),m=(m&(M.suspendedLanes|c))!==0?0:m,m!==0&&m!==$.retryLane))throw $.retryLane=m,us(o,m),dr(M,o,m),eS;P.data==="$?"||Gp(),s=Ap(o,s,c)}else P.data==="$?"?(s.flags|=192,s.child=o.child,s=null):(o=$.treeContext,Kt=Vr(P.nextSibling),Hn=s,gt=!0,ao=null,ri=!1,o!==null&&(Er[Cr++]=Ei,Er[Cr++]=Ci,Er[Cr++]=ro,Ei=o.id,Ci=o.overflow,ro=s),s=Tp(s,m.children),s.flags|=4096);return s}return b?(da(),b=m.fallback,P=s.mode,$=o.child,J=$.sibling,m=Si($,{mode:"hidden",children:m.children}),m.subtreeFlags=$.subtreeFlags&65011712,J!==null?b=Si(J,b):(b=no(b,P,c,null),b.flags|=2),b.return=s,m.return=s,m.sibling=b,s.child=m,m=b,b=s.child,P=o.child.memoizedState,P===null?P=Ep(c):($=P.cachePool,$!==null?(J=mn._currentValue,$=$.parent!==J?{parent:J,pool:J}:$):$=W_(),P={baseLanes:P.baseLanes|c,cachePool:$}),b.memoizedState=P,b.childLanes=Cp(o,M,c),s.memoizedState=Sp,m):(ca(s),c=o.child,o=c.sibling,c=Si(c,{mode:"visible",children:m.children}),c.return=s,c.sibling=null,o!==null&&(M=s.deletions,M===null?(s.deletions=[o],s.flags|=16):M.push(o)),s.child=c,s.memoizedState=null,c)}function Tp(o,s){return s=wd({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function wd(o,s){return o=or(22,o,null,s),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Ap(o,s,c){return bs(s,o.child,null,c),o=Tp(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function cS(o,s,c){o.lanes|=s;var m=o.alternate;m!==null&&(m.lanes|=s),Gm(o.return,s,c)}function Np(o,s,c,m,b){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:b}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=c,w.tailMode=b)}function dS(o,s,c){var m=s.pendingProps,b=m.revealOrder,w=m.tail;if(In(o,s,m.children,c),m=pn.current,(m&2)!==0)m=m&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&cS(o,c,s);else if(o.tag===19)cS(o,c,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}switch(ie(pn,m),b){case"forwards":for(c=s.child,b=null;c!==null;)o=c.alternate,o!==null&&vd(o)===null&&(b=c),c=c.sibling;c=b,c===null?(b=s.child,s.child=null):(b=c.sibling,c.sibling=null),Np(s,!1,b,c,w);break;case"backwards":for(c=null,b=s.child,s.child=null;b!==null;){if(o=b.alternate,o!==null&&vd(o)===null){s.child=b;break}o=b.sibling,b.sibling=c,c=b,b=o}Np(s,!0,c,null,w);break;case"together":Np(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Mi(o,s,c){if(o!==null&&(s.dependencies=o.dependencies),ga|=s.lanes,(c&s.childLanes)===0)if(o!==null){if(eu(o,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(r(153));if(s.child!==null){for(o=s.child,c=Si(o,o.pendingProps),s.child=c,c.return=s;o.sibling!==null;)o=o.sibling,c=c.sibling=Si(o,o.pendingProps),c.return=s;c.sibling=null}return s.child}function Dp(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&nd(o)))}function nI(o,s,c){switch(s.tag){case 3:pe(s,s.stateNode.containerInfo),aa(s,mn,o.memoizedState.cache),Zl();break;case 27:case 5:_e(s);break;case 4:pe(s,s.stateNode.containerInfo);break;case 10:aa(s,s.type,s.memoizedProps.value);break;case 13:var m=s.memoizedState;if(m!==null)return m.dehydrated!==null?(ca(s),s.flags|=128,null):(c&s.child.childLanes)!==0?uS(o,s,c):(ca(s),o=Mi(o,s,c),o!==null?o.sibling:null);ca(s);break;case 19:var b=(o.flags&128)!==0;if(m=(c&s.childLanes)!==0,m||(eu(o,s,c,!1),m=(c&s.childLanes)!==0),b){if(m)return dS(o,s,c);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ie(pn,pn.current),m)break;return null;case 22:case 23:return s.lanes=0,iS(o,s,c);case 24:aa(s,mn,o.memoizedState.cache)}return Mi(o,s,c)}function fS(o,s,c){if(o!==null)if(o.memoizedProps!==s.pendingProps)wn=!0;else{if(!Dp(o,c)&&(s.flags&128)===0)return wn=!1,nI(o,s,c);wn=(o.flags&131072)!==0}else wn=!1,gt&&(s.flags&1048576)!==0&&q_(s,td,s.index);switch(s.lanes=0,s.tag){case 16:e:{o=s.pendingProps;var m=s.elementType,b=m._init;if(m=b(m._payload),s.type=m,typeof m=="function")Um(m)?(o=fo(m,o),s.tag=1,s=sS(null,s,m,o,c)):(s.tag=0,s=wp(null,s,m,o,c));else{if(m!=null){if(b=m.$$typeof,b===O){s.tag=11,s=tS(null,s,m,o,c);break e}else if(b===I){s.tag=14,s=nS(null,s,m,o,c);break e}}throw s=H(m)||m,Error(r(306,s,""))}}return s;case 0:return wp(o,s,s.type,s.pendingProps,c);case 1:return m=s.type,b=fo(m,s.pendingProps),sS(o,s,m,b,c);case 3:e:{if(pe(s,s.stateNode.containerInfo),o===null)throw Error(r(387));m=s.pendingProps;var w=s.memoizedState;b=w.element,Zm(o,s),su(s,m,null,c);var M=s.memoizedState;if(m=M.cache,aa(s,mn,m),m!==w.cache&&Hm(s,[mn],c,!0),ou(),m=M.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:M.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=lS(o,s,m,c);break e}else if(m!==b){b=wr(Error(r(424)),s),Ql(b),s=lS(o,s,m,c);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Kt=Vr(o.firstChild),Hn=s,gt=!0,ao=null,ri=!0,c=zw(s,null,m,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Zl(),m===b){s=Mi(o,s,c);break e}In(o,s,m,c)}s=s.child}return s;case 26:return _d(o,s),o===null?(c=gE(s.type,null,s.pendingProps,null))?s.memoizedState=c:gt||(c=s.type,o=s.pendingProps,m=Ld(ue.current).createElement(c),m[fn]=s,m[hn]=o,jn(m,c,o),rn(m),s.stateNode=m):s.memoizedState=gE(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return _e(s),o===null&&gt&&(m=s.stateNode=hE(s.type,s.pendingProps,ue.current),Hn=s,ri=!0,b=Kt,ba(s.type)?(ug=b,Kt=Vr(m.firstChild)):Kt=b),In(o,s,s.pendingProps.children,c),_d(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&gt&&((b=m=Kt)&&(m=MI(m,s.type,s.pendingProps,ri),m!==null?(s.stateNode=m,Hn=s,Kt=Vr(m.firstChild),ri=!1,b=!0):b=!1),b||oo(s)),_e(s),b=s.type,w=s.pendingProps,M=o!==null?o.memoizedProps:null,m=w.children,ag(b,w)?m=null:M!==null&&ag(b,M)&&(s.flags|=32),s.memoizedState!==null&&(b=ip(o,s,YP,null,null,c),Du._currentValue=b),_d(o,s),In(o,s,m,c),s.child;case 6:return o===null&&gt&&((o=c=Kt)&&(c=OI(c,s.pendingProps,ri),c!==null?(s.stateNode=c,Hn=s,Kt=null,o=!0):o=!1),o||oo(s)),null;case 13:return uS(o,s,c);case 4:return pe(s,s.stateNode.containerInfo),m=s.pendingProps,o===null?s.child=bs(s,null,m,c):In(o,s,m,c),s.child;case 11:return tS(o,s,s.type,s.pendingProps,c);case 7:return In(o,s,s.pendingProps,c),s.child;case 8:return In(o,s,s.pendingProps.children,c),s.child;case 12:return In(o,s,s.pendingProps.children,c),s.child;case 10:return m=s.pendingProps,aa(s,s.type,m.value),In(o,s,m.children,c),s.child;case 9:return b=s.type._context,m=s.pendingProps.children,lo(s),b=qn(b),m=m(b),s.flags|=1,In(o,s,m,c),s.child;case 14:return nS(o,s,s.type,s.pendingProps,c);case 15:return rS(o,s,s.type,s.pendingProps,c);case 19:return dS(o,s,c);case 31:return m=s.pendingProps,c=s.mode,m={mode:m.mode,children:m.children},o===null?(c=wd(m,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=Si(o.child,m),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return iS(o,s,c);case 24:return lo(s),m=qn(mn),o===null?(b=Wm(),b===null&&(b=Mt,w=Km(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=c),b=w),s.memoizedState={parent:m,cache:b},Jm(s),aa(s,mn,b)):((o.lanes&c)!==0&&(Zm(o,s),su(s,null,null,c),ou()),b=o.memoizedState,w=s.memoizedState,b.parent!==m?(b={parent:m,cache:m},s.memoizedState=b,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=b),aa(s,mn,m)):(m=w.cache,aa(s,mn,m),m!==b.cache&&Hm(s,[mn],c,!0))),In(o,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Oi(o){o.flags|=4}function hS(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!_E(s)){if(s=Tr.current,s!==null&&((ft&4194048)===ft?ii!==null:(ft&62914560)!==ft&&(ft&536870912)===0||s!==ii))throw iu=Xm,X_;o.flags|=8192}}function Sd(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?dn():536870912,o.lanes|=s,Es|=s)}function mu(o,s){if(!gt)switch(o.tailMode){case"hidden":s=o.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function zt(o){var s=o.alternate!==null&&o.alternate.child===o.child,c=0,m=0;if(s)for(var b=o.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=m,o.childLanes=c,s}function rI(o,s,c){var m=s.pendingProps;switch(qm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(s),null;case 1:return zt(s),null;case 3:return c=s.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),s.memoizedState.cache!==m&&(s.flags|=2048),Ai(mn),V(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(Jl(s)?Oi(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,G_())),zt(s),null;case 26:return c=s.memoizedState,o===null?(Oi(s),c!==null?(zt(s),hS(s,c)):(zt(s),s.flags&=-16777217)):c?c!==o.memoizedState?(Oi(s),zt(s),hS(s,c)):(zt(s),s.flags&=-16777217):(o.memoizedProps!==m&&Oi(s),zt(s),s.flags&=-16777217),null;case 27:W(s),c=ue.current;var b=s.type;if(o!==null&&s.stateNode!=null)o.memoizedProps!==m&&Oi(s);else{if(!m){if(s.stateNode===null)throw Error(r(166));return zt(s),null}o=we.current,Jl(s)?V_(s):(o=hE(b,m,c),s.stateNode=o,Oi(s))}return zt(s),null;case 5:if(W(s),c=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==m&&Oi(s);else{if(!m){if(s.stateNode===null)throw Error(r(166));return zt(s),null}if(o=we.current,Jl(s))V_(s);else{switch(b=Ld(ue.current),o){case 1:o=b.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:o=b.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":o=b.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":o=b.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":o=b.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?o.multiple=!0:m.size&&(o.size=m.size);break;default:o=typeof m.is=="string"?b.createElement(c,{is:m.is}):b.createElement(c)}}o[fn]=s,o[hn]=m;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)o.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=o;e:switch(jn(o,c,m),c){case"button":case"input":case"select":case"textarea":o=!!m.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Oi(s)}}return zt(s),s.flags&=-16777217,null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==m&&Oi(s);else{if(typeof m!="string"&&s.stateNode===null)throw Error(r(166));if(o=ue.current,Jl(s)){if(o=s.stateNode,c=s.memoizedProps,m=null,b=Hn,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}o[fn]=s,o=!!(o.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||oE(o.nodeValue,c)),o||oo(s)}else o=Ld(o).createTextNode(m),o[fn]=s,s.stateNode=o}return zt(s),null;case 13:if(m=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(b=Jl(s),m!==null&&m.dehydrated!==null){if(o===null){if(!b)throw Error(r(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[fn]=s}else Zl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zt(s),b=!1}else b=G_(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=b),b=!0;if(!b)return s.flags&256?(Di(s),s):(Di(s),null)}if(Di(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=m!==null,o=o!==null&&o.memoizedState!==null,c){m=s.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var w=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==b&&(m.flags|=2048)}return c!==o&&c&&(s.child.flags|=8192),Sd(s,s.updateQueue),zt(s),null;case 4:return V(),o===null&&eg(s.stateNode.containerInfo),zt(s),null;case 10:return Ai(s.type),zt(s),null;case 19:if(te(pn),b=s.memoizedState,b===null)return zt(s),null;if(m=(s.flags&128)!==0,w=b.rendering,w===null)if(m)mu(b,!1);else{if(Yt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(w=vd(o),w!==null){for(s.flags|=128,mu(b,!1),o=w.updateQueue,s.updateQueue=o,Sd(s,o),s.subtreeFlags=0,o=c,c=s.child;c!==null;)B_(c,o),c=c.sibling;return ie(pn,pn.current&1|2),s.child}o=o.sibling}b.tail!==null&&ae()>Td&&(s.flags|=128,m=!0,mu(b,!1),s.lanes=4194304)}else{if(!m)if(o=vd(w),o!==null){if(s.flags|=128,m=!0,o=o.updateQueue,s.updateQueue=o,Sd(s,o),mu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!w.alternate&&!gt)return zt(s),null}else 2*ae()-b.renderingStartTime>Td&&c!==536870912&&(s.flags|=128,m=!0,mu(b,!1),s.lanes=4194304);b.isBackwards?(w.sibling=s.child,s.child=w):(o=b.last,o!==null?o.sibling=w:s.child=w,b.last=w)}return b.tail!==null?(s=b.tail,b.rendering=s,b.tail=s.sibling,b.renderingStartTime=ae(),s.sibling=null,o=pn.current,ie(pn,m?o&1|2:o&1),s):(zt(s),null);case 22:case 23:return Di(s),np(),m=s.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(s.flags|=8192):m&&(s.flags|=8192),m?(c&536870912)!==0&&(s.flags&128)===0&&(zt(s),s.subtreeFlags&6&&(s.flags|=8192)):zt(s),c=s.updateQueue,c!==null&&Sd(s,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),m=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),m!==c&&(s.flags|=2048),o!==null&&te(uo),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ai(mn),zt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function iI(o,s){switch(qm(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Ai(mn),V(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return W(s),null;case 13:if(Di(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Zl()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return te(pn),null;case 4:return V(),null;case 10:return Ai(s.type),null;case 22:case 23:return Di(s),np(),o!==null&&te(uo),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return Ai(mn),null;case 25:return null;default:return null}}function mS(o,s){switch(qm(s),s.tag){case 3:Ai(mn),V();break;case 26:case 27:case 5:W(s);break;case 4:V();break;case 13:Di(s);break;case 19:te(pn);break;case 10:Ai(s.type);break;case 22:case 23:Di(s),np(),o!==null&&te(uo);break;case 24:Ai(mn)}}function pu(o,s){try{var c=s.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var b=m.next;c=b;do{if((c.tag&o)===o){m=void 0;var w=c.create,M=c.inst;m=w(),M.destroy=m}c=c.next}while(c!==b)}}catch(P){At(s,s.return,P)}}function fa(o,s,c){try{var m=s.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var w=b.next;m=w;do{if((m.tag&o)===o){var M=m.inst,P=M.destroy;if(P!==void 0){M.destroy=void 0,b=s;var $=c,J=P;try{J()}catch(le){At(b,$,le)}}}m=m.next}while(m!==w)}}catch(le){At(s,s.return,le)}}function pS(o){var s=o.updateQueue;if(s!==null){var c=o.stateNode;try{nw(s,c)}catch(m){At(o,o.return,m)}}}function gS(o,s,c){c.props=fo(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(m){At(o,s,m)}}function gu(o,s){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof c=="function"?o.refCleanup=c(m):c.current=m}}catch(b){At(o,s,b)}}function ai(o,s){var c=o.ref,m=o.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(b){At(o,s,b)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){At(o,s,b)}else c.current=null}function yS(o){var s=o.type,c=o.memoizedProps,m=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(b){At(o,o.return,b)}}function Mp(o,s,c){try{var m=o.stateNode;CI(m,o.type,c,s),m[hn]=s}catch(b){At(o,o.return,b)}}function vS(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&ba(o.type)||o.tag===4}function Op(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||vS(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&ba(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Rp(o,s,c){var m=o.tag;if(m===5||m===6)o=o.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(o),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Id));else if(m!==4&&(m===27&&ba(o.type)&&(c=o.stateNode,s=null),o=o.child,o!==null))for(Rp(o,s,c),o=o.sibling;o!==null;)Rp(o,s,c),o=o.sibling}function Ed(o,s,c){var m=o.tag;if(m===5||m===6)o=o.stateNode,s?c.insertBefore(o,s):c.appendChild(o);else if(m!==4&&(m===27&&ba(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(Ed(o,s,c),o=o.sibling;o!==null;)Ed(o,s,c),o=o.sibling}function xS(o){var s=o.stateNode,c=o.memoizedProps;try{for(var m=o.type,b=s.attributes;b.length;)s.removeAttributeNode(b[0]);jn(s,m,c),s[fn]=o,s[hn]=c}catch(w){At(o,o.return,w)}}var Ri=!1,Zt=!1,kp=!1,bS=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function aI(o,s){if(o=o.containerInfo,rg=qd,o=O_(o),Om(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var M=0,P=-1,$=-1,J=0,le=0,he=o,ee=null;t:for(;;){for(var ne;he!==c||b!==0&&he.nodeType!==3||(P=M+b),he!==w||m!==0&&he.nodeType!==3||($=M+m),he.nodeType===3&&(M+=he.nodeValue.length),(ne=he.firstChild)!==null;)ee=he,he=ne;for(;;){if(he===o)break t;if(ee===c&&++J===b&&(P=M),ee===w&&++le===m&&($=M),(ne=he.nextSibling)!==null)break;he=ee,ee=he.parentNode}he=ne}c=P===-1||$===-1?null:{start:P,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(ig={focusedElem:o,selectionRange:c},qd=!1,Sn=s;Sn!==null;)if(s=Sn,o=s.child,(s.subtreeFlags&1024)!==0&&o!==null)o.return=s,Sn=o;else for(;Sn!==null;){switch(s=Sn,w=s.alternate,o=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,c=s,b=w.memoizedProps,w=w.memoizedState,m=c.stateNode;try{var Ve=fo(c.type,b,c.elementType===c.type);o=m.getSnapshotBeforeUpdate(Ve,w),m.__reactInternalSnapshotBeforeUpdate=o}catch(Ue){At(c,c.return,Ue)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,c=o.nodeType,c===9)sg(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":sg(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=s.sibling,o!==null){o.return=s.return,Sn=o;break}Sn=s.return}}function _S(o,s,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:ha(o,c),m&4&&pu(5,c);break;case 1:if(ha(o,c),m&4)if(o=c.stateNode,s===null)try{o.componentDidMount()}catch(M){At(c,c.return,M)}else{var b=fo(c.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(b,s,o.__reactInternalSnapshotBeforeUpdate)}catch(M){At(c,c.return,M)}}m&64&&pS(c),m&512&&gu(c,c.return);break;case 3:if(ha(o,c),m&64&&(o=c.updateQueue,o!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{nw(o,s)}catch(M){At(c,c.return,M)}}break;case 27:s===null&&m&4&&xS(c);case 26:case 5:ha(o,c),s===null&&m&4&&yS(c),m&512&&gu(c,c.return);break;case 12:ha(o,c);break;case 13:ha(o,c),m&4&&ES(o,c),m&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=mI.bind(null,c),RI(o,c))));break;case 22:if(m=c.memoizedState!==null||Ri,!m){s=s!==null&&s.memoizedState!==null||Zt,b=Ri;var w=Zt;Ri=m,(Zt=s)&&!w?ma(o,c,(c.subtreeFlags&8772)!==0):ha(o,c),Ri=b,Zt=w}break;case 30:break;default:ha(o,c)}}function wS(o){var s=o.alternate;s!==null&&(o.alternate=null,wS(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Qo(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ut=null,er=!1;function ki(o,s,c){for(c=c.child;c!==null;)SS(o,s,c),c=c.sibling}function SS(o,s,c){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(nt,c)}catch{}switch(c.tag){case 26:Zt||ai(c,s),ki(o,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Zt||ai(c,s);var m=Ut,b=er;ba(c.type)&&(Ut=c.stateNode,er=!1),ki(o,s,c),Cu(c.stateNode),Ut=m,er=b;break;case 5:Zt||ai(c,s);case 6:if(m=Ut,b=er,Ut=null,ki(o,s,c),Ut=m,er=b,Ut!==null)if(er)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(c.stateNode)}catch(w){At(c,s,w)}else try{Ut.removeChild(c.stateNode)}catch(w){At(c,s,w)}break;case 18:Ut!==null&&(er?(o=Ut,dE(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),ku(o)):dE(Ut,c.stateNode));break;case 4:m=Ut,b=er,Ut=c.stateNode.containerInfo,er=!0,ki(o,s,c),Ut=m,er=b;break;case 0:case 11:case 14:case 15:Zt||fa(2,c,s),Zt||fa(4,c,s),ki(o,s,c);break;case 1:Zt||(ai(c,s),m=c.stateNode,typeof m.componentWillUnmount=="function"&&gS(c,s,m)),ki(o,s,c);break;case 21:ki(o,s,c);break;case 22:Zt=(m=Zt)||c.memoizedState!==null,ki(o,s,c),Zt=m;break;default:ki(o,s,c)}}function ES(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ku(o)}catch(c){At(s,s.return,c)}}function oI(o){switch(o.tag){case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new bS),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new bS),s;default:throw Error(r(435,o.tag))}}function Pp(o,s){var c=oI(o);s.forEach(function(m){var b=pI.bind(null,o,m);c.has(m)||(c.add(m),m.then(b,b))})}function sr(o,s){var c=s.deletions;if(c!==null)for(var m=0;m<c.length;m++){var b=c[m],w=o,M=s,P=M;e:for(;P!==null;){switch(P.tag){case 27:if(ba(P.type)){Ut=P.stateNode,er=!1;break e}break;case 5:Ut=P.stateNode,er=!1;break e;case 3:case 4:Ut=P.stateNode.containerInfo,er=!0;break e}P=P.return}if(Ut===null)throw Error(r(160));SS(w,M,b),Ut=null,er=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)CS(s,o),s=s.sibling}var qr=null;function CS(o,s){var c=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:sr(s,o),lr(o),m&4&&(fa(3,o,o.return),pu(3,o),fa(5,o,o.return));break;case 1:sr(s,o),lr(o),m&512&&(Zt||c===null||ai(c,c.return)),m&64&&Ri&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var b=qr;if(sr(s,o),lr(o),m&512&&(Zt||c===null||ai(c,c.return)),m&4){var w=c!==null?c.memoizedState:null;if(m=o.memoizedState,c===null)if(m===null)if(o.stateNode===null){e:{m=o.type,c=o.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":w=b.getElementsByTagName("title")[0],(!w||w[Ja]||w[fn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(m),b.head.insertBefore(w,b.querySelector("head > title"))),jn(w,m,c),w[fn]=o,rn(w),m=w;break e;case"link":var M=xE("link","href",b).get(m+(c.href||""));if(M){for(var P=0;P<M.length;P++)if(w=M[P],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(P,1);break t}}w=b.createElement(m),jn(w,m,c),b.head.appendChild(w);break;case"meta":if(M=xE("meta","content",b).get(m+(c.content||""))){for(P=0;P<M.length;P++)if(w=M[P],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(P,1);break t}}w=b.createElement(m),jn(w,m,c),b.head.appendChild(w);break;default:throw Error(r(468,m))}w[fn]=o,rn(w),m=w}o.stateNode=m}else bE(b,o.type,o.stateNode);else o.stateNode=vE(b,m,o.memoizedProps);else w!==m?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,m===null?bE(b,o.type,o.stateNode):vE(b,m,o.memoizedProps)):m===null&&o.stateNode!==null&&Mp(o,o.memoizedProps,c.memoizedProps)}break;case 27:sr(s,o),lr(o),m&512&&(Zt||c===null||ai(c,c.return)),c!==null&&m&4&&Mp(o,o.memoizedProps,c.memoizedProps);break;case 5:if(sr(s,o),lr(o),m&512&&(Zt||c===null||ai(c,c.return)),o.flags&32){b=o.stateNode;try{ns(b,"")}catch(ne){At(o,o.return,ne)}}m&4&&o.stateNode!=null&&(b=o.memoizedProps,Mp(o,b,c!==null?c.memoizedProps:b)),m&1024&&(kp=!0);break;case 6:if(sr(s,o),lr(o),m&4){if(o.stateNode===null)throw Error(r(162));m=o.memoizedProps,c=o.stateNode;try{c.nodeValue=m}catch(ne){At(o,o.return,ne)}}break;case 3:if($d=null,b=qr,qr=jd(s.containerInfo),sr(s,o),qr=b,lr(o),m&4&&c!==null&&c.memoizedState.isDehydrated)try{ku(s.containerInfo)}catch(ne){At(o,o.return,ne)}kp&&(kp=!1,TS(o));break;case 4:m=qr,qr=jd(o.stateNode.containerInfo),sr(s,o),lr(o),qr=m;break;case 12:sr(s,o),lr(o);break;case 13:sr(s,o),lr(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Fp=ae()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Pp(o,m)));break;case 22:b=o.memoizedState!==null;var $=c!==null&&c.memoizedState!==null,J=Ri,le=Zt;if(Ri=J||b,Zt=le||$,sr(s,o),Zt=le,Ri=J,lr(o),m&8192)e:for(s=o.stateNode,s._visibility=b?s._visibility&-2:s._visibility|1,b&&(c===null||$||Ri||Zt||ho(o)),c=null,s=o;;){if(s.tag===5||s.tag===26){if(c===null){$=c=s;try{if(w=$.stateNode,b)M=w.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{P=$.stateNode;var he=$.memoizedProps.style,ee=he!=null&&he.hasOwnProperty("display")?he.display:null;P.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(ne){At($,$.return,ne)}}}else if(s.tag===6){if(c===null){$=s;try{$.stateNode.nodeValue=b?"":$.memoizedProps}catch(ne){At($,$.return,ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}m&4&&(m=o.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,Pp(o,c))));break;case 19:sr(s,o),lr(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Pp(o,m)));break;case 30:break;case 21:break;default:sr(s,o),lr(o)}}function lr(o){var s=o.flags;if(s&2){try{for(var c,m=o.return;m!==null;){if(vS(m)){c=m;break}m=m.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var b=c.stateNode,w=Op(o);Ed(o,w,b);break;case 5:var M=c.stateNode;c.flags&32&&(ns(M,""),c.flags&=-33);var P=Op(o);Ed(o,P,M);break;case 3:case 4:var $=c.stateNode.containerInfo,J=Op(o);Rp(o,J,$);break;default:throw Error(r(161))}}catch(le){At(o,o.return,le)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function TS(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;TS(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function ha(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)_S(o,s.alternate,s),s=s.sibling}function ho(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:fa(4,s,s.return),ho(s);break;case 1:ai(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&gS(s,s.return,c),ho(s);break;case 27:Cu(s.stateNode);case 26:case 5:ai(s,s.return),ho(s);break;case 22:s.memoizedState===null&&ho(s);break;case 30:ho(s);break;default:ho(s)}o=o.sibling}}function ma(o,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var m=s.alternate,b=o,w=s,M=w.flags;switch(w.tag){case 0:case 11:case 15:ma(b,w,c),pu(4,w);break;case 1:if(ma(b,w,c),m=w,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(J){At(m,m.return,J)}if(m=w,b=m.updateQueue,b!==null){var P=m.stateNode;try{var $=b.shared.hiddenCallbacks;if($!==null)for(b.shared.hiddenCallbacks=null,b=0;b<$.length;b++)tw($[b],P)}catch(J){At(m,m.return,J)}}c&&M&64&&pS(w),gu(w,w.return);break;case 27:xS(w);case 26:case 5:ma(b,w,c),c&&m===null&&M&4&&yS(w),gu(w,w.return);break;case 12:ma(b,w,c);break;case 13:ma(b,w,c),c&&M&4&&ES(b,w);break;case 22:w.memoizedState===null&&ma(b,w,c),gu(w,w.return);break;case 30:break;default:ma(b,w,c)}s=s.sibling}}function Ip(o,s){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&tu(c))}function Lp(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&tu(o))}function oi(o,s,c,m){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)AS(o,s,c,m),s=s.sibling}function AS(o,s,c,m){var b=s.flags;switch(s.tag){case 0:case 11:case 15:oi(o,s,c,m),b&2048&&pu(9,s);break;case 1:oi(o,s,c,m);break;case 3:oi(o,s,c,m),b&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&tu(o)));break;case 12:if(b&2048){oi(o,s,c,m),o=s.stateNode;try{var w=s.memoizedProps,M=w.id,P=w.onPostCommit;typeof P=="function"&&P(M,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch($){At(s,s.return,$)}}else oi(o,s,c,m);break;case 13:oi(o,s,c,m);break;case 23:break;case 22:w=s.stateNode,M=s.alternate,s.memoizedState!==null?w._visibility&2?oi(o,s,c,m):yu(o,s):w._visibility&2?oi(o,s,c,m):(w._visibility|=2,_s(o,s,c,m,(s.subtreeFlags&10256)!==0)),b&2048&&Ip(M,s);break;case 24:oi(o,s,c,m),b&2048&&Lp(s.alternate,s);break;default:oi(o,s,c,m)}}function _s(o,s,c,m,b){for(b=b&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var w=o,M=s,P=c,$=m,J=M.flags;switch(M.tag){case 0:case 11:case 15:_s(w,M,P,$,b),pu(8,M);break;case 23:break;case 22:var le=M.stateNode;M.memoizedState!==null?le._visibility&2?_s(w,M,P,$,b):yu(w,M):(le._visibility|=2,_s(w,M,P,$,b)),b&&J&2048&&Ip(M.alternate,M);break;case 24:_s(w,M,P,$,b),b&&J&2048&&Lp(M.alternate,M);break;default:_s(w,M,P,$,b)}s=s.sibling}}function yu(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=o,m=s,b=m.flags;switch(m.tag){case 22:yu(c,m),b&2048&&Ip(m.alternate,m);break;case 24:yu(c,m),b&2048&&Lp(m.alternate,m);break;default:yu(c,m)}s=s.sibling}}var vu=8192;function ws(o){if(o.subtreeFlags&vu)for(o=o.child;o!==null;)NS(o),o=o.sibling}function NS(o){switch(o.tag){case 26:ws(o),o.flags&vu&&o.memoizedState!==null&&GI(qr,o.memoizedState,o.memoizedProps);break;case 5:ws(o);break;case 3:case 4:var s=qr;qr=jd(o.stateNode.containerInfo),ws(o),qr=s;break;case 22:o.memoizedState===null&&(s=o.alternate,s!==null&&s.memoizedState!==null?(s=vu,vu=16777216,ws(o),vu=s):ws(o));break;default:ws(o)}}function DS(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function xu(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var m=s[c];Sn=m,OS(m,o)}DS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)MS(o),o=o.sibling}function MS(o){switch(o.tag){case 0:case 11:case 15:xu(o),o.flags&2048&&fa(9,o,o.return);break;case 3:xu(o);break;case 12:xu(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,Cd(o)):xu(o);break;default:xu(o)}}function Cd(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var m=s[c];Sn=m,OS(m,o)}DS(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:fa(8,s,s.return),Cd(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Cd(s));break;default:Cd(s)}o=o.sibling}}function OS(o,s){for(;Sn!==null;){var c=Sn;switch(c.tag){case 0:case 11:case 15:fa(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:tu(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,Sn=m;else e:for(c=o;Sn!==null;){m=Sn;var b=m.sibling,w=m.return;if(wS(m),m===c){Sn=null;break e}if(b!==null){b.return=w,Sn=b;break e}Sn=w}}}var sI={getCacheForType:function(o){var s=qn(mn),c=s.data.get(o);return c===void 0&&(c=o(),s.data.set(o,c)),c}},lI=typeof WeakMap=="function"?WeakMap:Map,bt=0,Mt=null,rt=null,ft=0,_t=0,ur=null,pa=!1,Ss=!1,jp=!1,Pi=0,Yt=0,ga=0,mo=0,Up=0,Ar=0,Es=0,bu=null,tr=null,$p=!1,Fp=0,Td=1/0,Ad=null,ya=null,Ln=0,va=null,Cs=null,Ts=0,Bp=0,qp=null,RS=null,_u=0,Vp=null;function cr(){if((bt&2)!==0&&ft!==0)return ft&-ft;if(z.T!==null){var o=hs;return o!==0?o:Xp()}return Lc()}function kS(){Ar===0&&(Ar=(ft&536870912)===0||gt?jt():536870912);var o=Tr.current;return o!==null&&(o.flags|=32),Ar}function dr(o,s,c){(o===Mt&&(_t===2||_t===9)||o.cancelPendingCommit!==null)&&(As(o,0),xa(o,ft,Ar,!1)),Dt(o,c),((bt&2)===0||o!==Mt)&&(o===Mt&&((bt&2)===0&&(mo|=c),Yt===4&&xa(o,ft,Ar,!1)),si(o))}function PS(o,s,c){if((bt&6)!==0)throw Error(r(327));var m=!c&&(s&124)===0&&(s&o.expiredLanes)===0||Ne(o,s),b=m?dI(o,s):Hp(o,s,!0),w=m;do{if(b===0){Ss&&!m&&xa(o,s,0,!1);break}else{if(c=o.current.alternate,w&&!uI(c)){b=Hp(o,s,!1),w=!1;continue}if(b===2){if(w=s,o.errorRecoveryDisabledLanes&w)var M=0;else M=o.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){s=M;e:{var P=o;b=bu;var $=P.current.memoizedState.isDehydrated;if($&&(As(P,M).flags|=256),M=Hp(P,M,!1),M!==2){if(jp&&!$){P.errorRecoveryDisabledLanes|=w,mo|=w,b=4;break e}w=tr,tr=b,w!==null&&(tr===null?tr=w:tr.push.apply(tr,w))}b=M}if(w=!1,b!==2)continue}}if(b===1){As(o,0),xa(o,s,0,!0);break}e:{switch(m=o,w=b,w){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:xa(m,s,Ar,!pa);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(b=Fp+300-ae(),10<b)){if(xa(m,s,Ar,!pa),_n(m,0,!0)!==0)break e;m.timeoutHandle=uE(IS.bind(null,m,c,tr,Ad,$p,s,Ar,mo,Es,pa,w,2,-0,0),b);break e}IS(m,c,tr,Ad,$p,s,Ar,mo,Es,pa,w,0,-0,0)}}break}while(!0);si(o)}function IS(o,s,c,m,b,w,M,P,$,J,le,he,ee,ne){if(o.timeoutHandle=-1,he=s.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Nu={stylesheets:null,count:0,unsuspend:zI},NS(s),he=HI(),he!==null)){o.cancelPendingCommit=he(qS.bind(null,o,s,w,c,m,b,M,P,$,le,1,ee,ne)),xa(o,w,M,!J);return}qS(o,s,w,c,m,b,M,P,$)}function uI(o){for(var s=o;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var b=c[m],w=b.getSnapshot;b=b.value;try{if(!ar(w(),b))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function xa(o,s,c,m){s&=~Up,s&=~mo,o.suspendedLanes|=s,o.pingedLanes&=~s,m&&(o.warmLanes|=s),m=o.expirationTimes;for(var b=s;0<b;){var w=31-Tt(b),M=1<<w;m[w]=-1,b&=~M}c!==0&&Jo(o,c,s)}function Nd(){return(bt&6)===0?(wu(0),!1):!0}function zp(){if(rt!==null){if(_t===0)var o=rt.return;else o=rt,Ti=so=null,sp(o),xs=null,fu=0,o=rt;for(;o!==null;)mS(o.alternate,o),o=o.return;rt=null}}function As(o,s){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,AI(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),zp(),Mt=o,rt=c=Si(o.current,null),ft=s,_t=0,ur=null,pa=!1,Ss=Ne(o,s),jp=!1,Es=Ar=Up=mo=ga=Yt=0,tr=bu=null,$p=!1,(s&8)!==0&&(s|=s&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=s;0<m;){var b=31-Tt(m),w=1<<b;s|=o[b],m&=~w}return Pi=s,Xc(),c}function LS(o,s){et=null,z.H=pd,s===ru||s===ad?(s=Q_(),_t=3):s===X_?(s=Q_(),_t=4):_t=s===eS?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ur=s,rt===null&&(Yt=1,bd(o,wr(s,o.current)))}function jS(){var o=z.H;return z.H=pd,o===null?pd:o}function US(){var o=z.A;return z.A=sI,o}function Gp(){Yt=4,pa||(ft&4194048)!==ft&&Tr.current!==null||(Ss=!0),(ga&134217727)===0&&(mo&134217727)===0||Mt===null||xa(Mt,ft,Ar,!1)}function Hp(o,s,c){var m=bt;bt|=2;var b=jS(),w=US();(Mt!==o||ft!==s)&&(Ad=null,As(o,s)),s=!1;var M=Yt;e:do try{if(_t!==0&&rt!==null){var P=rt,$=ur;switch(_t){case 8:zp(),M=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(s=!0);var J=_t;if(_t=0,ur=null,Ns(o,P,$,J),c&&Ss){M=0;break e}break;default:J=_t,_t=0,ur=null,Ns(o,P,$,J)}}cI(),M=Yt;break}catch(le){LS(o,le)}while(!0);return s&&o.shellSuspendCounter++,Ti=so=null,bt=m,z.H=b,z.A=w,rt===null&&(Mt=null,ft=0,Xc()),M}function cI(){for(;rt!==null;)$S(rt)}function dI(o,s){var c=bt;bt|=2;var m=jS(),b=US();Mt!==o||ft!==s?(Ad=null,Td=ae()+500,As(o,s)):Ss=Ne(o,s);e:do try{if(_t!==0&&rt!==null){s=rt;var w=ur;t:switch(_t){case 1:_t=0,ur=null,Ns(o,s,w,1);break;case 2:case 9:if(J_(w)){_t=0,ur=null,FS(s);break}s=function(){_t!==2&&_t!==9||Mt!==o||(_t=7),si(o)},w.then(s,s);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:J_(w)?(_t=0,ur=null,FS(s)):(_t=0,ur=null,Ns(o,s,w,7));break;case 5:var M=null;switch(rt.tag){case 26:M=rt.memoizedState;case 5:case 27:var P=rt;if(!M||_E(M)){_t=0,ur=null;var $=P.sibling;if($!==null)rt=$;else{var J=P.return;J!==null?(rt=J,Dd(J)):rt=null}break t}}_t=0,ur=null,Ns(o,s,w,5);break;case 6:_t=0,ur=null,Ns(o,s,w,6);break;case 8:zp(),Yt=6;break e;default:throw Error(r(462))}}fI();break}catch(le){LS(o,le)}while(!0);return Ti=so=null,z.H=m,z.A=b,bt=c,rt!==null?0:(Mt=null,ft=0,Xc(),Yt)}function fI(){for(;rt!==null&&!be();)$S(rt)}function $S(o){var s=fS(o.alternate,o,Pi);o.memoizedProps=o.pendingProps,s===null?Dd(o):rt=s}function FS(o){var s=o,c=s.alternate;switch(s.tag){case 15:case 0:s=oS(c,s,s.pendingProps,s.type,void 0,ft);break;case 11:s=oS(c,s,s.pendingProps,s.type.render,s.ref,ft);break;case 5:sp(s);default:mS(c,s),s=rt=B_(s,Pi),s=fS(c,s,Pi)}o.memoizedProps=o.pendingProps,s===null?Dd(o):rt=s}function Ns(o,s,c,m){Ti=so=null,sp(s),xs=null,fu=0;var b=s.return;try{if(tI(o,b,s,c,ft)){Yt=1,bd(o,wr(c,o.current)),rt=null;return}}catch(w){if(b!==null)throw rt=b,w;Yt=1,bd(o,wr(c,o.current)),rt=null;return}s.flags&32768?(gt||m===1?o=!0:Ss||(ft&536870912)!==0?o=!1:(pa=o=!0,(m===2||m===9||m===3||m===6)&&(m=Tr.current,m!==null&&m.tag===13&&(m.flags|=16384))),BS(s,o)):Dd(s)}function Dd(o){var s=o;do{if((s.flags&32768)!==0){BS(s,pa);return}o=s.return;var c=rI(s.alternate,s,Pi);if(c!==null){rt=c;return}if(s=s.sibling,s!==null){rt=s;return}rt=s=o}while(s!==null);Yt===0&&(Yt=5)}function BS(o,s){do{var c=iI(o.alternate,o);if(c!==null){c.flags&=32767,rt=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(o=o.sibling,o!==null)){rt=o;return}rt=o=c}while(o!==null);Yt=6,rt=null}function qS(o,s,c,m,b,w,M,P,$){o.cancelPendingCommit=null;do Md();while(Ln!==0);if((bt&6)!==0)throw Error(r(327));if(s!==null){if(s===o.current)throw Error(r(177));if(w=s.lanes|s.childLanes,w|=Lm,ni(o,c,w,M,P,$),o===Mt&&(rt=Mt=null,ft=0),Cs=s,va=o,Ts=c,Bp=w,qp=b,RS=m,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,gI(lt,function(){return KS(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||m){m=z.T,z.T=null,b=K.p,K.p=2,M=bt,bt|=4;try{aI(o,s,c)}finally{bt=M,K.p=b,z.T=m}}Ln=1,VS(),zS(),GS()}}function VS(){if(Ln===1){Ln=0;var o=va,s=Cs,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=z.T,z.T=null;var m=K.p;K.p=2;var b=bt;bt|=4;try{CS(s,o);var w=ig,M=O_(o.containerInfo),P=w.focusedElem,$=w.selectionRange;if(M!==P&&P&&P.ownerDocument&&M_(P.ownerDocument.documentElement,P)){if($!==null&&Om(P)){var J=$.start,le=$.end;if(le===void 0&&(le=J),"selectionStart"in P)P.selectionStart=J,P.selectionEnd=Math.min(le,P.value.length);else{var he=P.ownerDocument||document,ee=he&&he.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),Ve=P.textContent.length,Ue=Math.min($.start,Ve),Et=$.end===void 0?Ue:Math.min($.end,Ve);!ne.extend&&Ue>Et&&(M=Et,Et=Ue,Ue=M);var G=D_(P,Ue),q=D_(P,Et);if(G&&q&&(ne.rangeCount!==1||ne.anchorNode!==G.node||ne.anchorOffset!==G.offset||ne.focusNode!==q.node||ne.focusOffset!==q.offset)){var X=he.createRange();X.setStart(G.node,G.offset),ne.removeAllRanges(),Ue>Et?(ne.addRange(X),ne.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),ne.addRange(X))}}}}for(he=[],ne=P;ne=ne.parentNode;)ne.nodeType===1&&he.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<he.length;P++){var fe=he[P];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}qd=!!rg,ig=rg=null}finally{bt=b,K.p=m,z.T=c}}o.current=s,Ln=2}}function zS(){if(Ln===2){Ln=0;var o=va,s=Cs,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=z.T,z.T=null;var m=K.p;K.p=2;var b=bt;bt|=4;try{_S(o,s.alternate,s)}finally{bt=b,K.p=m,z.T=c}}Ln=3}}function GS(){if(Ln===4||Ln===3){Ln=0,Me();var o=va,s=Cs,c=Ts,m=RS;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ln=5:(Ln=0,Cs=va=null,HS(o,o.pendingLanes));var b=o.pendingLanes;if(b===0&&(ya=null),Fl(c),s=s.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(nt,s,void 0,(s.current.flags&128)===128)}catch{}if(m!==null){s=z.T,b=K.p,K.p=2,z.T=null;try{for(var w=o.onRecoverableError,M=0;M<m.length;M++){var P=m[M];w(P.value,{componentStack:P.stack})}}finally{z.T=s,K.p=b}}(Ts&3)!==0&&Md(),si(o),b=o.pendingLanes,(c&4194090)!==0&&(b&42)!==0?o===Vp?_u++:(_u=0,Vp=o):_u=0,wu(0)}}function HS(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,tu(s)))}function Md(o){return VS(),zS(),GS(),KS()}function KS(){if(Ln!==5)return!1;var o=va,s=Bp;Bp=0;var c=Fl(Ts),m=z.T,b=K.p;try{K.p=32>c?32:c,z.T=null,c=qp,qp=null;var w=va,M=Ts;if(Ln=0,Cs=va=null,Ts=0,(bt&6)!==0)throw Error(r(331));var P=bt;if(bt|=4,MS(w.current),AS(w,w.current,M,c),bt=P,wu(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(nt,w)}catch{}return!0}finally{K.p=b,z.T=m,HS(o,s)}}function YS(o,s,c){s=wr(c,s),s=_p(o.stateNode,s,2),o=la(o,s,2),o!==null&&(Dt(o,2),si(o))}function At(o,s,c){if(o.tag===3)YS(o,o,c);else for(;s!==null;){if(s.tag===3){YS(s,o,c);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ya===null||!ya.has(m))){o=wr(c,o),c=Zw(2),m=la(s,c,2),m!==null&&(Qw(c,m,s,o),Dt(m,2),si(m));break}}s=s.return}}function Kp(o,s,c){var m=o.pingCache;if(m===null){m=o.pingCache=new lI;var b=new Set;m.set(s,b)}else b=m.get(s),b===void 0&&(b=new Set,m.set(s,b));b.has(c)||(jp=!0,b.add(c),o=hI.bind(null,o,s,c),s.then(o,o))}function hI(o,s,c){var m=o.pingCache;m!==null&&m.delete(s),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,Mt===o&&(ft&c)===c&&(Yt===4||Yt===3&&(ft&62914560)===ft&&300>ae()-Fp?(bt&2)===0&&As(o,0):Up|=c,Es===ft&&(Es=0)),si(o)}function WS(o,s){s===0&&(s=dn()),o=us(o,s),o!==null&&(Dt(o,s),si(o))}function mI(o){var s=o.memoizedState,c=0;s!==null&&(c=s.retryLane),WS(o,c)}function pI(o,s){var c=0;switch(o.tag){case 13:var m=o.stateNode,b=o.memoizedState;b!==null&&(c=b.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(s),WS(o,c)}function gI(o,s){return xe(o,s)}var Od=null,Ds=null,Yp=!1,Rd=!1,Wp=!1,po=0;function si(o){o!==Ds&&o.next===null&&(Ds===null?Od=Ds=o:Ds=Ds.next=o),Rd=!0,Yp||(Yp=!0,vI())}function wu(o,s){if(!Wp&&Rd){Wp=!0;do for(var c=!1,m=Od;m!==null;){if(o!==0){var b=m.pendingLanes;if(b===0)var w=0;else{var M=m.suspendedLanes,P=m.pingedLanes;w=(1<<31-Tt(42|o)+1)-1,w&=b&~(M&~P),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,QS(m,w))}else w=ft,w=_n(m,m===Mt?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||Ne(m,w)||(c=!0,QS(m,w));m=m.next}while(c);Wp=!1}}function yI(){XS()}function XS(){Rd=Yp=!1;var o=0;po!==0&&(TI()&&(o=po),po=0);for(var s=ae(),c=null,m=Od;m!==null;){var b=m.next,w=JS(m,s);w===0?(m.next=null,c===null?Od=b:c.next=b,b===null&&(Ds=c)):(c=m,(o!==0||(w&3)!==0)&&(Rd=!0)),m=b}wu(o)}function JS(o,s){for(var c=o.suspendedLanes,m=o.pingedLanes,b=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var M=31-Tt(w),P=1<<M,$=b[M];$===-1?((P&c)===0||(P&m)!==0)&&(b[M]=Je(P,s)):$<=s&&(o.expiredLanes|=P),w&=~P}if(s=Mt,c=ft,c=_n(o,o===s?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,c===0||o===s&&(_t===2||_t===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&Q(m),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||Ne(o,c)){if(s=c&-c,s===o.callbackPriority)return s;switch(m!==null&&Q(m),Fl(c)){case 2:case 8:c=Ae;break;case 32:c=lt;break;case 268435456:c=Be;break;default:c=lt}return m=ZS.bind(null,o),c=xe(c,m),o.callbackPriority=s,o.callbackNode=c,s}return m!==null&&m!==null&&Q(m),o.callbackPriority=2,o.callbackNode=null,2}function ZS(o,s){if(Ln!==0&&Ln!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(Md()&&o.callbackNode!==c)return null;var m=ft;return m=_n(o,o===Mt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(PS(o,m,s),JS(o,ae()),o.callbackNode!=null&&o.callbackNode===c?ZS.bind(null,o):null)}function QS(o,s){if(Md())return null;PS(o,s,!0)}function vI(){NI(function(){(bt&6)!==0?xe(Ye,yI):XS()})}function Xp(){return po===0&&(po=jt()),po}function eE(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Vc(""+o)}function tE(o,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,o.id&&c.setAttribute("form",o.id),s.parentNode.insertBefore(c,s),o=new FormData(o),c.parentNode.removeChild(c),o}function xI(o,s,c,m,b){if(s==="submit"&&c&&c.stateNode===b){var w=eE((b[hn]||null).action),M=m.submitter;M&&(s=(s=M[hn]||null)?eE(s.formAction):M.getAttribute("formAction"),s!==null&&(w=s,M=null));var P=new Kc("action","action",null,m,b);o.push({event:P,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(po!==0){var $=M?tE(b,M):new FormData(b);gp(c,{pending:!0,data:$,method:b.method,action:w},null,$)}}else typeof w=="function"&&(P.preventDefault(),$=M?tE(b,M):new FormData(b),gp(c,{pending:!0,data:$,method:b.method,action:w},w,$))},currentTarget:b}]})}}for(var Jp=0;Jp<Im.length;Jp++){var Zp=Im[Jp],bI=Zp.toLowerCase(),_I=Zp[0].toUpperCase()+Zp.slice(1);Br(bI,"on"+_I)}Br(P_,"onAnimationEnd"),Br(I_,"onAnimationIteration"),Br(L_,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(UP,"onTransitionRun"),Br($P,"onTransitionStart"),Br(FP,"onTransitionCancel"),Br(j_,"onTransitionEnd"),ce("onMouseEnter",["mouseout","mouseover"]),ce("onMouseLeave",["mouseout","mouseover"]),ce("onPointerEnter",["pointerout","pointerover"]),ce("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function nE(o,s){s=(s&4)!==0;for(var c=0;c<o.length;c++){var m=o[c],b=m.event;m=m.listeners;e:{var w=void 0;if(s)for(var M=m.length-1;0<=M;M--){var P=m[M],$=P.instance,J=P.currentTarget;if(P=P.listener,$!==w&&b.isPropagationStopped())break e;w=P,b.currentTarget=J;try{w(b)}catch(le){xd(le)}b.currentTarget=null,w=$}else for(M=0;M<m.length;M++){if(P=m[M],$=P.instance,J=P.currentTarget,P=P.listener,$!==w&&b.isPropagationStopped())break e;w=P,b.currentTarget=J;try{w(b)}catch(le){xd(le)}b.currentTarget=null,w=$}}}}function it(o,s){var c=s[na];c===void 0&&(c=s[na]=new Set);var m=o+"__bubble";c.has(m)||(rE(s,o,2,!1),c.add(m))}function Qp(o,s,c){var m=0;s&&(m|=4),rE(c,o,m,s)}var kd="_reactListening"+Math.random().toString(36).slice(2);function eg(o){if(!o[kd]){o[kd]=!0,Uc.forEach(function(c){c!=="selectionchange"&&(wI.has(c)||Qp(c,!1,o),Qp(c,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[kd]||(s[kd]=!0,Qp("selectionchange",!1,s))}}function rE(o,s,c,m){switch(AE(s)){case 2:var b=WI;break;case 8:b=XI;break;default:b=mg}c=b.bind(null,s,c,o),b=void 0,!wm||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),m?b!==void 0?o.addEventListener(s,c,{capture:!0,passive:b}):o.addEventListener(s,c,!0):b!==void 0?o.addEventListener(s,c,{passive:b}):o.addEventListener(s,c,!1)}function tg(o,s,c,m,b){var w=m;if((s&1)===0&&(s&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var P=m.stateNode.containerInfo;if(P===b)break;if(M===4)for(M=m.return;M!==null;){var $=M.tag;if(($===3||$===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;P!==null;){if(M=vi(P),M===null)return;if($=M.tag,$===5||$===6||$===26||$===27){m=w=M;continue e}P=P.parentNode}}m=m.return}c_(function(){var J=w,le=bm(c),he=[];e:{var ee=U_.get(o);if(ee!==void 0){var ne=Kc,Ve=o;switch(o){case"keypress":if(Gc(c)===0)break e;case"keydown":case"keyup":ne=gP;break;case"focusin":Ve="focus",ne=Tm;break;case"focusout":Ve="blur",ne=Tm;break;case"beforeblur":case"afterblur":ne=Tm;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=h_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=iP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=xP;break;case P_:case I_:case L_:ne=sP;break;case j_:ne=_P;break;case"scroll":case"scrollend":ne=nP;break;case"wheel":ne=SP;break;case"copy":case"cut":case"paste":ne=uP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=p_;break;case"toggle":case"beforetoggle":ne=CP}var Ue=(s&4)!==0,Et=!Ue&&(o==="scroll"||o==="scrollend"),G=Ue?ee!==null?ee+"Capture":null:ee;Ue=[];for(var q=J,X;q!==null;){var fe=q;if(X=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||X===null||G===null||(fe=ql(q,G),fe!=null&&Ue.push(Eu(q,fe,X))),Et)break;q=q.return}0<Ue.length&&(ee=new ne(ee,Ve,null,c,le),he.push({event:ee,listeners:Ue}))}}if((s&7)===0){e:{if(ee=o==="mouseover"||o==="pointerover",ne=o==="mouseout"||o==="pointerout",ee&&c!==xm&&(Ve=c.relatedTarget||c.fromElement)&&(vi(Ve)||Ve[ta]))break e;if((ne||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(Ve=c.relatedTarget||c.toElement,ne=J,Ve=Ve?vi(Ve):null,Ve!==null&&(Et=a(Ve),Ue=Ve.tag,Ve!==Et||Ue!==5&&Ue!==27&&Ue!==6)&&(Ve=null)):(ne=null,Ve=J),ne!==Ve)){if(Ue=h_,fe="onMouseLeave",G="onMouseEnter",q="mouse",(o==="pointerout"||o==="pointerover")&&(Ue=p_,fe="onPointerLeave",G="onPointerEnter",q="pointer"),Et=ne==null?ee:Za(ne),X=Ve==null?ee:Za(Ve),ee=new Ue(fe,q+"leave",ne,c,le),ee.target=Et,ee.relatedTarget=X,fe=null,vi(le)===J&&(Ue=new Ue(G,q+"enter",Ve,c,le),Ue.target=X,Ue.relatedTarget=Et,fe=Ue),Et=fe,ne&&Ve)t:{for(Ue=ne,G=Ve,q=0,X=Ue;X;X=Ms(X))q++;for(X=0,fe=G;fe;fe=Ms(fe))X++;for(;0<q-X;)Ue=Ms(Ue),q--;for(;0<X-q;)G=Ms(G),X--;for(;q--;){if(Ue===G||G!==null&&Ue===G.alternate)break t;Ue=Ms(Ue),G=Ms(G)}Ue=null}else Ue=null;ne!==null&&iE(he,ee,ne,Ue,!1),Ve!==null&&Et!==null&&iE(he,Et,Ve,Ue,!0)}}e:{if(ee=J?Za(J):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var Re=S_;else if(__(ee))if(E_)Re=IP;else{Re=kP;var tt=RP}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&vm(J.elementType)&&(Re=S_):Re=PP;if(Re&&(Re=Re(o,J))){w_(he,Re,c,le);break e}tt&&tt(o,ee,J),o==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&ym(ee,"number",ee.value)}switch(tt=J?Za(J):window,o){case"focusin":(__(tt)||tt.contentEditable==="true")&&(os=tt,Rm=J,Xl=null);break;case"focusout":Xl=Rm=os=null;break;case"mousedown":km=!0;break;case"contextmenu":case"mouseup":case"dragend":km=!1,R_(he,c,le);break;case"selectionchange":if(jP)break;case"keydown":case"keyup":R_(he,c,le)}var je;if(Nm)e:{switch(o){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else as?x_(o,c)&&($e="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&($e="onCompositionStart");$e&&(g_&&c.locale!=="ko"&&(as||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&as&&(je=d_()):(ia=le,Sm="value"in ia?ia.value:ia.textContent,as=!0)),tt=Pd(J,$e),0<tt.length&&($e=new m_($e,o,null,c,le),he.push({event:$e,listeners:tt}),je?$e.data=je:(je=b_(c),je!==null&&($e.data=je)))),(je=AP?NP(o,c):DP(o,c))&&($e=Pd(J,"onBeforeInput"),0<$e.length&&(tt=new m_("onBeforeInput","beforeinput",null,c,le),he.push({event:tt,listeners:$e}),tt.data=je)),xI(he,o,J,c,le)}nE(he,s)})}function Eu(o,s,c){return{instance:o,listener:s,currentTarget:c}}function Pd(o,s){for(var c=s+"Capture",m=[];o!==null;){var b=o,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=ql(o,c),b!=null&&m.unshift(Eu(o,b,w)),b=ql(o,s),b!=null&&m.push(Eu(o,b,w))),o.tag===3)return m;o=o.return}return[]}function Ms(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function iE(o,s,c,m,b){for(var w=s._reactName,M=[];c!==null&&c!==m;){var P=c,$=P.alternate,J=P.stateNode;if(P=P.tag,$!==null&&$===m)break;P!==5&&P!==26&&P!==27||J===null||($=J,b?(J=ql(c,w),J!=null&&M.unshift(Eu(c,J,$))):b||(J=ql(c,w),J!=null&&M.push(Eu(c,J,$)))),c=c.return}M.length!==0&&o.push({event:s,listeners:M})}var SI=/\r\n?/g,EI=/\u0000|\uFFFD/g;function aE(o){return(typeof o=="string"?o:""+o).replace(SI,`
`).replace(EI,"")}function oE(o,s){return s=aE(s),aE(o)===s}function Id(){}function St(o,s,c,m,b,w){switch(c){case"children":typeof m=="string"?s==="body"||s==="textarea"&&m===""||ns(o,m):(typeof m=="number"||typeof m=="bigint")&&s!=="body"&&ns(o,""+m);break;case"className":Fc(o,"class",m);break;case"tabIndex":Fc(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Fc(o,c,m);break;case"style":l_(o,m,w);break;case"data":if(s!=="object"){Fc(o,"data",m);break}case"src":case"href":if(m===""&&(s!=="a"||c!=="href")){o.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(c);break}m=Vc(""+m),o.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(s!=="input"&&St(o,s,"name",b.name,b,null),St(o,s,"formEncType",b.formEncType,b,null),St(o,s,"formMethod",b.formMethod,b,null),St(o,s,"formTarget",b.formTarget,b,null)):(St(o,s,"encType",b.encType,b,null),St(o,s,"method",b.method,b,null),St(o,s,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(c);break}m=Vc(""+m),o.setAttribute(c,m);break;case"onClick":m!=null&&(o.onclick=Id);break;case"onScroll":m!=null&&it("scroll",o);break;case"onScrollEnd":m!=null&&it("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}c=Vc(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(c,""+m):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":m===!0?o.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(c,m):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(c,m):o.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(c):o.setAttribute(c,m);break;case"popover":it("beforetoggle",o),it("toggle",o),xr(o,"popover",m);break;case"xlinkActuate":_i(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":_i(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":_i(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":_i(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":_i(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":_i(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":_i(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":_i(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":_i(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":xr(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=eP.get(c)||c,xr(o,c,m))}}function ng(o,s,c,m,b,w){switch(c){case"style":l_(o,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"children":typeof m=="string"?ns(o,m):(typeof m=="number"||typeof m=="bigint")&&ns(o,""+m);break;case"onScroll":m!=null&&it("scroll",o);break;case"onScrollEnd":m!=null&&it("scrollend",o);break;case"onClick":m!=null&&(o.onclick=Id);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$c.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),s=c.slice(2,b?c.length-7:void 0),w=o[hn]||null,w=w!=null?w[c]:null,typeof w=="function"&&o.removeEventListener(s,w,b),typeof m=="function")){typeof w!="function"&&w!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(s,m,b);break e}c in o?o[c]=m:m===!0?o.setAttribute(c,""):xr(o,c,m)}}}function jn(o,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",o),it("load",o);var m=!1,b=!1,w;for(w in c)if(c.hasOwnProperty(w)){var M=c[w];if(M!=null)switch(w){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:St(o,s,w,M,c,null)}}b&&St(o,s,"srcSet",c.srcSet,c,null),m&&St(o,s,"src",c.src,c,null);return;case"input":it("invalid",o);var P=w=M=b=null,$=null,J=null;for(m in c)if(c.hasOwnProperty(m)){var le=c[m];if(le!=null)switch(m){case"name":b=le;break;case"type":M=le;break;case"checked":$=le;break;case"defaultChecked":J=le;break;case"value":w=le;break;case"defaultValue":P=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,s));break;default:St(o,s,m,le,c,null)}}i_(o,w,P,$,J,M,b,!1),Bc(o);return;case"select":it("invalid",o),m=M=w=null;for(b in c)if(c.hasOwnProperty(b)&&(P=c[b],P!=null))switch(b){case"value":w=P;break;case"defaultValue":M=P;break;case"multiple":m=P;default:St(o,s,b,P,c,null)}s=w,c=M,o.multiple=!!m,s!=null?ts(o,!!m,s,!1):c!=null&&ts(o,!!m,c,!0);return;case"textarea":it("invalid",o),w=b=m=null;for(M in c)if(c.hasOwnProperty(M)&&(P=c[M],P!=null))switch(M){case"value":m=P;break;case"defaultValue":b=P;break;case"children":w=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:St(o,s,M,P,c,null)}o_(o,m,b,w),Bc(o);return;case"option":for($ in c)if(c.hasOwnProperty($)&&(m=c[$],m!=null))switch($){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:St(o,s,$,m,c,null)}return;case"dialog":it("beforetoggle",o),it("toggle",o),it("cancel",o),it("close",o);break;case"iframe":case"object":it("load",o);break;case"video":case"audio":for(m=0;m<Su.length;m++)it(Su[m],o);break;case"image":it("error",o),it("load",o);break;case"details":it("toggle",o);break;case"embed":case"source":case"link":it("error",o),it("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(m=c[J],m!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:St(o,s,J,m,c,null)}return;default:if(vm(s)){for(le in c)c.hasOwnProperty(le)&&(m=c[le],m!==void 0&&ng(o,s,le,m,c,void 0));return}}for(P in c)c.hasOwnProperty(P)&&(m=c[P],m!=null&&St(o,s,P,m,c,null))}function CI(o,s,c,m){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,M=null,P=null,$=null,J=null,le=null;for(ne in c){var he=c[ne];if(c.hasOwnProperty(ne)&&he!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":$=he;default:m.hasOwnProperty(ne)||St(o,s,ne,null,m,he)}}for(var ee in m){var ne=m[ee];if(he=c[ee],m.hasOwnProperty(ee)&&(ne!=null||he!=null))switch(ee){case"type":w=ne;break;case"name":b=ne;break;case"checked":J=ne;break;case"defaultChecked":le=ne;break;case"value":M=ne;break;case"defaultValue":P=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,s));break;default:ne!==he&&St(o,s,ee,ne,m,he)}}gm(o,M,P,$,J,le,w,b);return;case"select":ne=M=P=ee=null;for(w in c)if($=c[w],c.hasOwnProperty(w)&&$!=null)switch(w){case"value":break;case"multiple":ne=$;default:m.hasOwnProperty(w)||St(o,s,w,null,m,$)}for(b in m)if(w=m[b],$=c[b],m.hasOwnProperty(b)&&(w!=null||$!=null))switch(b){case"value":ee=w;break;case"defaultValue":P=w;break;case"multiple":M=w;default:w!==$&&St(o,s,b,w,m,$)}s=P,c=M,m=ne,ee!=null?ts(o,!!c,ee,!1):!!m!=!!c&&(s!=null?ts(o,!!c,s,!0):ts(o,!!c,c?[]:"",!1));return;case"textarea":ne=ee=null;for(P in c)if(b=c[P],c.hasOwnProperty(P)&&b!=null&&!m.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:St(o,s,P,null,m,b)}for(M in m)if(b=m[M],w=c[M],m.hasOwnProperty(M)&&(b!=null||w!=null))switch(M){case"value":ee=b;break;case"defaultValue":ne=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==w&&St(o,s,M,b,m,w)}a_(o,ee,ne);return;case"option":for(var Ve in c)if(ee=c[Ve],c.hasOwnProperty(Ve)&&ee!=null&&!m.hasOwnProperty(Ve))switch(Ve){case"selected":o.selected=!1;break;default:St(o,s,Ve,null,m,ee)}for($ in m)if(ee=m[$],ne=c[$],m.hasOwnProperty($)&&ee!==ne&&(ee!=null||ne!=null))switch($){case"selected":o.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:St(o,s,$,ee,m,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in c)ee=c[Ue],c.hasOwnProperty(Ue)&&ee!=null&&!m.hasOwnProperty(Ue)&&St(o,s,Ue,null,m,ee);for(J in m)if(ee=m[J],ne=c[J],m.hasOwnProperty(J)&&ee!==ne&&(ee!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:St(o,s,J,ee,m,ne)}return;default:if(vm(s)){for(var Et in c)ee=c[Et],c.hasOwnProperty(Et)&&ee!==void 0&&!m.hasOwnProperty(Et)&&ng(o,s,Et,void 0,m,ee);for(le in m)ee=m[le],ne=c[le],!m.hasOwnProperty(le)||ee===ne||ee===void 0&&ne===void 0||ng(o,s,le,ee,m,ne);return}}for(var G in c)ee=c[G],c.hasOwnProperty(G)&&ee!=null&&!m.hasOwnProperty(G)&&St(o,s,G,null,m,ee);for(he in m)ee=m[he],ne=c[he],!m.hasOwnProperty(he)||ee===ne||ee==null&&ne==null||St(o,s,he,ee,m,ne)}var rg=null,ig=null;function Ld(o){return o.nodeType===9?o:o.ownerDocument}function sE(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lE(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function ag(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var og=null;function TI(){var o=window.event;return o&&o.type==="popstate"?o===og?!1:(og=o,!0):(og=null,!1)}var uE=typeof setTimeout=="function"?setTimeout:void 0,AI=typeof clearTimeout=="function"?clearTimeout:void 0,cE=typeof Promise=="function"?Promise:void 0,NI=typeof queueMicrotask=="function"?queueMicrotask:typeof cE<"u"?function(o){return cE.resolve(null).then(o).catch(DI)}:uE;function DI(o){setTimeout(function(){throw o})}function ba(o){return o==="head"}function dE(o,s){var c=s,m=0,b=0;do{var w=c.nextSibling;if(o.removeChild(c),w&&w.nodeType===8)if(c=w.data,c==="/$"){if(0<m&&8>m){c=m;var M=o.ownerDocument;if(c&1&&Cu(M.documentElement),c&2&&Cu(M.body),c&4)for(c=M.head,Cu(c),M=c.firstChild;M;){var P=M.nextSibling,$=M.nodeName;M[Ja]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&M.rel.toLowerCase()==="stylesheet"||c.removeChild(M),M=P}}if(b===0){o.removeChild(w),ku(s);return}b--}else c==="$"||c==="$?"||c==="$!"?b++:m=c.charCodeAt(0)-48;else m=0;c=w}while(c);ku(s)}function sg(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":sg(c),Qo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function MI(o,s,c,m){for(;o.nodeType===1;){var b=c;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[Ja])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==b.rel||o.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||o.getAttribute("title")!==(b.title==null?null:b.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(b.src==null?null:b.src)||o.getAttribute("type")!==(b.type==null?null:b.type)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=Vr(o.nextSibling),o===null)break}return null}function OI(o,s,c){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Vr(o.nextSibling),o===null))return null;return o}function lg(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function RI(o,s){var c=o.ownerDocument;if(o.data!=="$?"||c.readyState==="complete")s();else{var m=function(){s(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function Vr(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return o}var ug=null;function fE(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return o;s--}else c==="/$"&&s++}o=o.previousSibling}return null}function hE(o,s,c){switch(s=Ld(c),o){case"html":if(o=s.documentElement,!o)throw Error(r(452));return o;case"head":if(o=s.head,!o)throw Error(r(453));return o;case"body":if(o=s.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Cu(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Qo(o)}var Nr=new Map,mE=new Set;function jd(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ii=K.d;K.d={f:kI,r:PI,D:II,C:LI,L:jI,m:UI,X:FI,S:$I,M:BI};function kI(){var o=Ii.f(),s=Nd();return o||s}function PI(o){var s=ra(o);s!==null&&s.tag===5&&s.type==="form"?Pw(s):Ii.r(o)}var Os=typeof document>"u"?null:document;function pE(o,s,c){var m=Os;if(m&&typeof s=="string"&&s){var b=_r(s);b='link[rel="'+o+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),mE.has(b)||(mE.add(b),o={rel:o,crossOrigin:c,href:s},m.querySelector(b)===null&&(s=m.createElement("link"),jn(s,"link",o),rn(s),m.head.appendChild(s)))}}function II(o){Ii.D(o),pE("dns-prefetch",o,null)}function LI(o,s){Ii.C(o,s),pE("preconnect",o,s)}function jI(o,s,c){Ii.L(o,s,c);var m=Os;if(m&&o&&s){var b='link[rel="preload"][as="'+_r(s)+'"]';s==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+_r(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+_r(c.imageSizes)+'"]')):b+='[href="'+_r(o)+'"]';var w=b;switch(s){case"style":w=Rs(o);break;case"script":w=ks(o)}Nr.has(w)||(o=h({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:o,as:s},c),Nr.set(w,o),m.querySelector(b)!==null||s==="style"&&m.querySelector(Tu(w))||s==="script"&&m.querySelector(Au(w))||(s=m.createElement("link"),jn(s,"link",o),rn(s),m.head.appendChild(s)))}}function UI(o,s){Ii.m(o,s);var c=Os;if(c&&o){var m=s&&typeof s.as=="string"?s.as:"script",b='link[rel="modulepreload"][as="'+_r(m)+'"][href="'+_r(o)+'"]',w=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=ks(o)}if(!Nr.has(w)&&(o=h({rel:"modulepreload",href:o},s),Nr.set(w,o),c.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Au(w)))return}m=c.createElement("link"),jn(m,"link",o),rn(m),c.head.appendChild(m)}}}function $I(o,s,c){Ii.S(o,s,c);var m=Os;if(m&&o){var b=xi(m).hoistableStyles,w=Rs(o);s=s||"default";var M=b.get(w);if(!M){var P={loading:0,preload:null};if(M=m.querySelector(Tu(w)))P.loading=5;else{o=h({rel:"stylesheet",href:o,"data-precedence":s},c),(c=Nr.get(w))&&cg(o,c);var $=M=m.createElement("link");rn($),jn($,"link",o),$._p=new Promise(function(J,le){$.onload=J,$.onerror=le}),$.addEventListener("load",function(){P.loading|=1}),$.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Ud(M,s,m)}M={type:"stylesheet",instance:M,count:1,state:P},b.set(w,M)}}}function FI(o,s){Ii.X(o,s);var c=Os;if(c&&o){var m=xi(c).hoistableScripts,b=ks(o),w=m.get(b);w||(w=c.querySelector(Au(b)),w||(o=h({src:o,async:!0},s),(s=Nr.get(b))&&dg(o,s),w=c.createElement("script"),rn(w),jn(w,"link",o),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function BI(o,s){Ii.M(o,s);var c=Os;if(c&&o){var m=xi(c).hoistableScripts,b=ks(o),w=m.get(b);w||(w=c.querySelector(Au(b)),w||(o=h({src:o,async:!0,type:"module"},s),(s=Nr.get(b))&&dg(o,s),w=c.createElement("script"),rn(w),jn(w,"link",o),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function gE(o,s,c,m){var b=(b=ue.current)?jd(b):null;if(!b)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Rs(c.href),c=xi(b).hoistableStyles,m=c.get(s),m||(m={type:"style",instance:null,count:0,state:null},c.set(s,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=Rs(c.href);var w=xi(b).hoistableStyles,M=w.get(o);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,M),(w=b.querySelector(Tu(o)))&&!w._p&&(M.instance=w,M.state.loading=5),Nr.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Nr.set(o,c),w||qI(b,o,c,M.state))),s&&m===null)throw Error(r(528,""));return M}if(s&&m!==null)throw Error(r(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ks(c),c=xi(b).hoistableScripts,m=c.get(s),m||(m={type:"script",instance:null,count:0,state:null},c.set(s,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Rs(o){return'href="'+_r(o)+'"'}function Tu(o){return'link[rel="stylesheet"]['+o+"]"}function yE(o){return h({},o,{"data-precedence":o.precedence,precedence:null})}function qI(o,s,c,m){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?m.loading=1:(s=o.createElement("link"),m.preload=s,s.addEventListener("load",function(){return m.loading|=1}),s.addEventListener("error",function(){return m.loading|=2}),jn(s,"link",c),rn(s),o.head.appendChild(s))}function ks(o){return'[src="'+_r(o)+'"]'}function Au(o){return"script[async]"+o}function vE(o,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var m=o.querySelector('style[data-href~="'+_r(c.href)+'"]');if(m)return s.instance=m,rn(m),m;var b=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),rn(m),jn(m,"style",b),Ud(m,c.precedence,o),s.instance=m;case"stylesheet":b=Rs(c.href);var w=o.querySelector(Tu(b));if(w)return s.state.loading|=4,s.instance=w,rn(w),w;m=yE(c),(b=Nr.get(b))&&cg(m,b),w=(o.ownerDocument||o).createElement("link"),rn(w);var M=w;return M._p=new Promise(function(P,$){M.onload=P,M.onerror=$}),jn(w,"link",m),s.state.loading|=4,Ud(w,c.precedence,o),s.instance=w;case"script":return w=ks(c.src),(b=o.querySelector(Au(w)))?(s.instance=b,rn(b),b):(m=c,(b=Nr.get(w))&&(m=h({},c),dg(m,b)),o=o.ownerDocument||o,b=o.createElement("script"),rn(b),jn(b,"link",m),o.head.appendChild(b),s.instance=b);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(m=s.instance,s.state.loading|=4,Ud(m,c.precedence,o));return s.instance}function Ud(o,s,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,w=b,M=0;M<m.length;M++){var P=m[M];if(P.dataset.precedence===s)w=P;else if(w!==b)break}w?w.parentNode.insertBefore(o,w.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(o,s.firstChild))}function cg(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function dg(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var $d=null;function xE(o,s,c){if($d===null){var m=new Map,b=$d=new Map;b.set(c,m)}else b=$d,m=b.get(c),m||(m=new Map,b.set(c,m));if(m.has(o))return m;for(m.set(o,null),c=c.getElementsByTagName(o),b=0;b<c.length;b++){var w=c[b];if(!(w[Ja]||w[fn]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var M=w.getAttribute(s)||"";M=o+M;var P=m.get(M);P?P.push(w):m.set(M,[w])}}return m}function bE(o,s,c){o=o.ownerDocument||o,o.head.insertBefore(c,s==="title"?o.querySelector("head > title"):null)}function VI(o,s,c){if(c===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function _E(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Nu=null;function zI(){}function GI(o,s,c){if(Nu===null)throw Error(r(475));var m=Nu;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var b=Rs(c.href),w=o.querySelector(Tu(b));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(m.count++,m=Fd.bind(m),o.then(m,m)),s.state.loading|=4,s.instance=w,rn(w);return}w=o.ownerDocument||o,c=yE(c),(b=Nr.get(b))&&cg(c,b),w=w.createElement("link"),rn(w);var M=w;M._p=new Promise(function(P,$){M.onload=P,M.onerror=$}),jn(w,"link",c),s.instance=w}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(s,o),(o=s.state.preload)&&(s.state.loading&3)===0&&(m.count++,s=Fd.bind(m),o.addEventListener("load",s),o.addEventListener("error",s))}}function HI(){if(Nu===null)throw Error(r(475));var o=Nu;return o.stylesheets&&o.count===0&&fg(o,o.stylesheets),0<o.count?function(s){var c=setTimeout(function(){if(o.stylesheets&&fg(o,o.stylesheets),o.unsuspend){var m=o.unsuspend;o.unsuspend=null,m()}},6e4);return o.unsuspend=s,function(){o.unsuspend=null,clearTimeout(c)}}:null}function Fd(){if(this.count--,this.count===0){if(this.stylesheets)fg(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Bd=null;function fg(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Bd=new Map,s.forEach(KI,o),Bd=null,Fd.call(o))}function KI(o,s){if(!(s.state.loading&4)){var c=Bd.get(o);if(c)var m=c.get(null);else{c=new Map,Bd.set(o,c);for(var b=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var M=b[w];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),m=M)}m&&c.set(null,m)}b=s.instance,M=b.getAttribute("data-precedence"),w=c.get(M)||m,w===m&&c.set(null,b),c.set(M,b),this.count++,m=Fd.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),w?w.parentNode.insertBefore(b,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(b,o.firstChild)),s.state.loading|=4}}var Du={$$typeof:N,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function YI(o,s,c,m,b,w,M,P){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.hiddenUpdates=Bn(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function wE(o,s,c,m,b,w,M,P,$,J,le,he){return o=new YI(o,s,c,M,P,$,J,he),s=1,w===!0&&(s|=24),w=or(3,null,null,s),o.current=w,w.stateNode=o,s=Km(),s.refCount++,o.pooledCache=s,s.refCount++,w.memoizedState={element:m,isDehydrated:c,cache:s},Jm(w),o}function SE(o){return o?(o=cs,o):cs}function EE(o,s,c,m,b,w){b=SE(b),m.context===null?m.context=b:m.pendingContext=b,m=sa(s),m.payload={element:c},w=w===void 0?null:w,w!==null&&(m.callback=w),c=la(o,m,s),c!==null&&(dr(c,o,s),au(c,o,s))}function CE(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<s?c:s}}function hg(o,s){CE(o,s),(o=o.alternate)&&CE(o,s)}function TE(o){if(o.tag===13){var s=us(o,67108864);s!==null&&dr(s,o,67108864),hg(o,67108864)}}var qd=!0;function WI(o,s,c,m){var b=z.T;z.T=null;var w=K.p;try{K.p=2,mg(o,s,c,m)}finally{K.p=w,z.T=b}}function XI(o,s,c,m){var b=z.T;z.T=null;var w=K.p;try{K.p=8,mg(o,s,c,m)}finally{K.p=w,z.T=b}}function mg(o,s,c,m){if(qd){var b=pg(m);if(b===null)tg(o,s,m,Vd,c),NE(o,m);else if(ZI(b,o,s,c,m))m.stopPropagation();else if(NE(o,m),s&4&&-1<JI.indexOf(o)){for(;b!==null;){var w=ra(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var M=xt(w.pendingLanes);if(M!==0){var P=w;for(P.pendingLanes|=2,P.entangledLanes|=2;M;){var $=1<<31-Tt(M);P.entanglements[1]|=$,M&=~$}si(w),(bt&6)===0&&(Td=ae()+500,wu(0))}}break;case 13:P=us(w,2),P!==null&&dr(P,w,2),Nd(),hg(w,2)}if(w=pg(m),w===null&&tg(o,s,m,Vd,c),w===b)break;b=w}b!==null&&m.stopPropagation()}else tg(o,s,m,null,c)}}function pg(o){return o=bm(o),gg(o)}var Vd=null;function gg(o){if(Vd=null,o=vi(o),o!==null){var s=a(o);if(s===null)o=null;else{var c=s.tag;if(c===13){if(o=l(s),o!==null)return o;o=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Vd=o,null}function AE(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case Ye:return 2;case Ae:return 8;case lt:case ct:return 32;case Be:return 268435456;default:return 32}default:return 32}}var yg=!1,_a=null,wa=null,Sa=null,Mu=new Map,Ou=new Map,Ea=[],JI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NE(o,s){switch(o){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":Mu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(s.pointerId)}}function Ru(o,s,c,m,b,w){return o===null||o.nativeEvent!==w?(o={blockedOn:s,domEventName:c,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},s!==null&&(s=ra(s),s!==null&&TE(s)),o):(o.eventSystemFlags|=m,s=o.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),o)}function ZI(o,s,c,m,b){switch(s){case"focusin":return _a=Ru(_a,o,s,c,m,b),!0;case"dragenter":return wa=Ru(wa,o,s,c,m,b),!0;case"mouseover":return Sa=Ru(Sa,o,s,c,m,b),!0;case"pointerover":var w=b.pointerId;return Mu.set(w,Ru(Mu.get(w)||null,o,s,c,m,b)),!0;case"gotpointercapture":return w=b.pointerId,Ou.set(w,Ru(Ou.get(w)||null,o,s,c,m,b)),!0}return!1}function DE(o){var s=vi(o.target);if(s!==null){var c=a(s);if(c!==null){if(s=c.tag,s===13){if(s=l(c),s!==null){o.blockedOn=s,dm(o.priority,function(){if(c.tag===13){var m=cr();m=$l(m);var b=us(c,m);b!==null&&dr(b,c,m),hg(c,m)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function zd(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var c=pg(o.nativeEvent);if(c===null){c=o.nativeEvent;var m=new c.constructor(c.type,c);xm=m,c.target.dispatchEvent(m),xm=null}else return s=ra(c),s!==null&&TE(s),o.blockedOn=c,!1;s.shift()}return!0}function ME(o,s,c){zd(o)&&c.delete(s)}function QI(){yg=!1,_a!==null&&zd(_a)&&(_a=null),wa!==null&&zd(wa)&&(wa=null),Sa!==null&&zd(Sa)&&(Sa=null),Mu.forEach(ME),Ou.forEach(ME)}function Gd(o,s){o.blockedOn===s&&(o.blockedOn=null,yg||(yg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,QI)))}var Hd=null;function OE(o){Hd!==o&&(Hd=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hd===o&&(Hd=null);for(var s=0;s<o.length;s+=3){var c=o[s],m=o[s+1],b=o[s+2];if(typeof m!="function"){if(gg(m||c)===null)continue;break}var w=ra(c);w!==null&&(o.splice(s,3),s-=3,gp(w,{pending:!0,data:b,method:c.method,action:m},m,b))}}))}function ku(o){function s($){return Gd($,o)}_a!==null&&Gd(_a,o),wa!==null&&Gd(wa,o),Sa!==null&&Gd(Sa,o),Mu.forEach(s),Ou.forEach(s);for(var c=0;c<Ea.length;c++){var m=Ea[c];m.blockedOn===o&&(m.blockedOn=null)}for(;0<Ea.length&&(c=Ea[0],c.blockedOn===null);)DE(c),c.blockedOn===null&&Ea.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var b=c[m],w=c[m+1],M=b[hn]||null;if(typeof w=="function")M||OE(c);else if(M){var P=null;if(w&&w.hasAttribute("formAction")){if(b=w,M=w[hn]||null)P=M.formAction;else if(gg(b)!==null)continue}else P=M.action;typeof P=="function"?c[m+1]=P:(c.splice(m,3),m-=3),OE(c)}}}function vg(o){this._internalRoot=o}Kd.prototype.render=vg.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(r(409));var c=s.current,m=cr();EE(c,m,o,s,null,null)},Kd.prototype.unmount=vg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;EE(o.current,2,null,o,null,null),Nd(),s[ta]=null}};function Kd(o){this._internalRoot=o}Kd.prototype.unstable_scheduleHydration=function(o){if(o){var s=Lc();o={blockedOn:null,target:o,priority:s};for(var c=0;c<Ea.length&&s!==0&&s<Ea[c].priority;c++);Ea.splice(c,0,o),c===0&&DE(o)}};var RE=e.version;if(RE!=="19.1.0")throw Error(r(527,RE,"19.1.0"));K.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(s),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var eL={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{nt=Yd.inject(eL),Xe=Yd}catch{}}return Iu.createRoot=function(o,s){if(!i(o))throw Error(r(299));var c=!1,m="",b=Yw,w=Ww,M=Xw,P=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(M=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(P=s.unstable_transitionCallbacks)),s=wE(o,1,!1,null,null,c,m,b,w,M,P,null),o[ta]=s.current,eg(o),new vg(s)},Iu.hydrateRoot=function(o,s,c){if(!i(o))throw Error(r(299));var m=!1,b="",w=Yw,M=Ww,P=Xw,$=null,J=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&($=c.unstable_transitionCallbacks),c.formState!==void 0&&(J=c.formState)),s=wE(o,1,!0,s,c??null,m,b,w,M,P,$,J),s.context=SE(null),c=s.current,m=cr(),m=$l(m),b=sa(m),b.callback=null,la(c,b,m),c=m,s.current.lanes=c,Dt(s,c),si(s),o[ta]=s.current,eg(o),new Kd(s)},Iu.version="19.1.0",Iu}var qE;function mL(){if(qE)return wg.exports;qE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wg.exports=hL(),wg.exports}var pL=mL();const gL=Qr(pL);var ID=PD();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rc.apply(this,arguments)}var Ia;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ia||(Ia={}));const VE="popstate";function yL(t){t===void 0&&(t={});function e(i,a){let{pathname:l="/",search:u="",hash:f=""}=qo(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Dv("",{pathname:l,search:u,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let f=i.location.href,d=f.indexOf("#");u=d===-1?f:f.slice(0,d)}return u+"#"+(typeof a=="string"?a:_f(a))}function r(i,a){Z0(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return xL(e,n,r,t)}function Qt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Z0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vL(){return Math.random().toString(36).substr(2,8)}function zE(t,e){return{usr:t.state,key:t.key,idx:e}}function Dv(t,e,n,r){return n===void 0&&(n=null),rc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qo(e):e,{state:n,key:e&&e.key||r||vL()})}function _f(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xL(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,u=Ia.Pop,f=null,d=h();d==null&&(d=0,l.replaceState(rc({},l.state,{idx:d}),""));function h(){return(l.state||{idx:null}).idx}function v(){u=Ia.Pop;let C=h(),T=C==null?null:C-d;d=C,f&&f({action:u,location:E.location,delta:T})}function x(C,T){u=Ia.Push;let R=Dv(E.location,C,T);n&&n(R,C),d=h()+1;let N=zE(R,d),O=E.createHref(R);try{l.pushState(N,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(O)}a&&f&&f({action:u,location:E.location,delta:1})}function _(C,T){u=Ia.Replace;let R=Dv(E.location,C,T);n&&n(R,C),d=h();let N=zE(R,d),O=E.createHref(R);l.replaceState(N,"",O),a&&f&&f({action:u,location:E.location,delta:0})}function S(C){let T=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof C=="string"?C:_f(C);return R=R.replace(/ $/,"%20"),Qt(T,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,T)}let E={get action(){return u},get location(){return t(i,l)},listen(C){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(VE,v),f=C,()=>{i.removeEventListener(VE,v),f=null}},createHref(C){return e(i,C)},createURL:S,encodeLocation(C){let T=S(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:_,go(C){return l.go(C)}};return E}var GE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(GE||(GE={}));function bL(t,e,n){return n===void 0&&(n="/"),_L(t,e,n)}function _L(t,e,n,r){let i=typeof e=="string"?qo(e):e,a=Q0(i.pathname||"/",n);if(a==null)return null;let l=LD(t);wL(l);let u=null;for(let f=0;u==null&&f<l.length;++f){let d=PL(a);u=OL(l[f],d)}return u}function LD(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,l,u)=>{let f={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(Qt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let d=La([r,f.relativePath]),h=n.concat(f);a.children&&a.children.length>0&&(Qt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),LD(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:DL(d,a.index),routesMeta:h})};return t.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,l);else for(let f of jD(a.path))i(a,l,f)}),e}function jD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=jD(r.join("/")),u=[];return u.push(...l.map(f=>f===""?a:[a,f].join("/"))),i&&u.push(...l),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function wL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ML(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SL=/^:[\w-]+$/,EL=3,CL=2,TL=1,AL=10,NL=-2,HE=t=>t==="*";function DL(t,e){let n=t.split("/"),r=n.length;return n.some(HE)&&(r+=NL),e&&(r+=CL),n.filter(i=>!HE(i)).reduce((i,a)=>i+(SL.test(a)?EL:a===""?TL:AL),r)}function ML(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function OL(t,e,n){let{routesMeta:r}=t,i={},a="/",l=[];for(let u=0;u<r.length;++u){let f=r[u],d=u===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",v=RL({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},h),x=f.route;if(!v)return null;Object.assign(i,v.params),l.push({params:i,pathname:La([a,v.pathname]),pathnameBase:UL(La([a,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(a=La([a,v.pathnameBase]))}return l}function RL(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,h,v)=>{let{paramName:x,isOptional:_}=h;if(x==="*"){let E=u[v]||"";l=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const S=u[v];return _&&!S?d[x]=void 0:d[x]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:t}}function kL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Z0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function PL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Z0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Q0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function IL(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qo(t):t;return{pathname:n?n.startsWith("/")?n:LL(n,e):e,search:$L(r),hash:FL(i)}}function LL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Tg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ex(t,e){let n=jL(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function tx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qo(t):(i=rc({},t),Qt(!i.pathname||!i.pathname.includes("?"),Tg("?","pathname","search",i)),Qt(!i.pathname||!i.pathname.includes("#"),Tg("#","pathname","hash",i)),Qt(!i.search||!i.search.includes("#"),Tg("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,u;if(l==null)u=n;else{let v=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;i.pathname=x.join("/")}u=v>=0?e[v]:"/"}let f=IL(i,u),d=l&&l!=="/"&&l.endsWith("/"),h=(a||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(d||h)&&(f.pathname+="/"),f}const La=t=>t.join("/").replace(/\/\/+/g,"/"),UL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$L=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const UD=["post","put","patch","delete"];new Set(UD);const qL=["get",...UD];new Set(qL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ic(){return ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ic.apply(this,arguments)}const nx=A.createContext(null),VL=A.createContext(null),Ba=A.createContext(null),ph=A.createContext(null),Ji=A.createContext({outlet:null,matches:[],isDataRoute:!1}),$D=A.createContext(null);function zL(t,e){let{relative:n}=e===void 0?{}:e;wl()||Qt(!1);let{basename:r,navigator:i}=A.useContext(Ba),{hash:a,pathname:l,search:u}=BD(t,{relative:n}),f=l;return r!=="/"&&(f=l==="/"?r:La([r,l])),i.createHref({pathname:f,search:u,hash:a})}function wl(){return A.useContext(ph)!=null}function Zi(){return wl()||Qt(!1),A.useContext(ph).location}function FD(t){A.useContext(Ba).static||A.useLayoutEffect(t)}function Vo(){let{isDataRoute:t}=A.useContext(Ji);return t?ij():GL()}function GL(){wl()||Qt(!1);let t=A.useContext(nx),{basename:e,future:n,navigator:r}=A.useContext(Ba),{matches:i}=A.useContext(Ji),{pathname:a}=Zi(),l=JSON.stringify(ex(i,n.v7_relativeSplatPath)),u=A.useRef(!1);return FD(()=>{u.current=!0}),A.useCallback(function(d,h){if(h===void 0&&(h={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let v=tx(d,JSON.parse(l),a,h.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:La([e,v.pathname])),(h.replace?r.replace:r.push)(v,h.state,h)},[e,r,l,a,t])}function HL(){let{matches:t}=A.useContext(Ji),e=t[t.length-1];return e?e.params:{}}function BD(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Ba),{matches:i}=A.useContext(Ji),{pathname:a}=Zi(),l=JSON.stringify(ex(i,r.v7_relativeSplatPath));return A.useMemo(()=>tx(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function KL(t,e){return YL(t,e)}function YL(t,e,n,r){wl()||Qt(!1);let{navigator:i}=A.useContext(Ba),{matches:a}=A.useContext(Ji),l=a[a.length-1],u=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let d=Zi(),h;if(e){var v;let C=typeof e=="string"?qo(e):e;f==="/"||(v=C.pathname)!=null&&v.startsWith(f)||Qt(!1),h=C}else h=d;let x=h.pathname||"/",_=x;if(f!=="/"){let C=f.replace(/^\//,"").split("/");_="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=bL(t,{pathname:_}),E=QL(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:La([f,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:La([f,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,n,r);return e&&E?A.createElement(ph.Provider,{value:{location:ic({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ia.Pop}},E):E}function WL(){let t=rj(),e=BL(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,null)}const XL=A.createElement(WL,null);class JL extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Ji.Provider,{value:this.props.routeContext},A.createElement($D.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZL(t){let{routeContext:e,match:n,children:r}=t,i=A.useContext(nx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Ji.Provider,{value:e},r)}function QL(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let h=l.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);h>=0||Qt(!1),l=l.slice(0,Math.min(l.length,h+1))}let f=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<l.length;h++){let v=l[h];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=h),v.route.id){let{loaderData:x,errors:_}=n,S=v.route.loader&&x[v.route.id]===void 0&&(!_||_[v.route.id]===void 0);if(v.route.lazy||S){f=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((h,v,x)=>{let _,S=!1,E=null,C=null;n&&(_=u&&v.route.id?u[v.route.id]:void 0,E=v.route.errorElement||XL,f&&(d<0&&x===0?(aj("route-fallback"),S=!0,C=null):d===x&&(S=!0,C=v.route.hydrateFallbackElement||null)));let T=e.concat(l.slice(0,x+1)),R=()=>{let N;return _?N=E:S?N=C:v.route.Component?N=A.createElement(v.route.Component,null):v.route.element?N=v.route.element:N=h,A.createElement(ZL,{match:v,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:N})};return n&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?A.createElement(JL,{location:n.location,revalidation:n.revalidation,component:E,error:_,children:R(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):R()},null)}var qD=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qD||{}),VD=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(VD||{});function ej(t){let e=A.useContext(nx);return e||Qt(!1),e}function tj(t){let e=A.useContext(VL);return e||Qt(!1),e}function nj(t){let e=A.useContext(Ji);return e||Qt(!1),e}function zD(t){let e=nj(),n=e.matches[e.matches.length-1];return n.route.id||Qt(!1),n.route.id}function rj(){var t;let e=A.useContext($D),n=tj(),r=zD();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ij(){let{router:t}=ej(qD.UseNavigateStable),e=zD(VD.UseNavigateStable),n=A.useRef(!1);return FD(()=>{n.current=!0}),A.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ic({fromRouteId:e},a)))},[t,e])}const KE={};function aj(t,e,n){KE[t]||(KE[t]=!0)}function oj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ao(t){let{to:e,replace:n,state:r,relative:i}=t;wl()||Qt(!1);let{future:a,static:l}=A.useContext(Ba),{matches:u}=A.useContext(Ji),{pathname:f}=Zi(),d=Vo(),h=tx(e,ex(u,a.v7_relativeSplatPath),f,i==="path"),v=JSON.stringify(h);return A.useEffect(()=>d(JSON.parse(v),{replace:n,state:r,relative:i}),[d,v,i,n,r]),null}function Tn(t){Qt(!1)}function sj(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ia.Pop,navigator:a,static:l=!1,future:u}=t;wl()&&Qt(!1);let f=e.replace(/^\/*/,"/"),d=A.useMemo(()=>({basename:f,navigator:a,static:l,future:ic({v7_relativeSplatPath:!1},u)}),[f,u,a,l]);typeof r=="string"&&(r=qo(r));let{pathname:h="/",search:v="",hash:x="",state:_=null,key:S="default"}=r,E=A.useMemo(()=>{let C=Q0(h,f);return C==null?null:{location:{pathname:C,search:v,hash:x,state:_,key:S},navigationType:i}},[f,h,v,x,_,S,i]);return E==null?null:A.createElement(Ba.Provider,{value:d},A.createElement(ph.Provider,{children:n,value:E}))}function GD(t){let{children:e,location:n}=t;return KL(Mv(e),n)}new Promise(()=>{});function Mv(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,Mv(r.props.children,a));return}r.type!==Tn&&Qt(!1),!r.props.index||!r.props.children||Qt(!1);let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Mv(r.props.children,a)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ov(){return Ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ov.apply(this,arguments)}function lj(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cj(t,e){return t.button===0&&(!e||e==="_self")&&!uj(t)}const dj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fj="6";try{window.__reactRouterVersion=fj}catch{}const hj="startTransition",YE=uL[hj];function mj(t){let{basename:e,children:n,future:r,window:i}=t,a=A.useRef();a.current==null&&(a.current=yL({window:i,v5Compat:!0}));let l=a.current,[u,f]=A.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=A.useCallback(v=>{d&&YE?YE(()=>f(v)):f(v)},[f,d]);return A.useLayoutEffect(()=>l.listen(h),[l,h]),A.useEffect(()=>oj(r),[r]),A.createElement(sj,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const pj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ln=A.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:l,state:u,target:f,to:d,preventScrollReset:h,viewTransition:v}=e,x=lj(e,dj),{basename:_}=A.useContext(Ba),S,E=!1;if(typeof d=="string"&&gj.test(d)&&(S=d,pj))try{let N=new URL(window.location.href),O=d.startsWith("//")?new URL(N.protocol+d):new URL(d),D=Q0(O.pathname,_);O.origin===N.origin&&D!=null?d=D+O.search+O.hash:E=!0}catch{}let C=zL(d,{relative:i}),T=yj(d,{replace:l,state:u,target:f,preventScrollReset:h,relative:i,viewTransition:v});function R(N){r&&r(N),N.defaultPrevented||T(N)}return A.createElement("a",Ov({},x,{href:S||C,onClick:E||a?r:R,ref:n,target:f}))});var WE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(WE||(WE={}));var XE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(XE||(XE={}));function yj(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:l,viewTransition:u}=e===void 0?{}:e,f=Vo(),d=Zi(),h=BD(t,{relative:l});return A.useCallback(v=>{if(cj(v,n)){v.preventDefault();let x=r!==void 0?r:_f(d)===_f(h);f(t,{replace:x,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[d,f,h,r,i,n,t,a,l,u])}const vj=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),vc=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),gh=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),hi=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})}),il=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),xj=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),rx=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),yh=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),ix=t=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),xc=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),Zs=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),bj=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2s2-.9 2-2V5c0-1.1-.9-2-2-2zM6 7c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2s2-.9 2-2V9c0-1.1-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2s2-.9 2-2V9c0-1.1-.9-2-2-2z"})}),HD=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"})}),KD=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25.75L17.25 15m0 0L21 12.75M17.25 15V3"})}),vh="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125V5.25A2.25 2.25 0 0011.25 3H6.75A2.25 2.25 0 004.5 5.25v13.5A2.25 2.25 0 006.75 21h10.5A2.25 2.25 0 0019.5 18.75V14.25M19.5 14.25L13.5 7.125",xh=({className:t,...e})=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`flex-shrink-0 ${t||""}`,...e,children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:vh}),p.jsx("text",{x:"50%",y:"65%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"6.5",fontWeight:"bold",fill:"currentColor",stroke:"none",children:"PDF"})]}),bh=({className:t,...e})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`flex-shrink-0 ${t||""}`,...e,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0L22.5 12m-20.25 6H22.5a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0022.5 4.5H3.75A2.25 2.25 0 001.5 6.75v11.25c0 1.24 1.01 2.25 2.25 2.25z"})}),_h=({className:t,...e})=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`flex-shrink-0 ${t||""}`,...e,children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:vh}),p.jsx("text",{x:"50%",y:"65%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"8",fontWeight:"bold",fill:"currentColor",stroke:"none",children:"W"})]}),wh=({className:t,...e})=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`flex-shrink-0 ${t||""}`,...e,children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:vh}),p.jsx("line",{x1:"8",y1:"13",x2:"16",y2:"13",strokeWidth:"1",stroke:"currentColor"}),p.jsx("line",{x1:"8",y1:"16",x2:"16",y2:"16",strokeWidth:"1",stroke:"currentColor"}),p.jsx("line",{x1:"8",y1:"19",x2:"13",y2:"19",strokeWidth:"1",stroke:"currentColor"})]}),Sh=({className:t,...e})=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`flex-shrink-0 ${t||""}`,...e,children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:vh}),p.jsx("text",{x:"50%",y:"65%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"9",fontWeight:"bold",fill:"currentColor",stroke:"none",children:"?"})]}),ax=({className:t,...e})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15",fill:"none",className:`flex-shrink-0 ${t||""}`,...e,children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 1.5C1 0.671573 1.67157 0 2.5 0H10.7071L14 3.29289V13.5C14 14.3284 13.3284 15 12.5 15H2.5C1.67157 15 1 14.3284 1 13.5V1.5ZM3 7.29289V6H2V7.70711L2.79289 8.5L2 9.29289V11H3V9.70711L3.5 9.20711L4 9.70711V11H5V9.29289L4.20711 8.5L5 7.70711V6H4V7.29289L3.5 7.79289L3 7.29289ZM6 6H7V10H9V11H6V6ZM13 6H10V9H12V10H10V11H13V8H11V7H13V6Z",fill:"currentColor"})}),ox=({className:t,...e})=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15",fill:"none",className:`flex-shrink-0 ${t||""}`,...e,children:[p.jsx("path",{d:"M3 8H3.5C3.77614 8 4 7.77614 4 7.5C4 7.22386 3.77614 7 3.5 7H3V8Z",fill:"currentColor"}),p.jsx("path",{d:"M7 8H7.5C7.77614 8 8 7.77614 8 7.5C8 7.22386 7.77614 7 7.5 7H7V8Z",fill:"currentColor"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 1.5C1 0.671573 1.67157 0 2.5 0H10.7071L14 3.29289V13.5C14 14.3284 13.3284 15 12.5 15H2.5C1.67157 15 1 14.3284 1 13.5V1.5ZM2 6H3.5C4.32843 6 5 6.67157 5 7.5C5 8.32843 4.32843 9 3.5 9H3V11H2V6ZM6 6H7.5C8.32843 6 9 6.67157 9 7.5C9 8.32843 8.32843 9 7.5 9H7V11H6V6ZM11 11H12V7H13V6H10V7H11V11Z",fill:"currentColor"})]}),YD=t=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...t,children:[p.jsx("path",{d:"M10 11L14 15M14 11L10 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M12.0627 6.06274L11.9373 5.93726C11.5914 5.59135 11.4184 5.4184 11.2166 5.29472C11.0376 5.18506 10.8425 5.10425 10.6385 5.05526C10.4083 5 10.1637 5 9.67452 5H6.2C5.0799 5 4.51984 5 4.09202 5.21799C3.71569 5.40973 3.40973 5.71569 3.21799 6.09202C3 6.51984 3 7.07989 3 8.2V15.8C3 16.9201 3 17.4802 3.21799 17.908C3.40973 18.2843 3.71569 18.5903 4.09202 18.782C4.51984 19 5.07989 19 6.2 19H17.8C18.9201 19 19.4802 19 19.908 18.782C20.2843 18.5903 20.5903 18.2843 20.782 17.908C21 17.4802 21 16.9201 21 15.8V10.2C21 9.0799 21 8.51984 20.782 8.09202C20.5903 7.71569 20.2843 7.40973 19.908 7.21799C19.4802 7 18.9201 7 17.8 7H14.3255C13.8363 7 13.5917 7 13.3615 6.94474C13.1575 6.89575 12.9624 6.81494 12.7834 6.70528C12.5816 6.5816 12.4086 6.40865 12.0627 6.06274Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),_j=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...t,children:p.jsx("path",{d:"M3 8.2C3 7.07989 3 6.51984 3.21799 6.09202C3.40973 5.71569 3.71569 5.40973 4.09202 5.21799C4.51984 5 5.0799 5 6.2 5H9.67452C10.1637 5 10.4083 5 10.6385 5.05526C10.8425 5.10425 11.0376 5.18506 11.2166 5.29472C11.4184 5.4184 11.5914 5.59135 11.9373 5.93726L12.0627 6.06274C12.4086 6.40865 12.5816 6.5816 12.7834 6.70528C12.9624 6.81494 13.1575 6.89575 13.3615 6.94474C13.5917 7 13.8363 7 14.3255 7H17.8C18.9201 7 19.4802 7 19.908 7.21799C20.2843 7.40973 20.5903 7.71569 20.782 8.09202C21 8.51984 21 9.0799 21 10.2V15.8C21 16.9201 21 17.4802 20.782 17.908C20.5903 18.2843 20.2843 18.5903 19.908 18.782C19.4802 19 18.9201 19 17.8 19H6.2C5.07989 19 4.51984 19 4.09202 18.782C3.71569 18.5903 3.40973 18.2843 3.21799 17.908C3 17.4802 3 16.9201 3 15.8V8.2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),wf=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),yn=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),WD=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a2.25 2.25 0 01-4.5 0m4.5 0a2.25 2.25 0 00-4.5 0M3.75 6H7.5m3 12h9.75m-9.75 0a2.25 2.25 0 01-4.5 0m4.5 0a2.25 2.25 0 00-4.5 0m-3.75 0H7.5m9-6h3.75m-3.75 0a2.25 2.25 0 01-4.5 0m4.5 0a2.25 2.25 0 00-4.5 0m-6.75 0H7.5"})}),qa=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),zi=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c1.153 0 2.243.098 3.223.263m3.789 0c1.153 0 2.243.098 3.223.263m0 0L12.75 2.25M12 2.25L11.25 5.79M12 2.25v2.25m0 0l-.75 3.5M12 2.25L12.75 5.79M6.75 5.79L5.25 2.25m0 0l-1.5 3.5M5.25 2.25v3.5"})}),Eh=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),XD=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),No=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),JD=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Sl=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),mi=t=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),ZD=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),wj=t=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -0.5 25 25",fill:"none",...t,children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 7V17C3.5 18.1046 4.39543 19 5.5 19H19.5C20.6046 19 21.5 18.1046 21.5 17V7C21.5 5.89543 20.6046 5 19.5 5H5.5C4.39543 5 3.5 5.89543 3.5 7Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M15.5 10H18.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),p.jsx("path",{d:"M15.5 13H18.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.5 10C11.5 11.1046 10.6046 12 9.5 12C8.39543 12 7.5 11.1046 7.5 10C7.5 8.89543 8.39543 8 9.5 8C10.0304 8 10.5391 8.21071 10.9142 8.58579C11.2893 8.96086 11.5 9.46957 11.5 10Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M5.5 16C8.283 12.863 11.552 13.849 13.5 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),Sj=t=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 100 15 7.5 7.5 0 000-15z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 5.106a2.25 2.25 0 010 4.288M12.75 5.106l-2.652 2.652M12.75 5.106L10.1 2.454M10.102 2.454A2.25 2.25 0 015.596 5.106M5.596 5.106A2.25 2.25 0 012.946 2.454M5.596 5.106L2.946 2.454M12.75 19.506v-4.404a2.25 2.25 0 00-1.404-2.068M12.75 19.506l-2.652-2.652M12.75 19.506l2.652-2.652M12.75 19.506L15.404 22.158M15.404 22.158A2.25 2.25 0 0119.91 19.506M19.91 19.506A2.25 2.25 0 0115.404 22.158M19.91 19.506l2.652 2.652M19.91 19.506l-2.652 2.652"})]}),Ej=t=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.646.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 1.255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.333.183-.582.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.758 6.758 0 010-1.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),El=t=>p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:p.jsx("path",{d:"M14 13V12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12V13M10.5 16H13.5C13.9659 16 14.1989 16 14.3827 15.9239C14.6277 15.8224 14.8224 15.6277 14.9239 15.3827C15 15.1989 15 14.9659 15 14.5C15 14.0341 15 13.8011 14.9239 13.6173C14.8224 13.3723 14.6277 13.1776 14.3827 13.0761C14.1989 13 13.9659 13 13.5 13H10.5C10.0341 13 9.80109 13 9.61732 13.0761C9.37229 13.1776 9.17761 13.3723 9.07612 13.6173C9 13.8011 9 14.0341 9 14.5C9 14.9659 9 15.1989 9.07612 15.3827C9.17761 15.6277 9.37229 15.8224 9.61732 15.9239C9.80109 16 10.0341 16 10.5 16ZM12.0627 6.06274L11.9373 5.93726C11.5914 5.59135 11.4184 5.4184 11.2166 5.29472C11.0376 5.18506 10.8425 5.10425 10.6385 5.05526C10.4083 5 10.1637 5 9.67452 5H6.2C5.0799 5 4.51984 5 4.09202 5.21799C3.71569 5.40973 3.40973 5.71569 3.21799 6.09202C3 6.51984 3 7.07989 3 8.2V15.8C3 16.9201 3 17.4802 3.21799 17.908C3.40973 18.2843 3.71569 18.5903 4.09202 18.782C4.51984 19 5.07989 19 6.2 19H17.8C18.9201 19 19.4802 19 19.908 18.782C20.2843 18.5903 20.5903 18.2843 20.782 17.908C21 17.4802 21 16.9201 21 15.8V10.2C21 9.0799 21 8.51984 20.782 8.09202C20.5903 7.71569 20.2843 7.40973 19.908 7.21799C19.4802 7 18.9201 7 17.8 7H14.3255C13.8363 7 13.5917 7 13.3615 6.94474C13.1575 6.89575 12.9624 6.81494 12.7834 6.70528C12.5816 6.5816 12.4086 6.40865 12.0627 6.06274Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Cj="modulepreload",Tj=function(t){return"/"+t},JE={},bc=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(n.map(d=>{if(d=Tj(d),d in JE)return;JE[d]=!0;const h=d.endsWith(".css"),v=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":Cj,h||(x.as="script"),x.crossOrigin="",x.href=d,f&&x.setAttribute("nonce",f),document.head.appendChild(x),h)return new Promise((_,S)=>{x.addEventListener("load",_),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})},Aj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bc(async()=>{const{default:r}=await Promise.resolve().then(()=>Cl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class sx extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Nj extends sx{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dj extends sx{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Mj extends sx{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Rv;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Rv||(Rv={}));var Oj=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(h){try{d(r.next(h))}catch(v){l(v)}}function f(h){try{d(r.throw(h))}catch(v){l(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((r=r.apply(t,e||[])).next())})};class Rj{constructor(e,{headers:n={},customFetch:r,region:i=Rv.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Aj(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Oj(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:l}=n;let u={},{region:f}=n;f||(f=this.region),f&&f!=="any"&&(u["x-region"]=f);let d;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(u["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(u["Content-Type"]="application/json",d=JSON.stringify(l)));const h=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:d}).catch(S=>{throw new Nj(S)}),v=h.headers.get("x-relay-error");if(v&&v==="true")throw new Dj(h);if(!h.ok)throw new Mj(h);let x=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return x==="application/json"?_=yield h.json():x==="application/octet-stream"?_=yield h.blob():x==="text/event-stream"?_=h:x==="multipart/form-data"?_=yield h.formData():_=yield h.text(),{data:_,error:null}}catch(i){return{data:null,error:i}}})}}var Cn={},Ps={},Is={},Ls={},js={},Us={},kj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},al=kj();const Pj=al.fetch,QD=al.fetch.bind(al),eM=al.Headers,Ij=al.Request,Lj=al.Response,Cl=Object.freeze(Object.defineProperty({__proto__:null,Headers:eM,Request:Ij,Response:Lj,default:QD,fetch:Pj},Symbol.toStringTag,{value:"Module"})),jj=aL(Cl);var Wd={},ZE;function tM(){if(ZE)return Wd;ZE=1,Object.defineProperty(Wd,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Wd.default=t,Wd}var QE;function nM(){if(QE)return Us;QE=1;var t=Us&&Us.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Us,"__esModule",{value:!0});const e=t(jj),n=t(tM());class r{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=Object.assign({},this.headers),this.headers[a]=l,this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var h,v,x;let _=null,S=null,E=null,C=d.status,T=d.statusText;if(d.ok){if(this.method!=="HEAD"){const D=await d.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=D:S=JSON.parse(D))}const N=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),O=(v=d.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");N&&O&&O.length>1&&(E=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(_={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,E=null,C=406,T="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const N=await d.text();try{_=JSON.parse(N),Array.isArray(_)&&d.status===404&&(S=[],_=null,C=200,T="OK")}catch{d.status===404&&N===""?(C=204,T="No Content"):_={message:N}}if(_&&this.isMaybeSingle&&(!((x=_==null?void 0:_.details)===null||x===void 0)&&x.includes("0 rows"))&&(_=null,C=200,T="OK"),_&&this.shouldThrowOnError)throw new n.default(_)}return{error:_,data:S,count:E,status:C,statusText:T}});return this.shouldThrowOnError||(f=f.catch(d=>{var h,v,x;return{error:{message:`${(h=d==null?void 0:d.name)!==null&&h!==void 0?h:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(v=d==null?void 0:d.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(x=d==null?void 0:d.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),f.then(a,l)}returns(){return this}overrideTypes(){return this}}return Us.default=r,Us}var eC;function rM(){if(eC)return js;eC=1;var t=js&&js.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js,"__esModule",{value:!0});const e=t(nM());class n extends e.default{select(i){let a=!1;const l=(i??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:a=!0,nullsFirst:l,foreignTable:u,referencedTable:f=u}={}){const d=f?`${f}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,a,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"offset":`${u}.offset`,d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:a=!1,settings:l=!1,buffers:u=!1,wal:f=!1,format:d="text"}={}){var h;const v=[i?"analyze":null,a?"verbose":null,l?"settings":null,u?"buffers":null,f?"wal":null].filter(Boolean).join("|"),x=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${x}"; options=${v};`,d==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return js.default=n,js}var tC;function lx(){if(tC)return Ls;tC=1;var t=Ls&&Ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ls,"__esModule",{value:!0});const e=t(rM());class n extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:l,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${f}fts${d}.${a}`),this}match(i){return Object.entries(i).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(i,a,l){return this.url.searchParams.append(i,`not.${a}.${l}`),this}or(i,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,a,l){return this.url.searchParams.append(i,`${a}.${l}`),this}}return Ls.default=n,Ls}var nC;function iM(){if(nC)return Is;nC=1;var t=Is&&Is.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Is,"__esModule",{value:!0});const e=t(lx());class n{constructor(i,{headers:a={},schema:l,fetch:u}){this.url=i,this.headers=a,this.schema=l,this.fetch=u}select(i,{head:a=!1,count:l}={}){const u=a?"HEAD":"GET";let f=!1;const d=(i??"*").split("").map(h=>/\s/.test(h)&&!f?"":(h==='"'&&(f=!f),h)).join("");return this.url.searchParams.set("select",d),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:a,defaultToNull:l=!0}={}){const u="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),a&&f.push(`count=${a}`),l||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(i)){const d=i.reduce((h,v)=>h.concat(Object.keys(v)),[]);if(d.length>0){const h=[...new Set(d)].map(v=>`"${v}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:a,ignoreDuplicates:l=!1,count:u,defaultToNull:f=!0}={}){const d="POST",h=[`resolution=${l?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&h.push(this.headers.Prefer),u&&h.push(`count=${u}`),f||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(i)){const v=i.reduce((x,_)=>x.concat(Object.keys(_)),[]);if(v.length>0){const x=[...new Set(v)].map(_=>`"${_}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:a}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const a="DELETE",l=[];return i&&l.push(`count=${i}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Is.default=n,Is}var Lu={},ju={},rC;function Uj(){return rC||(rC=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.version=void 0,ju.version="0.0.0-automated"),ju}var iC;function $j(){if(iC)return Lu;iC=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.DEFAULT_HEADERS=void 0;const t=Uj();return Lu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Lu}var aC;function Fj(){if(aC)return Ps;aC=1;var t=Ps&&Ps.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ps,"__esModule",{value:!0});const e=t(iM()),n=t(lx()),r=$j();class i{constructor(l,{headers:u={},schema:f,fetch:d}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),u),this.schemaName=f,this.fetch=d}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:d=!1,count:h}={}){let v;const x=new URL(`${this.url}/rpc/${l}`);let _;f||d?(v=f?"HEAD":"GET",Object.entries(u).filter(([E,C])=>C!==void 0).map(([E,C])=>[E,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([E,C])=>{x.searchParams.append(E,C)})):(v="POST",_=u);const S=Object.assign({},this.headers);return h&&(S.Prefer=`count=${h}`),new n.default({method:v,url:x,headers:S,schema:this.schemaName,body:_,fetch:this.fetch,allowEmpty:!1})}}return Ps.default=i,Ps}var oC;function Bj(){if(oC)return Cn;oC=1;var t=Cn&&Cn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.PostgrestError=Cn.PostgrestBuilder=Cn.PostgrestTransformBuilder=Cn.PostgrestFilterBuilder=Cn.PostgrestQueryBuilder=Cn.PostgrestClient=void 0;const e=t(Fj());Cn.PostgrestClient=e.default;const n=t(iM());Cn.PostgrestQueryBuilder=n.default;const r=t(lx());Cn.PostgrestFilterBuilder=r.default;const i=t(rM());Cn.PostgrestTransformBuilder=i.default;const a=t(nM());Cn.PostgrestBuilder=a.default;const l=t(tM());return Cn.PostgrestError=l.default,Cn.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:l.default},Cn}var qj=Bj();const Vj=Qr(qj),{PostgrestClient:zj,PostgrestQueryBuilder:Kte,PostgrestFilterBuilder:Yte,PostgrestTransformBuilder:Wte,PostgrestBuilder:Xte,PostgrestError:Jte}=Vj;let kv;typeof window>"u"?kv=require("ws"):kv=window.WebSocket;const Gj="2.11.10",Hj={"X-Client-Info":`realtime-js/${Gj}`},Kj="1.0.0",aM=1e4,Yj=1e3;var Qs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Qs||(Qs={}));var Kn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Kn||(Kn={}));var Hr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Hr||(Hr={}));var Pv;(function(t){t.websocket="websocket"})(Pv||(Pv={}));var So;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(So||(So={}));class Wj{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+i));l=l+i;const f=r.decode(e.slice(l,l+a));l=l+a;const d=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:f,payload:d}}}class oM{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ot||(Ot={}));const sC=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,l)=>(a[l]=Xj(l,t,e,i),a),{})},Xj=(t,e,n,r)=>{const i=e.find(u=>u.name===t),a=i==null?void 0:i.type,l=n[t];return a&&!r.includes(a)?sM(a,l):Iv(l)},sM=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return eU(e,n)}switch(t){case Ot.bool:return Jj(e);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return Zj(e);case Ot.json:case Ot.jsonb:return Qj(e);case Ot.timestamp:return tU(e);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return Iv(e);default:return Iv(e)}},Iv=t=>t,Jj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Zj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Qj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},eU=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>sM(e,u))}return t},tU=t=>typeof t=="string"?t.replace(" ","T"):t,lM=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ag{constructor(e,n,r={},i=aM){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var lC;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(lC||(lC={}));class Qu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qu.syncState(this.state,i,a,l),this.pendingDiffs.forEach(f=>{this.state=Qu.syncDiff(this.state,f,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Qu.syncDiff(this.state,i,a,l),u())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const a=this.cloneDeep(e),l=this.transformState(n),u={},f={};return this.map(a,(d,h)=>{l[d]||(f[d]=h)}),this.map(l,(d,h)=>{const v=a[d];if(v){const x=h.map(C=>C.presence_ref),_=v.map(C=>C.presence_ref),S=h.filter(C=>_.indexOf(C.presence_ref)<0),E=v.filter(C=>x.indexOf(C.presence_ref)<0);S.length>0&&(u[d]=S),E.length>0&&(f[d]=E)}else u[d]=h}),this.syncDiff(a,{joins:u,leaves:f},r,i)}static syncDiff(e,n,r,i){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(u,f)=>{var d;const h=(d=e[u])!==null&&d!==void 0?d:[];if(e[u]=this.cloneDeep(f),h.length>0){const v=e[u].map(_=>_.presence_ref),x=h.filter(_=>v.indexOf(_.presence_ref)<0);e[u].unshift(...x)}r(u,h,f)}),this.map(l,(u,f)=>{let d=e[u];if(!d)return;const h=f.map(v=>v.presence_ref);d=d.filter(v=>h.indexOf(v.presence_ref)<0),e[u]=d,i(u,d,f),d.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var uC;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(uC||(uC={}));var cC;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(cC||(cC={}));var Ui;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ui||(Ui={}));class ux{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Kn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ag(this,Hr.join,this.params,this.timeout),this.rejoinTimer=new oM(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hr.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Qu(this),this.broadcastEndpointURL=lM(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:l,private:u}}=this.params;this._onError(h=>e==null?void 0:e(Ui.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(Ui.CLOSED));const f={},d={broadcast:a,presence:l,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var v;if(this.socket.setAuth(),h===void 0){e==null||e(Ui.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,_=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,S=[];for(let E=0;E<_;E++){const C=x[E],{filter:{event:T,schema:R,table:N,filter:O}}=C,D=h&&h[E];if(D&&D.event===T&&D.schema===R&&D.table===N&&D.filter===O)S.push(Object.assign(Object.assign({},C),{id:D.id}));else{this.unsubscribe(),this.state=Kn.errored,e==null||e(Ui.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(Ui.SUBSCRIBED);return}}).receive("error",h=>{this.state=Kn.errored,e==null||e(Ui.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ui.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,f;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Kn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hr.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new Ag(this,Hr.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ag(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,a;const l=e.toLocaleLowerCase(),{close:u,error:f,leave:d,join:h}=Hr;if(r&&[u,f,d,h].indexOf(l)>=0&&r!==this._joinRef())return;let x=this._onMessage(l,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(_=>{var S,E,C;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(E=_.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===l}).map(_=>_.callback(x,r)):(a=this.bindings[l])===null||a===void 0||a.filter(_=>{var S,E,C,T,R,N;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in _){const O=_.id,D=(S=_.filter)===null||S===void 0?void 0:S.event;return O&&((E=n.ids)===null||E===void 0?void 0:E.includes(O))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const O=(R=(T=_==null?void 0:_.filter)===null||T===void 0?void 0:T.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return O==="*"||O===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===l}).map(_=>{if(typeof x=="object"&&"ids"in x){const S=x.data,{schema:E,table:C,commit_timestamp:T,type:R,errors:N}=S;x=Object.assign(Object.assign({},{schema:E,table:C,commit_timestamp:T,eventType:R,new:{},old:{},errors:N}),this._getPayloadRecords(S))}_.callback(x,r)})}_isClosed(){return this.state===Kn.closed}_isJoined(){return this.state===Kn.joined}_isJoining(){return this.state===Kn.joining}_isLeaving(){return this.state===Kn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ux.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hr.close,{},e)}_onError(e){this._on(Hr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=sC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=sC(e.columns,e.old_record)),n}}const dC=()=>{},nU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rU{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Hj,this.params={},this.timeout=aM,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dC,this.ref=0,this.logger=dC,this.conn=null,this.sendBuffer=[],this.serializer=new Wj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...u)=>bc(async()=>{const{default:f}=await Promise.resolve().then(()=>Cl);return{default:f}},void 0).then(({default:f})=>f(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${Pv.websocket}`,this.httpEndpoint=lM(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,l)=>l(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new oM(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=kv),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new iU(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Kj}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qs.connecting:return So.Connecting;case Qs.open:return So.Open;case Qs.closing:return So.Closing;default:return So.Closed}}isConnected(){return this.connectionState()===So.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new ux(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:i,ref:a}=e,l=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Hr.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Yj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:a,ref:l}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${i} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,a,l)),this.stateChangeCallbacks.message.forEach(u=>u(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([nU],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class iU{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Qs.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class cx extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function An(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class aU extends cx{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Lv extends cx{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var oU=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(h){try{d(r.next(h))}catch(v){l(v)}}function f(h){try{d(r.throw(h))}catch(v){l(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((r=r.apply(t,e||[])).next())})};const uM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bc(async()=>{const{default:r}=await Promise.resolve().then(()=>Cl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},sU=()=>oU(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield bc(()=>Promise.resolve().then(()=>Cl),void 0)).Response:Response}),jv=t=>{if(Array.isArray(t))return t.map(n=>jv(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=jv(r)}),e};var zo=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(h){try{d(r.next(h))}catch(v){l(v)}}function f(h){try{d(r.throw(h))}catch(v){l(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((r=r.apply(t,e||[])).next())})};const Ng=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lU=(t,e,n)=>zo(void 0,void 0,void 0,function*(){const r=yield sU();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new aU(Ng(i),t.status||500))}).catch(i=>{e(new Lv(Ng(i),i))}):e(new Lv(Ng(t),t))}),uU=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function _c(t,e,n,r,i,a){return zo(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,uU(e,r,i,a)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>l(f)).catch(f=>lU(f,u,r))})})}function Sf(t,e,n,r){return zo(this,void 0,void 0,function*(){return _c(t,"GET",e,n,r)})}function Ma(t,e,n,r,i){return zo(this,void 0,void 0,function*(){return _c(t,"POST",e,r,i,n)})}function cU(t,e,n,r,i){return zo(this,void 0,void 0,function*(){return _c(t,"PUT",e,r,i,n)})}function dU(t,e,n,r){return zo(this,void 0,void 0,function*(){return _c(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function cM(t,e,n,r,i){return zo(this,void 0,void 0,function*(){return _c(t,"DELETE",e,r,i,n)})}var nr=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(h){try{d(r.next(h))}catch(v){l(v)}}function f(h){try{d(r.throw(h))}catch(v){l(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((r=r.apply(t,e||[])).next())})};const fU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hU{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=uM(i)}uploadOrUpdate(e,n,r,i){return nr(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},fC),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",l.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),v=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:a,headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{})),x=yield v.json();return v.ok?{data:{path:d,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(a){if(An(a))return{data:null,error:a};throw a}})}upload(e,n,r){return nr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return nr(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let f;const d=Object.assign({upsert:fC.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",d.cacheControl)):(f=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const v=yield this.fetch(u.toString(),{method:"PUT",body:f,headers:h}),x=yield v.json();return v.ok?{data:{path:a,fullPath:x.Key},error:null}:{data:null,error:x}}catch(f){if(An(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return nr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield Ma(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new cx("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(An(r))return{data:null,error:r};throw r}})}update(e,n,r){return nr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return nr(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(An(i))return{data:null,error:i};throw i}})}copy(e,n,r){return nr(this,void 0,void 0,function*(){try{return{data:{path:(yield Ma(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(An(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return nr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Ma(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(An(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return nr(this,void 0,void 0,function*(){try{const i=yield Ma(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(An(i))return{data:null,error:i};throw i}})}download(e,n){return nr(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=a?`?${a}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Sf(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(An(u))return{data:null,error:u};throw u}})}info(e){return nr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Sf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:jv(r),error:null}}catch(r){if(An(r))return{data:null,error:r};throw r}})}exists(e){return nr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield dU(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(An(r)&&r instanceof Lv){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&i.push(f);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${d}`)}}}remove(e){return nr(this,void 0,void 0,function*(){try{return{data:yield cM(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(An(n))return{data:null,error:n};throw n}})}list(e,n,r){return nr(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},fU),n),{prefix:e||""});return{data:yield Ma(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(An(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const mU="2.7.1",pU={"X-Client-Info":`storage-js/${mU}`};var $s=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(h){try{d(r.next(h))}catch(v){l(v)}}function f(h){try{d(r.throw(h))}catch(v){l(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((r=r.apply(t,e||[])).next())})};class gU{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},pU),n),this.fetch=uM(r)}listBuckets(){return $s(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(An(e))return{data:null,error:e};throw e}})}getBucket(e){return $s(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(An(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return $s(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(An(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return $s(this,void 0,void 0,function*(){try{return{data:yield cU(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(An(r))return{data:null,error:r};throw r}})}emptyBucket(e){return $s(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(An(n))return{data:null,error:n};throw n}})}deleteBucket(e){return $s(this,void 0,void 0,function*(){try{return{data:yield cM(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(An(n))return{data:null,error:n};throw n}})}}class yU extends gU{constructor(e,n={},r){super(e,n,r)}from(e){return new hU(this.url,this.headers,e,this.fetch)}}const vU="2.50.0";let Ku="";typeof Deno<"u"?Ku="deno":typeof document<"u"?Ku="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ku="react-native":Ku="node";const xU={"X-Client-Info":`supabase-js-${Ku}/${vU}`},bU={headers:xU},_U={schema:"public"},wU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SU={};var EU=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(h){try{d(r.next(h))}catch(v){l(v)}}function f(h){try{d(r.throw(h))}catch(v){l(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((r=r.apply(t,e||[])).next())})};const CU=t=>{let e;return t?e=t:typeof fetch>"u"?e=QD:e=fetch,(...n)=>e(...n)},TU=()=>typeof Headers>"u"?eM:Headers,AU=(t,e,n)=>{const r=CU(n),i=TU();return(a,l)=>EU(void 0,void 0,void 0,function*(){var u;const f=(u=yield e())!==null&&u!==void 0?u:t;let d=new i(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${f}`),r(a,Object.assign(Object.assign({},l),{headers:d}))})};var NU=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(h){try{d(r.next(h))}catch(v){l(v)}}function f(h){try{d(r.throw(h))}catch(v){l(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((r=r.apply(t,e||[])).next())})};function DU(t){return t.endsWith("/")?t:t+"/"}function MU(t,e){var n,r;const{db:i,auth:a,realtime:l,global:u}=t,{db:f,auth:d,realtime:h,global:v}=e,x={db:Object.assign(Object.assign({},f),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},h),l),global:Object.assign(Object.assign(Object.assign({},v),u),{headers:Object.assign(Object.assign({},(n=v==null?void 0:v.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>NU(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}const dM="2.70.0",Ys=30*1e3,Uv=3,Dg=Uv*Ys,OU="http://localhost:9999",RU="supabase.auth.token",kU={"X-Client-Info":`gotrue-js/${dM}`},$v="X-Supabase-Api-Version",fM={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,IU=6e5;class dx extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ke(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class LU extends dx{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function jU(t){return Ke(t)&&t.name==="AuthApiError"}class hM extends dx{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Va extends dx{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Da extends Va{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function UU(t){return Ke(t)&&t.name==="AuthSessionMissingError"}class Xd extends Va{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jd extends Va{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Zd extends Va{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $U(t){return Ke(t)&&t.name==="AuthImplicitGrantRedirectError"}class hC extends Va{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fv extends Va{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Mg(t){return Ke(t)&&t.name==="AuthRetryableFetchError"}class mC extends Va{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ec extends Va{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ef="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pC=` 	
\r=`.split(""),FU=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<pC.length;e+=1)t[pC[e].charCodeAt(0)]=-2;for(let e=0;e<Ef.length;e+=1)t[Ef[e].charCodeAt(0)]=e;return t})();function gC(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ef[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ef[r]),e.queuedBits-=6}}function mM(t,e,n){const r=FU[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function yC(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{VU(l,r,n)};for(let l=0;l<t.length;l+=1)mM(t.charCodeAt(l),i,a);return e.join("")}function BU(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function qU(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}BU(r,e)}}function VU(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function zU(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)mM(t.charCodeAt(i),n,r);return new Uint8Array(e)}function GU(t){const e=[];return qU(t,n=>e.push(n)),new Uint8Array(e)}function HU(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>gC(i,n,r)),gC(null,n,r),e.join("")}function KU(t){return Math.round(Date.now()/1e3)+t}function YU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Gr=()=>typeof window<"u"&&typeof document<"u",go={tested:!1,writable:!1},tc=()=>{if(!Gr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(go.tested)return go.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),go.tested=!0,go.writable=!0}catch{go.tested=!0,go.writable=!1}return go.writable};function WU(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const pM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bc(async()=>{const{default:r}=await Promise.resolve().then(()=>Cl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},XU=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",gM=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Qd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ef=async(t,e)=>{await t.removeItem(e)};class Ch{constructor(){this.promise=new Ch.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ch.promiseConstructor=Promise;function Og(t){const e=t.split(".");if(e.length!==3)throw new ec("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!PU.test(e[r]))throw new ec("JWT not in base64url format");return{header:JSON.parse(yC(e[0])),payload:JSON.parse(yC(e[1])),signature:zU(e[2]),raw:{header:e[0],payload:e[1]}}}async function JU(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ZU(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function QU(t){return("0"+t.toString(16)).substr(-2)}function e5(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,QU).join("")}async function t5(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function n5(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await t5(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fs(t,e,n=!1){const r=e5();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await gM(t,`${e}-code-verifier`,i);const a=await n5(r);return[a,r===a?"plain":"s256"]}const r5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function i5(t){const e=t.headers.get($v);if(!e||!e.match(r5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function a5(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function o5(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const s5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bs(t){if(!s5.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var l5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const xo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),u5=[502,503,504];async function vC(t){var e;if(!XU(t))throw new Fv(xo(t),0);if(u5.includes(t.status))throw new Fv(xo(t),t.status);let n;try{n=await t.json()}catch(a){throw new hM(xo(a),a)}let r;const i=i5(t);if(i&&i.getTime()>=fM["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new mC(xo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Da}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new mC(xo(n),t.status,n.weak_password.reasons);throw new LU(xo(n),t.status||500,r)}const c5=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function at(t,e,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[$v]||(a[$v]=fM["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await d5(t,e,n+u,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function d5(t,e,n,r,i,a){const l=c5(e,r,i,a);let u;try{u=await t(n,Object.assign({},l))}catch(f){throw console.error(f),new Fv(xo(f),0)}if(u.ok||await vC(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(f){await vC(f)}}function ji(t){var e;let n=null;p5(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=KU(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function xC(t){const e=ji(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ka(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function f5(t){return{data:t,error:null}}function h5(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=t,l=l5(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},f=Object.assign({},l);return{data:{properties:u,user:f},error:null}}function m5(t){return t}function p5(t){return t.access_token&&t.refresh_token&&t.expires_in}const Rg=["global","local","others"];var g5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class y5{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=pM(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Rg[0]){if(Rg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rg.join(", ")}`);try{return await at(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await at(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ka})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=g5(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await at(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:h5,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await at(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ka})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,a,l,u,f;try{const d={nextPage:null,lastPage:0,total:0},h=await at(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:m5});if(h.error)throw h.error;const v=await h.json(),x=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,_=(f=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);d[`${C}Page`]=E}),d.total=parseInt(x)),{data:Object.assign(Object.assign({},v),d),error:null}}catch(d){if(Ke(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Bs(e);try{return await at(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ka})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Bs(e);try{return await at(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ka})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Bs(e);try{return await at(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ka})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Bs(e.userId);try{const{data:n,error:r}=await at(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Bs(e.userId),Bs(e.id);try{return{data:await at(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}const v5={getItem:t=>tc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{tc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{tc()&&globalThis.localStorage.removeItem(t)}};function bC(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function x5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qs={debug:!!(globalThis&&tc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yM extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class b5 extends yM{}async function _5(t,e,n){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),qs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new b5(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(qs.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}x5();const w5={url:OU,storageKey:RU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _C(t,e,n){return await n()}class ac{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ac.nextInstanceID,ac.nextInstanceID+=1,this.instanceID>0&&Gr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},w5),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new y5({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=pM(i.fetch),this.lock=i.lock||_C,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Gr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=_5:this.lock=_C,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:tc()?this.storage=v5:(this.memoryStorage={},this.storage=bC(this.memoryStorage)):(this.memoryStorage={},this.storage=bC(this.memoryStorage)),Gr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dM}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=WU(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Gr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),$U(a)){const f=(e=a.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ke(n)?{error:n}:{error:new hM("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const a=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ji}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const f=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,i;try{let a;if("email"in e){const{email:h,password:v,options:x}=e;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await Fs(this.storage,this.storageKey)),a=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:h,password:v,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:_,code_challenge_method:S},xform:ji})}else if("phone"in e){const{phone:h,password:v,options:x}=e;a=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:v,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(i=x==null?void 0:x.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:ji})}else throw new Jd("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const f=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:u}=e;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:xC})}else if("phone"in e){const{phone:a,password:l,options:u}=e;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:xC})}else throw new Jd("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Xd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,a,l,u,f,d,h,v,x,_;let S,E;if("message"in e)S=e.message,E=e.signature;else{const{chain:C,wallet:T,statement:R,options:N}=e;let O;if(Gr())if(typeof T=="object")O=T;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))O=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=T}const D=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const k=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),R?{statement:R}:null));let I;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")I=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)I=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)S=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),E=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${D.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((f=N==null?void 0:N.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((v=(h=N==null?void 0:N.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||v===void 0)&&v.length?["Resources",...N.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const k=await O.signMessage(new TextEncoder().encode(S),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=k}}try{const{data:C,error:T}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:HU(E)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:ji});if(T)throw T;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Xd}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:T})}catch(C){if(Ke(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const n=await Qd(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:l}=await at(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ji});if(await ef(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Xd}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(Ke(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:a,nonce:l}=e,u=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ji}),{data:f,error:d}=u;return d?{data:{user:null,session:null},error:d}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Xd}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:d})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,a,l;try{if("email"in e){const{email:u,options:f}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Fs(this.storage,this.storageKey));const{error:v}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:f}=e,{data:d,error:h}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new Jd("You must provide either an email or phone number.")}catch(u){if(Ke(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await at(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ji});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,d=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Fs(this.storage,this.storageKey)),await at(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:f5})}catch(a){if(Ke(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Da;const{error:i}=await at(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:l}=await at(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:l,error:u}=await at(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Jd("You must provide either an email or phone number and a type")}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Qd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Dg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,d,h)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,d,h))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ka}):await this._useSession(async n=>{var r,i,a;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Da}:await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ka})})}catch(n){if(Ke(n))return UU(n)&&(await this._removeSession(),await ef(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Da;const l=i.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await Fs(this.storage,this.storageKey));const{data:d,error:h}=await at(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:l.access_token,xform:ka});if(h)throw h;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Da;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:l}=Og(e.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{session:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Ke(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Da;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Gr())throw new Zd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Zd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new hC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new hC("No code detected.");const{data:R,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:u,expires_at:f,token_type:d}=e;if(!a||!u||!l||!d)throw new Zd("No session defined in URL");const h=Math.round(Date.now()/1e3),v=parseInt(u);let x=h+v;f&&(x=parseInt(f));const _=x-h;_*1e3<=Ys&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${v}s`);const S=x-v;h-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,x,h):h-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,x,h);const{data:E,error:C}=await this._getUser(a);if(C)throw C;const T={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:v,expires_at:x,refresh_token:l,token_type:d,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(r){if(Ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Qd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{error:a};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(jU(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await ef(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=YU(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Fs(this.storage,this.storageKey,!0));try{return await at(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Ke(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var l,u,f,d,h;const{data:v,error:x}=a;if(x)throw x;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await at(this.fetch,"GET",_,{headers:this.headers,jwt:(h=(d=v.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Gr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ke(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:l}=n;if(l)throw l;return await at(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ZU(async i=>(i>0&&await JU(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await at(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ji})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Mg(a)&&Date.now()+l-r<Ys})}catch(r){if(this._debug(n,"error",r),Ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Gr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Qd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Dg;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Dg}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Mg(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Da;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ch;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Da;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={session:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(i,"error",a),Ke(a)){const l={session:null,error:a};return Mg(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(f){a.push(f)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await gM(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ef(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Gr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ys);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ys);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ys}ms, refresh threshold is ${Uv} ticks`),i<=Uv&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yM)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await Fs(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await at(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:d}=await at(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const{data:l,error:u}=await at(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await at(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Og(i.access_token);let u=null;l.aal&&(u=l.aal);let f=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const h=l.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r||(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+IU>Date.now()))return r;const{data:i,error:a}=await at(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new ec("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(l=>l.kid===e),!r)throw new ec("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:_,error:S}=await this.getSession();if(S||!_.session)return{data:null,error:S};r=_.session.access_token}const{header:i,payload:a,signature:l,raw:{header:u,payload:f}}=Og(r);if(a5(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:a,header:i,signature:l},error:null}}const d=o5(i.alg),h=await this.fetchJwk(i.kid,n),v=await crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!await crypto.subtle.verify(d,v,l,GU(`${u}.${f}`)))throw new ec("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}ac.nextInstanceID=0;const S5=ac;class E5 extends S5{constructor(e){super(e)}}var C5=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(h){try{d(r.next(h))}catch(v){l(v)}}function f(h){try{d(r.throw(h))}catch(v){l(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((r=r.apply(t,e||[])).next())})};class T5{constructor(e,n,r){var i,a,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=DU(e),f=new URL(u);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const d=`sb-${f.hostname.split(".")[0]}-auth-token`,h={db:_U,realtime:SU,auth:Object.assign(Object.assign({},wU),{storageKey:d}),global:bU},v=MU(r??{},h);this.storageKey=(i=v.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=v.global.headers)!==null&&a!==void 0?a:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(x,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=v.auth)!==null&&l!==void 0?l:{},this.headers,v.global.fetch),this.fetch=AU(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new zj(new URL("rest/v1",f).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),v.accessToken||this._listenForAuthEvents()}get functions(){return new Rj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new yU(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return C5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:a,flowType:l,lock:u,debug:f},d,h){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new E5({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),d),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:l,lock:u,debug:f,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new rU(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const A5=(t,e,n)=>new T5(t,e,n),N5="AIzaSyAJ1fClUCzDfwQlAswnnx-486JrUw80rmg",kg="https://bdulngslkzokhyjioizr.supabase.co",Pg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJkdWxuZ3Nsa3pva2h5amlvaXpyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4MjA1MjMsImV4cCI6MjA2NDM5NjUyM30.JVL01FpHUehneSDlFFWMqVOEBOOxBLFVcqjZD-x4_gg",D5="http://localhost:54321/dummy_supabase_url";let Bv,qv;kg.trim()===""||kg.includes("TU_SUPABASE_URL_VA_AQUI")?(console.error("Supabase URL no está configurada en config.ts. Se usará una URL de respaldo para evitar un fallo, pero Supabase NO FUNCIONARÁ. Por favor, añade tu URL real en el archivo config.ts."),Bv=D5):(Bv=kg,console.info("Supabase URL cargada correctamente desde config.ts."));Pg.trim()===""||Pg.includes("TU_SUPABASE_ANON_KEY_VA_AQUI")?(console.warn("Supabase Anon Key no está configurada en config.ts. Las operaciones de Supabase probablemente fallarán. Por favor, añade tu clave anónima real en el archivo config.ts."),qv=""):(qv=Pg,console.info("Supabase Anon Key cargada correctamente desde config.ts."));const Fe=A5(Bv,qv),Cf="Gestor Documental IA",Gt="92a1c134-0c72-45d7-bac1-30df9e8180f4",ol="38a369a6-990e-4c8c-841c-66433e535cc5",It="fc89395d-d3ee-4aa5-bc95-62b3ca14a24b",wC="admin@example.com",Ta="000.0",Vv={name:"Administrador",description:"Rol con acceso completo al sistema y todas las clasificaciones.",allowedDeweyCodes:[],canUploadDocuments:!0,canDeleteDocuments:!0,canEditDocuments:!0,canEditDocName:!0,canEditDocKeywords:!0,canEditDocClassification:!0,canEditDocLocation:!0,canSeeUploader:!0},zv={name:"Usuario Estándar",description:"Rol con acceso limitado a clasificaciones específicas.",allowedDeweyCodes:[],canUploadDocuments:!0,canDeleteDocuments:!1,canEditDocuments:!1,canEditDocName:!1,canEditDocKeywords:!1,canEditDocClassification:!1,canEditDocLocation:!1,canSeeUploader:!1},Gv={name:"Invitado",description:"Rol para usuarios no logueados o sin rol asignado (acceso muy limitado).",allowedDeweyCodes:[],canUploadDocuments:!1,canDeleteDocuments:!1,canEditDocuments:!1,canEditDocName:!1,canEditDocKeywords:!1,canEditDocClassification:!1,canEditDocLocation:!1,canSeeUploader:!1},Fi={id:It,...Gv,allowedDeweyCodes:Gv.allowedDeweyCodes||[],canUploadDocuments:!1,canDeleteDocuments:!1,canEditDocuments:!1,canEditDocName:!1,canEditDocKeywords:!1,canEditDocClassification:!1,canEditDocLocation:!1,canSeeUploader:!1},M5={supabaseUser:null,userProfile:null,currentRole:Fi,allRoles:[],allUsers:[],isLoading:!0,error:null,successMessage:null,isInitialLoadComplete:!1,rolesSuccessfullyLoadedFromDB:!1,usersSuccessfullyLoadedFromDB:!1,isCurrentUserMasterAdmin:!1},Li=t=>{const e=t.id===Gt,n=t.id===It;return{id:t.id,name:t.name,description:t.description||"",allowedDeweyCodes:Array.isArray(t.allowed_dewey_codes)?t.allowed_dewey_codes:[],canUploadDocuments:e?!0:n?!1:t.can_upload_documents,canDeleteDocuments:e?!0:n?!1:t.can_delete_documents,canEditDocuments:e?!0:n?!1:t.can_edit_documents,canEditDocName:e?!0:n?!1:t.can_edit_doc_name,canEditDocKeywords:e?!0:n?!1:t.can_edit_doc_keywords,canEditDocClassification:e?!0:n?!1:t.can_edit_doc_classification,canEditDocLocation:e?!0:n?!1:t.can_edit_doc_location,canSeeUploader:e?!0:n?!1:t.can_see_uploader}},SC=t=>{const e={},n=t.id===Gt,r=t.id===It;return t.id&&(e.id=t.id),t.name!==void 0&&(e.name=t.name),t.description!==void 0&&(e.description=t.description),t.allowedDeweyCodes!==void 0&&(e.allowed_dewey_codes=n?[]:r?[]:Array.isArray(t.allowedDeweyCodes)?t.allowedDeweyCodes:[]),["canUploadDocuments","canDeleteDocuments","canEditDocuments","canEditDocName","canEditDocKeywords","canEditDocClassification","canEditDocLocation","canSeeUploader"].forEach(a=>{const l=a.replace(/[A-Z]/g,u=>`_${u.toLowerCase()}`);t[a]!==void 0&&(e[l]=n?!0:r?!1:t[a])}),e},gn=(t,e)=>{if(!t)return e;if(typeof t=="string")return t;let n=[];if(typeof t.message=="string"&&n.push(t.message),typeof t.details=="string"&&n.push(`Details: ${t.details}`),typeof t.hint=="string"&&n.push(`Hint: ${t.hint}`),t.code&&n.push(`Code: ${t.code}`),n.length>0)return n.join(" | ");try{const r=JSON.stringify(t,Object.getOwnPropertyNames(t),2);if(r!=="{}")return`Error: ${r}`}catch{}return typeof t.toString=="function"&&t.toString()!=="[object Object]"?t.toString():e},vM=A.createContext(void 0),O5=(t,e)=>{var n,r,i,a;switch(e.type){case"SET_SESSION_DATA":return{...t,supabaseUser:e.payload.supabaseUser,userProfile:e.payload.userProfile,currentRole:e.payload.role||Fi,isCurrentUserMasterAdmin:e.payload.isCurrentUserMasterAdmin??!1,isLoading:e.payload.isLoading!==void 0?e.payload.isLoading:!1,error:e.payload.error!==void 0?e.payload.error:t.error,successMessage:e.payload.error!==void 0&&e.payload.error!==null?null:t.successMessage};case"SET_ALL_ROLES":const l=e.payload.roles||[],u=new Map;l.forEach(N=>{u.set(N.id,{...N,name:N.name||"Rol sin nombre",description:N.description||"",allowedDeweyCodes:Array.isArray(N.allowedDeweyCodes)?N.allowedDeweyCodes:[]})});const f=[{id:Gt,...Vv},{id:ol,...zv},{id:It,...Gv}];for(const N of f){const O=u.get(N.id);O?u.set(N.id,{...N,...O,canUploadDocuments:N.id===Gt?!0:N.id===It?!1:O.canUploadDocuments,canDeleteDocuments:N.id===Gt?!0:N.id===It?!1:O.canDeleteDocuments,canEditDocuments:N.id===Gt?!0:N.id===It?!1:O.canEditDocuments,canEditDocName:N.id===Gt?!0:N.id===It?!1:O.canEditDocName,canEditDocKeywords:N.id===Gt?!0:N.id===It?!1:O.canEditDocKeywords,canEditDocClassification:N.id===Gt?!0:N.id===It?!1:O.canEditDocClassification,canEditDocLocation:N.id===Gt?!0:N.id===It?!1:O.canEditDocLocation,canSeeUploader:N.id===Gt?!0:N.id===It?!1:O.canSeeUploader,allowedDeweyCodes:N.id===Gt?[]:N.id===It?[]:O.allowedDeweyCodes}):u.set(N.id,{id:N.id,name:N.name,description:N.description||"",allowedDeweyCodes:N.id===Gt?[]:N.allowedDeweyCodes,canUploadDocuments:N.canUploadDocuments,canDeleteDocuments:N.canDeleteDocuments,canEditDocuments:N.canEditDocuments,canEditDocName:N.canEditDocName,canEditDocKeywords:N.canEditDocKeywords,canEditDocClassification:N.canEditDocClassification,canEditDocLocation:N.canEditDocLocation,canSeeUploader:N.canSeeUploader})}const d=Array.from(u.values());return{...t,allRoles:d,isLoading:!1,rolesSuccessfullyLoadedFromDB:e.payload.successfullyLoadedFromDB};case"SET_ALL_USERS":const h=(e.payload.users||[]).map(N=>({...N,email:N.email||"Usuario sin email",full_name:N.full_name||null,cargo:N.cargo||null}));return{...t,allUsers:h,isLoading:!1,usersSuccessfullyLoadedFromDB:e.payload.successfullyLoadedFromDB};case"ADD_ROLE_SUCCESS":const v={...e.payload,allowedDeweyCodes:Array.isArray(e.payload.allowedDeweyCodes)?e.payload.allowedDeweyCodes:[]},x=t.allRoles.filter(N=>N.id!==v.id);return{...t,allRoles:[...x,v],error:null,successMessage:null,isLoading:!1};case"UPDATE_ROLE_SUCCESS":const _={...e.payload,allowedDeweyCodes:Array.isArray(e.payload.allowedDeweyCodes)?e.payload.allowedDeweyCodes:[]};return{...t,allRoles:t.allRoles.map(N=>N.id===_.id?_:N),currentRole:((n=t.currentRole)==null?void 0:n.id)===_.id?_:t.currentRole,error:null,successMessage:null,isLoading:!1};case"DELETE_ROLE_SUCCESS":{const N=e.payload,O=t.allUsers.map(I=>I.role_id===N?{...I,role_id:It}:I);let D=t.userProfile,k=t.currentRole;return t.userProfile&&t.userProfile.role_id===N&&(D={...t.userProfile,role_id:It},k=t.allRoles.find(I=>I.id===It)||Fi),{...t,allRoles:t.allRoles.filter(I=>I.id!==N),allUsers:O,userProfile:D,currentRole:k,error:null,successMessage:null,isLoading:!1}}case"ADD_USER_PROFILE_SUCCESS":const S={...e.payload,full_name:e.payload.full_name||null,cargo:e.payload.cargo||null},E=t.allUsers.filter(N=>N.id!==S.id);return{...t,allUsers:[...E,S],error:null,successMessage:null,isLoading:!1};case"UPDATE_USER_PROFILE_SUCCESS":const C=t.allRoles.find(N=>N.id===e.payload.role_id)||Fi,T={...e.payload,full_name:e.payload.full_name||null,cargo:e.payload.cargo||null};return{...t,allUsers:t.allUsers.map(N=>N.id===T.id?T:N),userProfile:((r=t.userProfile)==null?void 0:r.id)===T.id?T:t.userProfile,currentRole:((i=t.userProfile)==null?void 0:i.id)===T.id?C:t.currentRole,error:null,successMessage:null,isLoading:!1};case"DELETE_USER_PROFILE_SUCCESS":return{...t,allUsers:t.allUsers.filter(N=>N.id!==e.payload),error:null,successMessage:null,isLoading:!1};case"LOGOUT":console.log("[UserRoleStore Reducer LOGOUT] Processing LOGOUT action. Current supabaseUser:",(a=t.supabaseUser)==null?void 0:a.id);const R={...t,supabaseUser:null,userProfile:null,currentRole:Fi,isLoading:!1,error:null,successMessage:null,rolesSuccessfullyLoadedFromDB:!1,usersSuccessfullyLoadedFromDB:!1,isCurrentUserMasterAdmin:!1};return console.log("[UserRoleStore Reducer LOGOUT] New state after LOGOUT:",{supabaseUser:R.supabaseUser,isLoading:R.isLoading,currentRoleName:R.currentRole.name}),R;case"SET_LOADING":return{...t,isLoading:e.payload};case"SET_ERROR":return{...t,error:e.payload,successMessage:null,isLoading:!1};case"SET_SUCCESS_MESSAGE":return{...t,successMessage:e.payload,error:null,isLoading:!1};case"CLEAR_MESSAGES":return{...t,error:null,successMessage:null};case"SET_INITIAL_LOAD_COMPLETE":return{...t,isInitialLoadComplete:!0,isLoading:!!(t.isLoading&&!e.payload)};default:return t}},R5=({children:t})=>{const[e,n]=A.useReducer(O5,M5),r=A.useRef(e);A.useEffect(()=>{r.current=e},[e]);const i=A.useCallback(async()=>{console.log("[UserRoleStore] fetchAllRoles: Iniciando carga de todos los roles...");const{data:T,error:R}=await Fe.from("roles").select("*");console.log("[UserRoleStore] fetchAllRoles RAW RESPONSE:",{data:T,error:R});let N,O=!1;return R?(console.error("[UserRoleStore] Error fetching roles from Supabase DB:",R),n({type:"SET_ERROR",payload:gn(R,"No se pudieron cargar los roles del sistema.")}),N=[Li({id:Gt,...Vv,allowed_dewey_codes:[],can_upload_documents:!0,can_delete_documents:!0,can_edit_documents:!0,can_edit_doc_name:!0,can_edit_doc_keywords:!0,can_edit_doc_classification:!0,can_edit_doc_location:!0,can_see_uploader:!0,name:"Administrador",description:"Rol Admin"}),Li({id:ol,...zv,allowed_dewey_codes:[],can_upload_documents:!0,can_delete_documents:!1,can_edit_documents:!1,can_edit_doc_name:!1,can_edit_doc_keywords:!1,can_edit_doc_classification:!1,can_edit_doc_location:!1,can_see_uploader:!1,name:"Usuario Estándar",description:"Rol Usuario"}),Li({id:It,allowed_dewey_codes:[],can_upload_documents:!1,can_delete_documents:!1,can_edit_documents:!1,can_edit_doc_name:!1,can_edit_doc_keywords:!1,can_edit_doc_classification:!1,can_edit_doc_location:!1,can_see_uploader:!1,name:"Invitado",description:"Rol Invitado"})],console.log("[UserRoleStore] fetchAllRoles: Usando roles de fallback debido a error.",N.map(D=>D.name))):!T||T.length===0?(console.warn("[UserRoleStore] fetchAllRoles: No se encontraron roles en la base de datos o la respuesta fue vacía. Usando roles de fallback."),N=[Li({id:Gt,...Vv,allowed_dewey_codes:[],can_upload_documents:!0,can_delete_documents:!0,can_edit_documents:!0,can_edit_doc_name:!0,can_edit_doc_keywords:!0,can_edit_doc_classification:!0,can_edit_doc_location:!0,can_see_uploader:!0,name:"Administrador",description:"Rol Admin"}),Li({id:ol,...zv,allowed_dewey_codes:[],can_upload_documents:!0,can_delete_documents:!1,can_edit_documents:!1,can_edit_doc_name:!1,can_edit_doc_keywords:!1,can_edit_doc_classification:!1,can_edit_doc_location:!1,can_see_uploader:!1,name:"Usuario Estándar",description:"Rol Usuario"}),Li({id:It,allowed_dewey_codes:[],can_upload_documents:!1,can_delete_documents:!1,can_edit_documents:!1,can_edit_doc_name:!1,can_edit_doc_keywords:!1,can_edit_doc_classification:!1,can_edit_doc_location:!1,can_see_uploader:!1,name:"Invitado",description:"Rol Invitado"})]):(N=T.map(Li),O=!0,console.log("[UserRoleStore] fetchAllRoles: Roles obtenidos de la DB y mapeados:",N.length)),n({type:"SET_ALL_ROLES",payload:{roles:N,successfullyLoadedFromDB:O}}),N},[n]),a=A.useCallback(async()=>{console.log("[UserRoleStore] fetchAllUsers: Iniciando carga de todos los perfiles...");const{data:T,error:R}=await Fe.from("profiles").select("*, full_name, cargo");let N=!1;if(R)return console.error("[UserRoleStore] Error fetching users:",R),n({type:"SET_ERROR",payload:gn(R,"No se pudieron cargar los usuarios del sistema.")}),n({type:"SET_ALL_USERS",payload:{users:[],successfullyLoadedFromDB:!1}}),[];{N=T&&T.length>0;const O=(T||[]).map(async j=>{try{const{data:U,error:re}=await Fe.rpc("is_master_admin",{user_id:j.id});return re?(console.error(`[UserRoleStore] RPC Error checking master admin for ${j.id}:`,re),{...j,is_master_admin:!1}):{...j,is_master_admin:!!U}}catch(U){return console.error(`[UserRoleStore] Critical RPC call failure for ${j.id}:`,U),{...j,is_master_admin:!1}}}),D=await Promise.all(O);let k=0;const I=D.map(j=>{const U={...j,full_name:j.full_name||null,cargo:j.cargo||null,email:j.email||"No email"};return k<5&&(console.log(`[UserRoleStore] fetchAllUsers - Fetched Profile: ID=${U.id}, Email=${U.email}, FullName=${U.full_name}, Cargo=${U.cargo}, RoleID=${U.role_id}, isMasterAdmin=${U.is_master_admin}`),k++),U});return n({type:"SET_ALL_USERS",payload:{users:I,successfullyLoadedFromDB:N}}),I}},[n]),l=A.useCallback(async(T,R,N)=>{if(n({type:"SET_LOADING",payload:!0}),console.log(`[UserRoleStore] fetchUserProfileAndRole: Verificando usuario ${T==null?void 0:T.id}. Usando ${R.length} roles y ${N.length} perfiles cacheados.`),!T){n({type:"SET_SESSION_DATA",payload:{supabaseUser:null,userProfile:null,role:Fi,isLoading:!1}});return}let O=N.find(j=>j.id===T.id),D=null;if(!O){console.log(`[UserRoleStore] Perfil para ${T.id} no en caché, buscando en DB.`);const{data:j,error:U}=await Fe.from("profiles").select("*, full_name, cargo").eq("id",T.id).single();D=U,O=j,O&&!N.some(re=>re.id===O.id)&&n({type:"ADD_USER_PROFILE_SUCCESS",payload:{...O,full_name:O.full_name||null,cargo:O.cargo||null}})}if(D||!O){const j=`Error: No se pudo encontrar el perfil para el usuario ID: ${T.id}. Esto usualmente indica que el trigger 'handle_new_user' en Supabase no creó el perfil después del registro del usuario. Por favor, verifica la configuración de este trigger en tu backend de Supabase. Detalles del error de Supabase: ${gn(D,"Perfil no encontrado o error en la consulta.")}`;console.error("[UserRoleStore] "+j,D),n({type:"SET_SESSION_DATA",payload:{supabaseUser:T,userProfile:null,role:Fi,error:j,isLoading:!1}});return}if(typeof O.is_master_admin!="boolean"){const{data:j,error:U}=await Fe.rpc("is_master_admin",{user_id:T.id});U?(console.error(`[UserRoleStore] RPC Error for current user master admin check: ${U.message}`),O.is_master_admin=!1):O.is_master_admin=!!j}const k={...O,email:O.email||T.email||"Email no disponible",full_name:O.full_name||null,cargo:O.cargo||null},I=R.find(j=>j.id===k.role_id);I?(console.log(`[UserRoleStore] fetchUserProfileAndRole success for ${T.id}. Profile Email: ${k.email}, Full Name: ${k.full_name}, Cargo: ${k.cargo}, Role: ${I.name}, isMasterAdmin: ${k.is_master_admin}`),n({type:"SET_SESSION_DATA",payload:{supabaseUser:T,userProfile:k,role:I,isCurrentUserMasterAdmin:k.is_master_admin,isLoading:!1,error:null}})):(console.warn(`[UserRoleStore] Rol ID ${k.role_id} para usuario ${k.id} no encontrado en allRoles (total roles: ${R.length}). Asignando Rol de Invitado. Roles disponibles:`,R.map(j=>({id:j.id,name:j.name}))),n({type:"SET_SESSION_DATA",payload:{supabaseUser:T,userProfile:k,role:Fi,isCurrentUserMasterAdmin:k.is_master_admin,isLoading:!1,error:r.current.error}}))},[n,r]);A.useEffect(()=>{let T=!0;return(async()=>{if(T){n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});try{console.log("[UserRoleStore initializeApp] Obteniendo sesión actual ANTES de cargar roles/usuarios...");const{data:{session:N}}=await Fe.auth.getSession();if(!T)return;const O=(N==null?void 0:N.user)||null;console.log(`[UserRoleStore initializeApp] Sesión obtenida inicial: Usuario: ${O==null?void 0:O.id}`),console.log("[UserRoleStore initializeApp] Iniciando carga de todos los roles (después de getSession)...");const D=await i();console.log("[UserRoleStore initializeApp] Roles cargados. Iniciando carga de todos los usuarios (después de getSession)...");const k=await a();console.log("[UserRoleStore initializeApp] Usuarios cargados. Cargando perfil y rol del usuario actual..."),await l(O,D,k),console.log("[UserRoleStore initializeApp] Perfil y rol del usuario cargados.")}catch(N){if(!T)return;console.error("[UserRoleStore initializeApp] Error durante la carga inicial de la aplicación:",N);const O=gn(N,"Error al inicializar la aplicación.");n({type:"SET_ERROR",payload:O});const{data:{session:D}}=await Fe.auth.getSession();n({type:"SET_SESSION_DATA",payload:{supabaseUser:(D==null?void 0:D.user)||null,userProfile:null,role:Fi,error:O,isLoading:!1}})}finally{T&&(n({type:"SET_INITIAL_LOAD_COMPLETE",payload:!0}),console.log("[UserRoleStore initializeApp] Carga inicial completada."))}}})(),()=>{T=!1}},[n,i,a,l]),A.useEffect(()=>{let T=!0;const{data:R}=Fe.auth.onAuthStateChange(async(N,O)=>{var D,k;if(console.log("[UserRoleStore onAuthStateChange] event:",N,"Session User ID:",(D=O==null?void 0:O.user)==null?void 0:D.id,"isInitialLoadComplete:",r.current.isInitialLoadComplete),!T){console.log("[UserRoleStore onAuthStateChange] Auth event received, but component unmounted. Event:",N);return}if(!r.current.isInitialLoadComplete&&N!=="INITIAL_SESSION"){console.log("[UserRoleStore onAuthStateChange] Auth event received, but initial load not complete yet. Skipping direct processing of:",N);return}try{if(!O||N==="SIGNED_OUT"||N==="USER_DELETED")console.log("[UserRoleStore onAuthStateChange] Event is SIGNED_OUT or similar. Current state.supabaseUser before LOGOUT:",(k=r.current.supabaseUser)==null?void 0:k.id),n({type:"LOGOUT"}),console.log("[UserRoleStore onAuthStateChange] LOGOUT action dispatched.");else{const I=O.user;console.log(`[UserRoleStore onAuthStateChange] Auth event: Sesión activa (${N}). Usuario: ${I.id}. Obteniendo perfil y rol del usuario (usando roles/usuarios ya cargados).`),await l(I,r.current.allRoles,r.current.allUsers),console.log(`[UserRoleStore onAuthStateChange] Auth event (${N}) procesado para usuario ${I.id}.`)}}catch(I){if(!T)return;console.error("[UserRoleStore onAuthStateChange] Error durante el procesamiento del cambio de estado de autenticación:",I),n({type:"SET_ERROR",payload:gn(I,"Error al procesar cambio de autenticación.")})}});return()=>{var N;T=!1,(N=R==null?void 0:R.subscription)==null||N.unsubscribe()}},[n,l]),A.useEffect(()=>{if(e.isInitialLoadComplete&&e.supabaseUser){let T=!1;if(e.rolesSuccessfullyLoadedFromDB||(console.log("[UserRoleStore] User signed in and roles not successfully loaded from DB. Re-fetching all roles."),i(),T=!0),e.usersSuccessfullyLoadedFromDB||(console.log("[UserRoleStore] User signed in and users not successfully loaded from DB. Re-fetching all users."),a(),T=!0),T&&e.userProfile){console.log("[UserRoleStore] Roles/Users re-fetched. Ensuring current user's role object is up-to-date.");const R=e.allRoles,N=e.userProfile,O=R.find(D=>D.id===N.role_id);O&&O!==e.currentRole&&n({type:"SET_SESSION_DATA",payload:{supabaseUser:e.supabaseUser,userProfile:N,role:O,isCurrentUserMasterAdmin:e.isCurrentUserMasterAdmin}})}}},[e.isInitialLoadComplete,e.supabaseUser,e.rolesSuccessfullyLoadedFromDB,e.usersSuccessfullyLoadedFromDB,i,a,n,e.allRoles,e.userProfile,e.currentRole,e.isCurrentUserMasterAdmin]);const u=async(T,R)=>{n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const N=R||"password",{data:O,error:D}=await Fe.auth.signInWithPassword({email:T,password:N});if(D){console.error(`[UserRoleStore] Error al iniciar sesión para ${T}:`,D);let k=gn(D,"Error al iniciar sesión.");return D.message.includes("Invalid login credentials")?k="Credenciales de inicio de sesión inválidas. Por favor, verifica tu correo y contraseña.":D.message.includes("Email not confirmed")&&(k="Tu correo electrónico aún no ha sido confirmado. Por favor, revisa tu bandeja de entrada (y spam) para el correo de verificación."),n({type:"SET_ERROR",payload:k}),n({type:"SET_LOADING",payload:!1}),k}else return console.log(`[UserRoleStore] Login exitoso para ${T}. onAuthStateChange (SIGNED_IN) se encargará de actualizar el perfil, roles y usuarios.`),null},f=async(T,R,N)=>{const O=N||"password";n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const D={email:R,password:O,options:{data:{full_name:T}}},{data:k,error:I}=await Fe.auth.signUp(D);I?(console.error(`[UserRoleStore] Error al registrar ${R}:`,I),n({type:"SET_ERROR",payload:gn(I,"Error durante el registro.")})):k.user&&k.user.identities&&k.user.identities.length===0?(console.warn(`[UserRoleStore] Posible usuario existente o problema con el registro para ${R}. Respuesta de Supabase:`,k),n({type:"SET_ERROR",payload:`Ya existe un usuario con el correo ${R}. Si no has confirmado tu correo, revisa tu bandeja de entrada.`})):(console.log(`[UserRoleStore] Registro solicitado para ${R}. Se ha enviado un correo de verificación.`),n({type:"SET_SUCCESS_MESSAGE",payload:"¡Registro exitoso! Por favor, revisa tu correo electrónico para confirmar tu cuenta antes de iniciar sesión."})),n({type:"SET_LOADING",payload:!1})},d=async()=>{console.log("[UserRoleStore logoutUser] Attempting to logout..."),n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const{error:T}=await Fe.auth.signOut();T?(console.error("[UserRoleStore logoutUser] Supabase signOut ERROR:",T),T.name==="AuthSessionMissingError"||T.message&&T.message.includes("Auth session missing")?(console.warn("[UserRoleStore logoutUser] AuthSessionMissingError detected. Treating as already logged out. Dispatching LOGOUT manually."),n({type:"LOGOUT"})):(n({type:"SET_ERROR",payload:gn(T,"Error al cerrar sesión.")}),n({type:"SET_LOADING",payload:!1}))):console.log("[UserRoleStore logoutUser] Supabase signOut successful. Waiting for onAuthStateChange...")},h=async T=>{n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const R=SC(T),{data:N,error:O}=await Fe.from("roles").insert(R).select().single();if(O)return n({type:"SET_ERROR",payload:gn(O,`Error creando rol: ${T.name}`)}),n({type:"SET_LOADING",payload:!1}),null;if(N){const D=Li(N);return n({type:"ADD_ROLE_SUCCESS",payload:D}),await i(),n({type:"SET_LOADING",payload:!1}),D}return n({type:"SET_LOADING",payload:!1}),null},v=async T=>{n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const R=SC(T),{data:N,error:O}=await Fe.from("roles").update(R).eq("id",T.id).select().single();if(O)return n({type:"SET_ERROR",payload:gn(O,`Error actualizando rol: ${T.name}`)}),n({type:"SET_LOADING",payload:!1}),null;if(N){const D=Li(N);return n({type:"UPDATE_ROLE_SUCCESS",payload:D}),n({type:"SET_LOADING",payload:!1}),D}return n({type:"SET_LOADING",payload:!1}),null},x=async T=>{n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const{error:R}=await Fe.from("profiles").update({role_id:It,updated_at:new Date().toISOString()}).eq("role_id",T);if(R)return n({type:"SET_ERROR",payload:gn(R,"Error actualizando roles de usuario antes de eliminar el rol.")}),n({type:"SET_LOADING",payload:!1}),!1;const{error:N}=await Fe.from("roles").delete().eq("id",T);return N?(n({type:"SET_ERROR",payload:gn(N,"Error eliminando rol.")}),n({type:"SET_LOADING",payload:!1}),!1):(await a(),n({type:"DELETE_ROLE_SUCCESS",payload:T}),n({type:"SET_LOADING",payload:!1}),!0)},_=async T=>{console.log(`[UserRoleStore:addUserProfileInDb] Inicio para ${T.email}. Rol: ${T.roleId}, FullName: ${T.full_name}`),n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const R={email:T.email,password:T.password||`defaultP@sswOrd${Math.random().toString(36).slice(-8)}`,options:{data:{full_name:T.full_name||""}}};console.log(`[UserRoleStore:addUserProfileInDb] Llamando a supabase.auth.signUp para ${T.email} con full_name: ${T.full_name||""}`);const{data:N,error:O}=await Fe.auth.signUp(R);if(O||!(N!=null&&N.user)){const U=gn(O,`Error creando usuario de autenticación para ${T.email} vía signUp.`);return console.error(`[UserRoleStore:addUserProfileInDb] Error en supabase.auth.signUp: ${U}`,O),n({type:"SET_ERROR",payload:U}),n({type:"SET_LOADING",payload:!1}),null}const D=N.user.id;console.log(`[UserRoleStore:addUserProfileInDb] Usuario de autenticación ${D} creado para ${T.email} vía signUp. Esperando trigger handle_new_user...`),await new Promise(U=>setTimeout(U,2e3)),console.log(`[UserRoleStore:addUserProfileInDb] Buscando perfil en 'profiles' para ${D}.`);const{data:k,error:I}=await Fe.from("profiles").select("*, full_name, cargo").eq("id",D).single();if(I||!k){const U=`El perfil para ${T.email} (ID: ${D}) no fue encontrado después de signUp y el trigger. Esto podría indicar un problema con el trigger 'handle_new_user'. Detalles del error de Supabase (si existe): ${gn(I,"Perfil no encontrado")}. El usuario de autenticación podría necesitar ser eliminado manualmente si el problema persiste.`;return console.error(`[UserRoleStore:addUserProfileInDb] ${U}`,I),n({type:"SET_ERROR",payload:U}),n({type:"SET_LOADING",payload:!1}),null}console.log(`[UserRoleStore:addUserProfileInDb] Perfil encontrado para ${D}. Rol actual (del trigger): ${k.role_id}. Nombre Completo del perfil: ${k.full_name}. Cargo: ${k.cargo}. Rol deseado por admin: ${T.roleId}`);const j={...k,full_name:k.full_name||T.full_name||null,cargo:k.cargo||null};if(k.role_id!==T.roleId||T.full_name&&k.full_name!==T.full_name){console.log(`[UserRoleStore:addUserProfileInDb] Actualizando rol y/o nombre para ${k.id} a Rol: ${T.roleId}, Nombre: ${T.full_name||k.full_name}.`);const U={role_id:T.roleId,updated_at:new Date().toISOString()};T.full_name&&T.full_name!==k.full_name&&(U.full_name=T.full_name);const{data:re,error:B}=await Fe.from("profiles").update(U).eq("id",k.id).select("*, full_name, cargo").single();if(B||!re){const me=gn(B,`Error actualizando el rol/nombre para el nuevo perfil: ${T.email}. El usuario fue creado con el rol por defecto del trigger (${k.role_id}).`);return console.error(`[UserRoleStore:addUserProfileInDb] ${me}`,B),n({type:"SET_ERROR",payload:me}),n({type:"ADD_USER_PROFILE_SUCCESS",payload:j}),n({type:"SET_LOADING",payload:!1}),j}const Z={...re,full_name:re.full_name||null,cargo:re.cargo||null};return console.log(`[UserRoleStore:addUserProfileInDb] Usuario ${T.email} creado y perfil actualizado. Rol: ${Z.role_id}, Nombre: ${Z.full_name}, Cargo: ${Z.cargo}`),n({type:"ADD_USER_PROFILE_SUCCESS",payload:Z}),n({type:"SET_LOADING",payload:!1}),n({type:"SET_SUCCESS_MESSAGE",payload:`Usuario ${T.email} creado. Si la confirmación por correo está habilitada, el usuario deberá confirmar su email.`}),Z}else return console.log(`[UserRoleStore:addUserProfileInDb] Usuario ${T.email} creado con rol ${T.roleId} (coincidía con el del trigger y nombre igual). Nombre completo del perfil: ${j.full_name}, Cargo: ${j.cargo}`),n({type:"ADD_USER_PROFILE_SUCCESS",payload:j}),n({type:"SET_LOADING",payload:!1}),n({type:"SET_SUCCESS_MESSAGE",payload:`Usuario ${T.email} creado. Si la confirmación por correo está habilitada, el usuario deberá confirmar su email.`}),j},S=async(T,R)=>{n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const{data:N,error:O}=await Fe.from("profiles").update({role_id:R,updated_at:new Date().toISOString()}).eq("id",T).select("*, full_name, cargo").single();if(O)return n({type:"SET_ERROR",payload:gn(O,"Error actualizando rol de usuario.")}),n({type:"SET_LOADING",payload:!1}),null;if(N){const D={...N,full_name:N.full_name||null,cargo:N.cargo||null};n({type:"UPDATE_USER_PROFILE_SUCCESS",payload:D})}return n({type:"SET_LOADING",payload:!1}),{...N,full_name:N.full_name||null,cargo:N.cargo||null}},E=async(T,R)=>{n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const N={updated_at:new Date().toISOString()};if(R.fullName!==void 0&&(N.full_name=R.fullName),R.cargo!==void 0&&(N.cargo=R.cargo),Object.keys(N).length===1&&N.updated_at)return n({type:"SET_LOADING",payload:!1}),e.allUsers.find(I=>I.id===T)||null;const{data:O,error:D}=await Fe.from("profiles").update(N).eq("id",T).select("*, full_name, cargo").single();if(D)return n({type:"SET_ERROR",payload:gn(D,"Error actualizando detalles del perfil de usuario.")}),n({type:"SET_LOADING",payload:!1}),null;if(O){const k={...O,full_name:O.full_name||null,cargo:O.cargo||null};n({type:"UPDATE_USER_PROFILE_SUCCESS",payload:k})}return n({type:"SET_LOADING",payload:!1}),{...O,full_name:O.full_name||null,cargo:O.cargo||null}},C=async T=>{n({type:"CLEAR_MESSAGES"}),n({type:"SET_LOADING",payload:!0});const{data:R,error:N}=await Fe.auth.admin.deleteUser(T);if(N){const D=`Error eliminando el usuario de autenticación (ID: ${T}). Esto puede suceder si el usuario que realiza la acción no es un superadministrador de Supabase. Error original: ${gn(N,"")}`;return console.error(`[UserRoleStore] ${D}`,N),n({type:"SET_ERROR",payload:D}),n({type:"SET_LOADING",payload:!1}),!1}console.log(`[UserRoleStore] Auth user ${T} deleted. Now deleting profile.`);const{error:O}=await Fe.from("profiles").delete().eq("id",T);if(O){const D=`Usuario de autenticación ${T} eliminado, pero hubo un error al eliminar su perfil de la tabla 'profiles'. Revise la integridad de los datos. Error: ${gn(O,"")}`;return console.warn(`[UserRoleStore] ${D}`,O),n({type:"DELETE_USER_PROFILE_SUCCESS",payload:T}),n({type:"SET_ERROR",payload:D}),n({type:"SET_LOADING",payload:!1}),!0}return n({type:"DELETE_USER_PROFILE_SUCCESS",payload:T}),console.log(`[UserRoleStore] Usuario ${T} eliminado exitosamente (perfil y autenticación).`),n({type:"SET_LOADING",payload:!1}),!0};return p.jsx(vM.Provider,{value:{state:e,dispatch:n,loginUser:u,signUpUser:f,logoutUser:d,createRoleInDb:h,updateRoleInDb:v,deleteRoleInDb:x,addUserProfileInDb:_,updateUserRoleInDb:S,updateUserProfileDetailsInDb:E,deleteUserProfileInDb:C},children:t})},Fn=()=>{const t=A.useContext(vM);if(t===void 0)throw new Error("useUserRoleStore must be used within a UserRoleProvider");return t},k5=()=>{var r;const{state:t}=Fn(),e=((r=t.currentRole)==null?void 0:r.canUploadDocuments)===!0,n=e?"md:grid-cols-3":"md:grid-cols-2";return p.jsxs("div",{className:"text-center",children:[p.jsxs("header",{className:"mb-12",children:[p.jsx("h1",{className:"text-5xl font-bold text-primary mb-4",children:"Bienvenido al Gestor Documental IA"}),p.jsxs("p",{className:"text-xl text-neutral-dark max-w-2xl mx-auto",children:["Organiza, analiza y encuentra tus documentos de forma inteligente.",e&&" Sube tus archivos y deja que la IA te ayude a gestionarlos eficientemente."]})]}),p.jsxs("div",{className:`grid ${n} gap-8 max-w-4xl mx-auto`,children:[e&&p.jsx(ln,{to:"/upload",className:"transform hover:scale-105 transition-transform duration-200",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl hover:shadow-2xl h-full flex flex-col items-center justify-center",children:[p.jsx(vc,{className:"w-16 h-16 text-primary mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-neutral-dark mb-2",children:"Subir Documentos"}),p.jsx("p",{className:"text-neutral-dark text-sm",children:"Carga nuevos archivos para su análisis y clasificación."})]})}),p.jsx(ln,{to:"/documents",className:"transform hover:scale-105 transition-transform duration-200",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl hover:shadow-2xl h-full flex flex-col items-center justify-center",children:[p.jsx(gh,{className:"w-16 h-16 text-primary mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-neutral-dark mb-2",children:"Ver Documentos"}),p.jsx("p",{className:"text-neutral-dark text-sm",children:"Busca y filtra entre todos tus documentos digitalizados."})]})}),p.jsx(ln,{to:"/classifications",className:"transform hover:scale-105 transition-transform duration-200",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl hover:shadow-2xl h-full flex flex-col items-center justify-center",children:[p.jsx(hi,{className:"w-16 h-16 text-primary mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-neutral-dark mb-2",children:"Clasificaciones"}),p.jsx("p",{className:"text-neutral-dark text-sm",children:"Explora documentos organizados por el sistema Dewey."})]})})]}),p.jsx("section",{className:"mt-16 py-12 bg-primary-light rounded-lg shadow-md",children:p.jsxs("div",{className:"container mx-auto px-6 text-center",children:[p.jsx("h3",{className:"text-3xl font-semibold text-primary-dark mb-6",children:"Características Principales"}),p.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-primary-dark",children:[p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[p.jsx("h4",{className:"text-xl font-bold mb-2",children:"Análisis IA Avanzado"}),p.jsx("p",{className:"text-sm",children:"Resúmenes automáticos y extracción de palabras clave precisas."})]}),p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[p.jsx("h4",{className:"text-xl font-bold mb-2",children:"Clasificación Inteligente"}),p.jsx("p",{className:"text-sm",children:"Organización automática usando el sistema Dewey de segundo nivel."})]}),p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[p.jsx("h4",{className:"text-xl font-bold mb-2",children:"Búsqueda Eficiente"}),p.jsx("p",{className:"text-sm",children:"Encuentra lo que necesitas rápidamente con filtros y búsqueda por palabras clave."})]})]})]})})]})},P5=({onFileSelect:t,acceptedFileTypes:e=".pdf,.png,.jpg,.jpeg,.docx,.txt,.xlsx,.xls,.pptx,.ppt",label:n="Seleccionar archivo",id:r="fileInput"})=>{const i=A.useRef(null),[a,l]=A.useState(null),u=d=>{var v;const h=(v=d.target.files)==null?void 0:v[0];h&&(t(h),l(h.name))},f=()=>{var d;(d=i.current)==null||d.click()};return p.jsxs("div",{children:[p.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-neutral-dark mb-1",children:n}),p.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-neutral border-dashed rounded-md cursor-pointer hover:border-primary transition-colors",onClick:f,onDrop:d=>{d.preventDefault(),d.stopPropagation(),d.dataTransfer.files&&d.dataTransfer.files[0]&&(t(d.dataTransfer.files[0]),l(d.dataTransfer.files[0].name))},onDragOver:d=>{d.preventDefault(),d.stopPropagation()},children:p.jsxs("div",{className:"space-y-1 text-center",children:[p.jsx(vc,{className:"mx-auto h-12 w-12 text-neutral"}),p.jsxs("div",{className:"flex text-sm text-neutral-dark",children:[p.jsxs("span",{className:"relative bg-white rounded-md font-medium text-primary hover:text-primary-dark focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary",children:[p.jsx("span",{children:"Cargar un archivo"}),p.jsx("input",{id:r,name:r,type:"file",className:"sr-only",ref:i,onChange:u,accept:e})]}),p.jsx("p",{className:"pl-1",children:"o arrastrar y soltar"})]}),p.jsx("p",{className:"text-xs text-gray-500",children:e.replace(/\./g,"").toUpperCase().split(",").join(", ")}),a&&p.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["Archivo seleccionado: ",a]})]})})]})},Se=({children:t,variant:e="primary",size:n="md",leftIcon:r,rightIcon:i,isLoading:a=!1,className:l="",...u})=>{const f="font-semibold rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-150 ease-in-out inline-flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",d={primary:"bg-primary text-white hover:bg-primary-dark focus:ring-primary",secondary:"bg-secondary text-neutral-dark hover:bg-secondary-dark focus:ring-secondary",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-primary hover:bg-blue-100 focus:ring-primary"},h={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return p.jsxs("button",{className:`${f} ${d[e]} ${h[n]} ${l}`,disabled:a||u.disabled,...u,children:[a&&p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r&&!a&&p.jsx("span",{className:"mr-2",children:r}),t,i&&!a&&p.jsx("span",{className:"ml-2",children:i})]})},Ft=({size:t="md",text:e,className:n})=>{const r={sm:"w-4 h-4 border",md:"w-8 h-8 border-[3px]",lg:"w-12 h-12 border-4"};return p.jsxs("div",{className:`flex flex-col items-center justify-center ${n}`,children:[" ",p.jsx("div",{className:`animate-spin rounded-full border-primary border-t-transparent ${r[t]}`}),e&&p.jsx("p",{className:"mt-3 text-sm text-neutral-dark",children:e})," "]})};var Te=(t=>(t.PDF="PDF",t.JPG="JPG",t.PNG="PNG",t.DOCX="DOCX",t.TXT="TXT",t.XLSX="XLSX",t.XLS="XLS",t.PPTX="PPTX",t.PPT="PPT",t.UNKNOWN="UNKNOWN",t))(Te||{});const $t=t=>t?t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):"",xM=t=>t.slice((t.lastIndexOf(".")-1>>>0)+2).toLowerCase(),Th=t=>t.substring(0,t.lastIndexOf("."))||t,bM="3.11.174",I5=async t=>{var d,h;const e=xM(t.name);let n=Te.UNKNOWN,r="",i;const a=window.pdfjsLib,l=window.mammoth,u=window.XLSX,f=window.JSZip;switch(e){case"pdf":if(n=Te.PDF,!a)throw console.error("pdf.js library is not loaded."),new Error("La librería pdf.js no está cargada. Asegúrate de que la conexión a internet esté activa y no haya bloqueadores de scripts.");const v=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${bM}/pdf.worker.min.js`;a.GlobalWorkerOptions.workerSrc!==v&&(a.GlobalWorkerOptions.workerSrc=v),console.log("Using PDF.js workerSrc:",a.GlobalWorkerOptions.workerSrc);try{const x=await t.arrayBuffer(),_=await a.getDocument({data:x}).promise,S=await _.getPage(1),E=S.getViewport({scale:1}),C=document.createElement("canvas"),T=C.getContext("2d");C.height=E.height,C.width=E.width,T&&(await S.render({canvasContext:T,viewport:E}).promise,i=C.toDataURL("image/png"));let R="";for(let N=1;N<=_.numPages;N++){const D=await(await _.getPage(N)).getTextContent();R+=D.items.map(k=>k.str).join(" ")+`
`}r=R}catch(x){console.error("Error processing PDF:",x),r="Error al extraer texto del PDF.",x instanceof Error&&(x.message.toLowerCase().includes("worker")||x.message.toLowerCase().includes("importscripts")?r+=" Puede haber un problema con la carga del worker de PDF.js (pdf.worker.min.js). Revisa la consola del navegador para más detalles y asegúrate que no haya bloqueos de red o CORS si sirves la app localmente desde file://.":r+=` Detalles: ${x.message}`)}break;case"jpg":case"jpeg":case"png":n=e==="png"?Te.PNG:Te.JPG,r=`Imagen: ${t.name}. El contenido textual será extraído por la IA.`,i=await new Promise(x=>{const _=new FileReader;_.onloadend=()=>x(_.result),_.readAsDataURL(t)});break;case"docx":if(n=Te.DOCX,!l)throw console.error("mammoth.js library is not loaded."),new Error("La librería mammoth.js no está cargada. Asegúrate de que la conexión a internet esté activa y no haya bloqueadores de scripts.");try{const x=await t.arrayBuffer();r=(await l.extractRawText({arrayBuffer:x})).value,i=void 0}catch(x){console.error("Error processing DOCX:",x),r="Error al extraer texto del DOCX."}break;case"pptx":if(n=Te.PPTX,!f)throw console.error("JSZip library is not loaded."),new Error("La librería JSZip no está cargada. Asegúrate de que la conexión a internet esté activa y no haya bloqueadores de scripts.");try{const x=await t.arrayBuffer(),_=await f.loadAsync(x),S=[],E=[];(d=_.folder("ppt/slides"))==null||d.forEach((O,D)=>{O.endsWith(".xml")&&S.push(D.async("string"))}),(h=_.folder("ppt/notesSlides"))==null||h.forEach((O,D)=>{O.endsWith(".xml")&&E.push(D.async("string"))});const C=await Promise.all(S),T=await Promise.all(E);let R="";const N=O=>{const I=new DOMParser().parseFromString(O,"application/xml").getElementsByTagName("a:t");let j="";for(let U=0;U<I.length;U++)j+=I[U].textContent+" ";return j.trim()};C.forEach((O,D)=>{R+=`--- Contenido de la Diapositiva ${D+1} ---
`,R+=N(O)+`

`}),T.forEach((O,D)=>{const k=N(O);k&&(R+=`--- Notas del Orador (Diapositiva ${D+1}) ---
`,R+=k+`

`)}),r=R.trim(),i=void 0}catch(x){console.error("Error processing PPTX:",x),r="Error al extraer texto del PPTX."}break;case"ppt":throw n=Te.PPT,new Error("El formato .ppt (PowerPoint 97-2003) no es compatible para la extracción automática de texto. Por favor, guarde el archivo como .pptx y vuelva a intentarlo.");case"txt":n=Te.TXT;try{r=await t.text(),i=void 0}catch(x){console.error("Error processing TXT:",x),r="Error al extraer texto del TXT."}break;case"xlsx":case"xls":if(n=e==="xlsx"?Te.XLSX:Te.XLS,!u)throw console.error("SheetJS (xlsx) library is not loaded."),new Error("La librería SheetJS (xlsx) no está cargada. Asegúrate de que la conexión a internet esté activa y no haya bloqueadores de scripts.");try{const x=await t.arrayBuffer(),_=u.read(x,{type:"array"});let S="";_.SheetNames.forEach(E=>{S+=`--- Contenido de la Hoja '${E}' ---

`;const C=_.Sheets[E],T=u.utils.sheet_to_csv(C);S+=T+`

`}),r=S.trim(),i=void 0}catch(x){console.error(`Error processing ${n}:`,x),r=`Error al extraer texto del archivo ${n}.`}break;default:n=Te.UNKNOWN,r=`Tipo de archivo no soportado directamente para extracción de texto: ${t.name}.`;break}return{text:r,previewUrl:i,fileType:n}},L5=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>{const i=r.result;e(i.split(",")[1])},r.onerror=i=>n(i)}),_M=async(t,e)=>{const n=window.pdfjsLib;if(e===Te.PDF){if(!n)return console.error("pdf.js library is not loaded for preview generation from blob."),null;const r=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${bM}/pdf.worker.min.js`;n.GlobalWorkerOptions.workerSrc!==r&&(n.GlobalWorkerOptions.workerSrc=r);try{const i=await t.arrayBuffer(),l=await(await n.getDocument({data:i}).promise).getPage(1),u=l.getViewport({scale:.8}),f=document.createElement("canvas"),d=f.getContext("2d");return f.height=u.height,f.width=u.width,d?(await l.render({canvasContext:d,viewport:u}).promise,f.toDataURL("image/png")):(console.error("Failed to get canvas context for PDF preview from blob."),null)}catch(i){return console.error("Error generating PDF preview from blob:",i),null}}else if(e===Te.JPG||e===Te.PNG)return new Promise((r,i)=>{const a=new FileReader;a.onloadend=()=>r(a.result),a.onerror=l=>{console.error("Error generating image preview from blob with FileReader:",l),i(l)},a.readAsDataURL(t)});return null};var mt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const l of i)a[l]=l;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(const u of a)l[u]=i[u];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},t.find=(i,a)=>{for(const l of i)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(mt||(mt={}));var EC;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(EC||(EC={}));const ke=mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oa=t=>{switch(typeof t){case"undefined":return ke.undefined;case"string":return ke.string;case"number":return Number.isNaN(t)?ke.nan:ke.number;case"boolean":return ke.boolean;case"function":return ke.function;case"bigint":return ke.bigint;case"symbol":return ke.symbol;case"object":return Array.isArray(t)?ke.array:t===null?ke.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ke.promise:typeof Map<"u"&&t instanceof Map?ke.map:typeof Set<"u"&&t instanceof Set?ke.set:typeof Date<"u"&&t instanceof Date?ke.date:ke.object;default:return ke.unknown}},Ce=mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Gi extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let u=r,f=0;for(;f<l.path.length;){const d=l.path[f];f===l.path.length-1?(u[d]=u[d]||{_errors:[]},u[d]._errors.push(n(l))):u[d]=u[d]||{_errors:[]},u=u[d],f++}}};return i(this),r}static assert(e){if(!(e instanceof Gi))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Gi.create=t=>new Gi(t);const Hv=(t,e)=>{let n;switch(t.code){case Ce.invalid_type:t.received===ke.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,mt.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${mt.joinValues(t.keys,", ")}`;break;case Ce.invalid_union:n="Invalid input";break;case Ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${mt.joinValues(t.options)}`;break;case Ce.invalid_enum_value:n=`Invalid enum value. Expected ${mt.joinValues(t.options)}, received '${t.received}'`;break;case Ce.invalid_arguments:n="Invalid function arguments";break;case Ce.invalid_return_type:n="Invalid function return type";break;case Ce.invalid_date:n="Invalid date";break;case Ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:mt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ce.custom:n="Invalid input";break;case Ce.invalid_intersection_types:n="Intersection results could not be merged";break;case Ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,mt.assertNever(t)}return{message:n}};let j5=Hv;function U5(){return j5}const $5=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let u="";const f=r.filter(d=>!!d).slice().reverse();for(const d of f)u=d(l,{data:e,defaultError:u}).message;return{...i,path:a,message:u}};function De(t,e){const n=U5(),r=$5({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Hv?void 0:Hv].filter(i=>!!i)});t.common.issues.push(r)}class Xn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return He;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,l=await i.value;r.push({key:a,value:l})}return Xn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return He;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[a.value]=l.value)}return{status:e.value,value:r}}}const He=Object.freeze({status:"aborted"}),Yu=t=>({status:"dirty",value:t}),jr=t=>({status:"valid",value:t}),CC=t=>t.status==="aborted",TC=t=>t.status==="dirty",sl=t=>t.status==="valid",Tf=t=>typeof Promise<"u"&&t instanceof Promise;var Ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ie||(Ie={}));class pi{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const AC=(t,e)=>{if(sl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Gi(t.common.issues);return this._error=n,this._error}}};function Qe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,u)=>{const{message:f}=t;return l.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:f??r??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:f??n??u.defaultError}},description:i}}class ut{get description(){return this._def.description}_getType(e){return Oa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Oa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Xn,ctx:{common:e.parent.common,data:e.data,parsedType:Oa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Tf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oa(e)},i=this._parseSync({data:e,path:r.path,parent:r});return AC(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oa(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return sl(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>sl(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oa(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(Tf(i)?i:Promise.resolve(i));return AC(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const l=e(i),u=()=>a.addIssue({code:Ce.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new cl({schema:this,typeName:Ge.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ja.create(this,this._def)}nullable(){return dl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ci.create(this)}promise(){return Of.create(this,this._def)}or(e){return Nf.create([this,e],this._def)}and(e){return Df.create(this,e,this._def)}transform(e){return new cl({...Qe(this._def),schema:this,typeName:Ge.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Xv({...Qe(this._def),innerType:this,defaultValue:n,typeName:Ge.ZodDefault})}brand(){return new l4({typeName:Ge.ZodBranded,type:this,...Qe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Jv({...Qe(this._def),innerType:this,catchValue:n,typeName:Ge.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return fx.create(this,e)}readonly(){return Zv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const F5=/^c[^\s-]{8,}$/i,B5=/^[0-9a-z]+$/,q5=/^[0-9A-HJKMNP-TV-Z]{26}$/i,V5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,z5=/^[a-z0-9_-]{21}$/i,G5=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,H5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,K5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Y5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ig;const W5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,X5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,J5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Z5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Q5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,e4=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,wM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",t4=new RegExp(`^${wM}$`);function SM(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function n4(t){return new RegExp(`^${SM(t)}$`)}function r4(t){let e=`${wM}T${SM(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function i4(t,e){return!!((e==="v4"||!e)&&W5.test(t)||(e==="v6"||!e)&&J5.test(t))}function a4(t,e){if(!G5.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function o4(t,e){return!!((e==="v4"||!e)&&X5.test(t)||(e==="v6"||!e)&&Z5.test(t))}class li extends ut{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ke.string){const a=this._getOrReturnCtx(e);return De(a,{code:Ce.invalid_type,expected:ke.string,received:a.parsedType}),He}const r=new Xn;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(i=this._getOrReturnCtx(e,i),l?De(i,{code:Ce.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&De(i,{code:Ce.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")K5.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"email",code:Ce.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Ig||(Ig=new RegExp(Y5,"u")),Ig.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"emoji",code:Ce.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")V5.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"uuid",code:Ce.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")z5.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"nanoid",code:Ce.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")F5.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"cuid",code:Ce.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")B5.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"cuid2",code:Ce.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")q5.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"ulid",code:Ce.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),De(i,{validation:"url",code:Ce.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"regex",code:Ce.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?r4(a).test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?t4.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?n4(a).test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?H5.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"duration",code:Ce.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?i4(e.data,a.version)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"ip",code:Ce.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?a4(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"jwt",code:Ce.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?o4(e.data,a.version)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"cidr",code:Ce.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Q5.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"base64",code:Ce.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?e4.test(e.data)||(i=this._getOrReturnCtx(e,i),De(i,{validation:"base64url",code:Ce.invalid_string,message:a.message}),r.dirty()):mt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Ce.invalid_string,...Ie.errToObj(r)})}_addCheck(e){return new li({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ie.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ie.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ie.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ie.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ie.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ie.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ie.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ie.errToObj(n)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new li({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new li({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new li({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}li.create=t=>new li({checks:[],typeName:Ge.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Qe(t)});function s4(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),l=Number.parseInt(e.toFixed(i).replace(".",""));return a%l/10**i}class ko extends ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ke.number){const a=this._getOrReturnCtx(e);return De(a,{code:Ce.invalid_type,expected:ke.number,received:a.parsedType}),He}let r;const i=new Xn;for(const a of this._def.checks)a.kind==="int"?mt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),De(r,{code:Ce.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:Ce.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:Ce.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?s4(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),De(r,{code:Ce.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),De(r,{code:Ce.not_finite,message:a.message}),i.dirty()):mt.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,r,i){return new ko({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ie.toString(i)}]})}_addCheck(e){return new ko({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&mt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ko.create=t=>new ko({checks:[],typeName:Ge.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Qe(t)});class Po extends ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ke.bigint)return this._getInvalidInput(e);let r;const i=new Xn;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:Ce.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:Ce.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),De(r,{code:Ce.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):mt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return De(n,{code:Ce.invalid_type,expected:ke.bigint,received:n.parsedType}),He}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,r,i){return new Po({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ie.toString(i)}]})}_addCheck(e){return new Po({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Po.create=t=>new Po({checks:[],typeName:Ge.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Qe(t)});class Af extends ut{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ke.boolean){const r=this._getOrReturnCtx(e);return De(r,{code:Ce.invalid_type,expected:ke.boolean,received:r.parsedType}),He}return jr(e.data)}}Af.create=t=>new Af({typeName:Ge.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Qe(t)});class ll extends ut{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ke.date){const a=this._getOrReturnCtx(e);return De(a,{code:Ce.invalid_type,expected:ke.date,received:a.parsedType}),He}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return De(a,{code:Ce.invalid_date}),He}const r=new Xn;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),De(i,{code:Ce.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):mt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ll({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ll.create=t=>new ll({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ge.ZodDate,...Qe(t)});class NC extends ut{_parse(e){if(this._getType(e)!==ke.symbol){const r=this._getOrReturnCtx(e);return De(r,{code:Ce.invalid_type,expected:ke.symbol,received:r.parsedType}),He}return jr(e.data)}}NC.create=t=>new NC({typeName:Ge.ZodSymbol,...Qe(t)});class DC extends ut{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return De(r,{code:Ce.invalid_type,expected:ke.undefined,received:r.parsedType}),He}return jr(e.data)}}DC.create=t=>new DC({typeName:Ge.ZodUndefined,...Qe(t)});class MC extends ut{_parse(e){if(this._getType(e)!==ke.null){const r=this._getOrReturnCtx(e);return De(r,{code:Ce.invalid_type,expected:ke.null,received:r.parsedType}),He}return jr(e.data)}}MC.create=t=>new MC({typeName:Ge.ZodNull,...Qe(t)});class OC extends ut{constructor(){super(...arguments),this._any=!0}_parse(e){return jr(e.data)}}OC.create=t=>new OC({typeName:Ge.ZodAny,...Qe(t)});class Kv extends ut{constructor(){super(...arguments),this._unknown=!0}_parse(e){return jr(e.data)}}Kv.create=t=>new Kv({typeName:Ge.ZodUnknown,...Qe(t)});class Fa extends ut{_parse(e){const n=this._getOrReturnCtx(e);return De(n,{code:Ce.invalid_type,expected:ke.never,received:n.parsedType}),He}}Fa.create=t=>new Fa({typeName:Ge.ZodNever,...Qe(t)});class RC extends ut{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return De(r,{code:Ce.invalid_type,expected:ke.void,received:r.parsedType}),He}return jr(e.data)}}RC.create=t=>new RC({typeName:Ge.ZodVoid,...Qe(t)});class ci extends ut{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ke.array)return De(n,{code:Ce.invalid_type,expected:ke.array,received:n.parsedType}),He;if(i.exactLength!==null){const l=n.data.length>i.exactLength.value,u=n.data.length<i.exactLength.value;(l||u)&&(De(n,{code:l?Ce.too_big:Ce.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(De(n,{code:Ce.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(De(n,{code:Ce.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>i.type._parseAsync(new pi(n,l,n.path,u)))).then(l=>Xn.mergeArray(r,l));const a=[...n.data].map((l,u)=>i.type._parseSync(new pi(n,l,n.path,u)));return Xn.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new ci({...this._def,minLength:{value:e,message:Ie.toString(n)}})}max(e,n){return new ci({...this._def,maxLength:{value:e,message:Ie.toString(n)}})}length(e,n){return new ci({...this._def,exactLength:{value:e,message:Ie.toString(n)}})}nonempty(e){return this.min(1,e)}}ci.create=(t,e)=>new ci({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ge.ZodArray,...Qe(e)});function Ws(t){if(t instanceof sn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ja.create(Ws(r))}return new sn({...t._def,shape:()=>e})}else return t instanceof ci?new ci({...t._def,type:Ws(t.element)}):t instanceof ja?ja.create(Ws(t.unwrap())):t instanceof dl?dl.create(Ws(t.unwrap())):t instanceof Io?Io.create(t.items.map(e=>Ws(e))):t}class sn extends ut{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=mt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ke.object){const d=this._getOrReturnCtx(e);return De(d,{code:Ce.invalid_type,expected:ke.object,received:d.parsedType}),He}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof Fa&&this._def.unknownKeys==="strip"))for(const d in i.data)l.includes(d)||u.push(d);const f=[];for(const d of l){const h=a[d],v=i.data[d];f.push({key:{status:"valid",value:d},value:h._parse(new pi(i,v,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Fa){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of u)f.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(d==="strict")u.length>0&&(De(i,{code:Ce.unrecognized_keys,keys:u}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of u){const v=i.data[h];f.push({key:{status:"valid",value:h},value:d._parse(new pi(i,v,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of f){const v=await h.key,x=await h.value;d.push({key:v,value:x,alwaysSet:h.alwaysSet})}return d}).then(d=>Xn.mergeObjectSync(r,d)):Xn.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new sn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,l;const i=((l=(a=this._def).errorMap)==null?void 0:l.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Ie.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new sn({...this._def,unknownKeys:"strip"})}passthrough(){return new sn({...this._def,unknownKeys:"passthrough"})}extend(e){return new sn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new sn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ge.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new sn({...this._def,catchall:e})}pick(e){const n={};for(const r of mt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new sn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of mt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new sn({...this._def,shape:()=>n})}deepPartial(){return Ws(this)}partial(e){const n={};for(const r of mt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new sn({...this._def,shape:()=>n})}required(e){const n={};for(const r of mt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof ja;)a=a._def.innerType;n[r]=a}return new sn({...this._def,shape:()=>n})}keyof(){return EM(mt.objectKeys(this.shape))}}sn.create=(t,e)=>new sn({shape:()=>t,unknownKeys:"strip",catchall:Fa.create(),typeName:Ge.ZodObject,...Qe(e)});sn.strictCreate=(t,e)=>new sn({shape:()=>t,unknownKeys:"strict",catchall:Fa.create(),typeName:Ge.ZodObject,...Qe(e)});sn.lazycreate=(t,e)=>new sn({shape:t,unknownKeys:"strip",catchall:Fa.create(),typeName:Ge.ZodObject,...Qe(e)});class Nf extends ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new Gi(u.ctx.common.issues));return De(n,{code:Ce.invalid_union,unionErrors:l}),He}if(n.common.async)return Promise.all(r.map(async a=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(i);{let a;const l=[];for(const f of r){const d={...n,common:{...n.common,issues:[]},parent:null},h=f._parseSync({data:n.data,path:n.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(f=>new Gi(f));return De(n,{code:Ce.invalid_union,unionErrors:u}),He}}get options(){return this._def.options}}Nf.create=(t,e)=>new Nf({options:t,typeName:Ge.ZodUnion,...Qe(e)});function Yv(t,e){const n=Oa(t),r=Oa(e);if(t===e)return{valid:!0,data:t};if(n===ke.object&&r===ke.object){const i=mt.objectKeys(e),a=mt.objectKeys(t).filter(u=>i.indexOf(u)!==-1),l={...t,...e};for(const u of a){const f=Yv(t[u],e[u]);if(!f.valid)return{valid:!1};l[u]=f.data}return{valid:!0,data:l}}else if(n===ke.array&&r===ke.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const l=t[a],u=e[a],f=Yv(l,u);if(!f.valid)return{valid:!1};i.push(f.data)}return{valid:!0,data:i}}else return n===ke.date&&r===ke.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Df extends ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,l)=>{if(CC(a)||CC(l))return He;const u=Yv(a.value,l.value);return u.valid?((TC(a)||TC(l))&&n.dirty(),{status:n.value,value:u.data}):(De(r,{code:Ce.invalid_intersection_types}),He)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Df.create=(t,e,n)=>new Df({left:t,right:e,typeName:Ge.ZodIntersection,...Qe(n)});class Io extends ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.array)return De(r,{code:Ce.invalid_type,expected:ke.array,received:r.parsedType}),He;if(r.data.length<this._def.items.length)return De(r,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&r.data.length>this._def.items.length&&(De(r,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((l,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new pi(r,l,r.path,u)):null}).filter(l=>!!l);return r.common.async?Promise.all(a).then(l=>Xn.mergeArray(n,l)):Xn.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Io({...this._def,rest:e})}}Io.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Io({items:t,typeName:Ge.ZodTuple,rest:null,...Qe(e)})};class Mf extends ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.object)return De(r,{code:Ce.invalid_type,expected:ke.object,received:r.parsedType}),He;const i=[],a=this._def.keyType,l=this._def.valueType;for(const u in r.data)i.push({key:a._parse(new pi(r,u,r.path,u)),value:l._parse(new pi(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Xn.mergeObjectAsync(n,i):Xn.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ut?new Mf({keyType:e,valueType:n,typeName:Ge.ZodRecord,...Qe(r)}):new Mf({keyType:li.create(),valueType:e,typeName:Ge.ZodRecord,...Qe(n)})}}class kC extends ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.map)return De(r,{code:Ce.invalid_type,expected:ke.map,received:r.parsedType}),He;const i=this._def.keyType,a=this._def.valueType,l=[...r.data.entries()].map(([u,f],d)=>({key:i._parse(new pi(r,u,r.path,[d,"key"])),value:a._parse(new pi(r,f,r.path,[d,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of l){const d=await f.key,h=await f.value;if(d.status==="aborted"||h.status==="aborted")return He;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),u.set(d.value,h.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const f of l){const d=f.key,h=f.value;if(d.status==="aborted"||h.status==="aborted")return He;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),u.set(d.value,h.value)}return{status:n.value,value:u}}}}kC.create=(t,e,n)=>new kC({valueType:e,keyType:t,typeName:Ge.ZodMap,...Qe(n)});class oc extends ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.set)return De(r,{code:Ce.invalid_type,expected:ke.set,received:r.parsedType}),He;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(De(r,{code:Ce.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(De(r,{code:Ce.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function l(f){const d=new Set;for(const h of f){if(h.status==="aborted")return He;h.status==="dirty"&&n.dirty(),d.add(h.value)}return{status:n.value,value:d}}const u=[...r.data.values()].map((f,d)=>a._parse(new pi(r,f,r.path,d)));return r.common.async?Promise.all(u).then(f=>l(f)):l(u)}min(e,n){return new oc({...this._def,minSize:{value:e,message:Ie.toString(n)}})}max(e,n){return new oc({...this._def,maxSize:{value:e,message:Ie.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}oc.create=(t,e)=>new oc({valueType:t,minSize:null,maxSize:null,typeName:Ge.ZodSet,...Qe(e)});class Wv extends ut{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Wv.create=(t,e)=>new Wv({getter:t,typeName:Ge.ZodLazy,...Qe(e)});class PC extends ut{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return De(n,{received:n.data,code:Ce.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:e.data}}get value(){return this._def.value}}PC.create=(t,e)=>new PC({value:t,typeName:Ge.ZodLiteral,...Qe(e)});function EM(t,e){return new ul({values:t,typeName:Ge.ZodEnum,...Qe(e)})}class ul extends ut{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return De(n,{expected:mt.joinValues(r),received:n.parsedType,code:Ce.invalid_type}),He}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return De(n,{received:n.data,code:Ce.invalid_enum_value,options:r}),He}return jr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ul.create(e,{...this._def,...n})}exclude(e,n=this._def){return ul.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ul.create=EM;class IC extends ut{_parse(e){const n=mt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ke.string&&r.parsedType!==ke.number){const i=mt.objectValues(n);return De(r,{expected:mt.joinValues(i),received:r.parsedType,code:Ce.invalid_type}),He}if(this._cache||(this._cache=new Set(mt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=mt.objectValues(n);return De(r,{received:r.data,code:Ce.invalid_enum_value,options:i}),He}return jr(e.data)}get enum(){return this._def.values}}IC.create=(t,e)=>new IC({values:t,typeName:Ge.ZodNativeEnum,...Qe(e)});class Of extends ut{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.promise&&n.common.async===!1)return De(n,{code:Ce.invalid_type,expected:ke.promise,received:n.parsedType}),He;const r=n.parsedType===ke.promise?n.data:Promise.resolve(n.data);return jr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Of.create=(t,e)=>new Of({type:t,typeName:Ge.ZodPromise,...Qe(e)});class cl extends ut{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:l=>{De(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const l=i.transform(r.data,a);if(r.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return He;const f=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return f.status==="aborted"?He:f.status==="dirty"||n.value==="dirty"?Yu(f.value):f});{if(n.value==="aborted")return He;const u=this._def.schema._parseSync({data:l,path:r.path,parent:r});return u.status==="aborted"?He:u.status==="dirty"||n.value==="dirty"?Yu(u.value):u}}if(i.type==="refinement"){const l=u=>{const f=i.refinement(u,a);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?He:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?He:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!sl(l))return He;const u=i.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>sl(l)?Promise.resolve(i.transform(l.value,a)).then(u=>({status:n.value,value:u})):He);mt.assertNever(i)}}cl.create=(t,e,n)=>new cl({schema:t,typeName:Ge.ZodEffects,effect:e,...Qe(n)});cl.createWithPreprocess=(t,e,n)=>new cl({schema:e,effect:{type:"preprocess",transform:t},typeName:Ge.ZodEffects,...Qe(n)});class ja extends ut{_parse(e){return this._getType(e)===ke.undefined?jr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ja.create=(t,e)=>new ja({innerType:t,typeName:Ge.ZodOptional,...Qe(e)});class dl extends ut{_parse(e){return this._getType(e)===ke.null?jr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}dl.create=(t,e)=>new dl({innerType:t,typeName:Ge.ZodNullable,...Qe(e)});class Xv extends ut{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ke.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Xv.create=(t,e)=>new Xv({innerType:t,typeName:Ge.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Qe(e)});class Jv extends ut{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Tf(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Gi(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Gi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Jv.create=(t,e)=>new Jv({innerType:t,typeName:Ge.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Qe(e)});class LC extends ut{_parse(e){if(this._getType(e)!==ke.nan){const r=this._getOrReturnCtx(e);return De(r,{code:Ce.invalid_type,expected:ke.nan,received:r.parsedType}),He}return{status:"valid",value:e.data}}}LC.create=t=>new LC({typeName:Ge.ZodNaN,...Qe(t)});class l4 extends ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class fx extends ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?He:a.status==="dirty"?(n.dirty(),Yu(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?He:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new fx({in:e,out:n,typeName:Ge.ZodPipeline})}}class Zv extends ut{_parse(e){const n=this._def.innerType._parse(e),r=i=>(sl(i)&&(i.value=Object.freeze(i.value)),i);return Tf(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Zv.create=(t,e)=>new Zv({innerType:t,typeName:Ge.ZodReadonly,...Qe(e)});var Ge;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ge||(Ge={}));const yo=li.create,jC=ko.create;Po.create;const u4=Af.create;ll.create;const UC=Kv.create;Fa.create;const Wu=ci.create,c4=sn.create,d4=Nf.create;Df.create;Io.create;const f4=Mf.create,h4=Wv.create,m4=ul.create;Of.create;ja.create;dl.create;const Vs={string:t=>li.create({...t,coerce:!0}),number:t=>ko.create({...t,coerce:!0}),boolean:t=>Af.create({...t,coerce:!0}),bigint:t=>Po.create({...t,coerce:!0}),date:t=>ll.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let p4,g4;function y4(){return{geminiUrl:p4,vertexUrl:g4}}function v4(t,e,n){var r,i,a;if(!(!((r=t.httpOptions)===null||r===void 0)&&r.baseUrl)){const l=y4();return t.vertexai?(i=l.vertexUrl)!==null&&i!==void 0?i:e:(a=l.geminiUrl)!==null&&a!==void 0?a:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tl{}function ze(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function y(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[u])){const f=t[u];if(Array.isArray(n))for(let d=0;d<f.length;d++){const h=f[d];y(h,e.slice(a+1),n[d])}else for(const d of f)y(d,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in t||(t[u]=[{}]);const f=t[u];y(f[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function g(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const a=t[i];return Array.isArray(a)?a.map(l=>g(l,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $C;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($C||($C={}));var FC;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(FC||(FC={}));var Rr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Rr||(Rr={}));var BC;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(BC||(BC={}));var qC;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(qC||(qC={}));var VC;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(VC||(VC={}));var zC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(zC||(zC={}));var GC;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(GC||(GC={}));var HC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(HC||(HC={}));var KC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(KC||(KC={}));var YC;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(YC||(YC={}));var WC;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(WC||(WC={}));var XC;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(XC||(XC={}));var Rf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Rf||(Rf={}));var JC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(JC||(JC={}));var Qv;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qv||(Qv={}));var ZC;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ZC||(ZC={}));var QC;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(QC||(QC={}));var e1;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(e1||(e1={}));var t1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(t1||(t1={}));var n1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(n1||(n1={}));var r1;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(r1||(r1={}));var i1;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(i1||(i1={}));var a1;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(a1||(a1={}));var o1;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(o1||(o1={}));var s1;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(s1||(s1={}));var l1;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(l1||(l1={}));var u1;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(u1||(u1={}));var c1;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(c1||(c1={}));var d1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(d1||(d1={}));var f1;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(f1||(f1={}));var h1;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(h1||(h1={}));var m1;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(m1||(m1={}));var p1;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(p1||(p1={}));var g1;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(g1||(g1={}));var y1;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(y1||(y1={}));var v1;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(v1||(v1={}));var x1;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(x1||(x1={}));var Xs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Xs||(Xs={}));class Uu{get text(){var e,n,r,i,a,l,u,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const v=[];for(const x of(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[_,S]of Object.entries(x))_!=="text"&&_!=="thought"&&(S!==null||S!==void 0)&&v.push(_);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;h=!0,d+=x.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,n,r,i,a,l,u,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const v of(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[x,_]of Object.entries(v))x!=="inlineData"&&(_!==null||_!==void 0)&&h.push(x);v.inlineData&&typeof v.inlineData.data=="string"&&(d+=atob(v.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,a,l,u,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,a,l,u,f,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,a,l,u,f,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(f=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.output}}class b1{}class _1{}class x4{}class b4{}class w1{}class S1{}class E1{}class _4{}class C1{}class T1{}class A1{}class w4{}class e0{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class S4{}class E4{}class C4{get text(){var e,n,r;let i="",a=!1;const l=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,d]of Object.entries(u))f!=="text"&&f!=="thought"&&d!==null&&l.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,i+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,n,r;let i="";const a=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,f]of Object.entries(l))u!=="inlineData"&&f!==null&&a.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class T4{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function CM(t,e){const n=kt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function TM(t,e){return Array.isArray(e)?e.map(n=>kf(t,n)):[kf(t,e)]}function kf(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function A4(t,e){const n=kf(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function N4(t,e){const n=kf(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function N1(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function AM(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>N1(t,n)):[N1(t,e)]}function t0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function D1(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function M1(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Yn(t,e){if(e==null)throw new Error("ContentUnion is required");return t0(e)?e:{role:"user",parts:AM(t,e)}}function NM(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Yn(t,n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Yn(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Yn(t,n)):[Yn(t,e)]}function Wr(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(D1(e)||M1(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yn(t,e)]}const n=[],r=[],i=t0(e[0]);for(const a of e){const l=t0(a);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)n.push(a);else{if(D1(a)||M1(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(a)}}return i||n.push({role:"user",parts:AM(t,r)}),n}const D4=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),O1=m4(["string","number","integer","object","array","boolean","null"]),M4=d4([O1,Wu(O1)]);function O4(t=!0){const e=h4(()=>{const n=c4({type:M4.optional(),format:yo().optional(),title:yo().optional(),description:yo().optional(),default:UC().optional(),items:e.optional(),minItems:Vs.string().optional(),maxItems:Vs.string().optional(),enum:Wu(UC()).optional(),properties:f4(yo(),e).optional(),required:Wu(yo()).optional(),minProperties:Vs.string().optional(),maxProperties:Vs.string().optional(),propertyOrdering:Wu(yo()).optional(),minimum:jC().optional(),maximum:jC().optional(),minLength:Vs.string().optional(),maxLength:Vs.string().optional(),pattern:yo().optional(),anyOf:Wu(e).optional(),additionalProperties:u4().optional()});return t?n.strict():n});return e}function R4(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.keys(Rr).includes(n[0].toUpperCase())?Rr[n[0].toUpperCase()]:Rr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.keys(Rr).includes(r.toUpperCase())?Rr[r.toUpperCase()]:Rr.TYPE_UNSPECIFIED})}}function el(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&R4(t.type,e);for(const[l,u]of Object.entries(t))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.keys(Rr).includes(u.toUpperCase())?u.toUpperCase():Rr.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=el(u);else if(r.includes(l)){const f=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}f.push(el(d))}e[l]=f}else if(i.includes(l)){const f={};for(const[d,h]of Object.entries(u))f[d]=el(h);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=u}return e}function Pf(t,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const n=O4().parse(e);return el(n)}else return el(e)}function DM(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function hx(t,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function wc(t,e){if(e.functionDeclarations)for(const n of e.functionDeclarations)n.parameters&&(n.parameters=Pf(t,n.parameters)),n.response&&(n.response=Pf(t,n.response));return e}function Sc(t,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const n=[];for(const r of e)n.push(r);return n}function k4(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function za(t,e){if(typeof e!="string")throw new Error("name must be a string");return k4(t,e,"cachedContents")}function MM(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Ga(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function P4(t){return t!=null&&typeof t=="object"&&"name"in t}function I4(t){return t!=null&&typeof t=="object"&&"video"in t}function L4(t){return t!=null&&typeof t=="object"&&"uri"in t}function OM(t,e){var n;let r;if(P4(e)&&(r=e.name),!(L4(e)&&(r=e.uri,r===void 0))&&!(I4(e)&&(r=(n=e.video)===null||n===void 0?void 0:n.uri,r===void 0))){if(typeof e=="string"&&(r=e),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const a=r.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${r}`);r=a[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function RM(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function kM(t,e){for(const n of["models","tunedModels","publisherModels"])if(j4(e,n))return e[n];return[]}function j4(t,e){return t!==null&&typeof t=="object"&&e in t}function U4(t,e={}){const n=t,r={name:n.name,description:n.description,parameters:el(Ah(n.inputSchema))};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function $4(t,e={}){const n=[],r=new Set;for(const i of t){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const l=U4(i,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function F4(t){const e=[];for(const n of t)e.push(Ah(n));return e}function B4(t){const e={};for(const[n,r]of Object.entries(t)){const i=r;e[n]=Ah(i)}return e}function Ah(t){const e=new Set(["items"]),n=new Set(["anyOf"]),r=new Set(["properties"]),i={};for(const[a,l]of Object.entries(t))if(e.has(a))i[a]=Ah(l);else if(n.has(a))i[a]=F4(l);else if(r.has(a))i[a]=B4(l);else if(a==="type"){const u=l.toUpperCase();i[a]=Object.keys(Rr).includes(u)?u:Rr.TYPE_UNSPECIFIED}else D4.has(a)&&(i[a]=l);return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q4(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function V4(t,e){const n={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["data"]);r!=null&&y(n,["data"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function z4(t,e){const n={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["fileUri"]);r!=null&&y(n,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function G4(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],q4(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],V4(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],z4(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function R1(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>G4(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function H4(t,e){const n={},r=g(e,["behavior"]);r!=null&&y(n,["behavior"],r);const i=g(e,["description"]);i!=null&&y(n,["description"],i);const a=g(e,["name"]);a!=null&&y(n,["name"],a);const l=g(e,["parameters"]);l!=null&&y(n,["parameters"],l);const u=g(e,["response"]);return u!=null&&y(n,["response"],u),n}function K4(t,e){const n={},r=g(e,["startTime"]);r!=null&&y(n,["startTime"],r);const i=g(e,["endTime"]);return i!=null&&y(n,["endTime"],i),n}function Y4(t,e){const n={},r=g(e,["timeRangeFilter"]);return r!=null&&y(n,["timeRangeFilter"],K4(t,r)),n}function W4(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(n,["dynamicThreshold"],i),n}function X4(t,e){const n={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(n,["dynamicRetrievalConfig"],W4(t,r)),n}function J4(){return{}}function Z4(t,e){const n={},r=g(e,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>H4(t,d))),y(n,["functionDeclarations"],f)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(e,["googleSearch"]);i!=null&&y(n,["googleSearch"],Y4(t,i));const a=g(e,["googleSearchRetrieval"]);if(a!=null&&y(n,["googleSearchRetrieval"],X4(t,a)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&y(n,["urlContext"],J4());const u=g(e,["codeExecution"]);return u!=null&&y(n,["codeExecution"],u),n}function Q4(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&y(n,["allowedFunctionNames"],i),n}function e3(t,e){const n={},r=g(e,["latitude"]);r!=null&&y(n,["latitude"],r);const i=g(e,["longitude"]);return i!=null&&y(n,["longitude"],i),n}function t3(t,e){const n={},r=g(e,["latLng"]);r!=null&&y(n,["latLng"],e3(t,r));const i=g(e,["languageCode"]);return i!=null&&y(n,["languageCode"],i),n}function n3(t,e){const n={},r=g(e,["functionCallingConfig"]);r!=null&&y(n,["functionCallingConfig"],Q4(t,r));const i=g(e,["retrievalConfig"]);return i!=null&&y(n,["retrievalConfig"],t3(t,i)),n}function r3(t,e,n){const r={},i=g(e,["ttl"]);n!==void 0&&i!=null&&y(n,["ttl"],i);const a=g(e,["expireTime"]);n!==void 0&&a!=null&&y(n,["expireTime"],a);const l=g(e,["displayName"]);n!==void 0&&l!=null&&y(n,["displayName"],l);const u=g(e,["contents"]);if(n!==void 0&&u!=null){let v=Wr(t,u);Array.isArray(v)&&(v=v.map(x=>R1(t,x))),y(n,["contents"],v)}const f=g(e,["systemInstruction"]);n!==void 0&&f!=null&&y(n,["systemInstruction"],R1(t,Yn(t,f)));const d=g(e,["tools"]);if(n!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(x=>Z4(t,x))),y(n,["tools"],v)}const h=g(e,["toolConfig"]);if(n!==void 0&&h!=null&&y(n,["toolConfig"],n3(t,h)),g(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function i3(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["model"],CM(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],r3(t,i,n)),n}function a3(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],za(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function o3(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],za(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function s3(t,e,n){const r={},i=g(e,["ttl"]);n!==void 0&&i!=null&&y(n,["ttl"],i);const a=g(e,["expireTime"]);return n!==void 0&&a!=null&&y(n,["expireTime"],a),r}function l3(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],za(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],s3(t,i,n)),n}function u3(t,e,n){const r={},i=g(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const a=g(e,["pageToken"]);return n!==void 0&&a!=null&&y(n,["_query","pageToken"],a),r}function c3(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],u3(t,r,n)),n}function d3(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function f3(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["data"]);i!=null&&y(n,["data"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function h3(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["fileUri"]);i!=null&&y(n,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function m3(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],d3(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],f3(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],h3(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function k1(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>m3(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function p3(t,e){const n={};if(g(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=g(e,["description"]);r!=null&&y(n,["description"],r);const i=g(e,["name"]);i!=null&&y(n,["name"],i);const a=g(e,["parameters"]);a!=null&&y(n,["parameters"],a);const l=g(e,["response"]);return l!=null&&y(n,["response"],l),n}function g3(t,e){const n={},r=g(e,["startTime"]);r!=null&&y(n,["startTime"],r);const i=g(e,["endTime"]);return i!=null&&y(n,["endTime"],i),n}function y3(t,e){const n={},r=g(e,["timeRangeFilter"]);return r!=null&&y(n,["timeRangeFilter"],g3(t,r)),n}function v3(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(n,["dynamicThreshold"],i),n}function x3(t,e){const n={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(n,["dynamicRetrievalConfig"],v3(t,r)),n}function b3(){return{}}function _3(t,e){const n={},r=g(e,["apiKeyString"]);return r!=null&&y(n,["apiKeyString"],r),n}function w3(t,e){const n={},r=g(e,["apiKeyConfig"]);r!=null&&y(n,["apiKeyConfig"],_3(t,r));const i=g(e,["authType"]);i!=null&&y(n,["authType"],i);const a=g(e,["googleServiceAccountConfig"]);a!=null&&y(n,["googleServiceAccountConfig"],a);const l=g(e,["httpBasicAuthConfig"]);l!=null&&y(n,["httpBasicAuthConfig"],l);const u=g(e,["oauthConfig"]);u!=null&&y(n,["oauthConfig"],u);const f=g(e,["oidcConfig"]);return f!=null&&y(n,["oidcConfig"],f),n}function S3(t,e){const n={},r=g(e,["authConfig"]);return r!=null&&y(n,["authConfig"],w3(t,r)),n}function E3(t,e){const n={},r=g(e,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(v=>p3(t,v))),y(n,["functionDeclarations"],h)}const i=g(e,["retrieval"]);i!=null&&y(n,["retrieval"],i);const a=g(e,["googleSearch"]);a!=null&&y(n,["googleSearch"],y3(t,a));const l=g(e,["googleSearchRetrieval"]);l!=null&&y(n,["googleSearchRetrieval"],x3(t,l)),g(e,["enterpriseWebSearch"])!=null&&y(n,["enterpriseWebSearch"],b3());const f=g(e,["googleMaps"]);if(f!=null&&y(n,["googleMaps"],S3(t,f)),g(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const d=g(e,["codeExecution"]);return d!=null&&y(n,["codeExecution"],d),n}function C3(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&y(n,["allowedFunctionNames"],i),n}function T3(t,e){const n={},r=g(e,["latitude"]);r!=null&&y(n,["latitude"],r);const i=g(e,["longitude"]);return i!=null&&y(n,["longitude"],i),n}function A3(t,e){const n={},r=g(e,["latLng"]);r!=null&&y(n,["latLng"],T3(t,r));const i=g(e,["languageCode"]);return i!=null&&y(n,["languageCode"],i),n}function N3(t,e){const n={},r=g(e,["functionCallingConfig"]);r!=null&&y(n,["functionCallingConfig"],C3(t,r));const i=g(e,["retrievalConfig"]);return i!=null&&y(n,["retrievalConfig"],A3(t,i)),n}function D3(t,e,n){const r={},i=g(e,["ttl"]);n!==void 0&&i!=null&&y(n,["ttl"],i);const a=g(e,["expireTime"]);n!==void 0&&a!=null&&y(n,["expireTime"],a);const l=g(e,["displayName"]);n!==void 0&&l!=null&&y(n,["displayName"],l);const u=g(e,["contents"]);if(n!==void 0&&u!=null){let x=Wr(t,u);Array.isArray(x)&&(x=x.map(_=>k1(t,_))),y(n,["contents"],x)}const f=g(e,["systemInstruction"]);n!==void 0&&f!=null&&y(n,["systemInstruction"],k1(t,Yn(t,f)));const d=g(e,["tools"]);if(n!==void 0&&d!=null){let x=d;Array.isArray(x)&&(x=x.map(_=>E3(t,_))),y(n,["tools"],x)}const h=g(e,["toolConfig"]);n!==void 0&&h!=null&&y(n,["toolConfig"],N3(t,h));const v=g(e,["kmsKeyName"]);return n!==void 0&&v!=null&&y(n,["encryption_spec","kmsKeyName"],v),r}function M3(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["model"],CM(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],D3(t,i,n)),n}function O3(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],za(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function R3(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],za(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function k3(t,e,n){const r={},i=g(e,["ttl"]);n!==void 0&&i!=null&&y(n,["ttl"],i);const a=g(e,["expireTime"]);return n!==void 0&&a!=null&&y(n,["expireTime"],a),r}function P3(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],za(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],k3(t,i,n)),n}function I3(t,e,n){const r={},i=g(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const a=g(e,["pageToken"]);return n!==void 0&&a!=null&&y(n,["_query","pageToken"],a),r}function L3(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],I3(t,r,n)),n}function yf(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["displayName"]);i!=null&&y(n,["displayName"],i);const a=g(e,["model"]);a!=null&&y(n,["model"],a);const l=g(e,["createTime"]);l!=null&&y(n,["createTime"],l);const u=g(e,["updateTime"]);u!=null&&y(n,["updateTime"],u);const f=g(e,["expireTime"]);f!=null&&y(n,["expireTime"],f);const d=g(e,["usageMetadata"]);return d!=null&&y(n,["usageMetadata"],d),n}function j3(){return{}}function U3(t,e){const n={},r=g(e,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>yf(t,l))),y(n,["cachedContents"],a)}return n}function vf(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["displayName"]);i!=null&&y(n,["displayName"],i);const a=g(e,["model"]);a!=null&&y(n,["model"],a);const l=g(e,["createTime"]);l!=null&&y(n,["createTime"],l);const u=g(e,["updateTime"]);u!=null&&y(n,["updateTime"],u);const f=g(e,["expireTime"]);f!=null&&y(n,["expireTime"],f);const d=g(e,["usageMetadata"]);return d!=null&&y(n,["usageMetadata"],d),n}function $3(){return{}}function F3(t,e){const n={},r=g(e,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>vf(t,l))),y(n,["cachedContents"],a)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fl;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(fl||(fl={}));class Nh{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};r?typeof r=="object"?l=Object.assign({},r):l=r:l={config:{}},l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B3 extends Tl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Nh(fl.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=M3(this.apiClient,e);return u=ze("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>vf(this.apiClient,h))}else{const d=i3(this.apiClient,e);return u=ze("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>yf(this.apiClient,h))}}async get(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=O3(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>vf(this.apiClient,h))}else{const d=a3(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>yf(this.apiClient,h))}}async delete(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=R3(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(()=>{const h=$3(),v=new T1;return Object.assign(v,h),v})}else{const d=o3(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(()=>{const h=j3(),v=new T1;return Object.assign(v,h),v})}}async update(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=P3(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>vf(this.apiClient,h))}else{const d=l3(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>yf(this.apiClient,h))}}async listInternal(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=L3(this.apiClient,e);return u=ze("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>{const v=F3(this.apiClient,h),x=new A1;return Object.assign(x,v),x})}else{const d=c3(this.apiClient,e);return u=ze("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>{const v=U3(this.apiClient,h),x=new A1;return Object.assign(x,v),x})}}}function P1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pt(t){return this instanceof Pt?(this.v=t,this):new Pt(t)}function tl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(_){return function(S){return Promise.resolve(S).then(_,v)}}function u(_,S){r[_]&&(i[_]=function(E){return new Promise(function(C,T){a.push([_,E,C,T])>1||f(_,E)})},S&&(i[_]=S(i[_])))}function f(_,S){try{d(r[_](S))}catch(E){x(a[0][3],E)}}function d(_){_.value instanceof Pt?Promise.resolve(_.value.v).then(h,v):x(a[0][2],_)}function h(_){f("next",_)}function v(_){f("throw",_)}function x(_,S){_(S),a.shift(),a.length&&f(a[0][0],a[0][1])}}function nc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof P1=="function"?P1(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(l){return new Promise(function(u,f){l=t[a](l),i(u,f,l.done,l.value)})}}function i(a,l,u,f){Promise.resolve(f).then(function(d){a({value:d,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:PM(n)}function PM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function V3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function I1(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let a=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),a&&!PM(t[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class z3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new G3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class G3{constructor(e,n,r,i={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),V3(a)}async sendMessage(e){var n;await this.sendPromise;const r=Yn(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,u;const f=await i,d=(l=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,h=f.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let x=[];h!=null&&(x=(u=h.slice(v))!==null&&u!==void 0?u:[]);const _=d?[d]:[];this.recordHistory(r,_,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Yn(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?I1(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return tl(this,arguments,function*(){var l,u,f,d;const h=[];try{for(var v=!0,x=nc(e),_;_=yield Pt(x.next()),l=_.done,!l;v=!0){d=_.value,v=!1;const S=d;if(q3(S)){const E=(i=(r=S.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;E!==void 0&&h.push(E)}yield yield Pt(S)}}catch(S){u={error:S}}finally{try{!v&&!l&&(f=x.return)&&(yield Pt(f.call(x)))}finally{if(u)throw u.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...I1(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H3(t,e,n){const r={},i=g(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const a=g(e,["pageToken"]);return n!==void 0&&a!=null&&y(n,["_query","pageToken"],a),r}function K3(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],H3(t,r,n)),n}function Y3(t,e){const n={},r=g(e,["details"]);r!=null&&y(n,["details"],r);const i=g(e,["message"]);i!=null&&y(n,["message"],i);const a=g(e,["code"]);return a!=null&&y(n,["code"],a),n}function W3(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["displayName"]);i!=null&&y(n,["displayName"],i);const a=g(e,["mimeType"]);a!=null&&y(n,["mimeType"],a);const l=g(e,["sizeBytes"]);l!=null&&y(n,["sizeBytes"],l);const u=g(e,["createTime"]);u!=null&&y(n,["createTime"],u);const f=g(e,["expirationTime"]);f!=null&&y(n,["expirationTime"],f);const d=g(e,["updateTime"]);d!=null&&y(n,["updateTime"],d);const h=g(e,["sha256Hash"]);h!=null&&y(n,["sha256Hash"],h);const v=g(e,["uri"]);v!=null&&y(n,["uri"],v);const x=g(e,["downloadUri"]);x!=null&&y(n,["downloadUri"],x);const _=g(e,["state"]);_!=null&&y(n,["state"],_);const S=g(e,["source"]);S!=null&&y(n,["source"],S);const E=g(e,["videoMetadata"]);E!=null&&y(n,["videoMetadata"],E);const C=g(e,["error"]);return C!=null&&y(n,["error"],Y3(t,C)),n}function X3(t,e){const n={},r=g(e,["file"]);r!=null&&y(n,["file"],W3(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function J3(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","file"],OM(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function Z3(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","file"],OM(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function Q3(t,e){const n={},r=g(e,["details"]);r!=null&&y(n,["details"],r);const i=g(e,["message"]);i!=null&&y(n,["message"],i);const a=g(e,["code"]);return a!=null&&y(n,["code"],a),n}function n0(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["displayName"]);i!=null&&y(n,["displayName"],i);const a=g(e,["mimeType"]);a!=null&&y(n,["mimeType"],a);const l=g(e,["sizeBytes"]);l!=null&&y(n,["sizeBytes"],l);const u=g(e,["createTime"]);u!=null&&y(n,["createTime"],u);const f=g(e,["expirationTime"]);f!=null&&y(n,["expirationTime"],f);const d=g(e,["updateTime"]);d!=null&&y(n,["updateTime"],d);const h=g(e,["sha256Hash"]);h!=null&&y(n,["sha256Hash"],h);const v=g(e,["uri"]);v!=null&&y(n,["uri"],v);const x=g(e,["downloadUri"]);x!=null&&y(n,["downloadUri"],x);const _=g(e,["state"]);_!=null&&y(n,["state"],_);const S=g(e,["source"]);S!=null&&y(n,["source"],S);const E=g(e,["videoMetadata"]);E!=null&&y(n,["videoMetadata"],E);const C=g(e,["error"]);return C!=null&&y(n,["error"],Q3(t,C)),n}function e6(t,e){const n={},r=g(e,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const i=g(e,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>n0(t,l))),y(n,["files"],a)}return n}function t6(){return{}}function n6(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r6 extends Tl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Nh(fl.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n0(this.apiClient,n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=K3(this.apiClient,e);return a=ze("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=e6(this.apiClient,f),h=new w4;return Object.assign(h,d),h})}}async createInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=X3(this.apiClient,e);return a=ze("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(()=>{const f=t6(),d=new S4;return Object.assign(d,f),d})}}async get(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=J3(this.apiClient,e);return a=ze("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>n0(this.apiClient,f))}}async delete(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Z3(this.apiClient,e);return a=ze("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(()=>{const f=n6(),d=new E4;return Object.assign(d,f),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i6(t,e){const n={},r=g(e,["voiceName"]);return r!=null&&y(n,["voiceName"],r),n}function a6(t,e){const n={},r=g(e,["voiceName"]);return r!=null&&y(n,["voiceName"],r),n}function IM(t,e){const n={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&y(n,["prebuiltVoiceConfig"],i6(t,r)),n}function o6(t,e){const n={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&y(n,["prebuiltVoiceConfig"],a6(t,r)),n}function s6(t,e){const n={},r=g(e,["speaker"]);r!=null&&y(n,["speaker"],r);const i=g(e,["voiceConfig"]);return i!=null&&y(n,["voiceConfig"],IM(t,i)),n}function l6(t,e){const n={},r=g(e,["speakerVoiceConfigs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>s6(t,a))),y(n,["speakerVoiceConfigs"],i)}return n}function u6(t,e){const n={},r=g(e,["voiceConfig"]);r!=null&&y(n,["voiceConfig"],IM(t,r));const i=g(e,["multiSpeakerVoiceConfig"]);i!=null&&y(n,["multiSpeakerVoiceConfig"],l6(t,i));const a=g(e,["languageCode"]);return a!=null&&y(n,["languageCode"],a),n}function c6(t,e){const n={},r=g(e,["voiceConfig"]);if(r!=null&&y(n,["voiceConfig"],o6(t,r)),g(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=g(e,["languageCode"]);return i!=null&&y(n,["languageCode"],i),n}function d6(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function f6(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function h6(t,e){const n={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["data"]);r!=null&&y(n,["data"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function m6(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["data"]);i!=null&&y(n,["data"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function p6(t,e){const n={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["fileUri"]);r!=null&&y(n,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function g6(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["fileUri"]);i!=null&&y(n,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function y6(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],d6(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],h6(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],p6(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function v6(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],f6(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],m6(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],g6(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function x6(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>y6(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function b6(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>v6(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function _6(t,e){const n={},r=g(e,["behavior"]);r!=null&&y(n,["behavior"],r);const i=g(e,["description"]);i!=null&&y(n,["description"],i);const a=g(e,["name"]);a!=null&&y(n,["name"],a);const l=g(e,["parameters"]);l!=null&&y(n,["parameters"],l);const u=g(e,["response"]);return u!=null&&y(n,["response"],u),n}function w6(t,e){const n={};if(g(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=g(e,["description"]);r!=null&&y(n,["description"],r);const i=g(e,["name"]);i!=null&&y(n,["name"],i);const a=g(e,["parameters"]);a!=null&&y(n,["parameters"],a);const l=g(e,["response"]);return l!=null&&y(n,["response"],l),n}function S6(t,e){const n={},r=g(e,["startTime"]);r!=null&&y(n,["startTime"],r);const i=g(e,["endTime"]);return i!=null&&y(n,["endTime"],i),n}function E6(t,e){const n={},r=g(e,["startTime"]);r!=null&&y(n,["startTime"],r);const i=g(e,["endTime"]);return i!=null&&y(n,["endTime"],i),n}function C6(t,e){const n={},r=g(e,["timeRangeFilter"]);return r!=null&&y(n,["timeRangeFilter"],S6(t,r)),n}function T6(t,e){const n={},r=g(e,["timeRangeFilter"]);return r!=null&&y(n,["timeRangeFilter"],E6(t,r)),n}function A6(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(n,["dynamicThreshold"],i),n}function N6(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(n,["dynamicThreshold"],i),n}function D6(t,e){const n={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(n,["dynamicRetrievalConfig"],A6(t,r)),n}function M6(t,e){const n={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(n,["dynamicRetrievalConfig"],N6(t,r)),n}function O6(){return{}}function R6(t,e){const n={},r=g(e,["apiKeyString"]);return r!=null&&y(n,["apiKeyString"],r),n}function k6(t,e){const n={},r=g(e,["apiKeyConfig"]);r!=null&&y(n,["apiKeyConfig"],R6(t,r));const i=g(e,["authType"]);i!=null&&y(n,["authType"],i);const a=g(e,["googleServiceAccountConfig"]);a!=null&&y(n,["googleServiceAccountConfig"],a);const l=g(e,["httpBasicAuthConfig"]);l!=null&&y(n,["httpBasicAuthConfig"],l);const u=g(e,["oauthConfig"]);u!=null&&y(n,["oauthConfig"],u);const f=g(e,["oidcConfig"]);return f!=null&&y(n,["oidcConfig"],f),n}function P6(t,e){const n={},r=g(e,["authConfig"]);return r!=null&&y(n,["authConfig"],k6(t,r)),n}function I6(){return{}}function L6(t,e){const n={},r=g(e,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>_6(t,d))),y(n,["functionDeclarations"],f)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(e,["googleSearch"]);i!=null&&y(n,["googleSearch"],C6(t,i));const a=g(e,["googleSearchRetrieval"]);if(a!=null&&y(n,["googleSearchRetrieval"],D6(t,a)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&y(n,["urlContext"],I6());const u=g(e,["codeExecution"]);return u!=null&&y(n,["codeExecution"],u),n}function j6(t,e){const n={},r=g(e,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(v=>w6(t,v))),y(n,["functionDeclarations"],h)}const i=g(e,["retrieval"]);i!=null&&y(n,["retrieval"],i);const a=g(e,["googleSearch"]);a!=null&&y(n,["googleSearch"],T6(t,a));const l=g(e,["googleSearchRetrieval"]);l!=null&&y(n,["googleSearchRetrieval"],M6(t,l)),g(e,["enterpriseWebSearch"])!=null&&y(n,["enterpriseWebSearch"],O6());const f=g(e,["googleMaps"]);if(f!=null&&y(n,["googleMaps"],P6(t,f)),g(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const d=g(e,["codeExecution"]);return d!=null&&y(n,["codeExecution"],d),n}function U6(t,e){const n={},r=g(e,["handle"]);if(r!=null&&y(n,["handle"],r),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function $6(t,e){const n={},r=g(e,["handle"]);r!=null&&y(n,["handle"],r);const i=g(e,["transparent"]);return i!=null&&y(n,["transparent"],i),n}function L1(){return{}}function j1(){return{}}function F6(t,e){const n={},r=g(e,["disabled"]);r!=null&&y(n,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&y(n,["startOfSpeechSensitivity"],i);const a=g(e,["endOfSpeechSensitivity"]);a!=null&&y(n,["endOfSpeechSensitivity"],a);const l=g(e,["prefixPaddingMs"]);l!=null&&y(n,["prefixPaddingMs"],l);const u=g(e,["silenceDurationMs"]);return u!=null&&y(n,["silenceDurationMs"],u),n}function B6(t,e){const n={},r=g(e,["disabled"]);r!=null&&y(n,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&y(n,["startOfSpeechSensitivity"],i);const a=g(e,["endOfSpeechSensitivity"]);a!=null&&y(n,["endOfSpeechSensitivity"],a);const l=g(e,["prefixPaddingMs"]);l!=null&&y(n,["prefixPaddingMs"],l);const u=g(e,["silenceDurationMs"]);return u!=null&&y(n,["silenceDurationMs"],u),n}function q6(t,e){const n={},r=g(e,["automaticActivityDetection"]);r!=null&&y(n,["automaticActivityDetection"],F6(t,r));const i=g(e,["activityHandling"]);i!=null&&y(n,["activityHandling"],i);const a=g(e,["turnCoverage"]);return a!=null&&y(n,["turnCoverage"],a),n}function V6(t,e){const n={},r=g(e,["automaticActivityDetection"]);r!=null&&y(n,["automaticActivityDetection"],B6(t,r));const i=g(e,["activityHandling"]);i!=null&&y(n,["activityHandling"],i);const a=g(e,["turnCoverage"]);return a!=null&&y(n,["turnCoverage"],a),n}function z6(t,e){const n={},r=g(e,["targetTokens"]);return r!=null&&y(n,["targetTokens"],r),n}function G6(t,e){const n={},r=g(e,["targetTokens"]);return r!=null&&y(n,["targetTokens"],r),n}function H6(t,e){const n={},r=g(e,["triggerTokens"]);r!=null&&y(n,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&y(n,["slidingWindow"],z6(t,i)),n}function K6(t,e){const n={},r=g(e,["triggerTokens"]);r!=null&&y(n,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&y(n,["slidingWindow"],G6(t,i)),n}function Y6(t,e){const n={},r=g(e,["proactiveAudio"]);return r!=null&&y(n,["proactiveAudio"],r),n}function W6(t,e){const n={},r=g(e,["proactiveAudio"]);return r!=null&&y(n,["proactiveAudio"],r),n}function X6(t,e,n){const r={},i=g(e,["generationConfig"]);n!==void 0&&i!=null&&y(n,["setup","generationConfig"],i);const a=g(e,["responseModalities"]);n!==void 0&&a!=null&&y(n,["setup","generationConfig","responseModalities"],a);const l=g(e,["temperature"]);n!==void 0&&l!=null&&y(n,["setup","generationConfig","temperature"],l);const u=g(e,["topP"]);n!==void 0&&u!=null&&y(n,["setup","generationConfig","topP"],u);const f=g(e,["topK"]);n!==void 0&&f!=null&&y(n,["setup","generationConfig","topK"],f);const d=g(e,["maxOutputTokens"]);n!==void 0&&d!=null&&y(n,["setup","generationConfig","maxOutputTokens"],d);const h=g(e,["mediaResolution"]);n!==void 0&&h!=null&&y(n,["setup","generationConfig","mediaResolution"],h);const v=g(e,["seed"]);n!==void 0&&v!=null&&y(n,["setup","generationConfig","seed"],v);const x=g(e,["speechConfig"]);n!==void 0&&x!=null&&y(n,["setup","generationConfig","speechConfig"],u6(t,hx(t,x)));const _=g(e,["enableAffectiveDialog"]);n!==void 0&&_!=null&&y(n,["setup","generationConfig","enableAffectiveDialog"],_);const S=g(e,["systemInstruction"]);n!==void 0&&S!=null&&y(n,["setup","systemInstruction"],x6(t,Yn(t,S)));const E=g(e,["tools"]);if(n!==void 0&&E!=null){let k=Sc(t,E);Array.isArray(k)&&(k=k.map(I=>L6(t,wc(t,I)))),y(n,["setup","tools"],k)}const C=g(e,["sessionResumption"]);n!==void 0&&C!=null&&y(n,["setup","sessionResumption"],U6(t,C));const T=g(e,["inputAudioTranscription"]);n!==void 0&&T!=null&&y(n,["setup","inputAudioTranscription"],L1());const R=g(e,["outputAudioTranscription"]);n!==void 0&&R!=null&&y(n,["setup","outputAudioTranscription"],L1());const N=g(e,["realtimeInputConfig"]);n!==void 0&&N!=null&&y(n,["setup","realtimeInputConfig"],q6(t,N));const O=g(e,["contextWindowCompression"]);n!==void 0&&O!=null&&y(n,["setup","contextWindowCompression"],H6(t,O));const D=g(e,["proactivity"]);return n!==void 0&&D!=null&&y(n,["setup","proactivity"],Y6(t,D)),r}function J6(t,e,n){const r={},i=g(e,["generationConfig"]);n!==void 0&&i!=null&&y(n,["setup","generationConfig"],i);const a=g(e,["responseModalities"]);n!==void 0&&a!=null&&y(n,["setup","generationConfig","responseModalities"],a);const l=g(e,["temperature"]);n!==void 0&&l!=null&&y(n,["setup","generationConfig","temperature"],l);const u=g(e,["topP"]);n!==void 0&&u!=null&&y(n,["setup","generationConfig","topP"],u);const f=g(e,["topK"]);n!==void 0&&f!=null&&y(n,["setup","generationConfig","topK"],f);const d=g(e,["maxOutputTokens"]);n!==void 0&&d!=null&&y(n,["setup","generationConfig","maxOutputTokens"],d);const h=g(e,["mediaResolution"]);n!==void 0&&h!=null&&y(n,["setup","generationConfig","mediaResolution"],h);const v=g(e,["seed"]);n!==void 0&&v!=null&&y(n,["setup","generationConfig","seed"],v);const x=g(e,["speechConfig"]);n!==void 0&&x!=null&&y(n,["setup","generationConfig","speechConfig"],c6(t,hx(t,x)));const _=g(e,["enableAffectiveDialog"]);n!==void 0&&_!=null&&y(n,["setup","generationConfig","enableAffectiveDialog"],_);const S=g(e,["systemInstruction"]);n!==void 0&&S!=null&&y(n,["setup","systemInstruction"],b6(t,Yn(t,S)));const E=g(e,["tools"]);if(n!==void 0&&E!=null){let k=Sc(t,E);Array.isArray(k)&&(k=k.map(I=>j6(t,wc(t,I)))),y(n,["setup","tools"],k)}const C=g(e,["sessionResumption"]);n!==void 0&&C!=null&&y(n,["setup","sessionResumption"],$6(t,C));const T=g(e,["inputAudioTranscription"]);n!==void 0&&T!=null&&y(n,["setup","inputAudioTranscription"],j1());const R=g(e,["outputAudioTranscription"]);n!==void 0&&R!=null&&y(n,["setup","outputAudioTranscription"],j1());const N=g(e,["realtimeInputConfig"]);n!==void 0&&N!=null&&y(n,["setup","realtimeInputConfig"],V6(t,N));const O=g(e,["contextWindowCompression"]);n!==void 0&&O!=null&&y(n,["setup","contextWindowCompression"],K6(t,O));const D=g(e,["proactivity"]);return n!==void 0&&D!=null&&y(n,["setup","proactivity"],W6(t,D)),r}function Z6(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["setup","model"],kt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],X6(t,i,n)),n}function Q6(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["setup","model"],kt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],J6(t,i,n)),n}function e$(){return{}}function t$(){return{}}function n$(){return{}}function r$(){return{}}function i$(t,e){const n={},r=g(e,["media"]);r!=null&&y(n,["mediaChunks"],TM(t,r));const i=g(e,["audio"]);i!=null&&y(n,["audio"],N4(t,i));const a=g(e,["audioStreamEnd"]);a!=null&&y(n,["audioStreamEnd"],a);const l=g(e,["video"]);l!=null&&y(n,["video"],A4(t,l));const u=g(e,["text"]);return u!=null&&y(n,["text"],u),g(e,["activityStart"])!=null&&y(n,["activityStart"],e$()),g(e,["activityEnd"])!=null&&y(n,["activityEnd"],n$()),n}function a$(t,e){const n={},r=g(e,["media"]);if(r!=null&&y(n,["mediaChunks"],TM(t,r)),g(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=g(e,["audioStreamEnd"]);if(i!=null&&y(n,["audioStreamEnd"],i),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(e,["activityStart"])!=null&&y(n,["activityStart"],t$()),g(e,["activityEnd"])!=null&&y(n,["activityEnd"],r$()),n}function LM(t,e){const n={},r=g(e,["text"]);r!=null&&y(n,["text"],r);const i=g(e,["weight"]);return i!=null&&y(n,["weight"],i),n}function o$(t,e){const n={},r=g(e,["weightedPrompts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>LM(t,a))),y(n,["weightedPrompts"],i)}return n}function jM(t,e){const n={},r=g(e,["temperature"]);r!=null&&y(n,["temperature"],r);const i=g(e,["topK"]);i!=null&&y(n,["topK"],i);const a=g(e,["seed"]);a!=null&&y(n,["seed"],a);const l=g(e,["guidance"]);l!=null&&y(n,["guidance"],l);const u=g(e,["bpm"]);u!=null&&y(n,["bpm"],u);const f=g(e,["density"]);f!=null&&y(n,["density"],f);const d=g(e,["brightness"]);d!=null&&y(n,["brightness"],d);const h=g(e,["scale"]);h!=null&&y(n,["scale"],h);const v=g(e,["muteBass"]);v!=null&&y(n,["muteBass"],v);const x=g(e,["muteDrums"]);x!=null&&y(n,["muteDrums"],x);const _=g(e,["onlyBassAndDrums"]);return _!=null&&y(n,["onlyBassAndDrums"],_),n}function s$(t,e){const n={},r=g(e,["musicGenerationConfig"]);return r!=null&&y(n,["musicGenerationConfig"],jM(t,r)),n}function UM(t,e){const n={},r=g(e,["model"]);return r!=null&&y(n,["model"],r),n}function $M(t,e){const n={},r=g(e,["weightedPrompts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>LM(t,a))),y(n,["weightedPrompts"],i)}return n}function r0(t,e){const n={},r=g(e,["setup"]);r!=null&&y(n,["setup"],UM(t,r));const i=g(e,["clientContent"]);i!=null&&y(n,["clientContent"],$M(t,i));const a=g(e,["musicGenerationConfig"]);a!=null&&y(n,["musicGenerationConfig"],jM(t,a));const l=g(e,["playbackControl"]);return l!=null&&y(n,["playbackControl"],l),n}function l$(){return{}}function u$(){return{}}function c$(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function d$(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function f$(t,e){const n={},r=g(e,["data"]);r!=null&&y(n,["data"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function h$(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["data"]);i!=null&&y(n,["data"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function m$(t,e){const n={},r=g(e,["fileUri"]);r!=null&&y(n,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function p$(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["fileUri"]);i!=null&&y(n,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function g$(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],c$(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],f$(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],m$(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function y$(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],d$(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],h$(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],p$(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function v$(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>g$(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function x$(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>y$(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function U1(t,e){const n={},r=g(e,["text"]);r!=null&&y(n,["text"],r);const i=g(e,["finished"]);return i!=null&&y(n,["finished"],i),n}function $1(t,e){const n={},r=g(e,["text"]);r!=null&&y(n,["text"],r);const i=g(e,["finished"]);return i!=null&&y(n,["finished"],i),n}function b$(t,e){const n={},r=g(e,["retrievedUrl"]);r!=null&&y(n,["retrievedUrl"],r);const i=g(e,["urlRetrievalStatus"]);return i!=null&&y(n,["urlRetrievalStatus"],i),n}function _$(t,e){const n={},r=g(e,["urlMetadata"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>b$(t,a))),y(n,["urlMetadata"],i)}return n}function w$(t,e){const n={},r=g(e,["modelTurn"]);r!=null&&y(n,["modelTurn"],v$(t,r));const i=g(e,["turnComplete"]);i!=null&&y(n,["turnComplete"],i);const a=g(e,["interrupted"]);a!=null&&y(n,["interrupted"],a);const l=g(e,["groundingMetadata"]);l!=null&&y(n,["groundingMetadata"],l);const u=g(e,["generationComplete"]);u!=null&&y(n,["generationComplete"],u);const f=g(e,["inputTranscription"]);f!=null&&y(n,["inputTranscription"],U1(t,f));const d=g(e,["outputTranscription"]);d!=null&&y(n,["outputTranscription"],U1(t,d));const h=g(e,["urlContextMetadata"]);return h!=null&&y(n,["urlContextMetadata"],_$(t,h)),n}function S$(t,e){const n={},r=g(e,["modelTurn"]);r!=null&&y(n,["modelTurn"],x$(t,r));const i=g(e,["turnComplete"]);i!=null&&y(n,["turnComplete"],i);const a=g(e,["interrupted"]);a!=null&&y(n,["interrupted"],a);const l=g(e,["groundingMetadata"]);l!=null&&y(n,["groundingMetadata"],l);const u=g(e,["generationComplete"]);u!=null&&y(n,["generationComplete"],u);const f=g(e,["inputTranscription"]);f!=null&&y(n,["inputTranscription"],$1(t,f));const d=g(e,["outputTranscription"]);return d!=null&&y(n,["outputTranscription"],$1(t,d)),n}function E$(t,e){const n={},r=g(e,["id"]);r!=null&&y(n,["id"],r);const i=g(e,["args"]);i!=null&&y(n,["args"],i);const a=g(e,["name"]);return a!=null&&y(n,["name"],a),n}function C$(t,e){const n={},r=g(e,["args"]);r!=null&&y(n,["args"],r);const i=g(e,["name"]);return i!=null&&y(n,["name"],i),n}function T$(t,e){const n={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>E$(t,a))),y(n,["functionCalls"],i)}return n}function A$(t,e){const n={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>C$(t,a))),y(n,["functionCalls"],i)}return n}function N$(t,e){const n={},r=g(e,["ids"]);return r!=null&&y(n,["ids"],r),n}function D$(t,e){const n={},r=g(e,["ids"]);return r!=null&&y(n,["ids"],r),n}function tf(t,e){const n={},r=g(e,["modality"]);r!=null&&y(n,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&y(n,["tokenCount"],i),n}function nf(t,e){const n={},r=g(e,["modality"]);r!=null&&y(n,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&y(n,["tokenCount"],i),n}function M$(t,e){const n={},r=g(e,["promptTokenCount"]);r!=null&&y(n,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&y(n,["cachedContentTokenCount"],i);const a=g(e,["responseTokenCount"]);a!=null&&y(n,["responseTokenCount"],a);const l=g(e,["toolUsePromptTokenCount"]);l!=null&&y(n,["toolUsePromptTokenCount"],l);const u=g(e,["thoughtsTokenCount"]);u!=null&&y(n,["thoughtsTokenCount"],u);const f=g(e,["totalTokenCount"]);f!=null&&y(n,["totalTokenCount"],f);const d=g(e,["promptTokensDetails"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(S=>tf(t,S))),y(n,["promptTokensDetails"],_)}const h=g(e,["cacheTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(S=>tf(t,S))),y(n,["cacheTokensDetails"],_)}const v=g(e,["responseTokensDetails"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>tf(t,S))),y(n,["responseTokensDetails"],_)}const x=g(e,["toolUsePromptTokensDetails"]);if(x!=null){let _=x;Array.isArray(_)&&(_=_.map(S=>tf(t,S))),y(n,["toolUsePromptTokensDetails"],_)}return n}function O$(t,e){const n={},r=g(e,["promptTokenCount"]);r!=null&&y(n,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&y(n,["cachedContentTokenCount"],i);const a=g(e,["candidatesTokenCount"]);a!=null&&y(n,["responseTokenCount"],a);const l=g(e,["toolUsePromptTokenCount"]);l!=null&&y(n,["toolUsePromptTokenCount"],l);const u=g(e,["thoughtsTokenCount"]);u!=null&&y(n,["thoughtsTokenCount"],u);const f=g(e,["totalTokenCount"]);f!=null&&y(n,["totalTokenCount"],f);const d=g(e,["promptTokensDetails"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(E=>nf(t,E))),y(n,["promptTokensDetails"],S)}const h=g(e,["cacheTokensDetails"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(E=>nf(t,E))),y(n,["cacheTokensDetails"],S)}const v=g(e,["candidatesTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(E=>nf(t,E))),y(n,["responseTokensDetails"],S)}const x=g(e,["toolUsePromptTokensDetails"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(E=>nf(t,E))),y(n,["toolUsePromptTokensDetails"],S)}const _=g(e,["trafficType"]);return _!=null&&y(n,["trafficType"],_),n}function R$(t,e){const n={},r=g(e,["timeLeft"]);return r!=null&&y(n,["timeLeft"],r),n}function k$(t,e){const n={},r=g(e,["timeLeft"]);return r!=null&&y(n,["timeLeft"],r),n}function P$(t,e){const n={},r=g(e,["newHandle"]);r!=null&&y(n,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&y(n,["resumable"],i);const a=g(e,["lastConsumedClientMessageIndex"]);return a!=null&&y(n,["lastConsumedClientMessageIndex"],a),n}function I$(t,e){const n={},r=g(e,["newHandle"]);r!=null&&y(n,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&y(n,["resumable"],i);const a=g(e,["lastConsumedClientMessageIndex"]);return a!=null&&y(n,["lastConsumedClientMessageIndex"],a),n}function L$(t,e){const n={};g(e,["setupComplete"])!=null&&y(n,["setupComplete"],l$());const i=g(e,["serverContent"]);i!=null&&y(n,["serverContent"],w$(t,i));const a=g(e,["toolCall"]);a!=null&&y(n,["toolCall"],T$(t,a));const l=g(e,["toolCallCancellation"]);l!=null&&y(n,["toolCallCancellation"],N$(t,l));const u=g(e,["usageMetadata"]);u!=null&&y(n,["usageMetadata"],M$(t,u));const f=g(e,["goAway"]);f!=null&&y(n,["goAway"],R$(t,f));const d=g(e,["sessionResumptionUpdate"]);return d!=null&&y(n,["sessionResumptionUpdate"],P$(t,d)),n}function j$(t,e){const n={};g(e,["setupComplete"])!=null&&y(n,["setupComplete"],u$());const i=g(e,["serverContent"]);i!=null&&y(n,["serverContent"],S$(t,i));const a=g(e,["toolCall"]);a!=null&&y(n,["toolCall"],A$(t,a));const l=g(e,["toolCallCancellation"]);l!=null&&y(n,["toolCallCancellation"],D$(t,l));const u=g(e,["usageMetadata"]);u!=null&&y(n,["usageMetadata"],O$(t,u));const f=g(e,["goAway"]);f!=null&&y(n,["goAway"],k$(t,f));const d=g(e,["sessionResumptionUpdate"]);return d!=null&&y(n,["sessionResumptionUpdate"],I$(t,d)),n}function U$(){return{}}function $$(t,e){const n={},r=g(e,["text"]);r!=null&&y(n,["text"],r);const i=g(e,["weight"]);return i!=null&&y(n,["weight"],i),n}function F$(t,e){const n={},r=g(e,["weightedPrompts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>$$(t,a))),y(n,["weightedPrompts"],i)}return n}function B$(t,e){const n={},r=g(e,["temperature"]);r!=null&&y(n,["temperature"],r);const i=g(e,["topK"]);i!=null&&y(n,["topK"],i);const a=g(e,["seed"]);a!=null&&y(n,["seed"],a);const l=g(e,["guidance"]);l!=null&&y(n,["guidance"],l);const u=g(e,["bpm"]);u!=null&&y(n,["bpm"],u);const f=g(e,["density"]);f!=null&&y(n,["density"],f);const d=g(e,["brightness"]);d!=null&&y(n,["brightness"],d);const h=g(e,["scale"]);h!=null&&y(n,["scale"],h);const v=g(e,["muteBass"]);v!=null&&y(n,["muteBass"],v);const x=g(e,["muteDrums"]);x!=null&&y(n,["muteDrums"],x);const _=g(e,["onlyBassAndDrums"]);return _!=null&&y(n,["onlyBassAndDrums"],_),n}function q$(t,e){const n={},r=g(e,["clientContent"]);r!=null&&y(n,["clientContent"],F$(t,r));const i=g(e,["musicGenerationConfig"]);return i!=null&&y(n,["musicGenerationConfig"],B$(t,i)),n}function V$(t,e){const n={},r=g(e,["data"]);r!=null&&y(n,["data"],r);const i=g(e,["mimeType"]);i!=null&&y(n,["mimeType"],i);const a=g(e,["sourceMetadata"]);return a!=null&&y(n,["sourceMetadata"],q$(t,a)),n}function z$(t,e){const n={},r=g(e,["audioChunks"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>V$(t,a))),y(n,["audioChunks"],i)}return n}function G$(t,e){const n={},r=g(e,["text"]);r!=null&&y(n,["text"],r);const i=g(e,["filteredReason"]);return i!=null&&y(n,["filteredReason"],i),n}function H$(t,e){const n={};g(e,["setupComplete"])!=null&&y(n,["setupComplete"],U$());const i=g(e,["serverContent"]);i!=null&&y(n,["serverContent"],z$(t,i));const a=g(e,["filteredPrompt"]);return a!=null&&y(n,["filteredPrompt"],G$(t,a)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K$(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function Y$(t,e){const n={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["data"]);r!=null&&y(n,["data"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function W$(t,e){const n={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["fileUri"]);r!=null&&y(n,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function X$(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],K$(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],Y$(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],W$(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function Dh(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>X$(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function J$(t,e){const n={},r=g(e,["anyOf"]);r!=null&&y(n,["anyOf"],r);const i=g(e,["default"]);i!=null&&y(n,["default"],i);const a=g(e,["description"]);a!=null&&y(n,["description"],a);const l=g(e,["enum"]);l!=null&&y(n,["enum"],l);const u=g(e,["example"]);u!=null&&y(n,["example"],u);const f=g(e,["format"]);f!=null&&y(n,["format"],f);const d=g(e,["items"]);d!=null&&y(n,["items"],d);const h=g(e,["maxItems"]);h!=null&&y(n,["maxItems"],h);const v=g(e,["maxLength"]);v!=null&&y(n,["maxLength"],v);const x=g(e,["maxProperties"]);x!=null&&y(n,["maxProperties"],x);const _=g(e,["maximum"]);_!=null&&y(n,["maximum"],_);const S=g(e,["minItems"]);S!=null&&y(n,["minItems"],S);const E=g(e,["minLength"]);E!=null&&y(n,["minLength"],E);const C=g(e,["minProperties"]);C!=null&&y(n,["minProperties"],C);const T=g(e,["minimum"]);T!=null&&y(n,["minimum"],T);const R=g(e,["nullable"]);R!=null&&y(n,["nullable"],R);const N=g(e,["pattern"]);N!=null&&y(n,["pattern"],N);const O=g(e,["properties"]);O!=null&&y(n,["properties"],O);const D=g(e,["propertyOrdering"]);D!=null&&y(n,["propertyOrdering"],D);const k=g(e,["required"]);k!=null&&y(n,["required"],k);const I=g(e,["title"]);I!=null&&y(n,["title"],I);const j=g(e,["type"]);return j!=null&&y(n,["type"],j),n}function Z$(t,e){const n={};if(g(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["category"]);r!=null&&y(n,["category"],r);const i=g(e,["threshold"]);return i!=null&&y(n,["threshold"],i),n}function Q$(t,e){const n={},r=g(e,["behavior"]);r!=null&&y(n,["behavior"],r);const i=g(e,["description"]);i!=null&&y(n,["description"],i);const a=g(e,["name"]);a!=null&&y(n,["name"],a);const l=g(e,["parameters"]);l!=null&&y(n,["parameters"],l);const u=g(e,["response"]);return u!=null&&y(n,["response"],u),n}function e9(t,e){const n={},r=g(e,["startTime"]);r!=null&&y(n,["startTime"],r);const i=g(e,["endTime"]);return i!=null&&y(n,["endTime"],i),n}function t9(t,e){const n={},r=g(e,["timeRangeFilter"]);return r!=null&&y(n,["timeRangeFilter"],e9(t,r)),n}function n9(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(n,["dynamicThreshold"],i),n}function r9(t,e){const n={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(n,["dynamicRetrievalConfig"],n9(t,r)),n}function i9(){return{}}function a9(t,e){const n={},r=g(e,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>Q$(t,d))),y(n,["functionDeclarations"],f)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(e,["googleSearch"]);i!=null&&y(n,["googleSearch"],t9(t,i));const a=g(e,["googleSearchRetrieval"]);if(a!=null&&y(n,["googleSearchRetrieval"],r9(t,a)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&y(n,["urlContext"],i9());const u=g(e,["codeExecution"]);return u!=null&&y(n,["codeExecution"],u),n}function o9(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&y(n,["allowedFunctionNames"],i),n}function s9(t,e){const n={},r=g(e,["latitude"]);r!=null&&y(n,["latitude"],r);const i=g(e,["longitude"]);return i!=null&&y(n,["longitude"],i),n}function l9(t,e){const n={},r=g(e,["latLng"]);r!=null&&y(n,["latLng"],s9(t,r));const i=g(e,["languageCode"]);return i!=null&&y(n,["languageCode"],i),n}function u9(t,e){const n={},r=g(e,["functionCallingConfig"]);r!=null&&y(n,["functionCallingConfig"],o9(t,r));const i=g(e,["retrievalConfig"]);return i!=null&&y(n,["retrievalConfig"],l9(t,i)),n}function c9(t,e){const n={},r=g(e,["voiceName"]);return r!=null&&y(n,["voiceName"],r),n}function FM(t,e){const n={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&y(n,["prebuiltVoiceConfig"],c9(t,r)),n}function d9(t,e){const n={},r=g(e,["speaker"]);r!=null&&y(n,["speaker"],r);const i=g(e,["voiceConfig"]);return i!=null&&y(n,["voiceConfig"],FM(t,i)),n}function f9(t,e){const n={},r=g(e,["speakerVoiceConfigs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>d9(t,a))),y(n,["speakerVoiceConfigs"],i)}return n}function h9(t,e){const n={},r=g(e,["voiceConfig"]);r!=null&&y(n,["voiceConfig"],FM(t,r));const i=g(e,["multiSpeakerVoiceConfig"]);i!=null&&y(n,["multiSpeakerVoiceConfig"],f9(t,i));const a=g(e,["languageCode"]);return a!=null&&y(n,["languageCode"],a),n}function m9(t,e){const n={},r=g(e,["includeThoughts"]);r!=null&&y(n,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&y(n,["thinkingBudget"],i),n}function p9(t,e,n){const r={},i=g(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],Dh(t,Yn(t,i)));const a=g(e,["temperature"]);a!=null&&y(r,["temperature"],a);const l=g(e,["topP"]);l!=null&&y(r,["topP"],l);const u=g(e,["topK"]);u!=null&&y(r,["topK"],u);const f=g(e,["candidateCount"]);f!=null&&y(r,["candidateCount"],f);const d=g(e,["maxOutputTokens"]);d!=null&&y(r,["maxOutputTokens"],d);const h=g(e,["stopSequences"]);h!=null&&y(r,["stopSequences"],h);const v=g(e,["responseLogprobs"]);v!=null&&y(r,["responseLogprobs"],v);const x=g(e,["logprobs"]);x!=null&&y(r,["logprobs"],x);const _=g(e,["presencePenalty"]);_!=null&&y(r,["presencePenalty"],_);const S=g(e,["frequencyPenalty"]);S!=null&&y(r,["frequencyPenalty"],S);const E=g(e,["seed"]);E!=null&&y(r,["seed"],E);const C=g(e,["responseMimeType"]);C!=null&&y(r,["responseMimeType"],C);const T=g(e,["responseSchema"]);if(T!=null&&y(r,["responseSchema"],J$(t,Pf(t,T))),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=g(e,["safetySettings"]);if(n!==void 0&&R!=null){let re=R;Array.isArray(re)&&(re=re.map(B=>Z$(t,B))),y(n,["safetySettings"],re)}const N=g(e,["tools"]);if(n!==void 0&&N!=null){let re=Sc(t,N);Array.isArray(re)&&(re=re.map(B=>a9(t,wc(t,B)))),y(n,["tools"],re)}const O=g(e,["toolConfig"]);if(n!==void 0&&O!=null&&y(n,["toolConfig"],u9(t,O)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=g(e,["cachedContent"]);n!==void 0&&D!=null&&y(n,["cachedContent"],za(t,D));const k=g(e,["responseModalities"]);k!=null&&y(r,["responseModalities"],k);const I=g(e,["mediaResolution"]);I!=null&&y(r,["mediaResolution"],I);const j=g(e,["speechConfig"]);if(j!=null&&y(r,["speechConfig"],h9(t,DM(t,j))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=g(e,["thinkingConfig"]);return U!=null&&y(r,["thinkingConfig"],m9(t,U)),r}function F1(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["contents"]);if(i!=null){let l=Wr(t,i);Array.isArray(l)&&(l=l.map(u=>Dh(t,u))),y(n,["contents"],l)}const a=g(e,["config"]);return a!=null&&y(n,["generationConfig"],p9(t,a,n)),n}function g9(t,e,n){const r={},i=g(e,["taskType"]);n!==void 0&&i!=null&&y(n,["requests[]","taskType"],i);const a=g(e,["title"]);n!==void 0&&a!=null&&y(n,["requests[]","title"],a);const l=g(e,["outputDimensionality"]);if(n!==void 0&&l!=null&&y(n,["requests[]","outputDimensionality"],l),g(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function y9(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["contents"]);i!=null&&y(n,["requests[]","content"],NM(t,i));const a=g(e,["config"]);a!=null&&y(n,["config"],g9(t,a,n));const l=g(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],kt(t,l)),n}function v9(t,e,n){const r={};if(g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(e,["numberOfImages"]);n!==void 0&&i!=null&&y(n,["parameters","sampleCount"],i);const a=g(e,["aspectRatio"]);n!==void 0&&a!=null&&y(n,["parameters","aspectRatio"],a);const l=g(e,["guidanceScale"]);if(n!==void 0&&l!=null&&y(n,["parameters","guidanceScale"],l),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=g(e,["safetyFilterLevel"]);n!==void 0&&u!=null&&y(n,["parameters","safetySetting"],u);const f=g(e,["personGeneration"]);n!==void 0&&f!=null&&y(n,["parameters","personGeneration"],f);const d=g(e,["includeSafetyAttributes"]);n!==void 0&&d!=null&&y(n,["parameters","includeSafetyAttributes"],d);const h=g(e,["includeRaiReason"]);n!==void 0&&h!=null&&y(n,["parameters","includeRaiReason"],h);const v=g(e,["language"]);n!==void 0&&v!=null&&y(n,["parameters","language"],v);const x=g(e,["outputMimeType"]);n!==void 0&&x!=null&&y(n,["parameters","outputOptions","mimeType"],x);const _=g(e,["outputCompressionQuality"]);if(n!==void 0&&_!=null&&y(n,["parameters","outputOptions","compressionQuality"],_),g(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function x9(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const a=g(e,["config"]);return a!=null&&y(n,["config"],v9(t,a,n)),n}function b9(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","name"],kt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function _9(t,e,n){const r={},i=g(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const a=g(e,["pageToken"]);n!==void 0&&a!=null&&y(n,["_query","pageToken"],a);const l=g(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const u=g(e,["queryBase"]);return n!==void 0&&u!=null&&y(n,["_url","models_url"],RM(t,u)),r}function w9(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],_9(t,r,n)),n}function S9(t,e,n){const r={},i=g(e,["displayName"]);n!==void 0&&i!=null&&y(n,["displayName"],i);const a=g(e,["description"]);n!==void 0&&a!=null&&y(n,["description"],a);const l=g(e,["defaultCheckpointId"]);return n!==void 0&&l!=null&&y(n,["defaultCheckpointId"],l),r}function E9(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","name"],kt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],S9(t,i,n)),n}function C9(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","name"],kt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function T9(t,e){const n={};if(g(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function A9(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["contents"]);if(i!=null){let l=Wr(t,i);Array.isArray(l)&&(l=l.map(u=>Dh(t,u))),y(n,["contents"],l)}const a=g(e,["config"]);return a!=null&&y(n,["config"],T9(t,a)),n}function N9(t,e){const n={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["imageBytes"]);r!=null&&y(n,["bytesBase64Encoded"],Ga(t,r));const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function D9(t,e,n){const r={},i=g(e,["numberOfVideos"]);if(n!==void 0&&i!=null&&y(n,["parameters","sampleCount"],i),g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=g(e,["durationSeconds"]);if(n!==void 0&&a!=null&&y(n,["parameters","durationSeconds"],a),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=g(e,["aspectRatio"]);if(n!==void 0&&l!=null&&y(n,["parameters","aspectRatio"],l),g(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=g(e,["personGeneration"]);if(n!==void 0&&u!=null&&y(n,["parameters","personGeneration"],u),g(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=g(e,["negativePrompt"]);if(n!==void 0&&f!=null&&y(n,["parameters","negativePrompt"],f),g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(g(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return r}function M9(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const a=g(e,["image"]);a!=null&&y(n,["instances[0]","image"],N9(t,a));const l=g(e,["config"]);return l!=null&&y(n,["config"],D9(t,l,n)),n}function O9(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function R9(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["data"]);i!=null&&y(n,["data"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function k9(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["fileUri"]);i!=null&&y(n,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function P9(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],O9(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],R9(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],k9(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function Al(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>P9(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function I9(t,e){const n={},r=g(e,["anyOf"]);r!=null&&y(n,["anyOf"],r);const i=g(e,["default"]);i!=null&&y(n,["default"],i);const a=g(e,["description"]);a!=null&&y(n,["description"],a);const l=g(e,["enum"]);l!=null&&y(n,["enum"],l);const u=g(e,["example"]);u!=null&&y(n,["example"],u);const f=g(e,["format"]);f!=null&&y(n,["format"],f);const d=g(e,["items"]);d!=null&&y(n,["items"],d);const h=g(e,["maxItems"]);h!=null&&y(n,["maxItems"],h);const v=g(e,["maxLength"]);v!=null&&y(n,["maxLength"],v);const x=g(e,["maxProperties"]);x!=null&&y(n,["maxProperties"],x);const _=g(e,["maximum"]);_!=null&&y(n,["maximum"],_);const S=g(e,["minItems"]);S!=null&&y(n,["minItems"],S);const E=g(e,["minLength"]);E!=null&&y(n,["minLength"],E);const C=g(e,["minProperties"]);C!=null&&y(n,["minProperties"],C);const T=g(e,["minimum"]);T!=null&&y(n,["minimum"],T);const R=g(e,["nullable"]);R!=null&&y(n,["nullable"],R);const N=g(e,["pattern"]);N!=null&&y(n,["pattern"],N);const O=g(e,["properties"]);O!=null&&y(n,["properties"],O);const D=g(e,["propertyOrdering"]);D!=null&&y(n,["propertyOrdering"],D);const k=g(e,["required"]);k!=null&&y(n,["required"],k);const I=g(e,["title"]);I!=null&&y(n,["title"],I);const j=g(e,["type"]);return j!=null&&y(n,["type"],j),n}function L9(t,e){const n={},r=g(e,["featureSelectionPreference"]);return r!=null&&y(n,["featureSelectionPreference"],r),n}function j9(t,e){const n={},r=g(e,["method"]);r!=null&&y(n,["method"],r);const i=g(e,["category"]);i!=null&&y(n,["category"],i);const a=g(e,["threshold"]);return a!=null&&y(n,["threshold"],a),n}function U9(t,e){const n={};if(g(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=g(e,["description"]);r!=null&&y(n,["description"],r);const i=g(e,["name"]);i!=null&&y(n,["name"],i);const a=g(e,["parameters"]);a!=null&&y(n,["parameters"],a);const l=g(e,["response"]);return l!=null&&y(n,["response"],l),n}function $9(t,e){const n={},r=g(e,["startTime"]);r!=null&&y(n,["startTime"],r);const i=g(e,["endTime"]);return i!=null&&y(n,["endTime"],i),n}function F9(t,e){const n={},r=g(e,["timeRangeFilter"]);return r!=null&&y(n,["timeRangeFilter"],$9(t,r)),n}function B9(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(n,["dynamicThreshold"],i),n}function q9(t,e){const n={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(n,["dynamicRetrievalConfig"],B9(t,r)),n}function V9(){return{}}function z9(t,e){const n={},r=g(e,["apiKeyString"]);return r!=null&&y(n,["apiKeyString"],r),n}function G9(t,e){const n={},r=g(e,["apiKeyConfig"]);r!=null&&y(n,["apiKeyConfig"],z9(t,r));const i=g(e,["authType"]);i!=null&&y(n,["authType"],i);const a=g(e,["googleServiceAccountConfig"]);a!=null&&y(n,["googleServiceAccountConfig"],a);const l=g(e,["httpBasicAuthConfig"]);l!=null&&y(n,["httpBasicAuthConfig"],l);const u=g(e,["oauthConfig"]);u!=null&&y(n,["oauthConfig"],u);const f=g(e,["oidcConfig"]);return f!=null&&y(n,["oidcConfig"],f),n}function H9(t,e){const n={},r=g(e,["authConfig"]);return r!=null&&y(n,["authConfig"],G9(t,r)),n}function BM(t,e){const n={},r=g(e,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(v=>U9(t,v))),y(n,["functionDeclarations"],h)}const i=g(e,["retrieval"]);i!=null&&y(n,["retrieval"],i);const a=g(e,["googleSearch"]);a!=null&&y(n,["googleSearch"],F9(t,a));const l=g(e,["googleSearchRetrieval"]);l!=null&&y(n,["googleSearchRetrieval"],q9(t,l)),g(e,["enterpriseWebSearch"])!=null&&y(n,["enterpriseWebSearch"],V9());const f=g(e,["googleMaps"]);if(f!=null&&y(n,["googleMaps"],H9(t,f)),g(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const d=g(e,["codeExecution"]);return d!=null&&y(n,["codeExecution"],d),n}function K9(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&y(n,["allowedFunctionNames"],i),n}function Y9(t,e){const n={},r=g(e,["latitude"]);r!=null&&y(n,["latitude"],r);const i=g(e,["longitude"]);return i!=null&&y(n,["longitude"],i),n}function W9(t,e){const n={},r=g(e,["latLng"]);r!=null&&y(n,["latLng"],Y9(t,r));const i=g(e,["languageCode"]);return i!=null&&y(n,["languageCode"],i),n}function X9(t,e){const n={},r=g(e,["functionCallingConfig"]);r!=null&&y(n,["functionCallingConfig"],K9(t,r));const i=g(e,["retrievalConfig"]);return i!=null&&y(n,["retrievalConfig"],W9(t,i)),n}function J9(t,e){const n={},r=g(e,["voiceName"]);return r!=null&&y(n,["voiceName"],r),n}function Z9(t,e){const n={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&y(n,["prebuiltVoiceConfig"],J9(t,r)),n}function Q9(t,e){const n={},r=g(e,["voiceConfig"]);if(r!=null&&y(n,["voiceConfig"],Z9(t,r)),g(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=g(e,["languageCode"]);return i!=null&&y(n,["languageCode"],i),n}function e8(t,e){const n={},r=g(e,["includeThoughts"]);r!=null&&y(n,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&y(n,["thinkingBudget"],i),n}function t8(t,e,n){const r={},i=g(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],Al(t,Yn(t,i)));const a=g(e,["temperature"]);a!=null&&y(r,["temperature"],a);const l=g(e,["topP"]);l!=null&&y(r,["topP"],l);const u=g(e,["topK"]);u!=null&&y(r,["topK"],u);const f=g(e,["candidateCount"]);f!=null&&y(r,["candidateCount"],f);const d=g(e,["maxOutputTokens"]);d!=null&&y(r,["maxOutputTokens"],d);const h=g(e,["stopSequences"]);h!=null&&y(r,["stopSequences"],h);const v=g(e,["responseLogprobs"]);v!=null&&y(r,["responseLogprobs"],v);const x=g(e,["logprobs"]);x!=null&&y(r,["logprobs"],x);const _=g(e,["presencePenalty"]);_!=null&&y(r,["presencePenalty"],_);const S=g(e,["frequencyPenalty"]);S!=null&&y(r,["frequencyPenalty"],S);const E=g(e,["seed"]);E!=null&&y(r,["seed"],E);const C=g(e,["responseMimeType"]);C!=null&&y(r,["responseMimeType"],C);const T=g(e,["responseSchema"]);T!=null&&y(r,["responseSchema"],I9(t,Pf(t,T)));const R=g(e,["routingConfig"]);R!=null&&y(r,["routingConfig"],R);const N=g(e,["modelSelectionConfig"]);N!=null&&y(r,["modelConfig"],L9(t,N));const O=g(e,["safetySettings"]);if(n!==void 0&&O!=null){let H=O;Array.isArray(H)&&(H=H.map(ve=>j9(t,ve))),y(n,["safetySettings"],H)}const D=g(e,["tools"]);if(n!==void 0&&D!=null){let H=Sc(t,D);Array.isArray(H)&&(H=H.map(ve=>BM(t,wc(t,ve)))),y(n,["tools"],H)}const k=g(e,["toolConfig"]);n!==void 0&&k!=null&&y(n,["toolConfig"],X9(t,k));const I=g(e,["labels"]);n!==void 0&&I!=null&&y(n,["labels"],I);const j=g(e,["cachedContent"]);n!==void 0&&j!=null&&y(n,["cachedContent"],za(t,j));const U=g(e,["responseModalities"]);U!=null&&y(r,["responseModalities"],U);const re=g(e,["mediaResolution"]);re!=null&&y(r,["mediaResolution"],re);const B=g(e,["speechConfig"]);B!=null&&y(r,["speechConfig"],Q9(t,DM(t,B)));const Z=g(e,["audioTimestamp"]);Z!=null&&y(r,["audioTimestamp"],Z);const me=g(e,["thinkingConfig"]);return me!=null&&y(r,["thinkingConfig"],e8(t,me)),r}function B1(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["contents"]);if(i!=null){let l=Wr(t,i);Array.isArray(l)&&(l=l.map(u=>Al(t,u))),y(n,["contents"],l)}const a=g(e,["config"]);return a!=null&&y(n,["generationConfig"],t8(t,a,n)),n}function n8(t,e,n){const r={},i=g(e,["taskType"]);n!==void 0&&i!=null&&y(n,["instances[]","task_type"],i);const a=g(e,["title"]);n!==void 0&&a!=null&&y(n,["instances[]","title"],a);const l=g(e,["outputDimensionality"]);n!==void 0&&l!=null&&y(n,["parameters","outputDimensionality"],l);const u=g(e,["mimeType"]);n!==void 0&&u!=null&&y(n,["instances[]","mimeType"],u);const f=g(e,["autoTruncate"]);return n!==void 0&&f!=null&&y(n,["parameters","autoTruncate"],f),r}function r8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["contents"]);i!=null&&y(n,["instances[]","content"],NM(t,i));const a=g(e,["config"]);return a!=null&&y(n,["config"],n8(t,a,n)),n}function i8(t,e,n){const r={},i=g(e,["outputGcsUri"]);n!==void 0&&i!=null&&y(n,["parameters","storageUri"],i);const a=g(e,["negativePrompt"]);n!==void 0&&a!=null&&y(n,["parameters","negativePrompt"],a);const l=g(e,["numberOfImages"]);n!==void 0&&l!=null&&y(n,["parameters","sampleCount"],l);const u=g(e,["aspectRatio"]);n!==void 0&&u!=null&&y(n,["parameters","aspectRatio"],u);const f=g(e,["guidanceScale"]);n!==void 0&&f!=null&&y(n,["parameters","guidanceScale"],f);const d=g(e,["seed"]);n!==void 0&&d!=null&&y(n,["parameters","seed"],d);const h=g(e,["safetyFilterLevel"]);n!==void 0&&h!=null&&y(n,["parameters","safetySetting"],h);const v=g(e,["personGeneration"]);n!==void 0&&v!=null&&y(n,["parameters","personGeneration"],v);const x=g(e,["includeSafetyAttributes"]);n!==void 0&&x!=null&&y(n,["parameters","includeSafetyAttributes"],x);const _=g(e,["includeRaiReason"]);n!==void 0&&_!=null&&y(n,["parameters","includeRaiReason"],_);const S=g(e,["language"]);n!==void 0&&S!=null&&y(n,["parameters","language"],S);const E=g(e,["outputMimeType"]);n!==void 0&&E!=null&&y(n,["parameters","outputOptions","mimeType"],E);const C=g(e,["outputCompressionQuality"]);n!==void 0&&C!=null&&y(n,["parameters","outputOptions","compressionQuality"],C);const T=g(e,["addWatermark"]);n!==void 0&&T!=null&&y(n,["parameters","addWatermark"],T);const R=g(e,["enhancePrompt"]);return n!==void 0&&R!=null&&y(n,["parameters","enhancePrompt"],R),r}function a8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const a=g(e,["config"]);return a!=null&&y(n,["config"],i8(t,a,n)),n}function mx(t,e){const n={},r=g(e,["gcsUri"]);r!=null&&y(n,["gcsUri"],r);const i=g(e,["imageBytes"]);i!=null&&y(n,["bytesBase64Encoded"],Ga(t,i));const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function o8(t,e){const n={},r=g(e,["maskMode"]);r!=null&&y(n,["maskMode"],r);const i=g(e,["segmentationClasses"]);i!=null&&y(n,["maskClasses"],i);const a=g(e,["maskDilation"]);return a!=null&&y(n,["dilation"],a),n}function s8(t,e){const n={},r=g(e,["controlType"]);r!=null&&y(n,["controlType"],r);const i=g(e,["enableControlImageComputation"]);return i!=null&&y(n,["computeControl"],i),n}function l8(t,e){const n={},r=g(e,["styleDescription"]);return r!=null&&y(n,["styleDescription"],r),n}function u8(t,e){const n={},r=g(e,["subjectType"]);r!=null&&y(n,["subjectType"],r);const i=g(e,["subjectDescription"]);return i!=null&&y(n,["subjectDescription"],i),n}function c8(t,e){const n={},r=g(e,["referenceImage"]);r!=null&&y(n,["referenceImage"],mx(t,r));const i=g(e,["referenceId"]);i!=null&&y(n,["referenceId"],i);const a=g(e,["referenceType"]);a!=null&&y(n,["referenceType"],a);const l=g(e,["maskImageConfig"]);l!=null&&y(n,["maskImageConfig"],o8(t,l));const u=g(e,["controlImageConfig"]);u!=null&&y(n,["controlImageConfig"],s8(t,u));const f=g(e,["styleImageConfig"]);f!=null&&y(n,["styleImageConfig"],l8(t,f));const d=g(e,["subjectImageConfig"]);return d!=null&&y(n,["subjectImageConfig"],u8(t,d)),n}function d8(t,e,n){const r={},i=g(e,["outputGcsUri"]);n!==void 0&&i!=null&&y(n,["parameters","storageUri"],i);const a=g(e,["negativePrompt"]);n!==void 0&&a!=null&&y(n,["parameters","negativePrompt"],a);const l=g(e,["numberOfImages"]);n!==void 0&&l!=null&&y(n,["parameters","sampleCount"],l);const u=g(e,["aspectRatio"]);n!==void 0&&u!=null&&y(n,["parameters","aspectRatio"],u);const f=g(e,["guidanceScale"]);n!==void 0&&f!=null&&y(n,["parameters","guidanceScale"],f);const d=g(e,["seed"]);n!==void 0&&d!=null&&y(n,["parameters","seed"],d);const h=g(e,["safetyFilterLevel"]);n!==void 0&&h!=null&&y(n,["parameters","safetySetting"],h);const v=g(e,["personGeneration"]);n!==void 0&&v!=null&&y(n,["parameters","personGeneration"],v);const x=g(e,["includeSafetyAttributes"]);n!==void 0&&x!=null&&y(n,["parameters","includeSafetyAttributes"],x);const _=g(e,["includeRaiReason"]);n!==void 0&&_!=null&&y(n,["parameters","includeRaiReason"],_);const S=g(e,["language"]);n!==void 0&&S!=null&&y(n,["parameters","language"],S);const E=g(e,["outputMimeType"]);n!==void 0&&E!=null&&y(n,["parameters","outputOptions","mimeType"],E);const C=g(e,["outputCompressionQuality"]);n!==void 0&&C!=null&&y(n,["parameters","outputOptions","compressionQuality"],C);const T=g(e,["editMode"]);n!==void 0&&T!=null&&y(n,["parameters","editMode"],T);const R=g(e,["baseSteps"]);return n!==void 0&&R!=null&&y(n,["parameters","editConfig","baseSteps"],R),r}function f8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const a=g(e,["referenceImages"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>c8(t,f))),y(n,["instances[0]","referenceImages"],u)}const l=g(e,["config"]);return l!=null&&y(n,["config"],d8(t,l,n)),n}function h8(t,e,n){const r={},i=g(e,["includeRaiReason"]);n!==void 0&&i!=null&&y(n,["parameters","includeRaiReason"],i);const a=g(e,["outputMimeType"]);n!==void 0&&a!=null&&y(n,["parameters","outputOptions","mimeType"],a);const l=g(e,["outputCompressionQuality"]);n!==void 0&&l!=null&&y(n,["parameters","outputOptions","compressionQuality"],l);const u=g(e,["numberOfImages"]);n!==void 0&&u!=null&&y(n,["parameters","sampleCount"],u);const f=g(e,["mode"]);return n!==void 0&&f!=null&&y(n,["parameters","mode"],f),r}function m8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["image"]);i!=null&&y(n,["instances[0]","image"],mx(t,i));const a=g(e,["upscaleFactor"]);a!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=g(e,["config"]);return l!=null&&y(n,["config"],h8(t,l,n)),n}function p8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","name"],kt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function g8(t,e,n){const r={},i=g(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const a=g(e,["pageToken"]);n!==void 0&&a!=null&&y(n,["_query","pageToken"],a);const l=g(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const u=g(e,["queryBase"]);return n!==void 0&&u!=null&&y(n,["_url","models_url"],RM(t,u)),r}function y8(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],g8(t,r,n)),n}function v8(t,e,n){const r={},i=g(e,["displayName"]);n!==void 0&&i!=null&&y(n,["displayName"],i);const a=g(e,["description"]);n!==void 0&&a!=null&&y(n,["description"],a);const l=g(e,["defaultCheckpointId"]);return n!==void 0&&l!=null&&y(n,["defaultCheckpointId"],l),r}function x8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],v8(t,i,n)),n}function b8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","name"],kt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function _8(t,e,n){const r={},i=g(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],Al(t,Yn(t,i)));const a=g(e,["tools"]);if(n!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>BM(t,f))),y(n,["tools"],u)}const l=g(e,["generationConfig"]);return n!==void 0&&l!=null&&y(n,["generationConfig"],l),r}function w8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["contents"]);if(i!=null){let l=Wr(t,i);Array.isArray(l)&&(l=l.map(u=>Al(t,u))),y(n,["contents"],l)}const a=g(e,["config"]);return a!=null&&y(n,["config"],_8(t,a,n)),n}function S8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["contents"]);if(i!=null){let l=Wr(t,i);Array.isArray(l)&&(l=l.map(u=>Al(t,u))),y(n,["contents"],l)}const a=g(e,["config"]);return a!=null&&y(n,["config"],a),n}function E8(t,e,n){const r={},i=g(e,["numberOfVideos"]);n!==void 0&&i!=null&&y(n,["parameters","sampleCount"],i);const a=g(e,["outputGcsUri"]);n!==void 0&&a!=null&&y(n,["parameters","storageUri"],a);const l=g(e,["fps"]);n!==void 0&&l!=null&&y(n,["parameters","fps"],l);const u=g(e,["durationSeconds"]);n!==void 0&&u!=null&&y(n,["parameters","durationSeconds"],u);const f=g(e,["seed"]);n!==void 0&&f!=null&&y(n,["parameters","seed"],f);const d=g(e,["aspectRatio"]);n!==void 0&&d!=null&&y(n,["parameters","aspectRatio"],d);const h=g(e,["resolution"]);n!==void 0&&h!=null&&y(n,["parameters","resolution"],h);const v=g(e,["personGeneration"]);n!==void 0&&v!=null&&y(n,["parameters","personGeneration"],v);const x=g(e,["pubsubTopic"]);n!==void 0&&x!=null&&y(n,["parameters","pubsubTopic"],x);const _=g(e,["negativePrompt"]);n!==void 0&&_!=null&&y(n,["parameters","negativePrompt"],_);const S=g(e,["enhancePrompt"]);n!==void 0&&S!=null&&y(n,["parameters","enhancePrompt"],S);const E=g(e,["generateAudio"]);return n!==void 0&&E!=null&&y(n,["parameters","generateAudio"],E),r}function C8(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["_url","model"],kt(t,r));const i=g(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const a=g(e,["image"]);a!=null&&y(n,["instances[0]","image"],mx(t,a));const l=g(e,["config"]);return l!=null&&y(n,["config"],E8(t,l,n)),n}function T8(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function A8(t,e){const n={},r=g(e,["data"]);r!=null&&y(n,["data"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function N8(t,e){const n={},r=g(e,["fileUri"]);r!=null&&y(n,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function D8(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],T8(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],A8(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],N8(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function M8(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>D8(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function O8(t,e){const n={},r=g(e,["citationSources"]);return r!=null&&y(n,["citations"],r),n}function R8(t,e){const n={},r=g(e,["retrievedUrl"]);r!=null&&y(n,["retrievedUrl"],r);const i=g(e,["urlRetrievalStatus"]);return i!=null&&y(n,["urlRetrievalStatus"],i),n}function k8(t,e){const n={},r=g(e,["urlMetadata"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>R8(t,a))),y(n,["urlMetadata"],i)}return n}function P8(t,e){const n={},r=g(e,["content"]);r!=null&&y(n,["content"],M8(t,r));const i=g(e,["citationMetadata"]);i!=null&&y(n,["citationMetadata"],O8(t,i));const a=g(e,["tokenCount"]);a!=null&&y(n,["tokenCount"],a);const l=g(e,["finishReason"]);l!=null&&y(n,["finishReason"],l);const u=g(e,["urlContextMetadata"]);u!=null&&y(n,["urlContextMetadata"],k8(t,u));const f=g(e,["avgLogprobs"]);f!=null&&y(n,["avgLogprobs"],f);const d=g(e,["groundingMetadata"]);d!=null&&y(n,["groundingMetadata"],d);const h=g(e,["index"]);h!=null&&y(n,["index"],h);const v=g(e,["logprobsResult"]);v!=null&&y(n,["logprobsResult"],v);const x=g(e,["safetyRatings"]);return x!=null&&y(n,["safetyRatings"],x),n}function q1(t,e){const n={},r=g(e,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>P8(t,f))),y(n,["candidates"],u)}const i=g(e,["modelVersion"]);i!=null&&y(n,["modelVersion"],i);const a=g(e,["promptFeedback"]);a!=null&&y(n,["promptFeedback"],a);const l=g(e,["usageMetadata"]);return l!=null&&y(n,["usageMetadata"],l),n}function I8(t,e){const n={},r=g(e,["values"]);return r!=null&&y(n,["values"],r),n}function L8(){return{}}function j8(t,e){const n={},r=g(e,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>I8(t,l))),y(n,["embeddings"],a)}return g(e,["metadata"])!=null&&y(n,["metadata"],L8()),n}function U8(t,e){const n={},r=g(e,["bytesBase64Encoded"]);r!=null&&y(n,["imageBytes"],Ga(t,r));const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function qM(t,e){const n={},r=g(e,["safetyAttributes","categories"]);r!=null&&y(n,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&y(n,["scores"],i);const a=g(e,["contentType"]);return a!=null&&y(n,["contentType"],a),n}function $8(t,e){const n={},r=g(e,["_self"]);r!=null&&y(n,["image"],U8(t,r));const i=g(e,["raiFilteredReason"]);i!=null&&y(n,["raiFilteredReason"],i);const a=g(e,["_self"]);return a!=null&&y(n,["safetyAttributes"],qM(t,a)),n}function F8(t,e){const n={},r=g(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>$8(t,l))),y(n,["generatedImages"],a)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&y(n,["positivePromptSafetyAttributes"],qM(t,i)),n}function B8(t,e){const n={},r=g(e,["baseModel"]);r!=null&&y(n,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&y(n,["createTime"],i);const a=g(e,["updateTime"]);return a!=null&&y(n,["updateTime"],a),n}function i0(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["displayName"]);i!=null&&y(n,["displayName"],i);const a=g(e,["description"]);a!=null&&y(n,["description"],a);const l=g(e,["version"]);l!=null&&y(n,["version"],l);const u=g(e,["_self"]);u!=null&&y(n,["tunedModelInfo"],B8(t,u));const f=g(e,["inputTokenLimit"]);f!=null&&y(n,["inputTokenLimit"],f);const d=g(e,["outputTokenLimit"]);d!=null&&y(n,["outputTokenLimit"],d);const h=g(e,["supportedGenerationMethods"]);return h!=null&&y(n,["supportedActions"],h),n}function q8(t,e){const n={},r=g(e,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const i=g(e,["_self"]);if(i!=null){let a=kM(t,i);Array.isArray(a)&&(a=a.map(l=>i0(t,l))),y(n,["models"],a)}return n}function V8(){return{}}function z8(t,e){const n={},r=g(e,["totalTokens"]);r!=null&&y(n,["totalTokens"],r);const i=g(e,["cachedContentTokenCount"]);return i!=null&&y(n,["cachedContentTokenCount"],i),n}function G8(t,e){const n={},r=g(e,["video","uri"]);r!=null&&y(n,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&y(n,["videoBytes"],Ga(t,i));const a=g(e,["encoding"]);return a!=null&&y(n,["mimeType"],a),n}function H8(t,e){const n={},r=g(e,["_self"]);return r!=null&&y(n,["video"],G8(t,r)),n}function K8(t,e){const n={},r=g(e,["generatedSamples"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>H8(t,u))),y(n,["generatedVideos"],l)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&y(n,["raiMediaFilteredCount"],i);const a=g(e,["raiMediaFilteredReasons"]);return a!=null&&y(n,["raiMediaFilteredReasons"],a),n}function Y8(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["metadata"]);i!=null&&y(n,["metadata"],i);const a=g(e,["done"]);a!=null&&y(n,["done"],a);const l=g(e,["error"]);l!=null&&y(n,["error"],l);const u=g(e,["response","generateVideoResponse"]);return u!=null&&y(n,["response"],K8(t,u)),n}function W8(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function X8(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["data"]);i!=null&&y(n,["data"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function J8(t,e){const n={},r=g(e,["displayName"]);r!=null&&y(n,["displayName"],r);const i=g(e,["fileUri"]);i!=null&&y(n,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function Z8(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],W8(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],X8(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],J8(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function Q8(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Z8(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function eF(t,e){const n={},r=g(e,["citations"]);return r!=null&&y(n,["citations"],r),n}function tF(t,e){const n={},r=g(e,["content"]);r!=null&&y(n,["content"],Q8(t,r));const i=g(e,["citationMetadata"]);i!=null&&y(n,["citationMetadata"],eF(t,i));const a=g(e,["finishMessage"]);a!=null&&y(n,["finishMessage"],a);const l=g(e,["finishReason"]);l!=null&&y(n,["finishReason"],l);const u=g(e,["avgLogprobs"]);u!=null&&y(n,["avgLogprobs"],u);const f=g(e,["groundingMetadata"]);f!=null&&y(n,["groundingMetadata"],f);const d=g(e,["index"]);d!=null&&y(n,["index"],d);const h=g(e,["logprobsResult"]);h!=null&&y(n,["logprobsResult"],h);const v=g(e,["safetyRatings"]);return v!=null&&y(n,["safetyRatings"],v),n}function V1(t,e){const n={},r=g(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>tF(t,h))),y(n,["candidates"],d)}const i=g(e,["createTime"]);i!=null&&y(n,["createTime"],i);const a=g(e,["responseId"]);a!=null&&y(n,["responseId"],a);const l=g(e,["modelVersion"]);l!=null&&y(n,["modelVersion"],l);const u=g(e,["promptFeedback"]);u!=null&&y(n,["promptFeedback"],u);const f=g(e,["usageMetadata"]);return f!=null&&y(n,["usageMetadata"],f),n}function nF(t,e){const n={},r=g(e,["truncated"]);r!=null&&y(n,["truncated"],r);const i=g(e,["token_count"]);return i!=null&&y(n,["tokenCount"],i),n}function rF(t,e){const n={},r=g(e,["values"]);r!=null&&y(n,["values"],r);const i=g(e,["statistics"]);return i!=null&&y(n,["statistics"],nF(t,i)),n}function iF(t,e){const n={},r=g(e,["billableCharacterCount"]);return r!=null&&y(n,["billableCharacterCount"],r),n}function aF(t,e){const n={},r=g(e,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>rF(t,l))),y(n,["embeddings"],a)}const i=g(e,["metadata"]);return i!=null&&y(n,["metadata"],iF(t,i)),n}function oF(t,e){const n={},r=g(e,["gcsUri"]);r!=null&&y(n,["gcsUri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&y(n,["imageBytes"],Ga(t,i));const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function VM(t,e){const n={},r=g(e,["safetyAttributes","categories"]);r!=null&&y(n,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&y(n,["scores"],i);const a=g(e,["contentType"]);return a!=null&&y(n,["contentType"],a),n}function px(t,e){const n={},r=g(e,["_self"]);r!=null&&y(n,["image"],oF(t,r));const i=g(e,["raiFilteredReason"]);i!=null&&y(n,["raiFilteredReason"],i);const a=g(e,["_self"]);a!=null&&y(n,["safetyAttributes"],VM(t,a));const l=g(e,["prompt"]);return l!=null&&y(n,["enhancedPrompt"],l),n}function sF(t,e){const n={},r=g(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>px(t,l))),y(n,["generatedImages"],a)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&y(n,["positivePromptSafetyAttributes"],VM(t,i)),n}function lF(t,e){const n={},r=g(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>px(t,a))),y(n,["generatedImages"],i)}return n}function uF(t,e){const n={},r=g(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>px(t,a))),y(n,["generatedImages"],i)}return n}function cF(t,e){const n={},r=g(e,["endpoint"]);r!=null&&y(n,["name"],r);const i=g(e,["deployedModelId"]);return i!=null&&y(n,["deployedModelId"],i),n}function dF(t,e){const n={},r=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&y(n,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&y(n,["createTime"],i);const a=g(e,["updateTime"]);return a!=null&&y(n,["updateTime"],a),n}function fF(t,e){const n={},r=g(e,["checkpointId"]);r!=null&&y(n,["checkpointId"],r);const i=g(e,["epoch"]);i!=null&&y(n,["epoch"],i);const a=g(e,["step"]);return a!=null&&y(n,["step"],a),n}function a0(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["displayName"]);i!=null&&y(n,["displayName"],i);const a=g(e,["description"]);a!=null&&y(n,["description"],a);const l=g(e,["versionId"]);l!=null&&y(n,["version"],l);const u=g(e,["deployedModels"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(_=>cF(t,_))),y(n,["endpoints"],x)}const f=g(e,["labels"]);f!=null&&y(n,["labels"],f);const d=g(e,["_self"]);d!=null&&y(n,["tunedModelInfo"],dF(t,d));const h=g(e,["defaultCheckpointId"]);h!=null&&y(n,["defaultCheckpointId"],h);const v=g(e,["checkpoints"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(_=>fF(t,_))),y(n,["checkpoints"],x)}return n}function hF(t,e){const n={},r=g(e,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const i=g(e,["_self"]);if(i!=null){let a=kM(t,i);Array.isArray(a)&&(a=a.map(l=>a0(t,l))),y(n,["models"],a)}return n}function mF(){return{}}function pF(t,e){const n={},r=g(e,["totalTokens"]);return r!=null&&y(n,["totalTokens"],r),n}function gF(t,e){const n={},r=g(e,["tokensInfo"]);return r!=null&&y(n,["tokensInfo"],r),n}function yF(t,e){const n={},r=g(e,["gcsUri"]);r!=null&&y(n,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&y(n,["videoBytes"],Ga(t,i));const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function vF(t,e){const n={},r=g(e,["_self"]);return r!=null&&y(n,["video"],yF(t,r)),n}function xF(t,e){const n={},r=g(e,["videos"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>vF(t,u))),y(n,["generatedVideos"],l)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&y(n,["raiMediaFilteredCount"],i);const a=g(e,["raiMediaFilteredReasons"]);return a!=null&&y(n,["raiMediaFilteredReasons"],a),n}function bF(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["metadata"]);i!=null&&y(n,["metadata"],i);const a=g(e,["done"]);a!=null&&y(n,["done"],a);const l=g(e,["error"]);l!=null&&y(n,["error"],l);const u=g(e,["response"]);return u!=null&&y(n,["response"],xF(t,u)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _F="Content-Type",wF="X-Server-Timeout",SF="User-Agent",o0="x-goog-api-client",EF="1.3.0",CF=`google-genai-sdk/${EF}`,TF="v1beta1",AF="v1beta",z1=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class zM extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class s0 extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class NF{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:TF,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:AF,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))i.searchParams.append(l,String(u));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,a=i.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>i.abort(),n.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=a}return e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await G1(i),new e0(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await G1(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return tl(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:f}=yield Pt(i.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=a.decode(f);try{const v=JSON.parse(d);if("error"in v){const x=JSON.parse(JSON.stringify(v.error)),_=x.status,S=x.code,E=`got status: ${_}. ${JSON.stringify(v)}`;if(S>=400&&S<500)throw new zM(E);if(S>=500&&S<600)throw new s0(E)}}catch(v){const x=v;if(x.name==="ClientError"||x.name==="ServerError")throw v}l+=d;let h=l.match(z1);for(;h;){const v=h[1];try{const x=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Pt(new e0(x)),l=l.slice(h[0].length),h=l.match(z1)}catch(x){throw new Error(`exception parsing stream chunk ${v}. ${x}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=CF+" "+this.clientOptions.userAgentExtra;return e[SF]=n,e[o0]=n,e[_F]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(wF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);i.sizeBytes=String(l.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const f=await this.fetchUploadUrl(i,n);return a.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},l=await this.request({path:ze("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:i});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=l==null?void 0:l.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function G1(t){var e;if(t===void 0)throw new s0("response is undefined");if(!t.ok){const n=t.status,r=t.statusText;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=`got status: ${n} ${r}. ${JSON.stringify(i)}`;throw n>=400&&n<500?new zM(a):n>=500&&n<600?new s0(a):new Error(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DF="mcp_used/unknown";function GM(t){for(const e of t)if(gx(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function HM(t){var e;const n=(e=t[o0])!==null&&e!==void 0?e:"";t[o0]=(n+` ${DF}`).trimStart()}function MF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>gx(i)))!==null&&r!==void 0?r:!1}function OF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!gx(i)))!==null&&r!==void 0?r:!1}function gx(t){return t!==null&&typeof t=="object"&&t instanceof yx}function RF(t,e=100){return tl(this,arguments,function*(){let r,i=0;for(;i<e;){const a=yield Pt(t.listTools({cursor:r}));for(const l of a.tools)yield yield Pt(l),i++;if(!a.nextCursor)break;r=a.nextCursor}})}class yx{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new yx(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const a={},l=[];for(const h of this.mcpClients)try{for(var u=!0,f=(n=void 0,nc(RF(h))),d;d=await f.next(),e=d.done,!e;u=!0){i=d.value,u=!1;const v=i;l.push(v);const x=v.name;if(a[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);a[x]=h}}catch(v){n={error:v}}finally{try{!u&&!e&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),$4(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const a=await this.functionNameToMcpClient[r.name].callTool({name:r.name,arguments:r.args});n.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kF(t,e,n){const r=new T4;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const a=H$(t,i);Object.assign(r,a),e(r)}class PF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=jF(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const h=new Promise(N=>{d=N}),v=e.callbacks,x=function(){d({})},_=this.apiClient,S={onopen:x,onmessage:N=>{kF(_,v.onmessage,N)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(N){}},E=this.webSocketFactory.create(f,LF(l),S);E.connect(),await h;const C=kt(this.apiClient,e.model),T=UM(this.apiClient,{model:C}),R=r0(this.apiClient,{setup:T});return E.send(JSON.stringify(R)),new IF(E,this.apiClient)}}class IF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=o$(this.apiClient,e),r=$M(this.apiClient,n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=s$(this.apiClient,e),r=r0(this.apiClient,n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=r0(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Xs.PLAY)}pause(){this.sendPlaybackControl(Xs.PAUSE)}stop(){this.sendPlaybackControl(Xs.STOP)}resetContext(){this.sendPlaybackControl(Xs.RESET_CONTEXT)}close(){this.conn.close()}}function LF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function jF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function $F(t,e,n){const r=new C4;let i;if(n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),t.isVertexAI()){const a=j$(t,i);Object.assign(r,a)}else{const a=L$(t,i);Object.assign(r,a)}e(r)}class FF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new PF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,a,l,u;const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const v=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&GM(e.config.tools)&&HM(v);const x=zF(v);if(this.apiClient.isVertexAI())h=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x);else{const U=this.apiClient.getApiKey();let re="BidiGenerateContent",B="key";U!=null&&U.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),re="BidiGenerateContentConstrained",B="access_token"),h=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${re}?${B}=${U}`}let _=()=>{};const S=new Promise(U=>{_=U}),E=e.callbacks,C=function(){var U;(U=E==null?void 0:E.onopen)===null||U===void 0||U.call(E),_({})},T=this.apiClient,R={onopen:C,onmessage:U=>{$F(T,E.onmessage,U)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(U){},onclose:(r=E==null?void 0:E.onclose)!==null&&r!==void 0?r:function(U){}},N=this.webSocketFactory.create(h,VF(x),R);N.connect(),await S;let O=kt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const U=this.apiClient.getProject(),re=this.apiClient.getLocation();O=`projects/${U}/locations/${re}/`+O}let D={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Rf.AUDIO]}:e.config.responseModalities=[Rf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],I=[];for(const U of k)if(this.isCallableTool(U)){const re=U;I.push(await re.tool())}else I.push(U);I.length>0&&(e.config.tools=I);const j={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=Q6(this.apiClient,j):D=Z6(this.apiClient,j),delete D.config,N.send(JSON.stringify(D)),new qF(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const BF={turnComplete:!0};class qF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Wr(e,n.turns),e.isVertexAI()?r=r.map(i=>Al(e,i)):r=r.map(i=>Dh(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(UF)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},BF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:a$(this.apiClient,e)}:n={realtimeInput:i$(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function VF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function zF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H1=10;function K1(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(xf(l)){i=!0;break}if(!i)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function xf(t){return"callTool"in t&&typeof t.callTool=="function"}function Y1(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GF extends Tl{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,a,l,u;const f=await this.processParamsForMcpUsage(n);if(!MF(n)||K1(n.config))return await this.generateContentInternal(f);if(OF(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,h;const v=Wr(this.apiClient,f.contents),x=(a=(i=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:H1;let _=0;for(;_<x&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const S=d.candidates[0].content,E=[];for(const C of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(xf(C)){const R=await C.callTool(d.functionCalls);E.push(...R)}_++,h={role:"user",parts:E},f.contents=Wr(this.apiClient,f.contents),f.contents.push(S),f.contents.push(h),Y1(f.config)&&(v.push(S),v.push(h))}return Y1(f.config)&&(d.automaticFunctionCallingHistory=v),d},this.generateContentStream=async n=>{if(K1(n.config)){const r=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const l=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((i=f==null?void 0:f.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:l.push(f);let u;return a?u={generatedImages:l,positivePromptSafetyAttributes:a}:u={generatedImages:l},u}),this.list=async n=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Nh(fl.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)}}async processParamsForMcpUsage(e){var n,r,i;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async f=>xf(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&GM(e.config.tools)){const f=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),HM(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,r,i;const a=new Map;for(const l of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(xf(l)){const u=l,f=await u.tool();for(const d of(i=f.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,u)}}return a}async processAfcStream(e){var n,r,i;const a=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:H1;let l=!1,u=0;const f=await this.initAfcToolsMap(e);return function(d,h,v){var x,_;return tl(this,arguments,function*(){for(var S,E,C,T;u<a;){l&&(u++,l=!1);const D=yield Pt(d.processParamsForMcpUsage(v)),k=yield Pt(d.generateContentStreamInternal(D)),I=[],j=[];try{for(var R=!0,N=(E=void 0,nc(k)),O;O=yield Pt(N.next()),S=O.done,!S;R=!0){T=O.value,R=!1;const U=T;if(yield yield Pt(U),U.candidates&&(!((x=U.candidates[0])===null||x===void 0)&&x.content)){j.push(U.candidates[0].content);for(const re of(_=U.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(u<a&&re.functionCall){if(!re.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(re.functionCall.name)){const B=yield Pt(h.get(re.functionCall.name).callTool([re.functionCall]));I.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${re.functionCall.name}`)}}}}catch(U){E={error:U}}finally{try{!R&&!S&&(C=N.return)&&(yield Pt(C.call(N)))}finally{if(E)throw E.error}}if(I.length>0){l=!0;const U=new Uu;U.candidates=[{content:{role:"user",parts:I}}],yield yield Pt(U);const re=[];re.push(...j),re.push({role:"user",parts:I});const B=Wr(d.apiClient,v.contents).concat(re);v.contents=B}else break}})}(this,f,e)}async generateContentInternal(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=B1(this.apiClient,e);return u=ze("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>{const v=V1(this.apiClient,h),x=new Uu;return Object.assign(x,v),x})}else{const d=F1(this.apiClient,e);return u=ze("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>{const v=q1(this.apiClient,h),x=new Uu;return Object.assign(x,v),x})}}async generateContentStreamInternal(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=B1(this.apiClient,e);u=ze("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query;const h=this.apiClient;return l=h.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(v){return tl(this,arguments,function*(){var x,_,S,E;try{for(var C=!0,T=nc(v),R;R=yield Pt(T.next()),x=R.done,!x;C=!0){E=R.value,C=!1;const O=V1(h,yield Pt(E.json())),D=new Uu;Object.assign(D,O),yield yield Pt(D)}}catch(N){_={error:N}}finally{try{!C&&!x&&(S=T.return)&&(yield Pt(S.call(T)))}finally{if(_)throw _.error}}})})}else{const d=F1(this.apiClient,e);u=ze("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query;const h=this.apiClient;return l=h.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(v){return tl(this,arguments,function*(){var x,_,S,E;try{for(var C=!0,T=nc(v),R;R=yield Pt(T.next()),x=R.done,!x;C=!0){E=R.value,C=!1;const O=q1(h,yield Pt(E.json())),D=new Uu;Object.assign(D,O),yield yield Pt(D)}}catch(N){_={error:N}}finally{try{!C&&!x&&(S=T.return)&&(yield Pt(S.call(T)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=r8(this.apiClient,e);return u=ze("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>{const v=aF(this.apiClient,h),x=new b1;return Object.assign(x,v),x})}else{const d=y9(this.apiClient,e);return u=ze("{model}:batchEmbedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>{const v=j8(this.apiClient,h),x=new b1;return Object.assign(x,v),x})}}async generateImagesInternal(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=a8(this.apiClient,e);return u=ze("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>{const v=sF(this.apiClient,h),x=new _1;return Object.assign(x,v),x})}else{const d=x9(this.apiClient,e);return u=ze("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>{const v=F8(this.apiClient,h),x=new _1;return Object.assign(x,v),x})}}async editImageInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=f8(this.apiClient,e);return a=ze("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=lF(this.apiClient,f),h=new x4;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=m8(this.apiClient,e);return a=ze("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=uF(this.apiClient,f),h=new b4;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=p8(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>a0(this.apiClient,h))}else{const d=b9(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>i0(this.apiClient,h))}}async listInternal(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=y8(this.apiClient,e);return u=ze("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>{const v=hF(this.apiClient,h),x=new w1;return Object.assign(x,v),x})}else{const d=w9(this.apiClient,e);return u=ze("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>{const v=q8(this.apiClient,h),x=new w1;return Object.assign(x,v),x})}}async update(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=x8(this.apiClient,e);return u=ze("{model}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>a0(this.apiClient,h))}else{const d=E9(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>i0(this.apiClient,h))}}async delete(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=b8(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(()=>{const h=mF(),v=new S1;return Object.assign(v,h),v})}else{const d=C9(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(()=>{const h=V8(),v=new S1;return Object.assign(v,h),v})}}async countTokens(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=w8(this.apiClient,e);return u=ze("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>{const v=pF(this.apiClient,h),x=new E1;return Object.assign(x,v),x})}else{const d=A9(this.apiClient,e);return u=ze("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>{const v=z8(this.apiClient,h),x=new E1;return Object.assign(x,v),x})}}async computeTokens(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=S8(this.apiClient,e);return a=ze("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=gF(this.apiClient,f),h=new _4;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=C8(this.apiClient,e);return u=ze("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>bF(this.apiClient,h))}else{const d=M9(this.apiClient,e);return u=ze("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>Y8(this.apiClient,h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HF(t,e){const n={},r=g(e,["operationName"]);r!=null&&y(n,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function KF(t,e){const n={},r=g(e,["operationName"]);r!=null&&y(n,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function YF(t,e){const n={},r=g(e,["operationName"]);r!=null&&y(n,["operationName"],r);const i=g(e,["resourceName"]);i!=null&&y(n,["_url","resourceName"],i);const a=g(e,["config"]);return a!=null&&y(n,["config"],a),n}function WF(t,e){const n={},r=g(e,["video","uri"]);r!=null&&y(n,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&y(n,["videoBytes"],Ga(t,i));const a=g(e,["encoding"]);return a!=null&&y(n,["mimeType"],a),n}function XF(t,e){const n={},r=g(e,["_self"]);return r!=null&&y(n,["video"],WF(t,r)),n}function JF(t,e){const n={},r=g(e,["generatedSamples"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>XF(t,u))),y(n,["generatedVideos"],l)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&y(n,["raiMediaFilteredCount"],i);const a=g(e,["raiMediaFilteredReasons"]);return a!=null&&y(n,["raiMediaFilteredReasons"],a),n}function ZF(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["metadata"]);i!=null&&y(n,["metadata"],i);const a=g(e,["done"]);a!=null&&y(n,["done"],a);const l=g(e,["error"]);l!=null&&y(n,["error"],l);const u=g(e,["response","generateVideoResponse"]);return u!=null&&y(n,["response"],JF(t,u)),n}function QF(t,e){const n={},r=g(e,["gcsUri"]);r!=null&&y(n,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&y(n,["videoBytes"],Ga(t,i));const a=g(e,["mimeType"]);return a!=null&&y(n,["mimeType"],a),n}function eB(t,e){const n={},r=g(e,["_self"]);return r!=null&&y(n,["video"],QF(t,r)),n}function tB(t,e){const n={},r=g(e,["videos"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>eB(t,u))),y(n,["generatedVideos"],l)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&y(n,["raiMediaFilteredCount"],i);const a=g(e,["raiMediaFilteredReasons"]);return a!=null&&y(n,["raiMediaFilteredReasons"],a),n}function W1(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["metadata"]);i!=null&&y(n,["metadata"],i);const a=g(e,["done"]);a!=null&&y(n,["done"],a);const l=g(e,["error"]);l!=null&&y(n,["error"],l);const u=g(e,["response"]);return u!=null&&y(n,["response"],tB(t,u)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nB extends Tl{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;return r&&"httpOptions"in r&&(a=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:n.name,config:r})}async getVideosOperationInternal(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=KF(this.apiClient,e);return u=ze("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>W1(this.apiClient,h))}else{const d=HF(this.apiClient,e);return u=ze("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>ZF(this.apiClient,h))}}async fetchPredictVideosOperationInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=YF(this.apiClient,e);return a=ze("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>W1(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rB(t,e){const n={},r=g(e,["voiceName"]);return r!=null&&y(n,["voiceName"],r),n}function KM(t,e){const n={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&y(n,["prebuiltVoiceConfig"],rB(t,r)),n}function iB(t,e){const n={},r=g(e,["speaker"]);r!=null&&y(n,["speaker"],r);const i=g(e,["voiceConfig"]);return i!=null&&y(n,["voiceConfig"],KM(t,i)),n}function aB(t,e){const n={},r=g(e,["speakerVoiceConfigs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>iB(t,a))),y(n,["speakerVoiceConfigs"],i)}return n}function oB(t,e){const n={},r=g(e,["voiceConfig"]);r!=null&&y(n,["voiceConfig"],KM(t,r));const i=g(e,["multiSpeakerVoiceConfig"]);i!=null&&y(n,["multiSpeakerVoiceConfig"],aB(t,i));const a=g(e,["languageCode"]);return a!=null&&y(n,["languageCode"],a),n}function sB(t,e){const n={},r=g(e,["fps"]);r!=null&&y(n,["fps"],r);const i=g(e,["endOffset"]);i!=null&&y(n,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&y(n,["startOffset"],a),n}function lB(t,e){const n={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["data"]);r!=null&&y(n,["data"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function uB(t,e){const n={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(e,["fileUri"]);r!=null&&y(n,["fileUri"],r);const i=g(e,["mimeType"]);return i!=null&&y(n,["mimeType"],i),n}function cB(t,e){const n={},r=g(e,["videoMetadata"]);r!=null&&y(n,["videoMetadata"],sB(t,r));const i=g(e,["thought"]);i!=null&&y(n,["thought"],i);const a=g(e,["inlineData"]);a!=null&&y(n,["inlineData"],lB(t,a));const l=g(e,["fileData"]);l!=null&&y(n,["fileData"],uB(t,l));const u=g(e,["thoughtSignature"]);u!=null&&y(n,["thoughtSignature"],u);const f=g(e,["codeExecutionResult"]);f!=null&&y(n,["codeExecutionResult"],f);const d=g(e,["executableCode"]);d!=null&&y(n,["executableCode"],d);const h=g(e,["functionCall"]);h!=null&&y(n,["functionCall"],h);const v=g(e,["functionResponse"]);v!=null&&y(n,["functionResponse"],v);const x=g(e,["text"]);return x!=null&&y(n,["text"],x),n}function dB(t,e){const n={},r=g(e,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>cB(t,l))),y(n,["parts"],a)}const i=g(e,["role"]);return i!=null&&y(n,["role"],i),n}function fB(t,e){const n={},r=g(e,["behavior"]);r!=null&&y(n,["behavior"],r);const i=g(e,["description"]);i!=null&&y(n,["description"],i);const a=g(e,["name"]);a!=null&&y(n,["name"],a);const l=g(e,["parameters"]);l!=null&&y(n,["parameters"],l);const u=g(e,["response"]);return u!=null&&y(n,["response"],u),n}function hB(t,e){const n={},r=g(e,["startTime"]);r!=null&&y(n,["startTime"],r);const i=g(e,["endTime"]);return i!=null&&y(n,["endTime"],i),n}function mB(t,e){const n={},r=g(e,["timeRangeFilter"]);return r!=null&&y(n,["timeRangeFilter"],hB(t,r)),n}function pB(t,e){const n={},r=g(e,["mode"]);r!=null&&y(n,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(n,["dynamicThreshold"],i),n}function gB(t,e){const n={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(n,["dynamicRetrievalConfig"],pB(t,r)),n}function yB(){return{}}function vB(t,e){const n={},r=g(e,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>fB(t,d))),y(n,["functionDeclarations"],f)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(e,["googleSearch"]);i!=null&&y(n,["googleSearch"],mB(t,i));const a=g(e,["googleSearchRetrieval"]);if(a!=null&&y(n,["googleSearchRetrieval"],gB(t,a)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&y(n,["urlContext"],yB());const u=g(e,["codeExecution"]);return u!=null&&y(n,["codeExecution"],u),n}function xB(t,e){const n={},r=g(e,["handle"]);if(r!=null&&y(n,["handle"],r),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function X1(){return{}}function bB(t,e){const n={},r=g(e,["disabled"]);r!=null&&y(n,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&y(n,["startOfSpeechSensitivity"],i);const a=g(e,["endOfSpeechSensitivity"]);a!=null&&y(n,["endOfSpeechSensitivity"],a);const l=g(e,["prefixPaddingMs"]);l!=null&&y(n,["prefixPaddingMs"],l);const u=g(e,["silenceDurationMs"]);return u!=null&&y(n,["silenceDurationMs"],u),n}function _B(t,e){const n={},r=g(e,["automaticActivityDetection"]);r!=null&&y(n,["automaticActivityDetection"],bB(t,r));const i=g(e,["activityHandling"]);i!=null&&y(n,["activityHandling"],i);const a=g(e,["turnCoverage"]);return a!=null&&y(n,["turnCoverage"],a),n}function wB(t,e){const n={},r=g(e,["targetTokens"]);return r!=null&&y(n,["targetTokens"],r),n}function SB(t,e){const n={},r=g(e,["triggerTokens"]);r!=null&&y(n,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&y(n,["slidingWindow"],wB(t,i)),n}function EB(t,e){const n={},r=g(e,["proactiveAudio"]);return r!=null&&y(n,["proactiveAudio"],r),n}function CB(t,e,n){const r={},i=g(e,["generationConfig"]);n!==void 0&&i!=null&&y(n,["setup","generationConfig"],i);const a=g(e,["responseModalities"]);n!==void 0&&a!=null&&y(n,["setup","generationConfig","responseModalities"],a);const l=g(e,["temperature"]);n!==void 0&&l!=null&&y(n,["setup","generationConfig","temperature"],l);const u=g(e,["topP"]);n!==void 0&&u!=null&&y(n,["setup","generationConfig","topP"],u);const f=g(e,["topK"]);n!==void 0&&f!=null&&y(n,["setup","generationConfig","topK"],f);const d=g(e,["maxOutputTokens"]);n!==void 0&&d!=null&&y(n,["setup","generationConfig","maxOutputTokens"],d);const h=g(e,["mediaResolution"]);n!==void 0&&h!=null&&y(n,["setup","generationConfig","mediaResolution"],h);const v=g(e,["seed"]);n!==void 0&&v!=null&&y(n,["setup","generationConfig","seed"],v);const x=g(e,["speechConfig"]);n!==void 0&&x!=null&&y(n,["setup","generationConfig","speechConfig"],oB(t,hx(t,x)));const _=g(e,["enableAffectiveDialog"]);n!==void 0&&_!=null&&y(n,["setup","generationConfig","enableAffectiveDialog"],_);const S=g(e,["systemInstruction"]);n!==void 0&&S!=null&&y(n,["setup","systemInstruction"],dB(t,Yn(t,S)));const E=g(e,["tools"]);if(n!==void 0&&E!=null){let k=Sc(t,E);Array.isArray(k)&&(k=k.map(I=>vB(t,wc(t,I)))),y(n,["setup","tools"],k)}const C=g(e,["sessionResumption"]);n!==void 0&&C!=null&&y(n,["setup","sessionResumption"],xB(t,C));const T=g(e,["inputAudioTranscription"]);n!==void 0&&T!=null&&y(n,["setup","inputAudioTranscription"],X1());const R=g(e,["outputAudioTranscription"]);n!==void 0&&R!=null&&y(n,["setup","outputAudioTranscription"],X1());const N=g(e,["realtimeInputConfig"]);n!==void 0&&N!=null&&y(n,["setup","realtimeInputConfig"],_B(t,N));const O=g(e,["contextWindowCompression"]);n!==void 0&&O!=null&&y(n,["setup","contextWindowCompression"],SB(t,O));const D=g(e,["proactivity"]);return n!==void 0&&D!=null&&y(n,["setup","proactivity"],EB(t,D)),r}function TB(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["setup","model"],kt(t,r));const i=g(e,["config"]);return i!=null&&y(n,["config"],CB(t,i,n)),n}function AB(t,e,n){const r={},i=g(e,["expireTime"]);n!==void 0&&i!=null&&y(n,["expireTime"],i);const a=g(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&y(n,["newSessionExpireTime"],a);const l=g(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const u=g(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&y(n,["bidiGenerateContentSetup"],TB(t,u));const f=g(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&y(n,["fieldMask"],f),r}function NB(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],AB(t,r,n)),n}function DB(t,e){const n={},r=g(e,["name"]);return r!=null&&y(n,["name"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MB(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);e.push(...i)}else e.push(n)}return e.join(",")}function OB(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const a=MB(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(d=>l.includes(d)?`generationConfig.${d}`:d));const f=[];a&&f.push(a),u.length>0&&f.push(...u),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class RB extends Tl{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=NB(this.apiClient,e);a=ze("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const f=OB(u,e.config);return i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>DB(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kB(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],r);const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function PB(t,e,n){const r={},i=g(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const a=g(e,["pageToken"]);n!==void 0&&a!=null&&y(n,["_query","pageToken"],a);const l=g(e,["filter"]);return n!==void 0&&l!=null&&y(n,["_query","filter"],l),r}function IB(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],PB(t,r,n)),n}function LB(t,e){const n={},r=g(e,["textInput"]);r!=null&&y(n,["textInput"],r);const i=g(e,["output"]);return i!=null&&y(n,["output"],i),n}function jB(t,e){const n={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>LB(t,a))),y(n,["examples","examples"],i)}return n}function UB(t,e,n){const r={};if(g(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=g(e,["tunedModelDisplayName"]);if(n!==void 0&&i!=null&&y(n,["displayName"],i),g(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=g(e,["epochCount"]);n!==void 0&&a!=null&&y(n,["tuningTask","hyperparameters","epochCount"],a);const l=g(e,["learningRateMultiplier"]);if(l!=null&&y(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),g(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=g(e,["batchSize"]);n!==void 0&&u!=null&&y(n,["tuningTask","hyperparameters","batchSize"],u);const f=g(e,["learningRate"]);return n!==void 0&&f!=null&&y(n,["tuningTask","hyperparameters","learningRate"],f),r}function $B(t,e){const n={},r=g(e,["baseModel"]);r!=null&&y(n,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&y(n,["tuningTask","trainingData"],jB(t,i));const a=g(e,["config"]);return a!=null&&y(n,["config"],UB(t,a,n)),n}function FB(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["_url","name"],r);const i=g(e,["config"]);return i!=null&&y(n,["config"],i),n}function BB(t,e,n){const r={},i=g(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const a=g(e,["pageToken"]);n!==void 0&&a!=null&&y(n,["_query","pageToken"],a);const l=g(e,["filter"]);return n!==void 0&&l!=null&&y(n,["_query","filter"],l),r}function qB(t,e){const n={},r=g(e,["config"]);return r!=null&&y(n,["config"],BB(t,r,n)),n}function VB(t,e,n){const r={},i=g(e,["gcsUri"]);if(n!==void 0&&i!=null&&y(n,["supervisedTuningSpec","trainingDatasetUri"],i),g(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function zB(t,e){const n={},r=g(e,["gcsUri"]);return r!=null&&y(n,["validationDatasetUri"],r),n}function GB(t,e,n){const r={},i=g(e,["validationDataset"]);n!==void 0&&i!=null&&y(n,["supervisedTuningSpec"],zB(t,i));const a=g(e,["tunedModelDisplayName"]);n!==void 0&&a!=null&&y(n,["tunedModelDisplayName"],a);const l=g(e,["description"]);n!==void 0&&l!=null&&y(n,["description"],l);const u=g(e,["epochCount"]);n!==void 0&&u!=null&&y(n,["supervisedTuningSpec","hyperParameters","epochCount"],u);const f=g(e,["learningRateMultiplier"]);n!==void 0&&f!=null&&y(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const d=g(e,["exportLastCheckpointOnly"]);n!==void 0&&d!=null&&y(n,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const h=g(e,["adapterSize"]);if(n!==void 0&&h!=null&&y(n,["supervisedTuningSpec","hyperParameters","adapterSize"],h),g(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function HB(t,e){const n={},r=g(e,["baseModel"]);r!=null&&y(n,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&y(n,["supervisedTuningSpec","trainingDatasetUri"],VB(t,i,n));const a=g(e,["config"]);return a!=null&&y(n,["config"],GB(t,a,n)),n}function KB(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["model"],r);const i=g(e,["name"]);return i!=null&&y(n,["endpoint"],i),n}function YM(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["state"]);i!=null&&y(n,["state"],MM(t,i));const a=g(e,["createTime"]);a!=null&&y(n,["createTime"],a);const l=g(e,["tuningTask","startTime"]);l!=null&&y(n,["startTime"],l);const u=g(e,["tuningTask","completeTime"]);u!=null&&y(n,["endTime"],u);const f=g(e,["updateTime"]);f!=null&&y(n,["updateTime"],f);const d=g(e,["description"]);d!=null&&y(n,["description"],d);const h=g(e,["baseModel"]);h!=null&&y(n,["baseModel"],h);const v=g(e,["_self"]);v!=null&&y(n,["tunedModel"],KB(t,v));const x=g(e,["distillationSpec"]);x!=null&&y(n,["distillationSpec"],x);const _=g(e,["experiment"]);_!=null&&y(n,["experiment"],_);const S=g(e,["labels"]);S!=null&&y(n,["labels"],S);const E=g(e,["pipelineJob"]);E!=null&&y(n,["pipelineJob"],E);const C=g(e,["serviceAccount"]);C!=null&&y(n,["serviceAccount"],C);const T=g(e,["tunedModelDisplayName"]);return T!=null&&y(n,["tunedModelDisplayName"],T),n}function YB(t,e){const n={},r=g(e,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const i=g(e,["tunedModels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>YM(t,l))),y(n,["tuningJobs"],a)}return n}function WB(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["metadata"]);i!=null&&y(n,["metadata"],i);const a=g(e,["done"]);a!=null&&y(n,["done"],a);const l=g(e,["error"]);return l!=null&&y(n,["error"],l),n}function XB(t,e){const n={},r=g(e,["checkpointId"]);r!=null&&y(n,["checkpointId"],r);const i=g(e,["epoch"]);i!=null&&y(n,["epoch"],i);const a=g(e,["step"]);a!=null&&y(n,["step"],a);const l=g(e,["endpoint"]);return l!=null&&y(n,["endpoint"],l),n}function JB(t,e){const n={},r=g(e,["model"]);r!=null&&y(n,["model"],r);const i=g(e,["endpoint"]);i!=null&&y(n,["endpoint"],i);const a=g(e,["checkpoints"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>XB(t,u))),y(n,["checkpoints"],l)}return n}function l0(t,e){const n={},r=g(e,["name"]);r!=null&&y(n,["name"],r);const i=g(e,["state"]);i!=null&&y(n,["state"],MM(t,i));const a=g(e,["createTime"]);a!=null&&y(n,["createTime"],a);const l=g(e,["startTime"]);l!=null&&y(n,["startTime"],l);const u=g(e,["endTime"]);u!=null&&y(n,["endTime"],u);const f=g(e,["updateTime"]);f!=null&&y(n,["updateTime"],f);const d=g(e,["error"]);d!=null&&y(n,["error"],d);const h=g(e,["description"]);h!=null&&y(n,["description"],h);const v=g(e,["baseModel"]);v!=null&&y(n,["baseModel"],v);const x=g(e,["tunedModel"]);x!=null&&y(n,["tunedModel"],JB(t,x));const _=g(e,["supervisedTuningSpec"]);_!=null&&y(n,["supervisedTuningSpec"],_);const S=g(e,["tuningDataStats"]);S!=null&&y(n,["tuningDataStats"],S);const E=g(e,["encryptionSpec"]);E!=null&&y(n,["encryptionSpec"],E);const C=g(e,["partnerModelTuningSpec"]);C!=null&&y(n,["partnerModelTuningSpec"],C);const T=g(e,["distillationSpec"]);T!=null&&y(n,["distillationSpec"],T);const R=g(e,["experiment"]);R!=null&&y(n,["experiment"],R);const N=g(e,["labels"]);N!=null&&y(n,["labels"],N);const O=g(e,["pipelineJob"]);O!=null&&y(n,["pipelineJob"],O);const D=g(e,["serviceAccount"]);D!=null&&y(n,["serviceAccount"],D);const k=g(e,["tunedModelDisplayName"]);return k!=null&&y(n,["tunedModelDisplayName"],k),n}function ZB(t,e){const n={},r=g(e,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const i=g(e,["tuningJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l0(t,l))),y(n,["tuningJobs"],a)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QB extends Tl{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Nh(fl.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:Qv.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=FB(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>l0(this.apiClient,h))}else{const d=kB(this.apiClient,e);return u=ze("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>YM(this.apiClient,h))}}async listInternal(e){var n,r,i,a;let l,u="",f={};if(this.apiClient.isVertexAI()){const d=qB(this.apiClient,e);return u=ze("tuningJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>{const v=ZB(this.apiClient,h),x=new C1;return Object.assign(x,v),x})}else{const d=IB(this.apiClient,e);return u=ze("tunedModels",d._url),f=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),l.then(h=>{const v=YB(this.apiClient,h),x=new C1;return Object.assign(x,v),x})}}async tuneInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=HB(this.apiClient,e);return a=ze("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>l0(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$B(this.apiClient,e);return a=ze("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>WB(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eq{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const tq=1024*1024*8,nq=3,rq=1e3,iq=2,Lg="x-goog-upload-status";async function aq(t,e,n){var r,i,a;let l=0,u=0,f=new e0(new Response),d="upload";for(l=t.size;u<l;){const v=Math.min(tq,l-u),x=t.slice(u,u+v);u+v>=l&&(d+=", finalize");let _=0,S=rq;for(;_<nq&&(f=await n.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(v)}}}),!(!((r=f==null?void 0:f.headers)===null||r===void 0)&&r[Lg]));)_++,await sq(S),S=S*iq;if(u+=v,((i=f==null?void 0:f.headers)===null||i===void 0?void 0:i[Lg])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(f==null?void 0:f.json());if(((a=f==null?void 0:f.headers)===null||a===void 0?void 0:a[Lg])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function oq(t){return{size:t.size,type:t.type}}function sq(t){return new Promise(e=>setTimeout(e,t))}class lq{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await aq(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uq{create(e,n,r){return new cq(e,n,r)}}class cq{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J1="x-goog-api-key";class dq{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(J1)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(J1,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fq="gl-node/";class hq{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=v4(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new dq(this.apiKey);this.apiClient=new NF({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:fq+"web",uploader:new lq,downloader:new eq}),this.models=new GF(this.apiClient),this.live=new FF(this.apiClient,i,new uq),this.chats=new z3(this.models,this.apiClient),this.caches=new B3(this.apiClient),this.files=new r6(this.apiClient),this.operations=new nB(this.apiClient),this.authTokens=new RB(this.apiClient),this.tunings=new QB(this.apiClient)}}const Lo="gemini-2.5-flash",Ha=N5;Ha.includes("TU_API_KEY_DE_GEMINI_VA_AQUI")&&console.error("La clave de API de Gemini no está configurada correctamente en config.ts. Las llamadas a Gemini API fallarán. Por favor, añade tu clave real.");const Ec=new hq({apiKey:Ha}),Xr="Error: La API Key de Gemini no está configurada. Revisa el archivo config.ts de la aplicación.",mq=async t=>{if(Ha.includes("TU_API_KEY_DE_GEMINI_VA_AQUI"))return console.error("Error en generateSummary: "+Xr),Xr;try{return(await Ec.models.generateContent({model:Lo,contents:`Genera un resumen conciso y claro del siguiente texto, en un máximo de 8 líneas. El resumen debe capturar las ideas principales del documento. Proporciona ÚNICAMENTE el resumen, sin ninguna frase introductoria ni preámbulo.

Texto:
${t}`})).text}catch(e){return console.error("Error al generar resumen:",e),`Error al generar resumen. Verifica la consola para más detalles. Modelo: ${Lo}`}},pq=async t=>{if(Ha.includes("TU_API_KEY_DE_GEMINI_VA_AQUI"))return console.error("Error en extractAuthors: "+Xr),[Xr.replace("Error: ","")];const e=`
Del siguiente texto, extrae los nombres de los autores. Si hay múltiples autores, sepáralos con un punto y coma (;).
Formato esperado: Apellido1, Nombre1; Apellido2, Nombre2; ... o simplemente Nombre Apellido; Nombre Apellido.
Si no se encuentran autores explícitamente mencionados, devuelve una cadena vacía o la frase "No se encontraron autores".
Proporciona ÚNICAMENTE la lista de autores o la frase indicando que no se encontraron, sin ninguna frase introductoria.

Texto del documento:
${t}
  `;try{let r=(await Ec.models.generateContent({model:Lo,contents:e})).text.trim();return r.toLowerCase()==="no se encontraron autores"||r===""||r.toLowerCase().includes("error")?[]:r.split(";").map(i=>i.trim()).filter(i=>i.length>0)}catch(n){return console.error("Error al extraer autores:",n),[]}},gq=async(t,e)=>{if(Ha.includes("TU_API_KEY_DE_GEMINI_VA_AQUI"))return console.error("Error en extractKeywords: "+Xr),[Xr.replace("Error: ","")];const n=`
Del siguiente texto, extrae aproximadamente 200 elementos relevantes como palabras clave y metadatos.
El documento se llama: "${e}". Incluye palabras clave basadas en este nombre también.

Para cada palabra clave principal identificada en el texto:Genera hasta 4 sinónimos relevantes.

Adicionalmente, extrae la siguiente información si está presente en el texto:
-   Fecha de creación del documento (si se menciona explícitamente).
-   Lugar o lugares geográficos principales de los que habla el documento.
-   Fechas específicas mencionadas dentro del contenido del documento (eventos, periodos).

NO INCLUYAS NOMBRES DE AUTORES AQUÍ, ya que se extraerán por separado.

Formato de salida:
Devuelve TODO como una ÚNICA cadena de texto, donde cada palabra clave, sinónimo, y cada pieza de metadato (fecha, lugar) esté separada por una coma (,).
No incluyas numeración, viñetas, ni ningún otro formato. Solo la lista de términos separados por comas, sin frases introductorias.

Texto del documento:
${t}
  `;try{return(await Ec.models.generateContent({model:Lo,contents:n})).text.split(",").map(a=>a.trim()).filter(a=>a.length>0)}catch(r){return console.error("Error al extraer palabras clave:",r),[`Error al extraer palabras clave. Verifica la consola para más detalles. Modelo: ${Lo}`]}},yq=async(t,e)=>{var i;if(Ha.includes("TU_API_KEY_DE_GEMINI_VA_AQUI"))return console.error("Error en classifyDocumentDewey: "+Xr),Ta;if(e.length===0)return console.warn("[GeminiService] No valid Dewey subcategories provided for classification. Defaulting to "+Ta+"."),Ta;const n=`
Sistema de Clasificación Decimal Dewey (Segundo Nivel - Subcategorías Válidas):
${e.map(a=>`${a.code} - ${a.name}`).join(`
`)}
`,r=`
Tu tarea es clasificar un documento basándote en sus palabras clave. Debes asignar el código de clasificación Decimal Dewey MÁS ADECUADO de la lista de subcategorías que se te proporciona.

REGLAS ESTRICTAS:
1.  **NO USES CÓDIGOS DE CATEGORÍA PRINCIPAL**: Nunca respondas con códigos generales como "100", "200", "300", etc. Siempre debes elegir un código de subcategoría más específico (ejemplo: si el tema es de filosofía, elige "110" o "150" de la lista, no "100").
2.  **SELECCIÓN EXACTA**: Tu respuesta DEBE ser uno de los códigos numéricos exactos de la lista de subcategorías válidas. No inventes códigos ni uses códigos que no estén en la lista.
3.  **CÓDIGO DE FALLBACK**: Si NINGÚN código de la lista proporcionada parece adecuado, y solo en ese caso, responde con el código de fallback: "${Ta}".
4.  **FORMATO DE RESPUESTA**: La respuesta debe ser ÚNICAMENTE el código numérico (ej: "530" o "000.0"). No incluyas explicaciones, frases introductorias ni ningún otro texto.

**Palabras clave del documento**:
"${t.join(", ")}"

**Lista de subcategorías válidas**:
${n}

Responde ahora con el código de clasificación más apropiado.
  `;try{const l=((i=(await Ec.models.generateContent({model:Lo,contents:r})).text.trim().match(/\b\d{3}(\.\d+)?\b/))==null?void 0:i[0])||Ta;return e.some(f=>f.code===l)?l:(console.warn(`[GeminiService] IA sugirió el código Dewey '${l}', que no está en la lista de subcategorías válidas proporcionadas o no es un código de fallback esperado. Se usará "${Ta}".`),Ta)}catch(a){return console.error("Error al clasificar documento:",a),Ta}},vq=async t=>{if(Ha.includes("TU_API_KEY_DE_GEMINI_VA_AQUI"))return console.error("Error en extractTextFromImage: "+Xr),Xr;try{const e=await L5(t);return await xq(e,t.type)}catch(e){return console.error("Error al extraer texto de la imagen:",e),`Error al extraer texto de la imagen: ${t.name}.`}},xq=async(t,e)=>{if(Ha.includes("TU_API_KEY_DE_GEMINI_VA_AQUI"))return console.error("Error en extractTextFromImageBase64: "+Xr),Xr;try{const n={inlineData:{mimeType:e,data:t}},r={text:"Extrae todo el texto visible en esta imagen de forma precisa y completa. Conserva los saltos de línea y la estructura del texto original tanto como sea posible. Si no hay texto, indica 'No se encontró texto en la imagen'. Proporciona ÚNICAMENTE el texto extraído o la indicación de que no se encontró, sin frases introductorias."};return(await Ec.models.generateContent({model:Lo,contents:{parts:[n,r]}})).text}catch(n){return console.error("Error al extraer texto de la imagen base64:",n),"Error al extraer texto de la imagen (vía base64)."}},bq="document-files",WM={documents:[],isLoading:!1,isDeleting:!1,isUpdating:!1,error:null,deleteError:null,updateError:null,initialLoadPerformed:!1},_q=(t,e)=>{if(!t)return e;if(typeof t=="string")return t;let n=[];if(typeof t.message=="string"&&n.push(t.message),typeof t.details=="string"&&n.push(`Details: ${t.details}`),typeof t.hint=="string"&&n.push(`Hint: ${t.hint}`),t.code&&n.push(`Code: ${t.code}`),n.length>0)return n.join(" | ");try{const r=JSON.stringify(t,Object.getOwnPropertyNames(t),2);if(r!=="{}")return`Error: ${r}`}catch{}return typeof t.toString=="function"&&t.toString()!=="[object Object]"?t.toString():e},Z1=t=>{var e,n,r,i,a,l,u,f;return{id:t.id,name:t.name,type:t.file_type,originalFileName:t.original_filename,filePreviewUrl:void 0,extractedText:t.extracted_text,summary:t.summary,keywords:t.keywords||[],authors:t.authors||[],dewey_code:t.dewey_code,deweyCategoryName:((e=t.dewey_classifications)==null?void 0:e.name)||void 0,uploadDate:t.upload_date,user_id:t.user_id||void 0,uploaderFullName:((n=t.profiles)==null?void 0:n.full_name)||void 0,uploaderEmail:((r=t.profiles)==null?void 0:r.email)||void 0,uploaderRoleName:((a=(i=t.profiles)==null?void 0:i.roles)==null?void 0:a.name)||void 0,storage_path:t.storage_path||void 0,file_size_bytes:t.file_size_bytes||void 0,physical_location_id:t.physical_location_id||null,physicalOffice:((l=t.physical_locations)==null?void 0:l.office)||void 0,physicalShelf:((u=t.physical_locations)==null?void 0:u.shelf)||void 0,physicalRowLevel:((f=t.physical_locations)==null?void 0:f.row_level)||void 0}},XM=A.createContext(void 0),wq=(t,e)=>{switch(e.type){case"LOAD_DOCUMENTS_REQUEST":return{...t,isLoading:!0,error:null};case"LOAD_DOCUMENTS_SUCCESS":return{...t,documents:e.payload,isLoading:!1,error:null,initialLoadPerformed:!0};case"LOAD_DOCUMENTS_FAILURE":return{...t,isLoading:!1,error:e.payload,initialLoadPerformed:!0};case"ADD_DOCUMENT":return{...t,documents:[e.payload,...t.documents]};case"SET_DOCUMENTS":return{...t,documents:e.payload};case"SET_LOADING":return{...t,isLoading:e.payload};case"SET_ERROR":return{...t,error:e.payload,isLoading:!1};case"DELETE_DOCUMENT_REQUEST":return{...t,isDeleting:!0,deleteError:null};case"DELETE_DOCUMENT_SUCCESS":return{...t,documents:t.documents.filter(n=>n.id!==e.payload),isDeleting:!1,deleteError:null};case"DELETE_DOCUMENT_FAILURE":return{...t,isDeleting:!1,deleteError:e.payload};case"CLEAR_DELETE_ERROR":return{...t,deleteError:null};case"UPDATE_DOCUMENT_DEWEY_REQUEST":case"UPDATE_DOCUMENT_DETAILS_REQUEST":return{...t,isUpdating:!0,updateError:null};case"UPDATE_DOCUMENT_DEWEY_SUCCESS":case"UPDATE_DOCUMENT_DETAILS_SUCCESS":return{...t,documents:t.documents.map(n=>n.id===e.payload.id?e.payload:n),isUpdating:!1,updateError:null};case"UPDATE_DOCUMENT_DEWEY_FAILURE":case"UPDATE_DOCUMENT_DETAILS_FAILURE":return{...t,isUpdating:!1,updateError:e.payload};case"CLEAR_UPDATE_ERROR":return{...t,updateError:null};case"USER_LOGGED_OUT_RESET":return{...WM};case"NULLIFY_DOCUMENTS_LOCATION":return{...t,documents:t.documents.map(n=>e.payload.includes(n.id)?{...n,physical_location_id:null,physicalOffice:void 0,physicalShelf:void 0,physicalRowLevel:void 0}:n)};default:return t}},Sq=({children:t})=>{const[e,n]=A.useReducer(wq,WM),r=A.useCallback(async()=>{const f=Date.now();if(console.log(`[DocumentStore] loadInitialDocuments (${f}): Iniciando...`),e.initialLoadPerformed){console.log(`[DocumentStore] loadInitialDocuments (${f}): Carga ya realizada. Saltando.`);return}if(e.isLoading){console.log(`[DocumentStore] loadInitialDocuments (${f}): Carga en progreso. Saltando.`);return}n({type:"LOAD_DOCUMENTS_REQUEST"});try{const{data:d,error:h}=await Fe.from("documents").select(`
          id, name, original_filename, file_type, extracted_text, summary, keywords, authors,
          dewey_code, upload_date, user_id, storage_path, file_size_bytes, physical_location_id,
          dewey_classifications ( name ),
          physical_locations ( office, shelf, row_level )
        `).order("upload_date",{ascending:!1});if(h)throw h;if(!d||d.length===0){console.log(`[DocumentStore] loadInitialDocuments (${f}): No se encontraron documentos.`),n({type:"LOAD_DOCUMENTS_SUCCESS",payload:[]});return}const v=[...new Set(d.map(D=>D.user_id).filter(Boolean))];if(v.length===0){const D=d.map(Z1);n({type:"LOAD_DOCUMENTS_SUCCESS",payload:D});return}const[x,_]=await Promise.all([Fe.from("profiles").select("*").in("id",v),Fe.from("roles").select("*")]),{data:S,error:E}=x,{data:C,error:T}=_;if(E)throw E;if(T)throw T;const R=new Map(S==null?void 0:S.map(D=>[D.id,D])),N=new Map(C==null?void 0:C.map(D=>[D.id,D])),O=d.map(D=>{const k=D.user_id?R.get(D.user_id):null,I=k!=null&&k.role_id?N.get(k.role_id):null,j={...D,profiles:k?{full_name:k.full_name,email:k.email,roles:I?{name:I.name}:null}:null};return Z1(j)});console.log(`[DocumentStore] loadInitialDocuments (${f}): Carga exitosa. ${O.length} documentos procesados.`),n({type:"LOAD_DOCUMENTS_SUCCESS",payload:O})}catch(d){const h=_q(d,"Error desconocido al cargar documentos.");console.error(`[DocumentStore] loadInitialDocuments (${f}): Fallo al procesar la carga:`,h),n({type:"LOAD_DOCUMENTS_FAILURE",payload:h})}},[n,e.initialLoadPerformed,e.isLoading]),i=async(f,d)=>{n({type:"DELETE_DOCUMENT_REQUEST"});try{if(d){console.log(`[DocumentStore] Eliminando archivo de Storage: ${d}`);const{error:v}=await Fe.storage.from(bq).remove([d]);v&&console.error(`[DocumentStore] Error eliminando archivo de Storage ${d}:`,v)}console.log(`[DocumentStore] Eliminando registro de documento de DB: ${f}`);const{error:h}=await Fe.from("documents").delete().eq("id",f);if(h)throw console.error(`[DocumentStore] Error eliminando documento ${f} de la DB:`,h),new Error(`Error al eliminar el documento de la base de datos: ${h.message}`);return n({type:"DELETE_DOCUMENT_SUCCESS",payload:f}),console.log(`[DocumentStore] Documento ${f} eliminado exitosamente.`),!0}catch(h){const v=h.message||"Error desconocido al eliminar el documento.";return console.error(`[DocumentStore] Fallo al eliminar el documento ${f}:`,h),n({type:"DELETE_DOCUMENT_FAILURE",payload:v}),!1}},a=async(f,d)=>{n({type:"UPDATE_DOCUMENT_DEWEY_REQUEST"});try{const{data:h,error:v}=await Fe.from("documents").update({dewey_code:d,upload_date:new Date().toISOString()}).eq("id",f).select().single();if(v)throw console.error(`[DocumentStore] Error actualizando Dewey Code para ${f} en tabla 'documents':`,v),v;if(!h)return null;const x=e.documents.find(_=>_.id===f);if(x){const _={...x,dewey_code:d};return n({type:"UPDATE_DOCUMENT_DEWEY_SUCCESS",payload:_}),_}return null}catch(h){const v=h.message||`Error desconocido al actualizar el código Dewey del documento ${f}.`;return console.error("[DocumentStore] Fallo al actualizar el código Dewey:",h),n({type:"UPDATE_DOCUMENT_DEWEY_FAILURE",payload:v}),null}},l=async(f,d)=>{n({type:"UPDATE_DOCUMENT_DETAILS_REQUEST"});try{const h={};d.name!==void 0&&(h.name=d.name),d.keywords!==void 0&&(h.keywords=d.keywords),d.dewey_code!==void 0&&(h.dewey_code=d.dewey_code),d.physical_location_id!==void 0&&(h.physical_location_id=d.physical_location_id);const{data:v,error:x}=await Fe.from("documents").update(h).eq("id",f).select().single();if(x)throw console.error(`[DocumentStore] Error actualizando detalles para ${f} en tabla 'documents':`,x),x;if(v){const _=e.documents.find(S=>S.id===f);if(_){const S={..._,name:v.name??_.name,keywords:v.keywords??_.keywords,dewey_code:v.dewey_code??_.dewey_code,physical_location_id:v.physical_location_id??_.physical_location_id};return d.physical_location_id===null&&h.physical_location_id===null&&(S.physicalOffice=void 0,S.physicalShelf=void 0,S.physicalRowLevel=void 0),n({type:"UPDATE_DOCUMENT_DETAILS_SUCCESS",payload:S}),S}}return null}catch(h){const v=h.message||`Error desconocido al actualizar los detalles del documento ${f}.`;return console.error("[DocumentStore] Fallo al actualizar detalles del documento:",h),n({type:"UPDATE_DOCUMENT_DETAILS_FAILURE",payload:v}),null}},u=A.useCallback(f=>{n({type:"NULLIFY_DOCUMENTS_LOCATION",payload:f})},[n]);return p.jsx(XM.Provider,{value:{state:e,dispatch:n,loadInitialDocuments:r,deleteDocument:i,updateDocumentDeweyCode:a,updateDocumentDetails:l,nullifyDocumentsLocation:u},children:t})},ei=()=>{const t=A.useContext(XM);if(t===void 0)throw new Error("useDocumentStore must be used within a DocumentProvider");return t},JM={allClassifications:[],mainCategories:[],isLoading:!1,error:null,isLoaded:!1},jg=t=>({code:t.code,name:t.name,level:t.level,parent_code:t.parent_code,is_confidential:t.is_confidential}),ZM=A.createContext(void 0),Eq=(t,e)=>{switch(e.type){case"LOAD_DEWEY_REQUEST":return{...t,isLoading:!0,error:null};case"LOAD_DEWEY_SUCCESS":const n=e.payload;return{...t,allClassifications:n,mainCategories:n.filter(f=>f.level===1).sort((f,d)=>f.code.localeCompare(d.code)),isLoading:!1,isLoaded:!0,error:null};case"LOAD_DEWEY_FAILURE":return{...t,isLoading:!1,error:e.payload,isLoaded:!0};case"ADD_CLASSIFICATION_SUCCESS":if(t.allClassifications.some(f=>f.code===e.payload.code))return t;const r=[...t.allClassifications,e.payload].sort((f,d)=>f.code.localeCompare(d.code));return{...t,allClassifications:r,mainCategories:r.filter(f=>f.level===1)};case"UPDATE_CLASSIFICATION_SUCCESS":const{oldCode:i,newClassification:a}=e.payload,l=t.allClassifications.filter(f=>f.code!==i);return l.push(a),{...t,allClassifications:l.sort((f,d)=>f.code.localeCompare(d.code)),mainCategories:l.filter(f=>f.level===1).sort((f,d)=>f.code.localeCompare(d.code))};case"DELETE_CLASSIFICATION_SUCCESS":const u=t.allClassifications.filter(f=>f.code!==e.payload);return{...t,allClassifications:u,mainCategories:u.filter(f=>f.level===1)};case"USER_LOGGED_OUT_RESET":return JM;default:return t}},Cq=({children:t})=>{const[e,n]=A.useReducer(Eq,JM),r=A.useCallback(async()=>{if(!(e.isLoaded&&!e.error)){n({type:"LOAD_DEWEY_REQUEST"});try{const{data:x,error:_}=await Fe.from("dewey_classifications").select("*").order("code",{ascending:!0});if(_)throw _;if(x){const S=x.map(jg);n({type:"LOAD_DEWEY_SUCCESS",payload:S})}else n({type:"LOAD_DEWEY_SUCCESS",payload:[]})}catch(x){console.error("Error fetching Dewey classifications:",x),n({type:"LOAD_DEWEY_FAILURE",payload:x.message||"Error desconocido cargando clasificaciones Dewey."})}}},[e.isLoaded,e.error]),i=x=>e.allClassifications.filter(_=>_.level===2&&_.parent_code===x).sort((_,S)=>_.code.localeCompare(S.code)),a=x=>e.allClassifications.find(_=>_.code===x),l=x=>{const _=a(x);return _?`${_.code} - ${_.name}`:x},u=()=>e.allClassifications.map(x=>x.code),f=()=>e.allClassifications.filter(x=>x.level===2).map(x=>x.code),d=async(x,_)=>{const S={code:_,name:x.trim(),level:2,parent_code:"C00",is_confidential:!0};try{const{data:E,error:C}=await Fe.from("dewey_classifications").insert(S).select().single();if(C)throw C;if(E){const T=jg(E);return n({type:"ADD_CLASSIFICATION_SUCCESS",payload:T}),T}return null}catch(E){return console.error("Error adding confidential classification:",E),null}},h=async(x,_)=>{try{const S={};if(_.newCode&&_.newCode!==x&&(S.code=_.newCode),_.name&&(S.name=_.name.trim()),Object.keys(S).length===0)return console.log("No actual changes to send to DB."),!0;const{data:E,error:C}=await Fe.from("dewey_classifications").update(S).eq("code",x).select().single();if(C)throw C;if(E){const T=jg(E);return n({type:"UPDATE_CLASSIFICATION_SUCCESS",payload:{oldCode:x,newClassification:T}}),!0}return!1}catch(S){return console.error(`Error updating classification ${x}:`,S),!1}},v=async x=>{try{const{error:_}=await Fe.from("dewey_classifications").delete().eq("code",x);if(_)throw _;return n({type:"DELETE_CLASSIFICATION_SUCCESS",payload:x}),!0}catch(_){return console.error(`Error deleting classification ${x}:`,_),!1}};return p.jsx(ZM.Provider,{value:{state:e,dispatch:n,loadDeweyClassifications:r,getSubcategories:i,getCategory:a,getAllCodes:u,getAllSubCategoryCodes:f,getCategoryNameByCode:l,addConfidentialClassification:d,updateClassification:h,deleteClassification:v},children:t})},vr=()=>{const t=A.useContext(ZM);if(t===void 0)throw new Error("useDeweyStore must be used within a DeweyProvider");return t},QM={locations:[],isLoading:!1,error:null,isLoaded:!1,isDeleting:!1,isUpdating:!1,deleteError:null,updateError:null},zs=t=>({id:t.id,office:t.office,shelf:t.shelf,row_level:t.row_level,created_at:t.created_at,updated_at:t.updated_at,user_id:t.user_id}),e2=A.createContext(void 0),Tq=(t,e)=>{switch(e.type){case"LOAD_LOCATIONS_REQUEST":return{...t,isLoading:!0,error:null};case"LOAD_LOCATIONS_SUCCESS":return{...t,locations:e.payload,isLoading:!1,isLoaded:!0,error:null};case"LOAD_LOCATIONS_FAILURE":return{...t,isLoading:!1,error:e.payload,isLoaded:!0};case"ADD_LOCATION_REQUEST":return{...t,isUpdating:!0,updateError:null};case"ADD_LOCATION_SUCCESS":return t.locations.find(n=>n.id===e.payload.id)?{...t,isUpdating:!1}:{...t,locations:[...t.locations,e.payload].sort((n,r)=>n.office.localeCompare(r.office)||n.shelf.localeCompare(r.shelf)||n.row_level.localeCompare(r.row_level)),isUpdating:!1};case"ADD_LOCATION_FAILURE":return{...t,isUpdating:!1,updateError:e.payload};case"UPDATE_LOCATION_REQUEST":return{...t,isUpdating:!0,updateError:null};case"UPDATE_LOCATION_SUCCESS":return{...t,locations:t.locations.map(n=>n.id===e.payload.id?e.payload:n).sort((n,r)=>n.office.localeCompare(r.office)||n.shelf.localeCompare(r.shelf)||n.row_level.localeCompare(r.row_level)),isUpdating:!1};case"UPDATE_LOCATION_FAILURE":return{...t,isUpdating:!1,updateError:e.payload};case"DELETE_LOCATION_REQUEST":return{...t,isDeleting:!0,deleteError:null};case"DELETE_LOCATION_SUCCESS":return{...t,locations:t.locations.filter(n=>n.id!==e.payload),isDeleting:!1};case"DELETE_LOCATION_FAILURE":return{...t,isDeleting:!1,deleteError:e.payload};case"CLEAR_ACTION_ERRORS":return{...t,updateError:null,deleteError:null};case"USER_LOGGED_OUT_RESET":return QM;default:return t}},Aq=({children:t})=>{const[e,n]=A.useReducer(Tq,QM),r=A.useCallback(async()=>{if(!(e.isLoaded&&!e.error)){n({type:"LOAD_LOCATIONS_REQUEST"});try{const{data:x,error:_}=await Fe.from("physical_locations").select("*").order("office",{ascending:!0}).order("shelf",{ascending:!0}).order("row_level",{ascending:!0});if(_)throw _;if(x){const S=x.map(zs);n({type:"LOAD_LOCATIONS_SUCCESS",payload:S})}else n({type:"LOAD_LOCATIONS_SUCCESS",payload:[]})}catch(x){console.error("Error fetching physical locations:",x),n({type:"LOAD_LOCATIONS_FAILURE",payload:x.message||"Error desconocido cargando ubicaciones físicas."})}}},[e.isLoaded,e.error]),i=async(x,_,S,E)=>{const C=$t(x.trim()),T=$t(_.trim()),R=$t(S.trim());if(!C||!T||!R)return console.error("Office, shelf, and row level cannot be empty."),null;const N=e.locations.find(O=>$t(O.office)===C&&$t(O.shelf)===T&&$t(O.row_level)===R);if(N)return N.id;try{const{data:O,error:D}=await Fe.from("physical_locations").select("id, office, shelf, row_level, created_at, updated_at, user_id").eq("office",x.trim()).eq("shelf",_.trim()).eq("row_level",S.trim()).maybeSingle();if(D&&D.code!=="PGRST116")throw console.error("Error checking for existing location in DB:",D),D;if(O){const j=zs(O);return e.locations.some(U=>U.id===j.id)||n({type:"ADD_LOCATION_SUCCESS",payload:j}),j.id}const{data:k,error:I}=await Fe.from("physical_locations").insert({office:x.trim(),shelf:_.trim(),row_level:S.trim(),user_id:E||null}).select().single();if(I){if(console.error("Error creating new physical location:",I),I.code==="23505"){const{data:j,error:U}=await Fe.from("physical_locations").select("id, office, shelf, row_level, created_at, updated_at, user_id").eq("office",x.trim()).eq("shelf",_.trim()).eq("row_level",S.trim()).single();if(U||!j)throw console.error("Error fetching concurrently created location:",U),U||new Error("Failed to fetch concurrently created location.");const re=zs(j);return n({type:"ADD_LOCATION_SUCCESS",payload:re}),re.id}throw I}if(k){const j=zs(k);return n({type:"ADD_LOCATION_SUCCESS",payload:j}),j.id}return null}catch(O){return console.error("Error in findOrCreateLocation:",O),null}},a=async(x,_,S,E)=>{n({type:"ADD_LOCATION_REQUEST"});const C=await i(x,_,S,E);if(C){const T=e.locations.find(R=>R.id===C)||await(async()=>{const{data:R}=await Fe.from("physical_locations").select("*").eq("id",C).single();return R?zs(R):null})();return T?(n({type:"ADD_LOCATION_SUCCESS",payload:T}),T):(n({type:"ADD_LOCATION_FAILURE",payload:"Failed to retrieve location after creation/find."}),null)}else return n({type:"ADD_LOCATION_FAILURE",payload:"Failed to create or find location ID."}),null},l=async(x,_,S)=>{n({type:"UPDATE_LOCATION_REQUEST"});const E=$t(_.office.trim()),C=$t(_.shelf.trim()),T=$t(_.rowLevel.trim());if(e.locations.find(N=>N.id!==x&&$t(N.office)===E&&$t(N.shelf)===C&&$t(N.row_level)===T))return n({type:"UPDATE_LOCATION_FAILURE",payload:"Ya existe una ubicación con estos detalles."}),null;try{const{data:N,error:O}=await Fe.from("physical_locations").update({office:_.office.trim(),shelf:_.shelf.trim(),row_level:_.rowLevel.trim(),user_id:S||null,updated_at:new Date().toISOString()}).eq("id",x).select().single();if(O)throw O;if(N){const D=zs(N);return n({type:"UPDATE_LOCATION_SUCCESS",payload:D}),D}return null}catch(N){return n({type:"UPDATE_LOCATION_FAILURE",payload:N.message||"Error actualizando ubicación."}),null}},u=async x=>{n({type:"DELETE_LOCATION_REQUEST"});let _=[];try{const{data:S,error:E}=await Fe.from("documents").select("id").eq("physical_location_id",x);if(E)throw E;if(S&&S.length>0){_=S.map(R=>R.id);const{error:T}=await Fe.from("documents").update({physical_location_id:null}).in("id",_);if(T)throw T}const{error:C}=await Fe.from("physical_locations").delete().eq("id",x);if(C)throw C;return n({type:"DELETE_LOCATION_SUCCESS",payload:x}),{success:!0,updatedDocIds:_}}catch(S){return n({type:"DELETE_LOCATION_FAILURE",payload:S.message||"Error eliminando ubicación."}),{success:!1}}},f=()=>{const x=new Set(e.locations.map(_=>_.office));return Array.from(x).sort()},d=x=>{if(!x)return[];const _=new Set(e.locations.filter(S=>S.office===x).map(S=>S.shelf));return Array.from(_).sort()},h=(x,_)=>{if(!x||!_)return[];const S=new Set(e.locations.filter(E=>E.office===x&&E.shelf===_).map(E=>E.row_level));return Array.from(S).sort()},v=x=>e.locations.find(_=>_.id===x);return p.jsx(e2.Provider,{value:{state:e,dispatch:n,loadInitialLocations:r,findOrCreateLocation:i,addLocation:a,updateLocation:l,deleteLocation:u,getUniqueOffices:f,getUniqueShelves:d,getUniqueRowLevels:h,getLocationById:v},children:t})},yi=()=>{const t=A.useContext(e2);if(t===void 0)throw new Error("useLocationStore must be used within a LocationProvider");return t},Ug="document-files",Nq=5,Dq={uploadQueue:[]},t2=A.createContext(void 0),Mq=(t,e)=>{switch(e.type){case"ADD_TO_QUEUE":const n={id:`${e.payload.file.name}-${Date.now()}`,file:e.payload.file,documentName:e.payload.documentName,manualClassificationEnabled:e.payload.manualClassificationEnabled,selectedSubDewey:e.payload.selectedSubDewey,physicalLocationId:e.payload.physicalLocationId,userId:e.payload.userId,isCancellationRequested:!1,status:"pending",progressMessage:"Pendiente en cola..."};return{...t,uploadQueue:[...t.uploadQueue,n]};case"START_PROCESSING_TASK":return{...t,uploadQueue:t.uploadQueue.map(r=>r.id===e.payload.taskId?{...r,status:"processing_file",progressMessage:"Iniciando procesamiento..."}:r)};case"UPDATE_TASK_PROGRESS":return{...t,uploadQueue:t.uploadQueue.map(r=>r.id===e.payload.taskId?{...r,status:e.payload.status,progressMessage:e.payload.progressMessage,error:e.payload.error!==void 0?e.payload.error:r.error,fileType:e.payload.fileType!==void 0?e.payload.fileType:r.fileType,filePreviewUrl:e.payload.filePreviewUrl!==void 0?e.payload.filePreviewUrl:r.filePreviewUrl}:r)};case"TASK_COMPLETED":return{...t,uploadQueue:t.uploadQueue.map(r=>r.id===e.payload.taskId?{...r,status:"completed",progressMessage:"Completado exitosamente!",resultDocumentId:e.payload.resultDocumentId,error:null}:r)};case"TASK_ERROR":return{...t,uploadQueue:t.uploadQueue.map(r=>r.id===e.payload.taskId?{...r,status:"error",progressMessage:"Error en la carga.",error:e.payload.error}:r)};case"REQUEST_TASK_CANCELLATION":return{...t,uploadQueue:t.uploadQueue.map(r=>r.id===e.payload.taskId?{...r,isCancellationRequested:!0}:r)};case"TASK_CANCELLED":return{...t,uploadQueue:t.uploadQueue.map(r=>r.id===e.payload.taskId?{...r,status:"cancelled",progressMessage:"Cancelado por el usuario.",error:null}:r)};case"CLEAR_TASK":return{...t,uploadQueue:t.uploadQueue.filter(r=>r.id!==e.payload.taskId)};default:return t}},Oq=["pending","completed","error","cancelled"],Rq=({children:t})=>{const[e,n]=A.useReducer(Mq,Dq),{dispatch:r}=ei(),{state:i}=Fn(),{state:a,getCategory:l,getAllSubCategoryCodes:u}=vr(),{state:f,findOrCreateLocation:d}=yi(),h=A.useRef(e);A.useEffect(()=>{h.current=e},[e]);const v=A.useCallback(async(S,E,C,T,R,N)=>{let O=null;if(N)try{O=await d(N.office,N.shelf,N.rowLevel,T),O||console.error("Failed to find or create physical location ID for upload task.")}catch(D){console.error("Error obtaining physicalLocationId in addToQueue:",D)}n({type:"ADD_TO_QUEUE",payload:{file:S,documentName:E,manualClassificationEnabled:C,userId:T,selectedSubDewey:R,physicalLocationId:O}})},[d]),x=A.useCallback(S=>{n({type:"REQUEST_TASK_CANCELLATION",payload:{taskId:S}})},[]);A.useEffect(()=>{const S=e.uploadQueue.filter(T=>!Oq.includes(T.status)).length,E=Nq-S;E>0&&e.uploadQueue.filter(R=>R.status==="pending"&&!R.isCancellationRequested).slice(0,E).forEach(R=>{n({type:"START_PROCESSING_TASK",payload:{taskId:R.id}})}),e.uploadQueue.filter(T=>T.status==="pending"&&T.isCancellationRequested).forEach(T=>{n({type:"TASK_CANCELLED",payload:{taskId:T.id}})})},[e.uploadQueue]),A.useEffect(()=>{e.uploadQueue.filter(E=>E.status==="processing_file"&&!E.isCancellationRequested).forEach(E=>{const{supabaseUser:C,currentRole:T,allUsers:R,allRoles:N}=i,O=(T==null?void 0:T.allowedDeweyCodes)||[];_(E,C,O,n,r,a,l,u,f,R,N,h)})},[e.uploadQueue,i,a,l,u,r,f]);const _=async(S,E,C,T,R,N,O,D,k,I,j,U)=>{var z,K,ye,Ee;let re=null,B=null,Z=null,me,H=!1;const ve=async()=>{const L=U.current.uploadQueue.find(Y=>Y.id===S.id);if(L!=null&&L.isCancellationRequested){if(H=!0,console.log(`[UploadQueueStore] Cancelación detectada para la tarea ${S.id} durante el paso: ${L.status}`),me)try{console.log(`[UploadQueueStore] Cancelación: Intentando eliminar ${me} de Storage.`),await Fe.storage.from(Ug).remove([me])}catch(Y){console.error(`[UploadQueueStore] Cancelación: Fallo al eliminar ${me} de Storage:`,Y)}return T({type:"TASK_CANCELLED",payload:{taskId:S.id}}),!0}return!1};try{if(console.log(`[UploadQueueStore] Task ${S.id}: Iniciando processTask. User: ${E==null?void 0:E.id}, ManualClass: ${S.manualClassificationEnabled}, SelectedDewey: ${S.selectedSubDewey}, PhysLocId: ${S.physicalLocationId}`),!E)throw new Error("Usuario no autenticado. No se puede subir el archivo.");if(!N.isLoaded)throw new Error("Las clasificaciones Dewey aún no se han cargado. Inténtalo de nuevo en un momento.");if(!k.isLoaded)throw new Error("Las ubicaciones físicas aún no se han cargado. Inténtalo de nuevo en un momento.");if(!i.usersSuccessfullyLoadedFromDB||!i.rolesSuccessfullyLoadedFromDB)throw new Error("Los datos de usuario y roles no están completamente cargados. Intenta de nuevo en un momento.");if(await ve())return;const{text:L,previewUrl:Y,fileType:te}=await I5(S.file);if(B=te,Z=Y||null,T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"processing_file",progressMessage:`Archivo procesado (${te}).`,fileType:te,filePreviewUrl:Z}}),await ve())return;if(te===Te.JPG||te===Te.PNG?(T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"extracting_text_image",progressMessage:"Extrayendo texto de imagen..."}}),re=await vq(S.file)):re=L,!re)throw new Error("No se pudo extraer texto del archivo para el análisis de IA.");if(await ve())return;T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"analyzing_content",progressMessage:"Analizando contenido con IA..."}});const[ie,we,ge]=await Promise.all([mq(re),gq(re,S.documentName),pq(re)]);if(await ve())return;let ue="000",se=null;if(S.manualClassificationEnabled&&S.selectedSubDewey){const nt=I.find(dt=>dt.id===S.userId),Xe=nt?j.find(dt=>dt.id===nt.role_id):null;if((Xe==null?void 0:Xe.name)!=="Administrador"&&!C.includes(S.selectedSubDewey)){const dt=((z=O(S.selectedSubDewey))==null?void 0:z.name)||S.selectedSubDewey;throw new Error(`Error de permiso: Intentaste asignar manually la clasificación Dewey '${dt}' no permitida para tu rol.`)}ue=S.selectedSubDewey,T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"classifying_ia",progressMessage:`Clasificación manual aplicada: ${ue}.`}})}else{T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"classifying_ia",progressMessage:"Clasificando con IA..."}});const nt=N.allClassifications.filter(de=>de.level===2&&!de.is_confidential).map(de=>({code:de.code,name:de.name})),Xe=await yq(we,nt);if(await ve())return;const dt=I.find(de=>de.id===S.userId),Tt=dt?j.find(de=>de.id===dt.role_id):null;if(Tt&&Tt.name!=="Administrador"&&!C.includes(Xe)){const de=((K=O(Xe))==null?void 0:K.name)||Xe;let qe="000.0";if(!C.includes("000.0"))if(C.includes("000"))qe="000";else if(C.length>0)qe=C[0];else throw new Error(`La IA sugirió la clasificación '${de}', pero tu rol no tiene ninguna clasificación Dewey permitida. Contacta al administrador.`);const nn=((ye=O(qe))==null?void 0:ye.name)||qe;se=`Advertencia: La IA sugirió '${de}', no permitida para tu rol. Se usó '${nn}'.`,ue=qe,T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"classifying_ia",progressMessage:`Clasificación IA (${Xe}) ajustada a ${ue} por permisos.`}})}else ue=Xe,T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"classifying_ia",progressMessage:`Clasificación IA: ${ue}.`}})}if(await ve())return;T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"uploading_storage",progressMessage:"Subiendo archivo original..."}});const pe=S.file.name,V=Th(pe),_e=xM(pe),F=`${V.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"_").replace(/[^\w.-]/g,"")}.${_e}`,xe=`${S.userId}/${Date.now()}_${F}`,{data:Q,error:be}=await Fe.storage.from(Ug).upload(xe,S.file);if(be)throw new Error(`Error al subir a Storage: ${be.message}`);if(me=Q==null?void 0:Q.path,!me)throw new Error("No se pudo obtener la ruta del archivo de Supabase Storage.");if(await ve())return;if(T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"saving_metadata",progressMessage:"Guardando metadatos..."}}),console.log(`[UploadQueueStore] Task ${S.id}: Preparing to insert document metadata. User ID: ${S.userId}. Physical Location ID: ${S.physicalLocationId}`),console.log(`[UploadQueueStore] Task ${S.id}: Final Dewey Code to be used: '${ue}'`),N.allClassifications.some(nt=>nt.code===ue))console.log(`[UploadQueueStore] Task ${S.id}: Código Dewey '${ue}' confirmado en clasificaciones cargadas.`);else{const nt=`Error Crítico: El código Dewey '${ue}' para el documento '${S.documentName}' no existe en las clasificaciones Dewey cargadas. La inserción probablemente fallará debido a una restricción de FK. Por favor, asegúrate de que este código exista en la tabla 'dewey_classifications'. Si este es el código de fallback "000.0" o "000", asegúrate que estén en la tabla.`;console.error(`[UploadQueueStore] Task ${S.id}: ${nt}`)}const ae={name:S.documentName.trim(),original_filename:S.file.name,file_type:B||Te.UNKNOWN,extracted_text:re,summary:ie,keywords:we,authors:ge,dewey_code:ue,user_id:S.userId,storage_path:me,file_size_bytes:S.file.size,upload_date:new Date().toISOString(),physical_location_id:S.physicalLocationId};console.log(`[UploadQueueStore] Task ${S.id}: Datos para inserción en BD:`,JSON.stringify(ae,null,2));const{data:Le,error:Ye}=await Fe.from("documents").insert(ae).select().single();if(console.log(`[UploadQueueStore] Task ${S.id}: Resultado de inserción Supabase - dbDocumentData:`,JSON.stringify(Le,null,2)),console.log(`[UploadQueueStore] Task ${S.id}: Resultado de inserción Supabase - dbError:`,JSON.stringify(Ye,null,2)),Ye){if(console.error(`[UploadQueueStore] Task ${S.id}: Error detallado de inserción en BD Supabase: Code: ${Ye.code}, Message: ${Ye.message}, Details: ${Ye.details}, Hint: ${Ye.hint}`),Ye.code==="42501"){const nt=((Ee=O(ue))==null?void 0:Ee.name)||ue;throw new Error(`No tienes permiso para guardar documentos en la clasificación '${nt}'. Por favor, elige una clasificación permitida o contacta a un administrador.`)}else{if(Ye.code==="23503")throw new Error(`Error de integridad de datos: El código Dewey '${ue}' (o la ubicación física) no es válido o no existe. Detalles: ${Ye.message}`);if(Ye.code==="23502")throw new Error(`Error de datos: Uno de los campos requeridos estaba vacío. Detalles: ${Ye.message}`)}throw new Error(`Error al guardar metadatos: ${Ye.message}`)}if(!Le)throw console.error(`[UploadQueueStore] Task ${S.id}: La inserción en Supabase no devolvió datos (dbDocumentData es null/undefined) pero tampoco un error explícito. Esto es inesperado para una inserción exitosa con .select().single().`),new Error("No se pudo obtener el documento guardado de la base de datos después de la inserción (respuesta vacía).");const Ae=I.find(nt=>nt.id===S.userId),lt=Ae?j.find(nt=>nt.id===Ae.role_id):null,ct=N.allClassifications.find(nt=>nt.code===ue),Be=S.physicalLocationId?k.locations.find(nt=>nt.id===S.physicalLocationId):null,qt={id:Le.id,name:Le.name,type:Le.file_type,originalFileName:Le.original_filename,filePreviewUrl:Z||void 0,extractedText:Le.extracted_text,summary:Le.summary,keywords:Le.keywords||[],authors:Le.authors||[],dewey_code:ue,uploadDate:Le.upload_date||new Date().toISOString(),user_id:S.userId,storage_path:Le.storage_path||void 0,file_size_bytes:Le.file_size_bytes||void 0,physical_location_id:S.physicalLocationId||void 0,uploaderFullName:(Ae==null?void 0:Ae.full_name)||void 0,uploaderEmail:(Ae==null?void 0:Ae.email)||void 0,uploaderRoleName:(lt==null?void 0:lt.name)||void 0,deweyCategoryName:(ct==null?void 0:ct.name)||void 0,physicalOffice:(Be==null?void 0:Be.office)||void 0,physicalShelf:(Be==null?void 0:Be.shelf)||void 0,physicalRowLevel:(Be==null?void 0:Be.row_level)||void 0};R({type:"ADD_DOCUMENT",payload:qt});const Pn=se?`Completado con advertencia: ${se}`:"Completado exitosamente!";T({type:"TASK_COMPLETED",payload:{taskId:S.id,resultDocumentId:Le.id}}),se&&T({type:"UPDATE_TASK_PROGRESS",payload:{taskId:S.id,status:"completed",progressMessage:Pn}})}catch(L){if(!H){console.error(`[UploadQueueStore] Error procesando tarea ${S.id}:`,L);const Y=L.message||"Error desconocido durante el procesamiento.";if(T({type:"TASK_ERROR",payload:{taskId:S.id,error:Y}}),me){console.warn(`[UploadQueueStore] Error después de subir ${me}. Intentando borrar...`);try{await Fe.storage.from(Ug).remove([me])}catch(te){console.error(`[UploadQueueStore] Fallo al borrar ${me}:`,te)}}}}};return p.jsx(t2.Provider,{value:{state:e,dispatch:n,addToQueue:v,requestTaskCancellation:x},children:t})},n2=()=>{const t=A.useContext(t2);if(t===void 0)throw new Error("useUploadQueueStore must be used within an UploadQueueProvider");return t},$u="pendingUploadFile_content_v3",Gs="pendingUploadFile_originalName_v3",$g="pendingUploadFile_mimeType_v3",Fg="pendingUploadFile_typeEnum_v3",Bg="pendingUploadFile_preview_v3",qg="pendingUploadFile_docName_v3",Vg="pendingUploadFile_manualClass_v3",zg="pendingUploadFile_mainDewey_v3",Gg="pendingUploadFile_subDewey_v3",Hg="pendingUploadFile_isPhysical_v3",Kg="pendingUploadFile_office_v3",Yg="pendingUploadFile_shelf_v3",Wg="pendingUploadFile_rowLevel_v3";async function kq(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=n,r.readAsDataURL(t)})}function Pq(t,e,n){const r=t.split(","),i=atob(r[1]);let a=i.length;const l=new Uint8Array(a);for(;a--;)l[a]=i.charCodeAt(a);return new File([l],e,{type:n})}const Iq=()=>{const{state:t,addToQueue:e,requestTaskCancellation:n,dispatch:r}=n2(),{uploadQueue:i}=t,{state:a}=Fn(),{supabaseUser:l,currentRole:u,allUsers:f}=a,{state:d,getSubcategories:h,getCategory:v}=vr(),{mainCategories:x,isLoading:_,error:S,isLoaded:E}=d,{state:C,getUniqueOffices:T,getUniqueShelves:R,getUniqueRowLevels:N,findOrCreateLocation:O}=yi(),{locations:D,isLoading:k,error:I,isLoaded:j}=C,[U,re]=A.useState(null),[B,Z]=A.useState(""),[me,H]=A.useState(null),[ve,z]=A.useState(null),[K,ye]=A.useState(!1),[Ee,L]=A.useState(null),[Y,te]=A.useState(!1),[ie,we]=A.useState(""),[ge,ue]=A.useState(""),[se,pe]=A.useState(!1),[V,_e]=A.useState(""),[W,F]=A.useState(""),[xe,Q]=A.useState(""),be=A.useMemo(()=>(u==null?void 0:u.allowedDeweyCodes)||[],[u]),Me=A.useMemo(()=>_||!E?[]:u?u.name==="Administrador"?x:be.length===0?[]:x.filter(de=>be.includes(de.code)?!0:h(de.code).some(nn=>be.includes(nn.code))):[],[u,be,x,h,_,E]),ae=A.useMemo(()=>{if(_||!E)return[];if(!ie||!u)return[];const de=h(ie);return u.name==="Administrador"?de:de.filter(qe=>be.includes(qe.code))},[ie,u,be,h,_,E]),Le=A.useMemo(()=>T(),[D]),Ye=A.useMemo(()=>R(V),[D,V]),Ae=A.useMemo(()=>N(V,W),[D,V,W]),lt=()=>{sessionStorage.removeItem($u),sessionStorage.removeItem(Gs),sessionStorage.removeItem($g),sessionStorage.removeItem(Fg),sessionStorage.removeItem(Bg),sessionStorage.removeItem(qg),sessionStorage.removeItem(Vg),sessionStorage.removeItem(zg),sessionStorage.removeItem(Gg),sessionStorage.removeItem(Hg),sessionStorage.removeItem(Kg),sessionStorage.removeItem(Yg),sessionStorage.removeItem(Wg)},ct=A.useCallback(()=>{re(null),Z(""),H(null),z(null),ye(!1),L(null),te(!1),we(""),ue(""),pe(!1),_e(""),F(""),Q(""),lt()},[]);A.useEffect(()=>{const de=sessionStorage.getItem($u),qe=sessionStorage.getItem(Gs),nn=sessionStorage.getItem($g),yt=sessionStorage.getItem(Fg),cn=sessionStorage.getItem(Bg),xt=sessionStorage.getItem(qg);if(de&&qe&&nn)try{const _n=Pq(de,qe,nn);re(_n)}catch(_n){console.error("Error rehydrating file from sessionStorage:",_n),lt()}xt&&Z(xt),cn&&H(cn),yt&&z(yt),te(sessionStorage.getItem(Vg)==="true"),we(sessionStorage.getItem(zg)||""),ue(sessionStorage.getItem(Gg)||""),pe(sessionStorage.getItem(Hg)==="true"),_e(sessionStorage.getItem(Kg)||""),F(sessionStorage.getItem(Yg)||""),Q(sessionStorage.getItem(Wg)||"")},[]),A.useEffect(()=>{(async()=>{if(U){try{const qe=await kq(U);sessionStorage.setItem($u,qe),sessionStorage.setItem(Gs,U.name),sessionStorage.setItem($g,U.type)}catch(qe){console.warn("Error saving full file content to sessionStorage (likely too large):",qe),sessionStorage.removeItem($u)}ve&&sessionStorage.setItem(Fg,ve),me&&sessionStorage.setItem(Bg,me),sessionStorage.setItem(qg,B),sessionStorage.setItem(Vg,String(Y)),sessionStorage.setItem(zg,ie),sessionStorage.setItem(Gg,ge),sessionStorage.setItem(Hg,String(se)),sessionStorage.setItem(Kg,V),sessionStorage.setItem(Yg,W),sessionStorage.setItem(Wg,xe)}})()},[U,B,me,ve,Y,ie,ge,se,V,W,xe]);const Be=A.useCallback(async de=>{var cn;ct(),re(de),Z(Th(de.name)),ye(!0),L(null),H(null);const qe=new FileReader,nn=((cn=de.name.split(".").pop())==null?void 0:cn.toLowerCase())||"";let yt=Te.UNKNOWN;switch(nn){case"pdf":yt=Te.PDF;break;case"png":yt=Te.PNG;break;case"jpg":case"jpeg":yt=Te.JPG;break;case"docx":yt=Te.DOCX;break;case"txt":yt=Te.TXT;break;case"xlsx":yt=Te.XLSX;break;case"xls":yt=Te.XLS;break;case"pptx":yt=Te.PPTX;break;case"ppt":yt=Te.PPT;break}z(yt);try{if(yt===Te.PDF){const xt=window.pdfjsLib;if(!xt)throw console.error("pdf.js library is not loaded for preview."),new Error("La librería pdf.js no está disponible para la vista previa.");const Ne="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";xt.GlobalWorkerOptions.workerSrc!==Ne&&(xt.GlobalWorkerOptions.workerSrc=Ne);const Je=await de.arrayBuffer(),dn=await(await xt.getDocument({data:Je}).promise).getPage(1),Bn=dn.getViewport({scale:1}),Dt=document.createElement("canvas"),ni=Dt.getContext("2d");if(Dt.height=Bn.height,Dt.width=Bn.width,ni)await dn.render({canvasContext:ni,viewport:Bn}).promise,H(Dt.toDataURL("image/png"));else throw new Error("No se pudo obtener el contexto del canvas para la vista previa del PDF.")}else yt===Te.JPG||yt===Te.PNG?(qe.onloadend=()=>{H(qe.result)},qe.readAsDataURL(de)):H(null)}catch(xt){const _n=xt instanceof Error?xt.message:"Error al generar la vista previa del archivo.";L(`Error de vista previa: ${_n}`),console.error("Error in handleFileSelect (preview generation):",xt),H(null)}finally{ye(!1)}},[ct]),qt=async()=>{if(!U||!B.trim()){L("Por favor, selecciona un archivo y asígnale un nombre. Si navegaste y volviste, puede que necesites re-seleccionar el archivo si era muy grande.");return}if(Y&&!ge){L("Por favor, selecciona una subcategoría Dewey para la clasificación manual.");return}if(se&&(!V.trim()||!W.trim()||!xe.trim())){L("Para documentos físicos, los campos Oficina, Estante y Nivel/Fila son obligatorios.");return}if(!l){L("Usuario no autenticado. Por favor, inicia sesión.");return}if(_||S||k||I){L("Los datos de clasificación o ubicación no están cargados o hay un error. Intenta de nuevo más tarde.");return}L(null);let de;se&&(de={office:V.trim(),shelf:W.trim(),rowLevel:xe.trim()}),e(U,B.trim(),Y,l.id,ge||void 0,de),ct()},Pn=de=>de==="completed"?"text-green-500":de==="error"?"text-red-500":de==="cancelled"?"text-neutral-500":de==="pending"?"text-neutral":"text-blue-500",nt=de=>de==="completed"?p.jsx(XD,{className:"w-5 h-5 text-green-500"}):de==="error"?p.jsx(No,{className:"w-5 h-5 text-red-500"}):de==="cancelled"?p.jsx(No,{className:"w-5 h-5 text-neutral-500"}):de==="pending"?p.jsx(JD,{className:"w-5 h-5 text-neutral"}):p.jsx(Ft,{size:"sm",className:""}),Xe=de=>{r({type:"CLEAR_TASK",payload:{taskId:de}})},dt=de=>{n(de)},Tt=A.useMemo(()=>(u==null?void 0:u.name)==="Administrador"?i:i.filter(qe=>qe.userId===(l==null?void 0:l.id)),[i,u,l]);return _||k?p.jsx(Ft,{text:"Cargando datos de configuración...",className:"mt-10"}):S?p.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-md",children:["Error cargando clasificaciones Dewey: ",S]}):I?p.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-md",children:["Error cargando ubicaciones: ",I]}):p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[p.jsx("h1",{className:"text-3xl font-semibold text-primary mb-6",children:"Subir Nuevo Documento"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-start",children:[p.jsxs("div",{children:[p.jsx(P5,{onFileSelect:Be}),U&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mt-6",children:[p.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-neutral-dark",children:"Nombre del Documento (editable)"}),p.jsx("input",{type:"text",id:"documentName",value:B,onChange:de=>Z(de.target.value),className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Nombre del documento"})]}),ve&&p.jsxs("p",{className:"mt-2 text-sm text-neutral-dark",children:["Tipo de archivo detectado: ",p.jsx("span",{className:"font-semibold text-primary",children:ve})]}),p.jsxs("div",{className:"mt-6 space-y-4 p-4 border border-neutral-light rounded-md bg-neutral-lightest",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{id:"manualClassification",type:"checkbox",checked:Y,onChange:de=>{te(de.target.checked),de.target.checked||(we(""),ue(""))},className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary"}),p.jsx("label",{htmlFor:"manualClassification",className:"ml-2 block text-sm font-medium text-neutral-dark",children:"Clasificar manualmente este documento"})]}),Y&&((u==null?void 0:u.name)!=="Administrador"&&be.length===0&&Me.length===0?p.jsx("p",{className:"text-xs text-amber-700 bg-amber-50 p-2 rounded-md",children:"No tienes permisos para asignar clasificaciones manualmente. Contacta a un administrador."}):p.jsxs("div",{className:"space-y-3 pl-2 border-l-2 border-primary-light",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"mainDewey",className:"block text-xs font-medium text-neutral-dark",children:"Categoría Principal Dewey"}),p.jsxs("select",{id:"mainDewey",value:ie,onChange:de=>{we(de.target.value),ue("")},className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",disabled:Me.length===0,children:[p.jsx("option",{value:"",children:"Selecciona categoría principal..."}),Me.map(de=>p.jsxs("option",{value:de.code,children:[de.code," - ",de.name]},de.code))]}),Me.length===0&&(u==null?void 0:u.name)!=="Administrador"&&p.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"No hay categorías principales permitidas para tu rol."})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"subDewey",className:"block text-xs font-medium text-neutral-dark",children:"Subcategoría Dewey"}),p.jsxs("select",{id:"subDewey",value:ge,onChange:de=>ue(de.target.value),disabled:!ie||ae.length===0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md disabled:bg-neutral-light",children:[p.jsx("option",{value:"",children:"Selecciona subcategoría..."}),ae.map(de=>p.jsxs("option",{value:de.code,children:[de.code," - ",de.name]},de.code))]}),ie&&ae.length===0&&Me.length>0&&(u==null?void 0:u.name)!=="Administrador"&&p.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"No tienes subcategorías permitidas bajo esta categoría principal."})]})]}))]}),p.jsxs("div",{className:"mt-4 space-y-4 p-4 border border-neutral-light rounded-md bg-neutral-lightest",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{id:"isPhysicalDocument",type:"checkbox",checked:se,onChange:de=>{pe(de.target.checked),de.target.checked||(_e(""),F(""),Q(""))},className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary"}),p.jsx("label",{htmlFor:"isPhysicalDocument",className:"ml-2 block text-sm font-medium text-neutral-dark",children:"Documento físico (indicar ubicación)"})]}),se&&p.jsxs("div",{className:"space-y-3 pl-2 border-l-2 border-primary-light",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"physicalOffice",className:"block text-xs font-medium text-neutral-dark",children:"Oficina"}),p.jsx("input",{type:"text",id:"physicalOffice",list:"office-options",value:V,onChange:de=>_e(de.target.value),className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Ej: Biblioteca Central"}),p.jsx("datalist",{id:"office-options",children:Le.map(de=>p.jsx("option",{value:de},de))})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"physicalShelf",className:"block text-xs font-medium text-neutral-dark",children:"Estante"}),p.jsx("input",{type:"text",id:"physicalShelf",list:"shelf-options",value:W,onChange:de=>F(de.target.value),disabled:!V.trim(),className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light",placeholder:"Ej: A1, Sección Historia"}),p.jsx("datalist",{id:"shelf-options",children:Ye.map(de=>p.jsx("option",{value:de},de))})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"physicalRowLevel",className:"block text-xs font-medium text-neutral-dark",children:"Nivel/Fila"}),p.jsx("input",{type:"text",id:"physicalRowLevel",list:"rowLevel-options",value:xe,onChange:de=>Q(de.target.value),disabled:!V.trim()||!W.trim(),className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light",placeholder:"Ej: Nivel 3, Cajón Inferior"}),p.jsx("datalist",{id:"rowLevel-options",children:Ae.map(de=>p.jsx("option",{value:de},de))})]})]})]}),Ee&&p.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-300 text-red-600 rounded-md text-sm",children:p.jsx("p",{children:Ee})})]})]}),(U||me)&&p.jsxs("div",{className:"mt-6 md:mt-0",children:[p.jsx("h3",{className:"text-lg font-medium text-neutral-dark mb-2",children:"Vista Previa"}),p.jsx("div",{className:"border border-neutral rounded-md p-4 min-h-[200px] max-h-[400px] overflow-auto bg-neutral-lightest flex items-center justify-center",children:K?p.jsx(Ft,{text:"Cargando vista previa..."}):me?p.jsx("img",{src:me,alt:"Vista previa del archivo",className:"max-w-full max-h-[380px] h-auto rounded object-contain"}):ve===Te.DOCX||ve===Te.TXT||ve===Te.XLSX||ve===Te.XLS||ve===Te.PPTX||ve===Te.PPT?p.jsxs("div",{className:"text-center text-neutral-dark",children:[ve===Te.XLSX||ve===Te.XLS?p.jsx(ax,{className:"w-16 h-16 mx-auto mb-2 text-green-600"}):ve===Te.PPTX||ve===Te.PPT?p.jsx(ox,{className:"w-16 h-16 mx-auto mb-2 text-orange-500"}):p.jsx(il,{className:"w-16 h-16 mx-auto mb-2 text-neutral"}),p.jsxs("p",{children:["La vista previa no está disponible para este tipo de archivo (",ve,")."]}),p.jsx("p",{className:"text-xs",children:"El contenido se procesará al añadirlo a la cola."})]}):p.jsxs("div",{className:"text-center text-neutral-dark",children:[p.jsx(il,{className:"w-16 h-16 mx-auto mb-2 text-neutral"}),p.jsx("p",{children:"Selecciona un archivo para ver la vista previa."}),sessionStorage.getItem(Gs)&&!sessionStorage.getItem($u)&&p.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"El contenido del archivo no se pudo guardar temporalmente (posiblemente por tamaño). Por favor, vuelve a seleccionar el archivo si deseas procesarlo."})]})})]})]}),(U||sessionStorage.getItem(Gs))&&p.jsxs("div",{className:"mt-8 text-center",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[p.jsx(Se,{onClick:qt,disabled:K||!U||Y&&(!ge||(u==null?void 0:u.name)!=="Administrador"&&be.length===0&&Me.length===0)||se&&(!V.trim()||!W.trim()||!xe.trim())||_||!!S||k||!!I,children:"Añadir a la Cola de Carga"}),p.jsx(Se,{onClick:ct,variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-100",leftIcon:p.jsx(No,{className:"w-5 h-5"}),disabled:K,children:"Quitar Documento"})]}),!U&&sessionStorage.getItem(Gs)&&p.jsx("p",{className:"text-xs text-amber-700 mt-3",children:"Para añadir a la cola, el archivo debe estar seleccionado. Si navegaste, es posible que tengas que volver a seleccionarlo."})]})]}),Tt.length>0&&p.jsxs("div",{className:"mt-10 p-6 bg-white rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl font-semibold text-primary mb-4",children:"Cola de Cargas"}),Tt.length===0?p.jsx("p",{className:"text-neutral-dark",children:(u==null?void 0:u.name)==="Administrador"?"No hay archivos en la cola de carga global.":"No tienes archivos en tu cola de carga."}):p.jsx("ul",{className:"space-y-4",children:Tt.map(de=>{var Ne;const qe=l&&de.userId===l.id;qe||(u==null||u.name);const nn=de.status==="completed"||de.status==="error"||de.status==="cancelled",yt=!nn,cn=qe&&yt&&!de.isCancellationRequested,xt=qe&&yt&&de.isCancellationRequested,_n=qe&&nn;return p.jsx("li",{className:"p-4 border border-neutral-light rounded-lg shadow-sm bg-neutral-lightest",children:p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start",children:[p.jsxs("div",{className:"flex-grow mb-2 sm:mb-0 min-w-0",children:[" ",p.jsxs("p",{className:"font-semibold text-neutral-dark truncate",title:de.documentName,children:[de.documentName," ",p.jsxs("span",{className:"text-xs text-neutral",children:["(",de.file.name,")"]})]}),(u==null?void 0:u.name)==="Administrador"&&de.userId!==(l==null?void 0:l.id)&&p.jsxs("p",{className:"text-xs text-neutral-dark",children:["Subido por: ",p.jsx("span",{className:"font-medium",children:((Ne=(f||[]).find(Je=>Je.id===de.userId))==null?void 0:Ne.email)||"Desconocido"})]}),p.jsxs("div",{className:"flex items-center mt-1",children:[p.jsx("span",{className:`mr-2 ${Pn(de.status)}`,children:nt(de.status)}),p.jsx("p",{className:`text-sm ${Pn(de.status)}`,children:de.progressMessage})]}),de.status==="error"&&de.error&&p.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Detalle: ",de.error]}),de.status==="completed"&&de.progressMessage.toLowerCase().includes("advertencia")&&p.jsx("p",{className:"text-xs text-amber-600 mt-1",children:de.progressMessage})]}),p.jsxs("div",{className:"flex space-x-2 self-start sm:self-center flex-shrink-0",children:[cn&&p.jsx(Se,{onClick:()=>dt(de.id),variant:"ghost",size:"sm",className:"text-amber-600 hover:text-amber-700 hover:bg-amber-100","aria-label":"Cancelar subida",leftIcon:p.jsx(ZD,{className:"w-4 h-4"}),children:"Cancelar"}),xt&&p.jsx(Se,{variant:"ghost",size:"sm",className:"text-amber-600","aria-label":"Cancelando subida",isLoading:!0,disabled:!0,children:"Cancelando..."}),_n&&p.jsx(Se,{onClick:()=>Xe(de.id),variant:"ghost",size:"sm",className:"text-neutral-dark hover:text-red-600","aria-label":"Limpiar tarea de la lista",children:"Limpiar"})]})]})},de.id)})}),p.jsx("p",{className:"text-xs text-neutral-dark mt-4 text-center",children:"Las cargas continuarán en segundo plano. Puedes navegar a otras secciones de la aplicación."})]})]})},vn=({isOpen:t,onClose:e,title:n,children:r,size:i="md"})=>{if(!t)return null;const a={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-full h-full"};return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4",children:p.jsxs("div",{className:`bg-white rounded-lg shadow-xl w-full ${a[i]} flex flex-col max-h-[90vh]`,children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral",children:[p.jsx("h3",{className:"text-lg font-semibold text-neutral-dark",children:n}),p.jsx("button",{onClick:e,className:"text-neutral hover:text-neutral-dark transition-colors","aria-label":"Cerrar modal",children:p.jsx(xj,{className:"w-6 h-6"})})]}),p.jsx("div",{className:"p-6 overflow-y-auto",children:r})]})})},vx=({isOpen:t,onClose:e,documentToEdit:n,userRolePermissions:r})=>{const{state:i,getCategory:a,getSubcategories:l}=vr(),{mainCategories:u,isLoading:f,error:d,isLoaded:h}=i,{state:v,getUniqueOffices:x,getUniqueShelves:_,getUniqueRowLevels:S,findOrCreateLocation:E,getLocationById:C}=yi(),{locations:T,isLoading:R,error:N,isLoaded:O}=v,{updateDocumentDetails:D,state:k}=ei(),{isUpdating:I,updateError:j}=k,[U,re]=A.useState(""),[B,Z]=A.useState([]),[me,H]=A.useState(""),[ve,z]=A.useState(""),[K,ye]=A.useState(""),[Ee,L]=A.useState(""),[Y,te]=A.useState(""),[ie,we]=A.useState(!1),[ge,ue]=A.useState(null),[se,pe]=A.useState({}),V=(r==null?void 0:r.name)==="Administrador",_e=V||(r==null?void 0:r.canEditDocuments)&&(r==null?void 0:r.canEditDocName),W=V||(r==null?void 0:r.canEditDocuments)&&(r==null?void 0:r.canEditDocKeywords),F=V||(r==null?void 0:r.canEditDocuments)&&(r==null?void 0:r.canEditDocClassification),xe=V||(r==null?void 0:r.canEditDocuments)&&(r==null?void 0:r.canEditDocLocation);A.useEffect(()=>{if(t&&n){const Ae=h?a(n.dewey_code):null;let lt="",ct="";Ae&&(Ae.level===1?lt=Ae.code:Ae.level===2&&Ae.parent_code&&(lt=Ae.parent_code,ct=Ae.code));let Be="",qt="",Pn="",nt=!1;if(n.physical_location_id&&O){const dt=C(n.physical_location_id);dt&&(nt=!0,Be=dt.office,qt=dt.shelf,Pn=dt.row_level)}const Xe={name:n.name,keywords:n.keywords.join(", "),mainDewey:lt,subDewey:ct,isPhysical:nt,office:Be,shelf:qt,rowLevel:Pn};re(Xe.name),Z(n.keywords),H(Xe.mainDewey),z(Xe.subDewey),we(Xe.isPhysical),ye(Xe.office),L(Xe.shelf),te(Xe.rowLevel),pe(Xe),ue(null)}},[t,n,h,O,a,C]);const Q=A.useMemo(()=>!me||!h?[]:l(me),[me,h,l]),be=A.useMemo(()=>x(),[T]),Me=A.useMemo(()=>_(K),[T,K]),ae=A.useMemo(()=>S(K,Ee),[T,K,Ee]),Le=A.useMemo(()=>{if(!n||!se)return!1;if(U!==se.name||B.join(", ")!==se.keywords||ve!==se.subDewey&&ve||ie!==se.isPhysical)return!0;if(ie){if(K!==se.office||Ee!==se.shelf||Y!==se.rowLevel)return!0}else if(se.office||se.shelf||se.rowLevel)return!0;return!1},[U,B,ve,ie,K,Ee,Y,se,n]),Ye=async()=>{if(!n)return;ue(null);const Ae={};let lt=n.physical_location_id;if(_e&&U.trim()!==n.name){if(!U.trim()){ue("El nombre del documento no puede estar vacío.");return}Ae.name=U.trim()}if(W&&B.join(", ")!==n.keywords.join(", ")&&(Ae.keywords=B.map(Be=>Be.trim()).filter(Be=>Be)),F&&ve&&ve!==n.dewey_code&&(Ae.dewey_code=ve),xe){if(ie){if(!K.trim()||!Ee.trim()||!Y.trim()){ue("Para documentos físicos, Oficina, Estante y Nivel/Fila son obligatorios.");return}const Be=n.physical_location_id?C(n.physical_location_id):null;if(!Be||Be.office!==K.trim()||Be.shelf!==Ee.trim()||Be.row_level!==Y.trim()){const qt=await E(K.trim(),Ee.trim(),Y.trim(),n.user_id);if(!qt){ue("Error al obtener o crear la nueva ubicación física.");return}lt=qt}}else n.physical_location_id&&(lt=null);lt!==n.physical_location_id&&(Ae.physical_location_id=lt)}if(Object.keys(Ae).length===0){ue("No se han realizado cambios.");return}await D(n.id,Ae)&&e()};return!t||!n||!r?null:p.jsx(vn,{isOpen:t,onClose:e,title:`Editar Documento: ${n.name}`,size:"lg",children:p.jsxs("div",{className:"space-y-6",children:[(f||R)&&p.jsx(Ft,{text:"Cargando datos de configuración..."}),(d||N)&&p.jsxs("p",{className:"text-red-500 text-sm",children:["Error: ",d||N]}),h&&O&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"editDocName",className:"block text-sm font-medium text-neutral-dark",children:"Nombre del Documento"}),p.jsx("input",{type:"text",id:"editDocName",value:U,onChange:Ae=>re(Ae.target.value),disabled:!_e||I,className:"mt-1 block w-full px-3 py-2 border border-neutral-default rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light"}),!_e&&p.jsx("p",{className:"text-xs text-neutral-dark mt-1",children:"No tienes permiso para editar el nombre."})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"editDocKeywords",className:"block text-sm font-medium text-neutral-dark",children:"Palabras Clave (separadas por coma)"}),p.jsx("textarea",{id:"editDocKeywords",value:B.join(", "),onChange:Ae=>Z(Ae.target.value.split(",").map(lt=>lt.trim())),rows:3,disabled:!W||I,className:"mt-1 block w-full px-3 py-2 border border-neutral-default rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light"}),!W&&p.jsx("p",{className:"text-xs text-neutral-dark mt-1",children:"No tienes permiso para editar las palabras clave."})]}),p.jsxs("fieldset",{className:"border border-neutral-light p-4 rounded-md disabled:opacity-70",disabled:!F||I,children:[p.jsx("legend",{className:"text-sm font-medium text-neutral-dark px-1",children:"Clasificación Dewey"}),p.jsxs("div",{className:"space-y-3 mt-2",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"editMainDewey",className:"block text-xs font-medium text-neutral-dark",children:"Categoría Principal"}),p.jsxs("select",{id:"editMainDewey",value:me,onChange:Ae=>{H(Ae.target.value),z("")},disabled:!F||I,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-default focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md disabled:bg-neutral-light",children:[p.jsx("option",{value:"",children:"Selecciona categoría principal..."}),u.map(Ae=>p.jsxs("option",{value:Ae.code,children:[Ae.code," - ",Ae.name]},Ae.code))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"editSubDewey",className:"block text-xs font-medium text-neutral-dark",children:"Subcategoría"}),p.jsxs("select",{id:"editSubDewey",value:ve,onChange:Ae=>z(Ae.target.value),disabled:!F||!me||Q.length===0||I,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-default focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md disabled:bg-neutral-light",children:[p.jsx("option",{value:"",children:"Selecciona subcategoría..."}),Q.map(Ae=>p.jsxs("option",{value:Ae.code,children:[Ae.code," - ",Ae.name]},Ae.code))]})]})]}),!F&&p.jsx("p",{className:"text-xs text-neutral-dark mt-2",children:"No tienes permiso para editar la clasificación."})]}),p.jsxs("fieldset",{className:"border border-neutral-light p-4 rounded-md disabled:opacity-70",disabled:!xe||I,children:[p.jsx("legend",{className:"text-sm font-medium text-neutral-dark px-1",children:"Ubicación Física"}),p.jsxs("div",{className:"space-y-3 mt-2",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{id:"editIsPhysical",type:"checkbox",checked:ie,onChange:Ae=>we(Ae.target.checked),disabled:!xe||I,className:"h-4 w-4 text-primary border-neutral-default rounded focus:ring-primary disabled:bg-neutral-light"}),p.jsx("label",{htmlFor:"editIsPhysical",className:"ml-2 text-sm text-neutral-dark",children:"Es un documento físico"})]}),ie&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"editPhysicalOffice",className:"block text-xs font-medium text-neutral-dark",children:"Oficina"}),p.jsx("input",{type:"text",id:"editPhysicalOffice",list:"edit-office-options",value:K,onChange:Ae=>ye(Ae.target.value),disabled:!xe||I,className:"mt-1 block w-full px-3 py-2 border border-neutral-default rounded-md shadow-sm sm:text-sm disabled:bg-neutral-light"}),p.jsx("datalist",{id:"edit-office-options",children:be.map(Ae=>p.jsx("option",{value:Ae},Ae))})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"editPhysicalShelf",className:"block text-xs font-medium text-neutral-dark",children:"Estante"}),p.jsx("input",{type:"text",id:"editPhysicalShelf",list:"edit-shelf-options",value:Ee,onChange:Ae=>L(Ae.target.value),disabled:!xe||!K.trim()||I,className:"mt-1 block w-full px-3 py-2 border border-neutral-default rounded-md shadow-sm sm:text-sm disabled:bg-neutral-light"}),p.jsx("datalist",{id:"edit-shelf-options",children:Me.map(Ae=>p.jsx("option",{value:Ae},Ae))})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"editPhysicalRowLevel",className:"block text-xs font-medium text-neutral-dark",children:"Nivel/Fila"}),p.jsx("input",{type:"text",id:"editPhysicalRowLevel",list:"edit-rowLevel-options",value:Y,onChange:Ae=>te(Ae.target.value),disabled:!xe||!K.trim()||!Ee.trim()||I,className:"mt-1 block w-full px-3 py-2 border border-neutral-default rounded-md shadow-sm sm:text-sm disabled:bg-neutral-light"}),p.jsx("datalist",{id:"edit-rowLevel-options",children:ae.map(Ae=>p.jsx("option",{value:Ae},Ae))})]})]})]}),!xe&&p.jsx("p",{className:"text-xs text-neutral-dark mt-2",children:"No tienes permiso para editar la ubicación."})]})]}),ge&&p.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded-md",children:ge}),j&&p.jsxs("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded-md",children:["Error al guardar: ",j]}),p.jsxs("div",{className:"pt-5 flex justify-end space-x-3",children:[p.jsx(Se,{variant:"ghost",onClick:e,disabled:I,className:"text-neutral-dark",children:"Cancelar"}),p.jsx(Se,{onClick:Ye,variant:"primary",isLoading:I,disabled:I||f||R||!Le,children:"Guardar Cambios"})]})]})})},Q1="document-files",Lq=({document:t,onViewDetails:e,onDownload:n,onDelete:r,canDelete:i,isDeleting:a,deletingDocId:l,canSeeUploader:u})=>{const f=_=>{switch(_){case Te.PDF:return p.jsx(xh,{className:"w-8 h-8 text-red-500"});case Te.JPG:case Te.PNG:return p.jsx(bh,{className:"w-8 h-8 text-blue-500"});case Te.DOCX:return p.jsx(_h,{className:"w-8 h-8 text-sky-600"});case Te.TXT:return p.jsx(wh,{className:"w-8 h-8 text-gray-500"});case Te.XLSX:case Te.XLS:return p.jsx(ax,{className:"w-8 h-8 text-green-600"});case Te.PPTX:case Te.PPT:return p.jsx(ox,{className:"w-8 h-8 text-orange-500"});default:return p.jsx(Sh,{className:"w-8 h-8 text-gray-400"})}},d=a&&l===t.id,h=t.uploaderFullName||t.uploaderEmail||(t.user_id?`Usuario (ID: ${t.user_id.substring(0,8)}...)`:"Sistema/Desconocido"),v=t.uploaderRoleName||(t.user_id?"Rol desconocido":""),x=t.physicalOffice&&t.physicalShelf&&t.physicalRowLevel?`${t.physicalOffice}, ${t.physicalShelf}, ${t.physicalRowLevel}`:t.physical_location_id?"Ubicación no especificada":"Digital";return p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-200 flex flex-col justify-between",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center mb-3",children:[f(t.type),p.jsx("h3",{className:"text-xl font-semibold text-primary ml-3 truncate",title:t.name,children:t.name})]}),p.jsxs("p",{className:"text-xs text-neutral-dark mb-1",children:["Tipo: ",p.jsx("span",{className:"font-medium",children:t.type})]}),p.jsxs("p",{className:"text-xs text-neutral-dark mb-1",children:["Subido: ",p.jsx("span",{className:"font-medium",children:new Date(t.uploadDate).toLocaleDateString()})]}),t.authors&&t.authors.length>0&&p.jsxs("p",{className:"text-xs text-neutral-dark mb-1 truncate",title:t.authors.join("; "),children:[p.jsx(yn,{className:"w-3 h-3 inline mr-1 align-middle"}),"Autores: ",p.jsx("span",{className:"font-medium",children:t.authors.join("; ")})]}),u&&p.jsxs("p",{className:"text-xs text-neutral-dark mb-1 truncate",title:`${h} ${v?`(${v})`:""}`,children:[p.jsx(yn,{className:"w-3 h-3 inline mr-1 align-middle text-secondary"}),"Subido por: ",p.jsx("span",{className:"font-medium",children:h})," ",v&&`(${v})`]}),p.jsxs("p",{className:"text-xs text-neutral-dark mb-3 truncate",title:x,children:[p.jsx(mi,{className:"w-3 h-3 inline mr-1 align-middle ${document.physical_location_id ? 'text-green-600' : 'text-neutral'}"}),"Ubicación: ",p.jsx("span",{className:`font-medium ${t.physical_location_id?"":"italic"}`,children:x})]})]}),p.jsxs("div",{className:"mt-4 space-y-2",children:[p.jsxs("div",{className:"sm:flex sm:space-x-2 space-y-2 sm:space-y-0",children:[p.jsx(Se,{onClick:()=>e(t),variant:"primary",size:"sm",className:"w-full sm:w-auto flex-grow",leftIcon:p.jsx(ix,{className:"w-4 h-4"}),disabled:d,children:"Detalles"}),p.jsx(Se,{onClick:()=>n(t),variant:"secondary",size:"sm",className:"w-full sm:w-auto flex-grow",leftIcon:p.jsx(wf,{className:"w-4 h-4"}),disabled:!t.storage_path||d,children:"Descargar"})]}),i&&p.jsx(Se,{onClick:()=>r(t),variant:"danger",size:"sm",className:"w-full",leftIcon:p.jsx(zi,{className:"w-4 h-4"}),isLoading:d,disabled:d,children:d?"Eliminando...":"Eliminar"})]})]})},jq=()=>{const{state:t,deleteDocument:e,dispatch:n}=ei(),{documents:r,isLoading:i,isDeleting:a,deleteError:l,updateError:u}=t,{state:f}=Fn(),{supabaseUser:d,currentRole:h,allUsers:v,allRoles:x,isLoading:_,usersSuccessfullyLoadedFromDB:S,rolesSuccessfullyLoadedFromDB:E}=f,{state:C,getLocationById:T,getUniqueOffices:R,getUniqueShelves:N,getUniqueRowLevels:O}=yi(),{isLoading:D,isLoaded:k,locations:I}=C,{state:j,getCategoryNameByCode:U,getCategory:re}=vr(),{isLoading:B,isLoaded:Z}=j,me=(h==null?void 0:h.canUploadDocuments)===!0,H=(h==null?void 0:h.canSeeUploader)??!1,ve=Zi(),z=Vo(),[K,ye]=A.useState({type:null}),[Ee,L]=A.useState(""),[Y,te]=A.useState(""),[ie,we]=A.useState("uploadDate"),[ge,ue]=A.useState("desc"),[se,pe]=A.useState("all"),[V,_e]=A.useState("all"),[W,F]=A.useState(""),[xe,Q]=A.useState(""),[be,Me]=A.useState(""),[ae,Le]=A.useState(null),[Ye,Ae]=A.useState(!1),[lt,ct]=A.useState(null),[Be,qt]=A.useState(!1),[Pn,nt]=A.useState(null),[Xe,dt]=A.useState(!1),[Tt,de]=A.useState(null),[qe,nn]=A.useState(null),[yt,cn]=A.useState(!1),[xt,_n]=A.useState(null),[Ne,Je]=A.useState(null),[jt,dn]=A.useState(!1),[Bn,Dt]=A.useState(null),[ni,Jo]=A.useState(1),Zo=12,$l=A.useMemo(()=>S?new Map(v.map(ce=>[ce.id,ce])):new Map,[v,S]),Fl=A.useMemo(()=>E?new Map(x.map(ce=>[ce.id,ce])):new Map,[x,E]),Lc=A.useMemo(()=>{const ce=new Set(r.map(Pe=>Pe.type));return Array.from(ce)},[r]),dm=A.useMemo(()=>R(),[I,k]),Fr=A.useMemo(()=>W?N(W):[],[I,W,k]),fn=A.useMemo(()=>W&&xe?O(W,xe):[],[I,W,xe,k]);A.useEffect(()=>{Q(""),Me("")},[W]),A.useEffect(()=>{Me("")},[xe]),A.useEffect(()=>{se!=="physical"&&K.type===null&&F("")},[se,K.type]),A.useEffect(()=>{const ce=new URLSearchParams(ve.search),Pe=ce.get("locationId"),Ze=ce.get("officeName"),Vt=ce.get("shelfName");if(Pe){const Xt=T(Pe);Xt?(ye({type:"id",id:Pe,officeName:Xt.office,shelfName:Xt.shelf}),pe("physical"),F(Xt.office),Q(Xt.shelf),Me(Xt.row_level)):(console.warn(`Location ID ${Pe} from URL not found.`),ye({type:null}))}else Ze&&Vt?(ye({type:"officeShelf",officeName:Ze,shelfName:Vt}),pe("physical"),F(Ze),Q(Vt),Me("")):Ze?(ye({type:"office",officeName:Ze}),pe("physical"),F(Ze),Q(""),Me("")):ye({type:null})},[ve.search,T]),A.useEffect(()=>{ie==="name"?ue("asc"):ie==="uploadDate"&&ue("desc")},[ie]);const hn=A.useMemo(()=>{let ce=r;if(K.type==="id"&&K.id)ce=ce.filter(Pe=>Pe.physical_location_id===K.id);else if(K.type==="officeShelf"&&K.officeName&&K.shelfName)ce=ce.filter(Pe=>Pe.physicalOffice===K.officeName&&Pe.physicalShelf===K.shelfName);else if(K.type==="office"&&K.officeName)ce=ce.filter(Pe=>Pe.physicalOffice===K.officeName);else{if(Ee){const Pe=$t(Ee);ce=ce.filter(Ze=>{const Vt=Ze.physicalOffice&&Ze.physicalShelf&&Ze.physicalRowLevel?`${Ze.physicalOffice}, ${Ze.physicalShelf}, ${Ze.physicalRowLevel}`:"";return $t(Ze.name).includes(Pe)||Ze.keywords.some(Xt=>$t(Xt).includes(Pe))||Ze.authors&&Ze.authors.some(Xt=>$t(Xt).includes(Pe))||Ze.uploaderFullName&&$t(Ze.uploaderFullName).includes(Pe)||Ze.uploaderEmail&&$t(Ze.uploaderEmail).includes(Pe)||Vt&&$t(Vt).includes(Pe)})}Y&&(ce=ce.filter(Pe=>Pe.type===Y)),V==="mine"&&(ce=ce.filter(Pe=>Pe.user_id===(d==null?void 0:d.id))),se==="physical"?(ce=ce.filter(Pe=>!!Pe.physical_location_id),W&&(ce=ce.filter(Pe=>Pe.physicalOffice===W)),W&&xe&&(ce=ce.filter(Pe=>Pe.physicalShelf===xe)),W&&xe&&be&&(ce=ce.filter(Pe=>Pe.physicalRowLevel===be))):se==="digital"&&(ce=ce.filter(Pe=>!Pe.physical_location_id))}return[...ce].sort((Pe,Ze)=>{let Vt,Xt;return ie==="name"?(Vt=Pe.name.toLowerCase(),Xt=Ze.name.toLowerCase()):(Vt=new Date(Pe.uploadDate).getTime(),Xt=new Date(Ze.uploadDate).getTime()),Vt<Xt?ge==="asc"?-1:1:Vt>Xt?ge==="asc"?1:-1:0})},[r,Ee,Y,ie,ge,se,W,xe,be,K,V,d==null?void 0:d.id]);A.useEffect(()=>{Jo(1)},[Ee,Y,se,W,xe,be,K,V,ie,ge]);const ta=A.useMemo(()=>{const ce=(ni-1)*Zo;return hn.slice(ce,ce+Zo)},[ni,hn]),na=Math.ceil(hn.length/Zo);A.useEffect(()=>{Ye&&ae?(de(null),ae.filePreviewUrl?(nt(ae.filePreviewUrl),dt(!1)):ae.storage_path&&(ae.type===Te.PDF||ae.type===Te.JPG||ae.type===Te.PNG)?(dt(!0),nt(null),(async()=>{try{const{data:Pe,error:Ze}=await Fe.storage.from(Q1).download(ae.storage_path);if(Ze)throw Ze;if(!Pe)throw new Error("No se pudo descargar el archivo para la vista previa.");const Vt=await _M(Pe,ae.type);Vt?nt(Vt):de("No se pudo generar la vista previa para este tipo de archivo.")}catch(Pe){console.error("Error generando vista previa en modal:",Pe),de(Pe instanceof Error?Pe.message:"Error al generar vista previa.")}finally{dt(!1)}})()):(nt(null),dt(!1))):Ye||(nt(null),dt(!1),de(null))},[Ye,ae]);const fm=ce=>{Le(ce),Ae(!0),ct(null),Je(null),l&&n({type:"CLEAR_DELETE_ERROR"}),u&&n({type:"CLEAR_UPDATE_ERROR"})},Bl=()=>{Ae(!1),Le(null),ct(null)},jc=ce=>{Dt(ce),dn(!0),Ye&&Ae(!1)},Ja=()=>{dn(!1),Dt(null)},Qo=async ce=>{if(ct(null),!ce.storage_path){ct("Este documento no tiene un archivo original almacenado para descargar.");return}qt(!0);try{const{data:Pe,error:Ze}=await Fe.storage.from(Q1).download(ce.storage_path);if(Ze)throw console.error("Error descargando archivo de Supabase Storage:",Ze),new Error(`Error al descargar el archivo: ${Ze.message}`);if(Pe){const Vt=new Blob([Pe],{type:Pe.type}),Xt=URL.createObjectURL(Vt),xr=document.createElement("a");xr.href=Xt,xr.download=`${Th(ce.name)}.${ce.type.toLowerCase()}`,document.body.appendChild(xr),xr.click(),document.body.removeChild(xr),URL.revokeObjectURL(Xt)}else throw new Error("No se recibieron datos del archivo para descargar.")}catch(Pe){const Ze=Pe instanceof Error?Pe.message:"Ocurrió un error desconocido durante la descarga.";console.error("Error en downloadDocumentHandler:",Pe),ct(Ze)}finally{qt(!1)}},vi=ce=>{nn(ce),Je(null),l&&n({type:"CLEAR_DELETE_ERROR"}),cn(!0)},ra=async()=>{if(!qe||!d||!h){Je("No se pudo verificar la identidad del usuario o el documento. Intenta de nuevo.");return}Je(null),l&&n({type:"CLEAR_DELETE_ERROR"});const ce=qe.user_id,Pe=ce?$l.get(ce):void 0,Ze=Pe&&Pe.role_id?Fl.get(Pe.role_id):void 0;if(!S||ce&&!Pe){Je("La información del propietario del documento aún no está completamente cargada. Inténtalo de nuevo en un momento.");return}const Vt=h.name==="Administrador";if(!(Vt||h.canDeleteDocuments&&ce===d.id)){Vt?Je("Error inesperado: El administrador debería poder eliminar."):ce!==d.id?Je("No puedes borrar archivos de otros usuarios."):h.canDeleteDocuments?(Ze==null?void 0:Ze.name)==="Administrador"&&!Vt&&Je("No puedes borrar archivos subidos por un administrador."):Je("Tu rol no tiene permiso para eliminar documentos.");return}_n(qe.id);const xr=await e(qe.id,qe.storage_path);_n(null),xr&&(cn(!1),nn(null),Ye&&(ae==null?void 0:ae.id)===qe.id&&Bl())};A.useEffect(()=>()=>{l&&n({type:"CLEAR_DELETE_ERROR"}),u&&n({type:"CLEAR_UPDATE_ERROR"})},[l,u,n]);const Za=ae?ae.uploaderFullName||ae.uploaderEmail||(ae.user_id?`Usuario (ID: ${ae.user_id.substring(0,8)}...)`:"Sistema/Desconocido"):"",xi=(ae==null?void 0:ae.uploaderRoleName)||(ae!=null&&ae.user_id?"Rol desconocido":""),rn=A.useMemo(()=>!ae||!h||!d?!1:h.name==="Administrador"?!0:ae.user_id===d.id&&h.canEditDocuments,[ae,h,d]),Uc=A.useMemo(()=>{if(!ae||!Z)return!1;const ce=re(ae.dewey_code);return(ce==null?void 0:ce.is_confidential)||!1},[ae,Z,re]),$c=()=>{L(""),te(""),we("uploadDate"),ue("desc"),pe("all"),_e("all"),F(""),K.type&&z("/documents",{replace:!0})},bi=()=>{if(K.type==="id"&&K.id){const ce=T(K.id);return ce?`Documentos en: ${ce.office} / ${ce.shelf} / ${ce.row_level}`:"Documentos (Ubicación específica)"}return K.type==="officeShelf"&&K.officeName&&K.shelfName?`Documentos en Estante: ${K.shelfName} (Oficina: ${K.officeName})`:K.type==="office"&&K.officeName?`Documentos en Oficina: ${K.officeName}`:"Ver Documentos"};if(i||_||!S||!E||D||B){let ce="Cargando...";return i?ce="Cargando documentos...":B?ce="Cargando clasificaciones...":D?ce="Cargando ubicaciones...":_?ce="Cargando datos de usuario...":S?E||(ce="Finalizando carga de roles..."):ce="Finalizando carga de perfiles de usuario...",p.jsx(Ft,{text:ce,className:"mt-10"})}return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h1",{className:"text-3xl font-semibold text-primary",children:bi()}),K.type!==null&&p.jsx(Se,{onClick:()=>z("/documents",{replace:!0}),variant:"ghost",leftIcon:p.jsx(Sl,{className:"w-4 h-4"}),size:"sm",children:"Ver Todos los Documentos"})]}),p.jsxs("div",{className:`bg-white p-6 rounded-lg shadow-md space-y-4 ${K.type!==null?"hidden":""}`,children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end",children:[p.jsxs("div",{className:"lg:col-span-2",children:[p.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-neutral-dark",children:"Buscar por nombre, palabra clave, autor o ubicación"}),p.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(gh,{className:"h-5 w-5 text-neutral"})}),p.jsx("input",{type:"text",id:"search",className:"focus:ring-primary focus:border-primary block w-full pl-10 sm:text-sm border-neutral-dark bg-neutral-light text-neutral-dark placeholder-neutral rounded-md py-2",placeholder:"Ej: informe, contrato, autor, biblioteca...",value:Ee,onChange:ce=>L(ce.target.value)})]})]}),p.jsxs("div",{className:"min-w-[150px]",children:[p.jsx("label",{htmlFor:"typeFilter",className:"block text-sm font-medium text-neutral-dark",children:"Filtrar por tipo"}),p.jsxs("select",{id:"typeFilter",value:Y,onChange:ce=>te(ce.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-dark bg-neutral-light text-neutral-dark focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:[p.jsx("option",{value:"",children:"Todos los tipos"}),Lc.map(ce=>p.jsx("option",{value:ce,children:ce},ce))]})]}),p.jsxs("div",{className:"flex items-end space-x-2",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"sortKey",className:"block text-sm font-medium text-neutral-dark",children:"Ordenar por"}),p.jsxs("select",{id:"sortKey",value:ie,onChange:ce=>we(ce.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-dark bg-neutral-light text-neutral-dark focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:[p.jsx("option",{value:"uploadDate",children:"Fecha de subida"}),p.jsx("option",{value:"name",children:"Nombre (A-Z)"})]})]}),p.jsx(Se,{onClick:()=>ue(ce=>ce==="asc"?"desc":"asc"),variant:"ghost",size:"md",className:"p-2 text-primary hover:bg-primary-light",title:ge==="asc"?"Orden Ascendente":"Orden Descendente",children:ge==="asc"?p.jsx(HD,{className:"w-5 h-5"}):p.jsx(KD,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"flex items-end",children:p.jsx(Se,{onClick:$c,variant:"ghost",size:"md",className:"w-full text-red-600 hover:bg-red-100",leftIcon:p.jsx(No,{className:"w-5 h-5"}),title:"Limpiar todos los filtros",children:"Limpiar Filtros"})})]}),K.type===null&&p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 items-end border-t border-neutral-light pt-4 mt-4",children:[p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("label",{className:"block text-sm font-medium text-neutral-dark mb-1",children:"Mostrar Documentos"}),p.jsxs("span",{className:"relative z-0 inline-flex shadow-sm rounded-md",children:[p.jsx("button",{type:"button",onClick:()=>_e("all"),className:`relative inline-flex items-center px-3 py-2 rounded-l-md border text-sm font-medium transition-colors
                      ${V==="all"?"bg-primary text-white border-primary z-10":"bg-white text-neutral-dark border-neutral-dark hover:bg-neutral-lightest"}`,children:"Todos"}),p.jsx("button",{type:"button",onClick:()=>_e("mine"),className:`-ml-px relative inline-flex items-center px-3 py-2 rounded-r-md border text-sm font-medium transition-colors
                      ${V==="mine"?"bg-primary text-white border-primary z-10":"bg-white text-neutral-dark border-neutral-dark hover:bg-neutral-lightest"}`,children:"Mis Documentos"})]})]}),p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("label",{htmlFor:"physicalDigitalFilter",className:"block text-sm font-medium text-neutral-dark",children:"Ubicación"}),p.jsxs("select",{id:"physicalDigitalFilter",value:se,onChange:ce=>pe(ce.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-dark bg-neutral-light text-neutral-dark focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:[p.jsx("option",{value:"all",children:"Todos (Físicos y Digitales)"}),p.jsx("option",{value:"physical",children:"Solo Físicos"}),p.jsx("option",{value:"digital",children:"Solo Digitales"})]})]}),se==="physical"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("label",{htmlFor:"officeFilter",className:"block text-sm font-medium text-neutral-dark",children:"Oficina"}),p.jsxs("select",{id:"officeFilter",value:W,onChange:ce=>F(ce.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-dark bg-neutral-light text-neutral-dark focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",disabled:!k,children:[p.jsx("option",{value:"",children:"Todas las oficinas"}),dm.map(ce=>p.jsx("option",{value:ce,children:ce},ce))]})]}),p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("label",{htmlFor:"shelfFilter",className:"block text-sm font-medium text-neutral-dark",children:"Estante"}),p.jsxs("select",{id:"shelfFilter",value:xe,onChange:ce=>Q(ce.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-dark bg-neutral-light text-neutral-dark focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md disabled:opacity-70",disabled:!W||Fr.length===0||!k,children:[p.jsx("option",{value:"",children:"Todos los estantes"}),Fr.map(ce=>p.jsx("option",{value:ce,children:ce},ce))]})]}),p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("label",{htmlFor:"rowLevelFilter",className:"block text-sm font-medium text-neutral-dark",children:"Nivel/Fila"}),p.jsxs("select",{id:"rowLevelFilter",value:be,onChange:ce=>Me(ce.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-dark bg-neutral-light text-neutral-dark focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md disabled:opacity-70",disabled:!W||!xe||fn.length===0||!k,children:[p.jsx("option",{value:"",children:"Todos los niveles/filas"}),fn.map(ce=>p.jsx("option",{value:ce,children:ce},ce))]})]})]}):p.jsx("div",{className:"hidden lg:block lg:col-span-3"})]})]}),l&&!Ne&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{className:"font-semibold",children:"Error al Eliminar:"}),p.jsx("p",{children:l}),p.jsx(Se,{onClick:()=>n({type:"CLEAR_DELETE_ERROR"}),size:"sm",variant:"ghost",className:"mt-1 text-red-600 hover:bg-red-200",children:"Descartar"})]}),u&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{className:"font-semibold",children:"Error al Actualizar Documento:"}),p.jsx("p",{children:u}),p.jsx(Se,{onClick:()=>n({type:"CLEAR_UPDATE_ERROR"}),size:"sm",variant:"ghost",className:"mt-1 text-red-600 hover:bg-red-200",children:"Descartar"})]}),lt&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{className:"font-semibold",children:"Error de Descarga:"}),p.jsx("p",{children:lt})]}),Be&&p.jsxs("div",{className:"my-4 p-3 bg-blue-100 border border-blue-400 text-blue-700 rounded-md shadow text-sm flex items-center justify-center",children:[p.jsx(Ft,{size:"sm",className:"mr-2"}),p.jsx("p",{children:"Descargando archivo original..."})]}),hn.length===0&&!i?p.jsxs("div",{className:"text-center py-10 bg-white rounded-lg shadow-md",children:[p.jsx(il,{className:"w-16 h-16 text-neutral mx-auto mb-4"}),p.jsx("h2",{className:"text-xl font-semibold text-neutral-dark",children:"No se encontraron documentos"}),p.jsx("p",{className:"text-neutral-dark",children:r.length===0?"Aún no has subido ningún documento.":"Prueba ajustando los filtros o el término de búsqueda."}),r.length===0&&me&&p.jsx(ln,{to:"/upload",children:p.jsx(Se,{variant:"primary",className:"mt-6",children:"Subir primer documento"})})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ta.map(ce=>{const Pe=(h==null?void 0:h.name)==="Administrador"||(h==null?void 0:h.canDeleteDocuments)&&ce.user_id===(d==null?void 0:d.id);return p.jsx(Lq,{document:ce,onViewDetails:fm,onDownload:Qo,onDelete:vi,canDelete:Pe,isDeleting:a,deletingDocId:xt,canSeeUploader:H},ce.id)})}),na>1&&p.jsxs("div",{className:"mt-8 flex justify-center items-center space-x-4",children:[p.jsx(Se,{onClick:()=>Jo(ce=>ce-1),disabled:ni===1||i,children:"Anterior"}),p.jsxs("span",{className:"text-neutral-dark font-medium",children:["Página ",ni," de ",na]}),p.jsx(Se,{onClick:()=>Jo(ce=>ce+1),disabled:ni===na||na===0||i,children:"Siguiente"})]})]}),ae&&p.jsx(vn,{isOpen:Ye,onClose:Bl,title:ae.name,size:"lg",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(Zs,{className:"w-4 h-4 mr-1 text-secondary"}),"Tipo de Archivo"]}),p.jsx("p",{className:"text-sm text-neutral-dark font-medium bg-neutral-lightest p-2 rounded",children:ae.type})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(Zs,{className:"w-4 h-4 mr-1 text-secondary"}),"Fecha de Subida"]}),p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded",children:new Date(ae.uploadDate).toLocaleString()})]}),ae.authors&&ae.authors.length>0&&p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(yn,{className:"w-4 h-4 mr-1 text-secondary"}),"Autores"]}),p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded max-h-20 overflow-y-auto",children:ae.authors.join("; ")})]}),H&&p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(yn,{className:"w-4 h-4 mr-1 text-secondary"}),"Información del Cargador"]}),p.jsxs("div",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded",children:[p.jsxs("p",{children:["Nombre: ",p.jsx("span",{className:"font-medium",children:Za})]}),xi&&p.jsxs("p",{children:["Rol: ",p.jsx("span",{className:"font-medium",children:xi})]})]})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(Zs,{className:"w-4 h-4 mr-1 text-secondary"}),"Resumen"]}),p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-3 rounded max-h-40 overflow-y-auto",children:ae.summary})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(xc,{className:"w-4 h-4 mr-1 text-secondary"}),"Palabras Clave"]}),p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-3 rounded max-h-40 overflow-y-auto",children:ae.keywords.join(", ")})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[Uc?p.jsx(El,{className:"w-4 h-4 mr-1 text-secondary"}):p.jsx(hi,{className:"w-4 h-4 mr-1 text-secondary"}),"Clasificación Dewey"]}),p.jsx("p",{className:"text-sm text-neutral-dark font-medium bg-neutral-lightest p-2 rounded",children:ae.deweyCategoryName?`${ae.dewey_code} - ${ae.deweyCategoryName}`:Z?U(ae.dewey_code):ae.dewey_code})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(mi,{className:`w-4 h-4 mr-1 ${ae.physical_location_id?"text-secondary":"text-neutral"}`}),"Ubicación"]}),ae.physical_location_id?p.jsxs("div",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded",children:[p.jsxs("p",{children:["Oficina: ",p.jsx("span",{className:"font-medium",children:ae.physicalOffice||"N/A"})]}),p.jsxs("p",{children:["Estante: ",p.jsx("span",{className:"font-medium",children:ae.physicalShelf||"N/A"})]}),p.jsxs("p",{children:["Nivel/Fila: ",p.jsx("span",{className:"font-medium",children:ae.physicalRowLevel||"N/A"})]})]}):p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded italic",children:"Digital"})]}),(ae.type===Te.JPG||ae.type===Te.PNG||ae.type===Te.PDF)&&p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-semibold text-neutral-dark mb-1",children:"Vista Previa"}),Xe&&p.jsx("div",{className:"flex justify-center items-center h-40 bg-neutral-lightest rounded border",children:p.jsx(Ft,{text:"Cargando vista previa..."})}),Tt&&p.jsxs("p",{className:"text-xs text-red-500 bg-red-50 p-2 rounded",children:["Error al cargar vista previa: ",Tt]}),Pn&&!Xe&&p.jsx("img",{src:Pn,alt:"Vista previa",className:"max-w-full h-auto border rounded object-contain max-h-96"}),!Pn&&!Xe&&!Tt&&p.jsx("p",{className:"text-xs text-neutral-dark bg-neutral-lightest p-2 rounded italic",children:(ae.type===Te.PDF||ae.type===Te.JPG||ae.type===Te.PNG)&&!ae.storage_path?"El archivo original no está disponible en el almacenamiento para generar una vista previa.":"La vista previa no está disponible para este archivo o tipo de archivo."})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-semibold text-neutral-dark mb-1",children:"Texto Extraído (extracto)"}),p.jsxs("pre",{className:"text-xs text-neutral-dark bg-neutral-lightest p-3 rounded max-h-60 overflow-y-auto whitespace-pre-wrap",children:[ae.extractedText.substring(0,1e3),ae.extractedText.length>1e3?"...":""]})]}),lt&&p.jsx("div",{className:"my-2 p-2 bg-red-50 border border-red-300 text-red-600 rounded-md text-xs",role:"alert",children:p.jsx("p",{children:lt})}),Be&&p.jsxs("div",{className:"my-2 p-2 bg-blue-50 border border-blue-300 text-blue-600 rounded-md text-xs flex items-center justify-center",children:[p.jsx(Ft,{size:"sm",className:"mr-2"}),p.jsx("p",{children:"Descargando archivo original..."})]}),l&&!a&&p.jsx("div",{className:"my-2 p-2 bg-red-50 border border-red-300 text-red-600 rounded-md text-xs",role:"alert",children:p.jsxs("p",{children:["Error al eliminar: ",l]})}),p.jsxs("div",{className:"mt-6 space-y-3",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[rn&&p.jsx(Se,{onClick:()=>jc(ae),variant:"primary",className:"w-full sm:flex-1",leftIcon:p.jsx(qa,{className:"w-4 h-4"}),disabled:Be||a&&xt===ae.id,children:"Editar Documento"}),p.jsx(Se,{onClick:()=>Qo(ae),variant:"secondary",className:"w-full sm:flex-1",leftIcon:p.jsx(wf,{className:"w-4 h-4"}),disabled:!ae.storage_path||Be||a&&xt===ae.id,isLoading:Be,children:Be?"Descargando...":"Descargar Original"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[((h==null?void 0:h.name)==="Administrador"||(h==null?void 0:h.canDeleteDocuments)&&ae.user_id===(d==null?void 0:d.id))&&p.jsx(Se,{onClick:()=>vi(ae),variant:"danger",className:"w-full sm:flex-1",leftIcon:p.jsx(zi,{className:"w-4 h-4"}),isLoading:a&&(qe==null?void 0:qe.id)===ae.id,disabled:Be||a&&(qe==null?void 0:qe.id)===ae.id,children:a&&(qe==null?void 0:qe.id)===ae.id?"Eliminando...":"Eliminar Documento"}),p.jsx(Se,{onClick:Bl,className:"w-full sm:flex-1",variant:"ghost",disabled:a&&xt===ae.id||Be,children:"Cerrar"})]})]})]})}),yt&&qe&&p.jsxs(vn,{isOpen:yt,onClose:()=>{a||(cn(!1),nn(null),Je(null))},title:"Confirmar Eliminación",children:[p.jsxs("p",{className:"text-sm text-neutral-dark",children:['¿Estás seguro de que quieres eliminar el documento "',p.jsx("strong",{children:qe.name}),'"? Esta acción no se puede deshacer y eliminará tanto el registro como el archivo almacenado.']}),Ne&&p.jsx("div",{className:"mt-3 p-2 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded-md text-xs",children:Ne}),!Ne&&l&&p.jsxs("div",{className:"mt-3 p-2 bg-red-100 border border-red-300 text-red-600 rounded-md text-xs",children:["Error del sistema: ",l]}),p.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[p.jsx(Se,{variant:"ghost",onClick:()=>{cn(!1),nn(null),Je(null)},disabled:a,children:"Cancelar"}),p.jsx(Se,{variant:"danger",onClick:ra,isLoading:a,disabled:a||!!Ne,children:a?"Eliminando...":"Sí, Eliminar"})]})]}),p.jsx(vx,{isOpen:jt,onClose:Ja,documentToEdit:Bn,userRolePermissions:h})]})},Uq="gestorDocumentalIA_uiSettings_",eT=`${Uq}showOnlyClassificationsWithDocuments`,Xg={showOnlyClassificationsWithDocuments:!0,isLoaded:!1},r2=A.createContext(void 0),$q=(t,e)=>{switch(e.type){case"LOAD_SETTINGS":return{...t,...e.payload,isLoaded:!0};case"TOGGLE_SHOW_ONLY_CLASSIFICATIONS_WITH_DOCUMENTS":return{...t,showOnlyClassificationsWithDocuments:!t.showOnlyClassificationsWithDocuments};default:return t}},Fq=({children:t})=>{const[e,n]=A.useReducer($q,Xg);A.useEffect(()=>{try{const i=localStorage.getItem(eT),a=i!==null?JSON.parse(i):Xg.showOnlyClassificationsWithDocuments;n({type:"LOAD_SETTINGS",payload:{showOnlyClassificationsWithDocuments:a}})}catch(i){console.error("Error loading UI settings from localStorage:",i),n({type:"LOAD_SETTINGS",payload:{showOnlyClassificationsWithDocuments:Xg.showOnlyClassificationsWithDocuments}})}},[]),A.useEffect(()=>{if(e.isLoaded)try{localStorage.setItem(eT,JSON.stringify(e.showOnlyClassificationsWithDocuments))}catch(i){console.error("Error saving UI settings to localStorage:",i)}},[e.showOnlyClassificationsWithDocuments,e.isLoaded]);const r=A.useCallback(()=>{n({type:"TOGGLE_SHOW_ONLY_CLASSIFICATIONS_WITH_DOCUMENTS"})},[]);return p.jsx(r2.Provider,{value:{state:e,dispatch:n,toggleShowOnlyClassificationsWithDocuments:r},children:t})},i2=()=>{const t=A.useContext(r2);if(t===void 0)throw new Error("useUISettingsStore must be used within a UISettingsProvider");return t},Bq=()=>{const{state:t}=ei(),{documents:e}=t,n=Vo(),{state:r,getSubcategories:i}=vr(),{mainCategories:a,isLoading:l,error:u,isLoaded:f}=r,{state:d}=i2(),{showOnlyClassificationsWithDocuments:h,isLoaded:v}=d,[x,_]=A.useState(null),S=A.useMemo(()=>{if(!f)return{};const O={};return a.forEach(D=>{const k=i(D.code);let I=e.some(j=>j.dewey_code===D.code);I||(I=k.some(j=>e.some(U=>U.dewey_code===j.code))),O[D.code]=I,k.forEach(j=>{O[j.code]=e.some(U=>U.dewey_code===j.code)})}),O},[e,a,i,f]),E=O=>{S[O.code]&&_(O)},C=O=>{S[O.code]&&x&&n(`/classifications/${x.code}/${O.code}`)},T=({category:O,onClick:D,isEnabled:k,isSubCategory:I=!1})=>p.jsxs("button",{onClick:D,disabled:!k,className:`w-full p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex flex-col items-center text-center
        ${k?"bg-white cursor-pointer hover:bg-blue-50":"bg-neutral-default cursor-not-allowed opacity-70"}
      `,children:[O.is_confidential?p.jsx(El,{className:"w-8 h-8 text-secondary mb-3"}):k?p.jsx(_j,{className:"w-8 h-8 text-green-500 mb-3"}):p.jsx(YD,{className:"w-8 h-8 text-red-500 mb-3"}),p.jsxs("h3",{className:`text-lg font-semibold ${k?"text-primary":"text-neutral-dark"}`,children:[O.code," - ",O.name]}),!k&&p.jsx("p",{className:"text-xs text-neutral-dark mt-1",children:"No hay documentos"}),k&&I&&p.jsx(yh,{className:"w-5 h-5 text-primary mt-2 self-end"})]});if(l||!v)return p.jsx(Ft,{text:"Cargando clasificaciones y configuración...",className:"mt-10"});if(u)return p.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-md",children:["Error cargando clasificaciones: ",u]});if(!f)return p.jsx(Ft,{text:"Esperando datos de clasificación...",className:"mt-10"});if(!x){const O=h?a.filter(D=>!!S[D.code]):a;return p.jsxs("div",{className:"space-y-6",children:[p.jsx("h1",{className:"text-3xl font-semibold text-primary",children:"Clasificaciones Dewey (Nivel Principal)"}),O.length===0?p.jsx("p",{className:"text-neutral-dark bg-white p-6 rounded-lg shadow text-center",children:h?"No hay categorías principales con documentos.":"No se encontraron categorías principales."}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(D=>p.jsx(T,{category:D,onClick:()=>E(D),isEnabled:!!S[D.code]},D.code))}),p.jsx("p",{className:"text-xs text-center text-neutral-dark mt-4",children:"Para cambiar la visibilidad de las clasificaciones vacías, usa el ícono de configuración (⚙️) en la barra de navegación."})]})}const R=i(x.code),N=h?R.filter(O=>!!S[O.code]):R;return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("h1",{className:"text-3xl font-semibold text-primary",children:["Subcategorías de: ",x.code," - ",x.name]}),p.jsx(Se,{onClick:()=>_(null),variant:"ghost",children:"← Volver a Categorías Principales"})]}),N.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(O=>p.jsx(T,{category:O,onClick:()=>C(O),isEnabled:!!S[O.code],isSubCategory:!0},O.code))}):p.jsx("p",{className:"text-neutral-dark bg-white p-6 rounded-lg shadow text-center",children:h?"No hay subcategorías con documentos para esta categoría principal.":"No hay subcategorías definidas o con documentos para esta categoría principal."}),p.jsx("p",{className:"text-xs text-center text-neutral-dark mt-4",children:"Para cambiar la visibilidad de las clasificaciones vacías, usa el ícono de configuración (⚙️) en la barra de navegación."})]})},tT="document-files",qq=()=>{const{mainCategoryCode:t,subCategoryCode:e}=HL(),n=Vo(),{state:r,deleteDocument:i,dispatch:a}=ei(),{documents:l,isLoading:u,isDeleting:f,deleteError:d,updateError:h}=r,{state:v}=Fn(),{supabaseUser:x,currentRole:_,allUsers:S,allRoles:E,isLoading:C,usersSuccessfullyLoadedFromDB:T,rolesSuccessfullyLoadedFromDB:R}=v,{state:N,getCategory:O,getCategoryNameByCode:D}=vr(),{isLoading:k,error:I,isLoaded:j}=N,{state:U,getLocationById:re}=yi(),{isLoading:B,isLoaded:Z,error:me}=U,[H,ve]=A.useState(null),[z,K]=A.useState(!1),[ye,Ee]=A.useState(!1),[L,Y]=A.useState(null),[te,ie]=A.useState(null),[we,ge]=A.useState(!1),[ue,se]=A.useState(null),[pe,V]=A.useState(null),[_e,W]=A.useState(!1),[F,xe]=A.useState(null),[Q,be]=A.useState(null),[Me,ae]=A.useState(!1),[Le,Ye]=A.useState(null),Ae=A.useMemo(()=>T?new Map(S.map(Ne=>[Ne.id,Ne])):new Map,[S,T]),lt=A.useMemo(()=>R?new Map(E.map(Ne=>[Ne.id,Ne])):new Map,[E,R]),ct=A.useMemo(()=>l.filter(Ne=>Ne.dewey_code===e),[l,e]),Be=A.useMemo(()=>!j||!t?null:O(t),[j,t,O]),qt=A.useMemo(()=>!j||!e?null:O(e),[j,e,O]);A.useEffect(()=>{z&&H?(se(null),H.filePreviewUrl?(ie(H.filePreviewUrl),ge(!1)):H.storage_path&&(H.type===Te.PDF||H.type===Te.JPG||H.type===Te.PNG)?(ge(!0),ie(null),(async()=>{try{const{data:Je,error:jt}=await Fe.storage.from(tT).download(H.storage_path);if(jt)throw jt;if(!Je)throw new Error("No se pudo descargar el archivo para la vista previa.");const dn=await _M(Je,H.type);dn?ie(dn):se("No se pudo generar la vista previa para este tipo de archivo.")}catch(Je){console.error("Error generando vista previa en modal (DeweySubCategoryPage):",Je),se(Je instanceof Error?Je.message:"Error al generar vista previa.")}finally{ge(!1)}})()):(ie(null),ge(!1))):z||(ie(null),ge(!1),se(null))},[z,H]);const Pn=Ne=>{ve(Ne),K(!0),Y(null),be(null),d&&a({type:"CLEAR_DELETE_ERROR"}),h&&a({type:"CLEAR_UPDATE_ERROR"})},nt=Ne=>{Ye(Ne),ae(!0),z&&K(!1)},Xe=()=>{ae(!1),Ye(null)},dt=()=>{K(!1),ve(null)},Tt=async Ne=>{if(Y(null),!Ne.storage_path){Y("Este documento no tiene un archivo original almacenado para descargar.");return}Ee(!0);try{const{data:Je,error:jt}=await Fe.storage.from(tT).download(Ne.storage_path);if(jt)throw console.error("Error descargando archivo de Supabase Storage:",jt),new Error(`Error al descargar el archivo: ${jt.message}`);if(Je){const dn=new Blob([Je],{type:Je.type}),Bn=URL.createObjectURL(dn),Dt=document.createElement("a");Dt.href=Bn,Dt.download=`${Th(Ne.name)}.${Ne.type.toLowerCase()}`,document.body.appendChild(Dt),Dt.click(),document.body.removeChild(Dt),URL.revokeObjectURL(Bn)}else throw new Error("No se recibieron datos del archivo para descargar.")}catch(Je){const jt=Je instanceof Error?Je.message:"Ocurrió un error desconocido durante la descarga.";console.error("Error en downloadDocumentHandler (DeweySubCategoryPage):",Je),Y(jt)}finally{Ee(!1)}},de=Ne=>{V(Ne),be(null),d&&a({type:"CLEAR_DELETE_ERROR"}),W(!0)},qe=async()=>{if(!pe||!x||!_){be("No se pudo verificar la identidad del usuario o el documento. Intenta de nuevo.");return}be(null),d&&a({type:"CLEAR_DELETE_ERROR"});const Ne=pe.user_id,Je=Ne?Ae.get(Ne):void 0,jt=Je&&Je.role_id?lt.get(Je.role_id):void 0;if(!T||Ne&&!Je){be("La información del propietario del documento aún no está completamente cargada. Inténtalo de nuevo en un momento.");return}const dn=_.name==="Administrador";if(!(dn||_.canDeleteDocuments&&Ne===x.id)){dn?be("Error inesperado: El administrador debería poder eliminar."):Ne!==x.id?be("No puedes borrar archivos de otros usuarios."):_.canDeleteDocuments?(jt==null?void 0:jt.name)==="Administrador"&&!dn&&be("No puedes borrar archivos subidos por un administrador."):be("Tu rol no tiene permiso para eliminar documentos.");return}xe(pe.id);const Dt=await i(pe.id,pe.storage_path);xe(null),Dt&&(W(!1),V(null),z&&(H==null?void 0:H.id)===pe.id&&dt())};A.useEffect(()=>()=>{d&&a({type:"CLEAR_DELETE_ERROR"}),h&&a({type:"CLEAR_UPDATE_ERROR"})},[d,h,a]);const nn=H?H.uploaderFullName||H.uploaderEmail||(H.user_id?`Usuario (ID: ${H.user_id.substring(0,8)}...)`:"Sistema/Desconocido"):"",yt=(H==null?void 0:H.uploaderRoleName)||(H!=null&&H.user_id?"Rol desconocido":""),cn=A.useMemo(()=>!H||!_||!x?!1:_.name==="Administrador"?!0:H.user_id===x.id&&_.canEditDocuments,[H,_,x]),xt=(_==null?void 0:_.canSeeUploader)??!1;if(u||C||!T||!R||k||B){let Ne="Cargando...";return u?Ne="Cargando documentos...":k?Ne="Cargando clasificaciones...":B?Ne="Cargando ubicaciones...":C?Ne="Cargando datos de usuario...":T?R||(Ne="Finalizando carga de roles..."):Ne="Finalizando carga de perfiles de usuario...",p.jsx(Ft,{text:Ne,className:"mt-10"})}if(I)return p.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-md",children:["Error cargando datos de clasificación: ",I]});if(me)return p.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-md",children:["Error cargando datos de ubicación: ",me]});if(!Be||!qt)return p.jsxs("div",{className:"p-4 bg-yellow-100 text-yellow-700 rounded-md",children:["Categoría no encontrada. ",p.jsx(ln,{to:"/classifications",className:"underline hover:text-yellow-800",children:"Volver a Clasificaciones"})]});const _n=Ne=>{switch(Ne){case Te.PDF:return p.jsx(xh,{className:"w-5 h-5 text-red-500"});case Te.JPG:case Te.PNG:return p.jsx(bh,{className:"w-5 h-5 text-blue-500"});case Te.DOCX:return p.jsx(_h,{className:"w-5 h-5 text-sky-600"});case Te.TXT:return p.jsx(wh,{className:"w-5 h-5 text-gray-500"});case Te.XLSX:case Te.XLS:return p.jsx(ax,{className:"w-5 h-5 text-green-600"});case Te.PPTX:case Te.PPT:return p.jsx(ox,{className:"w-5 h-5 text-orange-500"});default:return p.jsx(Sh,{className:"w-5 h-5 text-gray-400"})}};return p.jsxs("div",{className:"space-y-6",children:[p.jsx(Se,{onClick:()=>n("/classifications"),variant:"ghost",className:"mb-4 text-sm",children:"← Volver a Categorías Principales"}),p.jsxs("h1",{className:"text-3xl font-semibold text-primary",children:[qt.code," - ",qt.name]}),p.jsxs("p",{className:"text-neutral-dark",children:["Explorando documentos bajo la categoría principal: ",Be.code," - ",Be.name]}),d&&!Q&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{className:"font-semibold",children:"Error al Eliminar:"}),p.jsx("p",{children:d}),p.jsx(Se,{onClick:()=>a({type:"CLEAR_DELETE_ERROR"}),size:"sm",variant:"ghost",className:"mt-1 text-red-600 hover:bg-red-200",children:"Descartar"})]}),h&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{className:"font-semibold",children:"Error al Actualizar Documento:"}),p.jsx("p",{children:h}),p.jsx(Se,{onClick:()=>a({type:"CLEAR_UPDATE_ERROR"}),size:"sm",variant:"ghost",className:"mt-1 text-red-600 hover:bg-red-200",children:"Descartar"})]}),L&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{className:"font-semibold",children:"Error de Descarga:"}),p.jsx("p",{children:L})]}),ye&&p.jsxs("div",{className:"my-4 p-3 bg-blue-100 border border-blue-400 text-blue-700 rounded-md shadow text-sm flex items-center justify-center",children:[p.jsx(Ft,{size:"sm",className:"mr-2"}),p.jsx("p",{children:"Descargando archivo original..."})]}),ct.length===0?p.jsxs("div",{className:"text-center py-10 bg-white rounded-lg shadow",children:[p.jsx(il,{className:"w-16 h-16 text-neutral mx-auto mb-4"}),p.jsx("h2",{className:"text-xl font-semibold text-neutral-dark",children:"No hay documentos en esta subcategoría."})]}):p.jsx("ul",{className:"space-y-3",children:ct.map(Ne=>{const Je=Ne.physicalOffice&&Ne.physicalShelf&&Ne.physicalRowLevel?`${Ne.physicalOffice}, ${Ne.physicalShelf}, ${Ne.physicalRowLevel}`:"Digital",jt=f&&F===Ne.id,dn=(_==null?void 0:_.name)==="Administrador"||(_==null?void 0:_.canDeleteDocuments)&&Ne.user_id===(x==null?void 0:x.id),Bn=Ne.uploaderFullName||Ne.uploaderEmail||(Ne.user_id?`Usuario (ID: ${Ne.user_id.substring(0,8)}...)`:"Sistema/Desconocido"),Dt=Ne.uploaderRoleName||(Ne.user_id?"Rol desconocido":"");return p.jsx("li",{className:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow duration-150",children:p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start",children:[p.jsxs("div",{className:"flex items-center mb-2 sm:mb-0 flex-grow min-w-0",children:[p.jsx("span",{className:"mr-3 flex-shrink-0",children:_n(Ne.type)}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("h3",{className:"text-md font-semibold text-primary truncate",title:Ne.name,children:Ne.name}),p.jsxs("p",{className:"text-xs text-neutral-dark",children:["Subido: ",new Date(Ne.uploadDate).toLocaleDateString()]}),Ne.authors&&Ne.authors.length>0&&p.jsxs("p",{className:"text-xs text-neutral-dark truncate",title:Ne.authors.join("; "),children:[p.jsx(yn,{className:"w-3 h-3 inline mr-1 align-middle"}),"Autores: ",Ne.authors.join("; ")]}),xt&&p.jsxs("p",{className:"text-xs text-neutral-dark truncate",title:`${Bn} ${Dt?`(${Dt})`:""}`,children:[p.jsx(yn,{className:"w-3 h-3 inline mr-1 align-middle text-secondary"}),"Por: ",Bn," ",Dt&&`(${Dt})`]}),p.jsxs("p",{className:"text-xs text-neutral-dark truncate",title:Je,children:[p.jsx(mi,{className:`w-3 h-3 inline mr-1 align-middle ${Ne.physical_location_id?"text-green-600":"text-neutral"}`}),p.jsx("span",{className:`${Ne.physical_location_id?"":"italic"}`,children:Je})]})]})]}),p.jsxs("div",{className:"flex space-x-2 self-start sm:self-center flex-shrink-0",children:[p.jsx(Se,{onClick:()=>Pn(Ne),variant:"ghost",size:"sm",className:"text-primary hover:bg-primary-light",leftIcon:p.jsx(ix,{className:"w-4 h-4"}),disabled:jt,children:"Detalles"}),p.jsx(Se,{onClick:()=>Tt(Ne),variant:"ghost",size:"sm",className:"text-secondary hover:bg-secondary-light",leftIcon:p.jsx(wf,{className:"w-4 h-4"}),disabled:!Ne.storage_path||jt,children:"Descargar"}),dn&&p.jsx(Se,{onClick:()=>de(Ne),variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-100",leftIcon:p.jsx(zi,{className:"w-4 h-4"}),isLoading:jt,disabled:jt,children:jt?"Eliminando...":"Eliminar"})]})]})},Ne.id)})}),H&&p.jsx(vn,{isOpen:z,onClose:dt,title:H.name,size:"lg",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(Zs,{className:"w-4 h-4 mr-1 text-secondary"}),"Tipo de Archivo"]}),p.jsx("p",{className:"text-sm text-neutral-dark font-medium bg-neutral-lightest p-2 rounded",children:H.type})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(Zs,{className:"w-4 h-4 mr-1 text-secondary"}),"Fecha de Subida"]}),p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded",children:new Date(H.uploadDate).toLocaleString()})]}),H.authors&&H.authors.length>0&&p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(yn,{className:"w-4 h-4 mr-1 text-secondary"}),"Autores"]}),p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded max-h-20 overflow-y-auto",children:H.authors.join("; ")})]}),xt&&p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(yn,{className:"w-4 h-4 mr-1 text-secondary"}),"Información del Cargador"]}),p.jsxs("div",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded",children:[p.jsxs("p",{children:["Nombre: ",p.jsx("span",{className:"font-medium",children:nn})]}),yt&&p.jsxs("p",{children:["Rol: ",p.jsx("span",{className:"font-medium",children:yt})]})]})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(Zs,{className:"w-4 h-4 mr-1 text-secondary"}),"Resumen"]}),p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-3 rounded max-h-40 overflow-y-auto",children:H.summary})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(xc,{className:"w-4 h-4 mr-1 text-secondary"}),"Palabras Clave"]}),p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-3 rounded max-h-40 overflow-y-auto",children:H.keywords.join(", ")})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[qt!=null&&qt.is_confidential?p.jsx(El,{className:"w-4 h-4 mr-1 text-secondary"}):p.jsx(hi,{className:"w-4 h-4 mr-1 text-secondary"}),"Clasificación Dewey"]}),p.jsx("p",{className:"text-sm text-neutral-dark font-medium bg-neutral-lightest p-2 rounded",children:H.deweyCategoryName?`${H.dewey_code} - ${H.deweyCategoryName}`:j?D(H.dewey_code):H.dewey_code})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-neutral-dark mb-1 flex items-center",children:[p.jsx(mi,{className:`w-4 h-4 mr-1 ${H.physical_location_id?"text-secondary":"text-neutral"}`}),"Ubicación"]}),H.physical_location_id?p.jsxs("div",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded",children:[p.jsxs("p",{children:["Oficina: ",p.jsx("span",{className:"font-medium",children:H.physicalOffice||"N/A"})]}),p.jsxs("p",{children:["Estante: ",p.jsx("span",{className:"font-medium",children:H.physicalShelf||"N/A"})]}),p.jsxs("p",{children:["Nivel/Fila: ",p.jsx("span",{className:"font-medium",children:H.physicalRowLevel||"N/A"})]})]}):p.jsx("p",{className:"text-sm text-neutral-dark bg-neutral-lightest p-2 rounded italic",children:"Digital"})]}),(H.type===Te.JPG||H.type===Te.PNG||H.type===Te.PDF)&&p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-semibold text-neutral-dark mb-1",children:"Vista Previa"}),we&&p.jsx("div",{className:"flex justify-center items-center h-40 bg-neutral-lightest rounded border",children:p.jsx(Ft,{text:"Cargando vista previa..."})}),ue&&p.jsxs("p",{className:"text-xs text-red-500 bg-red-50 p-2 rounded",children:["Error al cargar vista previa: ",ue]}),te&&!we&&p.jsx("img",{src:te,alt:"Vista previa",className:"max-w-full h-auto border rounded object-contain max-h-96"}),!te&&!we&&!ue&&p.jsx("p",{className:"text-xs text-neutral-dark bg-neutral-lightest p-2 rounded italic",children:(H.type===Te.PDF||H.type===Te.JPG||H.type===Te.PNG)&&!H.storage_path?"El archivo original no está disponible en el almacenamiento para generar una vista previa.":"La vista previa no está disponible para este archivo o tipo de archivo."})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-semibold text-neutral-dark mb-1",children:"Texto Extraído (extracto)"}),p.jsxs("pre",{className:"text-xs text-neutral-dark bg-neutral-lightest p-3 rounded max-h-60 overflow-y-auto whitespace-pre-wrap",children:[H.extractedText.substring(0,1e3),H.extractedText.length>1e3?"...":""]})]}),L&&p.jsx("div",{className:"my-2 p-2 bg-red-50 border border-red-300 text-red-600 rounded-md text-xs",role:"alert",children:p.jsx("p",{children:L})}),ye&&p.jsxs("div",{className:"my-2 p-2 bg-blue-50 border border-blue-300 text-blue-600 rounded-md text-xs flex items-center justify-center",children:[p.jsx(Ft,{size:"sm",className:"mr-2"}),p.jsx("p",{children:"Descargando archivo original..."})]}),d&&!f&&p.jsx("div",{className:"my-2 p-2 bg-red-50 border border-red-300 text-red-600 rounded-md text-xs",role:"alert",children:p.jsxs("p",{children:["Error al eliminar: ",d]})}),p.jsxs("div",{className:"mt-6 space-y-3",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[cn&&p.jsx(Se,{onClick:()=>nt(H),variant:"primary",className:"w-full sm:flex-1",leftIcon:p.jsx(qa,{className:"w-4 h-4"}),disabled:ye||f&&(pe==null?void 0:pe.id)===H.id,children:"Editar Documento"}),p.jsx(Se,{onClick:()=>Tt(H),variant:"secondary",className:"w-full sm:flex-1",leftIcon:p.jsx(wf,{className:"w-4 h-4"}),disabled:!H.storage_path||ye||f&&(pe==null?void 0:pe.id)===H.id,isLoading:ye,children:ye?"Descargando...":"Descargar Original"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[((_==null?void 0:_.name)==="Administrador"||(_==null?void 0:_.canDeleteDocuments)&&H.user_id===(x==null?void 0:x.id))&&p.jsx(Se,{onClick:()=>de(H),variant:"danger",className:"w-full sm:flex-1",leftIcon:p.jsx(zi,{className:"w-4 h-4"}),isLoading:f&&(pe==null?void 0:pe.id)===H.id,disabled:ye||f&&(pe==null?void 0:pe.id)===H.id,children:f&&(pe==null?void 0:pe.id)===H.id?"Eliminando...":"Eliminar Documento"}),p.jsx(Se,{onClick:dt,className:"w-full sm:flex-1",variant:"ghost",disabled:f&&(pe==null?void 0:pe.id)===H.id||ye,children:"Cerrar"})]})]})]})}),_e&&pe&&p.jsxs(vn,{isOpen:_e,onClose:()=>{f||(W(!1),V(null),be(null))},title:"Confirmar Eliminación",children:[p.jsxs("p",{className:"text-sm text-neutral-dark",children:['¿Estás seguro de que quieres eliminar el documento "',p.jsx("strong",{children:pe.name}),'"? Esta acción no se puede deshacer y eliminará tanto el registro como el archivo almacenado.']}),Q&&p.jsx("div",{className:"mt-3 p-2 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded-md text-xs",children:Q}),!Q&&d&&p.jsxs("div",{className:"mt-3 p-2 bg-red-100 border border-red-300 text-red-600 rounded-md text-xs",children:["Error del sistema: ",d]}),p.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[p.jsx(Se,{variant:"ghost",onClick:()=>{W(!1),V(null),be(null)},disabled:f,children:"Cancelar"}),p.jsx(Se,{variant:"danger",onClick:qe,isLoading:f,disabled:f||!!Q,children:f?"Eliminando...":"Sí, Eliminar"})]})]}),p.jsx(vx,{isOpen:Me,onClose:Xe,documentToEdit:Le,userRolePermissions:_})]})},Vq=()=>{const{state:t,dispatch:e,requestTaskCancellation:n}=n2(),{uploadQueue:r}=t,{state:i}=Fn(),{supabaseUser:a,currentRole:l,allUsers:u,usersSuccessfullyLoadedFromDB:f}=i,[d,h]=A.useState(!1),v=(l==null?void 0:l.name)==="Administrador",x=A.useMemo(()=>f?new Map(u.map(D=>[D.id,D])):new Map,[u,f]),_=A.useMemo(()=>v?r:r.filter(D=>D.userId===(a==null?void 0:a.id)),[r,v,a==null?void 0:a.id]),S=A.useMemo(()=>_.filter(D=>D.status!=="completed"&&D.status!=="error"&&D.status!=="cancelled"),[_]);if(r.length===0)return null;const E=S.length>0,C=D=>D==="completed"?"text-green-500":D==="error"?"text-red-500":D==="cancelled"?"text-neutral-500":D==="pending"?"text-neutral":"text-blue-500",T=D=>D==="completed"?p.jsx(XD,{className:"w-4 h-4 text-green-500 flex-shrink-0"}):D==="error"?p.jsx(No,{className:"w-4 h-4 text-red-500 flex-shrink-0"}):D==="cancelled"?p.jsx(No,{className:"w-4 h-4 text-neutral-500 flex-shrink-0"}):D==="pending"?p.jsx(JD,{className:"w-4 h-4 text-neutral flex-shrink-0"}):p.jsx(Ft,{size:"sm",className:"flex-shrink-0"}),R=D=>{e({type:"CLEAR_TASK",payload:{taskId:D}})},N=D=>{n(D)},O=D=>(a==null?void 0:a.id)===D||v;return p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:()=>h(!0),className:"relative p-2 rounded-full hover:bg-primary-dark transition-colors","aria-label":"Ver progreso de cargas",title:"Ver progreso de cargas",children:[p.jsx(vc,{className:"w-5 h-5 text-white"}),E&&p.jsx("span",{className:"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-secondary ring-2 ring-primary"})]}),p.jsxs(vn,{isOpen:d,onClose:()=>h(!1),title:"Progreso de Cargas",size:"lg",children:[_.length===0?p.jsx("p",{className:"text-neutral-dark text-center py-4",children:v?"No hay archivos en la cola de carga global.":"No tienes archivos en la cola de carga."}):p.jsx("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto",children:_.map(D=>{const k=D.status==="completed"||D.status==="error"||D.status==="cancelled",I=!k,j=O(D.userId),U=j&&I&&!D.isCancellationRequested,re=j&&I&&D.isCancellationRequested,B=j&&k,Z=v&&f?x.get(D.userId):null;return p.jsx("div",{className:"p-3 border border-neutral-light rounded-md hover:bg-neutral-lightest transition-colors",children:p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{className:"min-w-0 flex-grow mr-2",children:[p.jsx("p",{className:"font-medium text-neutral-dark truncate text-sm",title:D.documentName,children:D.documentName}),v&&Z&&p.jsxs("p",{className:"text-xs text-secondary-dark truncate",title:Z.full_name||Z.email,children:[p.jsx(yn,{className:"w-3 h-3 inline mr-1"}),Z.full_name||Z.email]}),v&&!Z&&f&&p.jsxs("p",{className:"text-xs text-neutral-dark truncate",title:`ID: ${D.userId}`,children:[p.jsx(yn,{className:"w-3 h-3 inline mr-1"}),"Usuario (ID: ",D.userId.substring(0,8),"...)"]}),p.jsxs("div",{className:"flex items-center mt-0.5",children:[p.jsx("span",{className:`mr-1.5 ${C(D.status)}`,children:T(D.status)}),p.jsx("p",{className:`text-xs ${C(D.status)}`,children:D.progressMessage})]}),D.status==="error"&&D.error&&p.jsxs("p",{className:"text-xs text-red-500 mt-0.5",children:["Detalle: ",D.error]}),D.status==="completed"&&D.progressMessage.toLowerCase().includes("advertencia")&&p.jsx("p",{className:"text-xs text-amber-600 mt-0.5",children:D.progressMessage})]}),p.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[U&&p.jsx(Se,{onClick:()=>N(D.id),variant:"ghost",size:"sm",className:"text-xs p-1 text-amber-600 hover:text-amber-700 hover:bg-amber-100","aria-label":"Cancelar subida",title:"Cancelar subida",children:p.jsx(ZD,{className:"w-4 h-4"})}),re&&p.jsx(Se,{variant:"ghost",size:"sm",className:"text-xs p-1 text-amber-600","aria-label":"Cancelando subida",title:"Cancelando subida",isLoading:!0,disabled:!0}),B&&p.jsx(Se,{onClick:()=>R(D.id),variant:"ghost",size:"sm",className:"text-xs p-1 text-neutral-dark hover:text-red-500","aria-label":"Limpiar tarea",title:"Limpiar tarea",children:"Limpiar"})]})]})},D.id)})}),p.jsx("div",{className:"mt-6 flex justify-end",children:p.jsx(Se,{onClick:()=>h(!1),children:"Cerrar"})})]})]})},zq=({isOpen:t,onClose:e})=>{const{state:n,toggleShowOnlyClassificationsWithDocuments:r}=i2(),{showOnlyClassificationsWithDocuments:i,isLoaded:a}=n;return t?p.jsx(vn,{isOpen:t,onClose:e,title:"Configuración Visual",size:"md",children:p.jsxs("div",{className:"space-y-6",children:[a?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center p-4 border border-neutral-light rounded-md hover:bg-neutral-lightest transition-colors",children:[p.jsx("input",{id:"showOnlyClassificationsWithDocuments",type:"checkbox",checked:i,onChange:r,className:"h-5 w-5 text-primary border-neutral rounded focus:ring-primary focus:ring-offset-2"}),p.jsxs("label",{htmlFor:"showOnlyClassificationsWithDocuments",className:"ml-3 block text-sm font-medium text-neutral-dark cursor-pointer flex-grow",children:[p.jsx(bj,{className:"w-4 h-4 mr-1.5 inline-block text-neutral"}),"Mostrar solo clasificaciones con documentos"]})]}),p.jsx("p",{className:"text-xs text-neutral-dark px-1",children:"Si esta opción está activada, las clasificaciones y subclasificaciones que no contengan documentos serán ocultadas. Si está desactivada, se mostrarán todas, pero las vacías aparecerán visualmente bloqueadas."})]}):p.jsx("p",{className:"text-neutral-dark text-center py-4",children:"Cargando configuración..."}),p.jsx("div",{className:"mt-8 flex justify-end",children:p.jsx(Se,{onClick:e,variant:"primary",children:"Cerrar"})})]})}):null},Gq=({children:t})=>{const e=Zi(),{state:n,logoutUser:r}=Fn(),{userProfile:i,currentRole:a,error:l,isLoading:u,supabaseUser:f}=n,d=(a==null?void 0:a.name)==="Administrador",h=(a==null?void 0:a.canUploadDocuments)===!0,v=e.pathname.startsWith("/admin"),[x,_]=A.useState(!1),S=A.useRef(null),[E,C]=A.useState(!1),T=[{path:"/",label:"Inicio",icon:p.jsx(vj,{className:"w-5 h-5 mr-2"})}];h&&T.push({path:"/upload",label:"Subir Documentos",icon:p.jsx(vc,{className:"w-5 h-5 mr-2"})}),T.push({path:"/documents",label:"Ver Documentos",icon:p.jsx(gh,{className:"w-5 h-5 mr-2"})},{path:"/classifications",label:"Clasificaciones",icon:p.jsx(hi,{className:"w-5 h-5 mr-2"})});const R=[{path:"/admin/roles",label:"Gestionar Roles",icon:p.jsx(hi,{className:"w-4 h-4 mr-1.5"})},{path:"/admin/users",label:"Gestionar Usuarios",icon:p.jsx(yn,{className:"w-4 h-4 mr-1.5"})},{path:"/admin/documents",label:"Gestionar Documentos",icon:p.jsx(il,{className:"w-4 h-4 mr-1.5"})},{path:"/admin/locations",label:"Gestionar Ubicaciones",icon:p.jsx(mi,{className:"w-4 h-4 mr-1.5"})},{path:"/admin/confidential-classifications",label:"Clasif. Confidenciales",icon:p.jsx(El,{className:"w-4 h-4 mr-1.5"})}],N=async()=>{await r(),_(!1)},O=()=>{_(k=>!k)};A.useEffect(()=>{const k=I=>{if(S.current&&!S.current.contains(I.target)){const j=document.getElementById("admin-nav-dropdown-toggle");if(j&&j.contains(I.target))return;_(!1)}};return x&&document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[x]),A.useEffect(()=>{_(!1)},[e.pathname]);const D=()=>{if(!v||!d)return null;const k=e.pathname.split("/").filter(j=>j),I=[{label:"Administración",path:"/admin"}];if(k.length>1&&k[0]==="admin"){const j=k[1];let U="";switch(j){case"roles":U="Gestionar Roles";break;case"users":U="Gestionar Usuarios";break;case"documents":U="Gestionar Documentos";break;case"locations":U="Gestionar Ubicaciones";break;case"confidential-classifications":U="Clasif. Confidenciales";break;default:U=j.charAt(0).toUpperCase()+j.slice(1)}U&&k.length===2&&I.push({label:U,path:`/admin/${j}`})}return p.jsx("nav",{"aria-label":"breadcrumb",className:"mb-6 text-sm text-neutral-dark bg-white px-4 py-2 rounded-md shadow-sm border border-neutral-light",children:p.jsx("ol",{className:"list-none p-0 inline-flex items-center space-x-1.5",children:I.map((j,U)=>p.jsxs("li",{className:"flex items-center",children:[U<I.length-1?p.jsx(ln,{to:j.path,className:"text-primary hover:text-primary-dark hover:underline",children:j.label}):p.jsx("span",{className:"text-neutral-dark font-medium",children:j.label}),U<I.length-1&&p.jsx(yh,{className:"w-4 h-4 text-neutral"})]},j.path))})})};return p.jsxs("div",{className:"min-h-screen flex flex-col bg-neutral-light",children:[p.jsx("header",{className:"bg-primary text-white shadow-lg sticky top-0 z-40",children:p.jsxs("div",{className:"container mx-auto px-4 py-3",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs(ln,{to:"/",className:"text-2xl font-bold flex items-center hover:opacity-90 transition-opacity",children:[p.jsx("img",{src:"https://bdulngslkzokhyjioizr.supabase.co/storage/v1/object/public/logos//logo.png",alt:"App Logo",className:"h-8 w-auto mr-2.5"}),Cf]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Vq,{}),p.jsx("button",{onClick:()=>C(!0),className:"p-2 rounded-full hover:bg-primary-dark transition-colors","aria-label":"Configuración",title:"Configuración",children:p.jsx(Ej,{className:"w-5 h-5 text-white"})}),i?p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsxs("span",{className:"text-sm text-white hidden sm:block",children:[p.jsx(yn,{className:"w-4 h-4 inline mr-1"}),i.email," (",(a==null?void 0:a.name)||"Invitado",")"]}),p.jsx(Se,{onClick:N,variant:"ghost",size:"sm",className:"text-white hover:bg-primary-dark",disabled:u,children:u?"Saliendo...":"Salir"})]}):f&&p.jsx("p",{className:"text-xs text-white",children:u?"Cargando usuario...":"Perfil de usuario no disponible."})]})]}),p.jsx("nav",{className:"mt-2",children:p.jsxs("ul",{className:"flex space-x-1 sm:space-x-2 justify-center sm:justify-start items-center",children:[T.map(k=>p.jsx("li",{children:p.jsxs(ln,{to:k.path,className:`flex items-center px-2 py-1.5 sm:px-3 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors duration-150 ease-in-out
                      ${e.pathname===k.path?"bg-primary-dark text-white":"text-white hover:bg-primary-dark"}`,children:[k.icon,p.jsx("span",{className:"hidden sm:inline",children:k.label}),p.jsx("span",{className:"sm:hidden",title:k.label,children:k.label.substring(0,3)})]})},k.path)),d&&p.jsxs("li",{className:"relative",children:[p.jsxs("div",{className:"flex items-center",children:[" ",p.jsxs(ln,{to:"/admin",onClick:()=>{x&&_(!1)},className:`flex items-center px-2 py-1.5 sm:pl-3 sm:pr-1.5 sm:py-2 rounded-l-md text-xs sm:text-sm font-medium transition-colors duration-150 ease-in-out
                        ${v?"bg-primary-dark text-white":"text-white hover:bg-primary-dark"}
                      `,"aria-label":"Panel de Administración - Ir al dashboard",children:[p.jsx(WD,{className:"w-5 h-5 mr-0 sm:mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Administración"}),p.jsx("span",{className:"sm:hidden",title:"Admin",children:"Adm"})]}),p.jsx("button",{id:"admin-nav-dropdown-toggle",onClick:O,className:`flex items-center px-1.5 py-1.5 sm:px-1.5 sm:py-2 rounded-r-md text-xs sm:text-sm font-medium transition-colors duration-150 ease-in-out
                        ${v?"bg-primary-dark text-white":"text-white hover:bg-primary-dark"}
                      `,"aria-haspopup":"true","aria-expanded":x,"aria-label":"Opciones de administración",children:p.jsx(rx,{className:`w-5 h-5 transition-transform ${x?"rotate-180":""}`})})]}),x&&p.jsx("div",{ref:S,className:"absolute top-full right-0 mt-2 w-64 bg-white rounded-md shadow-lg py-1 z-50 border border-neutral-light",role:"menu","aria-orientation":"vertical","aria-labelledby":"admin-nav-dropdown-toggle",children:R.map(k=>p.jsxs(ln,{to:k.path,onClick:()=>_(!1),className:`flex items-center px-4 py-2 text-sm text-neutral-dark hover:bg-primary-light hover:text-primary-dark transition-colors
                            ${e.pathname===k.path?"bg-primary-light text-primary-dark font-semibold":""}
                          `,role:"menuitem",children:[k.icon&&J0.cloneElement(k.icon,{className:"w-4 h-4 mr-2.5 text-primary"}),k.label]},k.path))})]})]})})]})}),p.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8",children:[l&&p.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{className:"font-semibold",children:"Error de Autenticación/Rol:"}),p.jsx("p",{children:l})]}),D(),t]}),p.jsx("footer",{className:"bg-neutral-dark text-neutral-light text-center p-4 shadow-inner",children:p.jsxs("p",{children:["© ",new Date().getFullYear()," ",Cf,". Todos los derechos reservados."]})}),p.jsx(zq,{isOpen:E,onClose:()=>C(!1)})]})},Hq=()=>{var C,T;const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(null),l=Vo(),u=Zi(),{state:f,loginUser:d,dispatch:h}=Fn(),{supabaseUser:v,isLoading:x,isInitialLoadComplete:_}=f,S=((T=(C=u.state)==null?void 0:C.from)==null?void 0:T.pathname)||"/";A.useEffect(()=>{_&&v&&l(S,{replace:!0})},[v,S,l,_]);const E=async R=>{if(R.preventDefault(),a(null),!t.trim()){a("El correo electrónico es obligatorio.");return}if(!n.trim()){a("La contraseña es obligatoria.");return}const N=await d(t,n);N&&a(N)};return!_&&x?p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary-light via-neutral-light to-secondary-light p-4",children:p.jsx(Ft,{text:"Iniciando aplicación...",size:"lg"})}):p.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary-light via-neutral-light to-secondary-light p-4",children:[p.jsxs("div",{className:"w-full max-w-md",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("img",{src:"https://bdulngslkzokhyjioizr.supabase.co/storage/v1/object/public/logos//logo_blue.png",alt:"App Logo Blue",className:"h-16 w-auto mx-auto mb-4"}),p.jsx(ln,{to:"/",className:"inline-flex items-center text-3xl sm:text-4xl font-bold text-primary hover:text-primary-dark transition-colors",children:Cf}),p.jsx("p",{className:"text-neutral-dark mt-2",children:"Por favor, inicia sesión para continuar."})]}),p.jsx("div",{className:"bg-white p-8 rounded-xl shadow-2xl",children:p.jsxs("form",{onSubmit:E,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-dark",children:"Correo Electrónico"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(yn,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:R=>e(R.target.value),placeholder:"tu@email.com",className:"appearance-none block w-full px-3 py-2 pl-10 border border-neutral rounded-md shadow-sm placeholder-neutral-DEFAULT focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-dark",children:"Contraseña"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(xc,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:R=>r(R.target.value),placeholder:"••••••••",className:"appearance-none block w-full px-3 py-2 pl-10 border border-neutral rounded-md shadow-sm placeholder-neutral-DEFAULT focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"})]})]}),i&&p.jsx("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded-md text-sm",children:p.jsx("p",{children:i})}),p.jsx("div",{children:p.jsx(Se,{type:"submit",variant:"primary",className:"w-full flex justify-center py-2.5",isLoading:x,disabled:x,children:x?"Procesando...":"Entrar"})})]})})]}),p.jsx("footer",{className:"text-center mt-12 text-neutral-dark text-sm",children:p.jsxs("p",{children:["© ",new Date().getFullYear()," ",Cf,". Todos los derechos reservados."]})})]})},Kq=()=>{const{state:t}=Fn(),{state:e}=ei(),{state:n}=yi();return p.jsxs("div",{className:"space-y-8",children:[p.jsxs("header",{className:"pb-6 border-b border-neutral",children:[p.jsxs("h1",{className:"text-4xl font-bold text-primary flex items-center",children:[p.jsx(WD,{className:"w-10 h-10 mr-3 text-secondary"}),"Panel de Administración"]}),p.jsx("p",{className:"text-lg text-neutral-dark mt-1",children:"Gestiona roles, usuarios y configuraciones del sistema."})]}),p.jsxs("section",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[" ",p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[p.jsx("h2",{className:"text-xl font-semibold text-primary-dark mb-2",children:"Usuarios"}),p.jsx("p",{className:"text-3xl font-bold text-secondary",children:t.allUsers.length}),p.jsx("p",{className:"text-sm text-neutral-dark mt-1",children:"Usuarios registrados en el sistema."})]}),p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[p.jsx("h2",{className:"text-xl font-semibold text-primary-dark mb-2",children:"Roles"}),p.jsx("p",{className:"text-3xl font-bold text-secondary",children:t.allRoles.length}),p.jsx("p",{className:"text-sm text-neutral-dark mt-1",children:"Roles definidos para los usuarios."})]}),p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[p.jsx("h2",{className:"text-xl font-semibold text-primary-dark mb-2",children:"Documentos"}),p.jsx("p",{className:"text-3xl font-bold text-secondary",children:e.documents.length}),p.jsx("p",{className:"text-sm text-neutral-dark mt-1",children:"Documentos totales gestionados."})]}),p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[" ",p.jsx("h2",{className:"text-xl font-semibold text-primary-dark mb-2",children:"Ubicaciones Físicas"}),p.jsx("p",{className:"text-3xl font-bold text-secondary",children:n.locations.length}),p.jsx("p",{className:"text-sm text-neutral-dark mt-1",children:"Ubicaciones físicas registradas."})]})]}),p.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-6",children:[p.jsx(ln,{to:"/admin/roles",className:"block transform hover:scale-105 transition-transform duration-200",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl hover:shadow-2xl h-full flex flex-col items-center justify-center text-center",children:[p.jsx(hi,{className:"w-16 h-16 text-primary mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-neutral-dark mb-2",children:"Gestionar Roles"}),p.jsx("p",{className:"text-neutral-dark text-sm",children:"Crear, editar y asignar permisos a los roles de usuario."})]})}),p.jsx(ln,{to:"/admin/users",className:"block transform hover:scale-105 transition-transform duration-200",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl hover:shadow-2xl h-full flex flex-col items-center justify-center text-center",children:[p.jsx(yn,{className:"w-16 h-16 text-primary mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-neutral-dark mb-2",children:"Gestionar Usuarios"}),p.jsx("p",{className:"text-neutral-dark text-sm",children:"Asignar roles a los usuarios y administrar sus cuentas."})]})}),p.jsx(ln,{to:"/admin/documents",className:"block transform hover:scale-105 transition-transform duration-200",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl hover:shadow-2xl h-full flex flex-col items-center justify-center text-center",children:[p.jsx(il,{className:"w-16 h-16 text-primary mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-neutral-dark mb-2",children:"Gestionar Documentos"}),p.jsx("p",{className:"text-neutral-dark text-sm",children:"Modificar clasificaciones y otros metadatos de documentos."})]})}),p.jsx(ln,{to:"/admin/locations",className:"block transform hover:scale-105 transition-transform duration-200",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl hover:shadow-2xl h-full flex flex-col items-center justify-center text-center",children:[p.jsx(mi,{className:"w-16 h-16 text-primary mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-neutral-dark mb-2",children:"Gestionar Ubicaciones"}),p.jsx("p",{className:"text-neutral-dark text-sm",children:"Administrar las ubicaciones físicas de los documentos."})]})}),p.jsx(ln,{to:"/admin/confidential-classifications",className:"block transform hover:scale-105 transition-transform duration-200",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl hover:shadow-2xl h-full flex flex-col items-center justify-center text-center",children:[p.jsx(El,{className:"w-16 h-16 text-primary mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-neutral-dark mb-2",children:"Clasif. Confidenciales"}),p.jsx("p",{className:"text-neutral-dark text-sm",children:"Crear y gestionar clasificaciones para documentos sensibles."})]})})]})]})},Yq=({selectedCodes:t,onChange:e,disabled:n=!1})=>{const{state:r,getSubcategories:i,getAllCodes:a}=vr(),{mainCategories:l,isLoading:u,error:f,isLoaded:d}=r,[h,v]=A.useState({}),x=A.useMemo(()=>d?a():[],[d,a]),_=N=>{v(O=>({...O,[N]:!O[N]}))},S=()=>{e(x)},E=()=>{e([])},C=(N,O)=>{const D=i(N.code),k=[N.code,...D.map(j=>j.code)];let I=[...t];O?k.forEach(j=>{I.includes(j)||I.push(j)}):I=I.filter(j=>!k.includes(j)),e(I)},T=(N,O)=>{var I;let D=[...t];O?D.includes(N)||D.push(N):D=D.filter(j=>j!==N);const k=(I=r.allClassifications.find(j=>j.code===N))==null?void 0:I.parent_code;if(k){const j=r.allClassifications.find(U=>U.code===k);if(j){const U=i(k);[j.code,...U.map(Z=>Z.code)];const re=U.filter(Z=>D.includes(Z.code)).length,B=D.includes(j.code);O&&re===U.length&&!B?D.includes(j.code)||D.push(j.code):!O&&B&&(D=D.filter(Z=>Z!==j.code))}}e(D)},R=N=>{if(!d)return"none";const O=i(N.code),D=[N.code,...O.map(I=>I.code)],k=D.filter(I=>t.includes(I)).length;return k===0?"none":k===D.length&&D.length>0?"all":k>0&&k<D.length?"some":D.length===0&&t.includes(N.code)?"all":"none"};return u?p.jsx(Ft,{text:"Cargando clasificaciones...",size:"sm"}):f?p.jsxs("p",{className:"text-red-500 text-xs",children:["Error: ",f]}):!d||l.length===0?p.jsx("p",{className:"text-neutral-dark text-xs",children:"No hay clasificaciones disponibles."}):p.jsxs("div",{className:"space-y-3",children:[!n&&p.jsxs("div",{className:"flex space-x-2 mb-4",children:[p.jsx(Se,{onClick:S,size:"sm",variant:"secondary",type:"button",disabled:x.length===0,children:"Seleccionar Todas"}),p.jsx(Se,{onClick:E,size:"sm",variant:"ghost",type:"button",className:"text-neutral-dark",children:"Deseleccionar Todas"})]}),p.jsx("div",{className:"border border-neutral-light rounded-md max-h-96 overflow-y-auto p-1",children:l.map(N=>{const O=i(N.code),D=h[N.code]||!1,k=R(N);return p.jsxs("div",{className:"py-1",children:[p.jsxs("div",{className:`flex items-center p-2 rounded ${n?"bg-neutral-lightest":"hover:bg-primary-light cursor-pointer"}`,onClick:()=>!n&&_(N.code),children:[p.jsx("input",{type:"checkbox",id:`main-${N.code}`,checked:k==="all",ref:I=>{I&&(I.indeterminate=k==="some")},onChange:I=>C(N,I.target.checked),onClick:I=>I.stopPropagation(),disabled:n,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary disabled:opacity-50"}),p.jsxs("label",{htmlFor:`main-${N.code}`,className:`ml-2 font-medium text-neutral-dark flex-grow ${n?"cursor-default":"cursor-pointer"}`,children:[N.code," - ",N.name]}),O.length>0&&(D?p.jsx(rx,{className:"w-5 h-5 text-neutral"}):p.jsx(yh,{className:"w-5 h-5 text-neutral"}))]}),D&&O.length>0&&p.jsx("div",{className:"ml-6 mt-1 pl-4 border-l border-neutral-light space-y-1",children:O.map(I=>p.jsxs("div",{className:"flex items-center py-1",children:[p.jsx("input",{type:"checkbox",id:`sub-${I.code}`,checked:t.includes(I.code),onChange:j=>T(I.code,j.target.checked),disabled:n,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary disabled:opacity-50"}),p.jsxs("label",{htmlFor:`sub-${I.code}`,className:`ml-2 text-sm text-neutral-dark ${n?"cursor-default":"cursor-pointer"}`,children:[I.code," - ",I.name]})]},I.code))})]},N.code)})})]})},Mh=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmText:a="Confirmar",cancelText:l="Cancelar",confirmButtonVariant:u="primary"})=>t?p.jsxs(vn,{isOpen:t,onClose:e,title:r,size:"sm",children:[p.jsx("div",{className:"text-sm text-neutral-dark mb-6",children:i}),p.jsxs("div",{className:"flex justify-end space-x-3",children:[p.jsx(Se,{variant:"ghost",onClick:e,className:"text-neutral-dark",children:l}),p.jsx(Se,{variant:u,onClick:n,children:a})]})]}):null,Wq=({isOpen:t,onClose:e,onSubmit:n,initialRoleData:r,isLoading:i=!1})=>{const{state:a}=Fn(),l=a.error,{getAllCodes:u}=vr(),[f,d]=A.useState(""),[h,v]=A.useState(""),[x,_]=A.useState([]),[S,E]=A.useState(!0),[C,T]=A.useState(!1),[R,N]=A.useState(!1),[O,D]=A.useState(!1),[k,I]=A.useState(!1),[j,U]=A.useState(!1),[re,B]=A.useState(!1),[Z,me]=A.useState(!1),[H,ve]=A.useState(!1),z=A.useRef(null),[K,ye]=A.useState(null),[Ee,L]=A.useState(!1),Y=A.useRef(null),[te,ie]=A.useState(!1),we=(r==null?void 0:r.id)===Gt||(r==null?void 0:r.id)===It,ge=(r==null?void 0:r.id)===Gt,ue=(r==null?void 0:r.id)===It;A.useEffect(()=>{if(t){let Q;r?(Q={name:r.name,description:r.description||"",allowedDeweyCodes:ge?u():ue?[]:r.allowedDeweyCodes||[],canUploadDocuments:ge||!ue&&r.canUploadDocuments,canDeleteDocuments:ge||!ue&&r.canDeleteDocuments,canEditDocuments:ge||!ue&&r.canEditDocuments,canEditDocName:ge||!ue&&r.canEditDocName,canEditDocKeywords:ge||!ue&&r.canEditDocKeywords,canEditDocClassification:ge||!ue&&r.canEditDocClassification,canEditDocLocation:ge||!ue&&r.canEditDocLocation,canSeeUploader:ge||!ue&&r.canSeeUploader},d(Q.name),v(Q.description),_(Q.allowedDeweyCodes),E(Q.canUploadDocuments),T(Q.canDeleteDocuments),N(Q.canSeeUploader),D(Q.canEditDocuments),I(Q.canEditDocName),U(Q.canEditDocKeywords),B(Q.canEditDocClassification),me(Q.canEditDocLocation)):(Q={name:"",description:"",allowedDeweyCodes:[],canUploadDocuments:!0,canDeleteDocuments:!1,canEditDocuments:!1,canEditDocName:!1,canEditDocKeywords:!1,canEditDocClassification:!1,canEditDocLocation:!1,canSeeUploader:!1},d(Q.name),v(Q.description),_(Q.allowedDeweyCodes),E(Q.canUploadDocuments),T(Q.canDeleteDocuments),N(Q.canSeeUploader),D(Q.canEditDocuments),I(Q.canEditDocName),U(Q.canEditDocKeywords),B(Q.canEditDocClassification),me(Q.canEditDocLocation)),Y.current=Q,L(!1),ye(null),ie(!1)}},[r,t,ge,ue,u]),A.useEffect(()=>{if(ge||ue){ve(!1);return}const Q=[k,j,re,Z],be=Q.filter(Boolean).length,Me=Q.length;be===0?(O&&Me>0&&D(!1),ve(!1)):be===Me?(D(!0),ve(!1)):(D(!0),ve(!0))},[k,j,re,Z,ge,ue,O]),A.useEffect(()=>{z.current&&(z.current.indeterminate=H)},[H]),A.useEffect(()=>{if(!t||!Y.current){L(!1);return}const Q=Y.current,be=f!==Q.name,Me=h!==Q.description,ae=JSON.stringify(x.sort())!==JSON.stringify(Q.allowedDeweyCodes.sort()),Le=S!==Q.canUploadDocuments,Ye=C!==Q.canDeleteDocuments,Ae=R!==Q.canSeeUploader,lt=O!==Q.canEditDocuments,ct=k!==Q.canEditDocName,Be=j!==Q.canEditDocKeywords,qt=re!==Q.canEditDocClassification,Pn=Z!==Q.canEditDocLocation;L(be||Me||ae||Le||Ye||lt||ct||Be||qt||Pn||Ae)},[f,h,x,S,C,R,O,k,j,re,Z,t]);const se=Q=>{if(Q.preventDefault(),!f.trim()){ye("El nombre del rol es obligatorio.");return}ye(null);const be=(Le,Ye,Ae)=>ge?Ye:ue?Ae:Le,Me=be(O,!0,!1),ae=k||j||re||Z;n({id:r==null?void 0:r.id,name:f,description:h,allowedDeweyCodes:ge?u():ue?[]:x,canUploadDocuments:be(S,!0,!1),canDeleteDocuments:be(C,!0,!1),canSeeUploader:be(R,!0,!1),canEditDocuments:ge?!0:ue?!1:Me&&ae,canEditDocName:be(Me&&k,!0,!1),canEditDocKeywords:be(Me&&j,!0,!1),canEditDocClassification:be(Me&&re,!0,!1),canEditDocLocation:be(Me&&Z,!0,!1)})},pe=()=>{Ee&&!i&&!a.isLoading?ie(!0):e()},V=()=>{ie(!1),e()},_e=()=>{ie(!1)},W=Q=>{const be=Q.target.checked;D(be),ve(!1),I(be),U(be),B(be),me(be)},F=Q=>be=>{Q(be.target.checked)},xe=K||l;return p.jsxs(p.Fragment,{children:[p.jsx(vn,{isOpen:t,onClose:pe,title:r?`Editar Rol: ${r.name}`:"Crear Nuevo Rol",size:"lg",children:p.jsxs("form",{onSubmit:se,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"roleName",className:"block text-sm font-medium text-neutral-dark",children:["Nombre del Rol ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"roleName",value:f,onChange:Q=>d(Q.target.value),disabled:we||i||a.isLoading,className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light disabled:cursor-not-allowed",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"roleDescription",className:"block text-sm font-medium text-neutral-dark",children:"Descripción (opcional)"}),p.jsx("textarea",{id:"roleDescription",value:h,onChange:Q=>v(Q.target.value),rows:3,disabled:we||i||a.isLoading,className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light disabled:cursor-not-allowed"})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"block text-sm font-medium text-neutral-dark",children:"Permisos Básicos"}),p.jsxs("div",{className:"flex items-center p-3 border border-neutral-light rounded-md bg-neutral-lightest",children:[p.jsx("input",{id:"canUploadDocuments",type:"checkbox",checked:S,onChange:Q=>E(Q.target.checked),disabled:ge||ue||i||a.isLoading,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed"}),p.jsxs("label",{htmlFor:"canUploadDocuments",className:"ml-2 text-sm text-neutral-dark flex items-center",children:[p.jsx(vc,{className:"w-4 h-4 mr-1.5 text-gray-500"}),"Permitir Subir Documentos"]})]}),ge&&p.jsx("p",{className:"text-xs text-neutral-dark pl-1",children:"El rol Administrador siempre puede subir documentos."}),ue&&p.jsx("p",{className:"text-xs text-neutral-dark pl-1",children:"El rol Invitado nunca puede subir documentos."}),p.jsxs("div",{className:"flex items-center p-3 border border-neutral-light rounded-md bg-neutral-lightest",children:[p.jsx("input",{id:"canDeleteDocuments",type:"checkbox",checked:C,onChange:Q=>T(Q.target.checked),disabled:ge||ue||i||a.isLoading,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed"}),p.jsxs("label",{htmlFor:"canDeleteDocuments",className:"ml-2 text-sm text-neutral-dark flex items-center",children:[p.jsx(zi,{className:"w-4 h-4 mr-1.5 text-gray-500"}),"Permitir Eliminar Documentos (Propios)"]})]}),ge&&p.jsx("p",{className:"text-xs text-neutral-dark pl-1",children:"El rol Administrador siempre puede eliminar cualquier documento."}),ue&&p.jsx("p",{className:"text-xs text-neutral-dark pl-1",children:"El rol Invitado nunca puede eliminar documentos."}),p.jsxs("div",{className:"flex items-center p-3 border border-neutral-light rounded-md bg-neutral-lightest",children:[p.jsx("input",{id:"canSeeUploader",type:"checkbox",checked:R,onChange:Q=>N(Q.target.checked),disabled:ge||ue||i||a.isLoading,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed"}),p.jsxs("label",{htmlFor:"canSeeUploader",className:"ml-2 text-sm text-neutral-dark flex items-center",children:[p.jsx(yn,{className:"w-4 h-4 mr-1.5 text-gray-500"}),"Permitir Ver Quién Subió el Documento"]})]}),ge&&p.jsx("p",{className:"text-xs text-neutral-dark pl-1",children:"El rol Administrador siempre puede ver quién subió el documento."}),ue&&p.jsx("p",{className:"text-xs text-neutral-dark pl-1",children:"El rol Invitado nunca puede ver esta información."})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"block text-sm font-medium text-neutral-dark",children:"Permisos de Edición de Documentos (Propios)"}),p.jsxs("div",{className:"flex items-center p-3 border border-neutral-light rounded-md bg-neutral-lightest",children:[p.jsx("input",{id:"canEditDocuments",type:"checkbox",ref:z,checked:O,onChange:W,disabled:ge||ue||i||a.isLoading,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed"}),p.jsxs("label",{htmlFor:"canEditDocuments",className:"ml-2 text-sm text-neutral-dark flex items-center",children:[p.jsx(qa,{className:"w-4 h-4 mr-1.5 text-gray-500"}),"Permitir Editar Documentos (General)"]})]}),ge&&p.jsx("p",{className:"text-xs text-neutral-dark pl-1",children:"El Administrador siempre puede editar cualquier documento."}),ue&&p.jsx("p",{className:"text-xs text-neutral-dark pl-1",children:"El Invitado nunca puede editar documentos."}),O&&!ge&&!ue&&p.jsxs("div",{className:"pl-6 space-y-2 border-l-2 border-primary-light ml-2",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{id:"canEditDocName",type:"checkbox",checked:k,onChange:F(I),disabled:i||a.isLoading,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary"}),p.jsx("label",{htmlFor:"canEditDocName",className:"ml-2 text-sm text-neutral-dark",children:"Editar Nombre del Documento"})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{id:"canEditDocKeywords",type:"checkbox",checked:j,onChange:F(U),disabled:i||a.isLoading,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary"}),p.jsx("label",{htmlFor:"canEditDocKeywords",className:"ml-2 text-sm text-neutral-dark",children:"Editar Palabras Clave"})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{id:"canEditDocClassification",type:"checkbox",checked:re,onChange:F(B),disabled:i||a.isLoading,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary"}),p.jsx("label",{htmlFor:"canEditDocClassification",className:"ml-2 text-sm text-neutral-dark",children:"Editar Clasificación Dewey"})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{id:"canEditDocLocation",type:"checkbox",checked:Z,onChange:F(me),disabled:i||a.isLoading,className:"h-4 w-4 text-primary border-neutral rounded focus:ring-primary"}),p.jsx("label",{htmlFor:"canEditDocLocation",className:"ml-2 text-sm text-neutral-dark",children:"Editar Ubicación Física"})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-neutral-dark mb-2",children:"Clasificaciones Dewey Permitidas (para visualización y carga)"}),ge&&p.jsx("p",{className:"text-xs text-neutral-dark bg-primary-light p-2 rounded-md mb-2",children:"El rol Administrador siempre tiene acceso a todas las clasificaciones para visualización y carga."}),ue&&p.jsx("p",{className:"text-xs text-neutral-dark bg-neutral-light p-2 rounded-md mb-2",children:"El rol Invitado no tiene acceso a clasificaciones."}),p.jsx(Yq,{selectedCodes:x,onChange:_,disabled:ge||ue||i||a.isLoading})]}),xe&&p.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md",children:xe}),p.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[p.jsx(Se,{type:"button",variant:"ghost",onClick:pe,className:"text-neutral-dark",disabled:i||a.isLoading,children:"Cancelar"}),p.jsx(Se,{type:"submit",variant:"primary",isLoading:i||a.isLoading,disabled:i||a.isLoading||(r?!Ee&&!we:!f.trim())||we&&!ge,children:r?"Guardar Cambios":"Crear Rol"})]})]})}),p.jsx(Mh,{isOpen:te,onClose:_e,onConfirm:V,title:"Confirmar Salida",message:"¿Está seguro que quiere salir sin guardar los cambios? Los cambios no guardados se perderán.",confirmText:"Salir sin Guardar",cancelText:"Cancelar",confirmButtonVariant:"danger"})]})},Xq=({isOpen:t,onClose:e,role:n,allUsers:r})=>{if(!t||!n)return null;const i=r.filter(a=>a.role_id===n.id);return p.jsxs(vn,{isOpen:t,onClose:e,title:`Usuarios con el Rol: ${n.name}`,size:"md",children:[i.length===0?p.jsx("p",{className:"text-neutral-dark text-center py-4",children:"No hay usuarios asignados a este rol."}):p.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:i.map(a=>p.jsxs("div",{className:"p-3 border border-neutral-light rounded-md flex items-center space-x-3 shadow-sm bg-neutral-lightest",children:[p.jsx(yn,{className:"w-6 h-6 text-primary flex-shrink-0"}),p.jsxs("div",{className:"flex-grow min-w-0",children:[p.jsx("p",{className:"text-sm font-medium text-neutral-dark truncate",title:a.full_name||a.email,children:a.full_name||a.email}),a.full_name&&p.jsx("p",{className:"text-xs text-neutral truncate",title:a.email,children:a.email})]})]},a.id))}),p.jsx("div",{className:"mt-6 flex justify-end",children:p.jsx(Se,{onClick:e,variant:"primary",children:"Cerrar"})})]})},Jq=()=>{const{state:t,dispatch:e,createRoleInDb:n,updateRoleInDb:r,deleteRoleInDb:i}=Fn(),{allRoles:a,allUsers:l,usersSuccessfullyLoadedFromDB:u}=t,[f,d]=A.useState(!1),[h,v]=A.useState(null),[x,_]=A.useState(null),[S,E]=A.useState(!1),[C,T]=A.useState(null),R=A.useMemo(()=>{if(!u)return{};const B={};return a.forEach(Z=>{B[Z.id]=l.filter(me=>me.role_id===Z.id).length}),B},[a,l,u]),N=()=>{v(null),d(!0)},O=B=>{v(B),d(!0)},D=()=>{d(!1),v(null),t.error&&e({type:"SET_ERROR",payload:null})},k=async B=>{B.id?await r(B):await n(B),t.error||D()},I=async B=>{if([Gt,ol,It].includes(B)){e({type:"SET_ERROR",payload:"No se pueden eliminar los roles por defecto."}),_(null);return}await i(B),_(null)},j=B=>[Gt,ol,It].includes(B),U=B=>{T(B),E(!0)},re=()=>{E(!1),T(null)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs(ln,{to:"/admin",className:"text-sm text-primary hover:text-primary-dark inline-flex items-center group mb-2",children:[p.jsx(Sl,{className:"w-4 h-4 mr-1.5 transition-transform group-hover:-translate-x-0.5"}),"Volver al Panel de Administración"]}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[p.jsx("h1",{className:"text-3xl font-semibold text-primary mb-4 sm:mb-0",children:"Gestionar Roles"}),p.jsx(Se,{onClick:N,leftIcon:p.jsx(Eh,{className:"w-5 h-5"}),variant:"primary",children:"Crear Nuevo Rol"})]}),t.error&&p.jsx("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:p.jsx("p",{children:t.error})}),a.length===0&&!t.isLoading?p.jsx("p",{className:"text-neutral-dark",children:"No hay roles definidos. Comienza creando uno."}):p.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:p.jsx("ul",{className:"divide-y divide-neutral-light",children:a.sort((B,Z)=>B.name.localeCompare(Z.name)).map(B=>{const Z=R[B.id]||0;return p.jsx("li",{className:"p-4 hover:bg-neutral-lightest transition-colors duration-150",children:p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[p.jsxs("div",{className:"flex-grow mb-3 sm:mb-0",children:[p.jsxs("h2",{className:"text-lg font-semibold text-primary-dark flex items-center",children:[B.name,j(B.id)&&p.jsxs("span",{className:"inline-flex items-center ml-2 text-amber-500",title:"Rol por defecto (protegido)",children:[p.jsx(YD,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),p.jsx("span",{className:"text-xs font-normal",children:"(Protegido)"})]})]}),p.jsx("p",{className:"text-sm text-neutral-dark mt-1",children:B.description||"Sin descripción."}),p.jsxs("div",{className:"text-xs text-neutral mt-1 space-y-0.5",children:[p.jsxs("p",{className:"flex items-center",children:[p.jsx(hi,{className:"w-3 h-3 mr-1.5 flex-shrink-0"}),B.id===Gt?"Todas las clasificaciones":B.id===It?"Ninguna clasificación":`${B.allowedDeweyCodes.length} clasificaciones permitidas`]}),u&&p.jsxs("p",{className:"flex items-center",children:[p.jsx(yn,{className:"w-3 h-3 mr-1.5 flex-shrink-0"}),"Usuarios Asignados: ",p.jsx("span",{className:"font-medium ml-1",children:Z})]})]})]}),p.jsxs("div",{className:"flex space-x-2 flex-shrink-0 self-start sm:self-center",children:[p.jsx(Se,{onClick:()=>U(B),variant:"ghost",size:"sm",leftIcon:p.jsx(ix,{className:"w-4 h-4"}),"aria-label":`Ver usuarios con el rol ${B.name}`,title:"Ver Usuarios Asignados",disabled:t.isLoading,className:"text-secondary hover:bg-secondary-light",children:"Ver Usuarios"}),p.jsx(Se,{onClick:()=>O(B),variant:"ghost",size:"sm",leftIcon:p.jsx(qa,{className:"w-4 h-4"}),"aria-label":`Editar rol ${B.name}`,disabled:t.isLoading,children:"Editar"}),!j(B.id)&&p.jsx(Se,{onClick:()=>_(B),variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-100",leftIcon:p.jsx(zi,{className:"w-4 h-4"}),"aria-label":`Eliminar rol ${B.name}`,isLoading:t.isLoading&&(x==null?void 0:x.id)===B.id,disabled:t.isLoading,children:"Eliminar"})]})]})},B.id)})})}),p.jsx(Wq,{isOpen:f,onClose:D,onSubmit:k,initialRoleData:h,isLoading:t.isLoading&&f}),p.jsx(Xq,{isOpen:S,onClose:re,role:C,allUsers:l}),x&&p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full",children:[p.jsx("h3",{className:"text-lg font-semibold text-neutral-dark",children:"Confirmar Eliminación"}),p.jsxs("p",{className:"text-sm text-neutral-dark mt-2",children:['¿Estás seguro de que quieres eliminar el rol "',p.jsx("strong",{children:x.name}),'"? Los usuarios asignados a este rol serán cambiados al rol de Invitado. Esta acción no se puede deshacer.']}),p.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[p.jsx(Se,{variant:"ghost",onClick:()=>_(null),className:"text-neutral-dark",disabled:t.isLoading,children:"Cancelar"}),p.jsx(Se,{variant:"danger",onClick:()=>I(x.id),isLoading:t.isLoading,children:"Eliminar Rol"})]})]})})]})},Zq=({isOpen:t,onClose:e,onSubmit:n,initialUserData:r,roles:i,existingUserEmails:a,isLoading:l=!1})=>{const{state:u}=Fn(),f=u.error,d=u.isLoading,[h,v]=A.useState(""),[x,_]=A.useState(""),[S,E]=A.useState(""),[C,T]=A.useState(null),[R,N]=A.useState(null),[O,D]=A.useState(!1),[k,I]=A.useState(!1),j=A.useRef(null),[U,re]=A.useState(!1),B=!!r,Z=B&&(r==null?void 0:r.email.toLowerCase())===wC.toLowerCase();A.useEffect(()=>{if(t){N(null),D(!1),re(!1);let L;if(r)L={email:r.email,fullName:r.full_name||"",cargo:r.cargo||"",roleId:r.role_id},v(L.email),_(L.fullName),E(L.cargo),T(L.roleId);else{let Y=null;const te=i.find(ie=>ie.id===ol);if(te)Y=te.id;else{const ie=i.find(we=>we.id!==Gt&&we.id!==It);ie?Y=ie.id:i.length>0&&i.find(we=>we.id!==Gt)?Y=i.find(we=>we.id!==Gt).id:i.length>0&&(Y=i[0].id)}L={email:"",fullName:"",cargo:"",roleId:Y},v(L.email),_(L.fullName),E(L.cargo),T(L.roleId)}j.current=L,I(!1)}},[r,t,i]),A.useEffect(()=>{if(!t||!j.current){I(!1);return}const L=j.current;let Y=!1;B?Y=x!==L.fullName||S!==L.cargo||C!==L.roleId:Y=h!==L.email||x!==L.fullName||S!==L.cargo||C!==L.roleId,I(Y)},[h,x,S,C,t,B]);const me=async L=>{if(L.preventDefault(),!(O||l||d)){if(N(null),!B&&!h.trim()){N("El correo electrónico es obligatorio.");return}if(!x.trim()){N("El nombre completo es obligatorio.");return}if(!B&&a.includes(h.trim().toLowerCase())&&h.trim().toLowerCase()!==(r==null?void 0:r.email.toLowerCase())){N("Un usuario con este correo electrónico ya existe.");return}if(C===null){N("Debe seleccionar un rol.");return}D(!0);try{await n({email:h.trim(),full_name:x.trim()||null,cargo:S.trim()||null,roleId:C},r==null?void 0:r.id)}finally{D(!1)}}},H=()=>{k&&!l&&!O&&!d?re(!0):e()},ve=()=>{re(!1),e()},z=()=>{re(!1)},K=i,ye=R||f,Ee=l||d||O;return p.jsxs(p.Fragment,{children:[p.jsx(vn,{isOpen:t,onClose:H,title:r?`Editar Usuario: ${r.email}`:"Añadir Nuevo Usuario",size:"md",children:p.jsxs("form",{onSubmit:me,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"userEmail",className:"block text-sm font-medium text-neutral-dark",children:["Correo Electrónico ",p.jsx("span",{className:B?"":"text-red-500",children:B?"":"*"})]}),p.jsx("input",{type:"email",id:"userEmail",value:h,onChange:L=>v(L.target.value),disabled:B||Ee,className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light disabled:cursor-not-allowed",required:!B}),B&&p.jsx("p",{className:"text-xs text-neutral mt-1",children:"El correo electrónico no se puede cambiar."})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"userFullName",className:"block text-sm font-medium text-neutral-dark",children:["Nombre Completo ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"userFullName",value:x,onChange:L=>_(L.target.value),disabled:Ee,className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"userCargo",className:"block text-sm font-medium text-neutral-dark",children:"Cargo (Opcional)"}),p.jsx("input",{type:"text",id:"userCargo",value:S,onChange:L=>E(L.target.value),disabled:Ee,placeholder:"Ej: Analista, Supervisor",className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light"})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"userRole",className:"block text-sm font-medium text-neutral-dark",children:["Rol ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsxs("select",{id:"userRole",value:C||"",onChange:L=>T(L.target.value||null),disabled:Z||Ee,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md disabled:bg-neutral-light disabled:cursor-not-allowed",required:!0,children:[p.jsx("option",{value:"",disabled:C!==null,children:"Selecciona un rol..."}),K.map(L=>p.jsx("option",{value:L.id,children:L.name},L.id))]}),Z&&p.jsxs("p",{className:"text-xs text-amber-600 mt-1 bg-amber-50 p-2 rounded-md",children:["El rol del administrador por defecto (",wC,") no se puede cambiar para evitar bloqueos del sistema."]}),p.jsx("p",{className:"text-xs text-neutral mt-1",children:"Para crear un nuevo usuario, se generará una contraseña por defecto que podrá cambiar después."})]}),ye&&p.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded-md",children:ye}),p.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[p.jsx(Se,{type:"button",variant:"ghost",onClick:H,className:"text-neutral-dark",disabled:Ee,children:"Cancelar"}),p.jsx(Se,{type:"submit",variant:"primary",isLoading:Ee,disabled:Ee||(B?!k:!h.trim()||!x.trim()||!C),children:B?"Guardar Cambios":"Añadir Usuario"})]})]})}),p.jsx(Mh,{isOpen:U,onClose:z,onConfirm:ve,title:"Confirmar Salida",message:"¿Está seguro que quiere salir sin guardar los cambios? Los cambios no guardados se perderán.",confirmText:"Salir sin Guardar",cancelText:"Cancelar",confirmButtonVariant:"danger"})]})},Qq=({isOpen:t,onClose:e,onSubmit:n,userEmail:r,isLoading:i})=>{const[a,l]=A.useState(""),[u,f]=A.useState(null),d=async h=>{if(h.preventDefault(),f(null),a.length<6){f("La contraseña debe tener al menos 6 caracteres.");return}await n(a)};return A.useEffect(()=>{t&&(l(""),f(null))},[t]),p.jsx(vn,{isOpen:t,onClose:e,title:`Cambiar Contraseña para ${r}`,size:"sm",children:p.jsxs("form",{onSubmit:d,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-neutral-dark",children:"Nueva Contraseña"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(xc,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{id:"newPassword",name:"newPassword",type:"password",value:a,onChange:h=>l(h.target.value),placeholder:"••••••••",disabled:i,className:"appearance-none block w-full px-3 py-2 pl-10 border border-neutral rounded-md shadow-sm placeholder-neutral-DEFAULT focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",required:!0})]})]}),u&&p.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded-md",children:u}),p.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[p.jsx(Se,{type:"button",variant:"ghost",onClick:e,className:"text-neutral-dark",disabled:i,children:"Cancelar"}),p.jsx(Se,{type:"submit",variant:"primary",isLoading:i,disabled:i||a.length<6,children:"Confirmar"})]})]})})},nT="https://bdulngslkzokhyjioizr.supabase.co/functions/v1/manage-users",e7=()=>{const{state:t,dispatch:e,updateUserRoleInDb:n,addUserProfileInDb:r,updateUserProfileDetailsInDb:i}=Fn(),{allUsers:a,allRoles:l,isLoading:u,error:f,userProfile:d,isCurrentUserMasterAdmin:h}=t,[v,x]=A.useState(!1),[_,S]=A.useState(null),[E,C]=A.useState(!1),[T,R]=A.useState(null),[N,O]=A.useState(!1),[D,k]=A.useState(null),[I,j]=A.useState(!1),[U,re]=A.useState(null),[B,Z]=A.useState(null),me=()=>{re(null),Z(null),f&&e({type:"CLEAR_MESSAGES"})},H=async(V,_e)=>{me(),j(!0);try{const W=await fetch(nT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"updatePassword",userId:V,password:_e})}),F=await W.json();if(!W.ok)throw new Error(F.error||"Failed to update password.");Z(F.message||"Contraseña actualizada exitosamente."),O(!1),k(null)}catch(W){const F=W instanceof Error?W.message:"Un error desconocido ocurrió.";re(`Error al cambiar contraseña: ${F}`)}finally{j(!1)}},ve=async V=>{me(),j(!0);try{const _e=await fetch(nT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"deleteUser",userId:V})}),W=await _e.json();if(!_e.ok)throw new Error(W.error||"Failed to delete user.");e({type:"DELETE_USER_PROFILE_SUCCESS",payload:V}),Z(W.message||`Usuario ${V} eliminado.`),C(!1),R(null)}catch(_e){const W=_e instanceof Error?_e.message:"Un error desconocido ocurrió.";re(`Error al eliminar usuario: ${W}`)}finally{j(!1)}},z=()=>{S(null),me(),x(!0)},K=V=>{S(V),me(),x(!0)},ye=()=>{x(!1),S(null)},Ee=async(V,_e)=>{var F;let W=!1;if(_e){const xe=a.find(Le=>Le.id===_e);if(!xe){e({type:"SET_ERROR",payload:"Usuario no encontrado para editar."});return}let Q=!1,be=!1;const Me={};let ae=!1;if(V.full_name!==void 0&&V.full_name!==xe.full_name&&(Me.fullName=V.full_name,ae=!0),V.cargo!==void 0&&V.cargo!==xe.cargo&&(Me.cargo=V.cargo,ae=!0),ae)if(await i(_e,Me))Q=!0;else return;if(V.roleId!==null&&V.roleId!==xe.role_id)if(await n(_e,V.roleId))be=!0;else return;Q||be?W=!0:f||e({type:"SET_SUCCESS_MESSAGE",payload:"No se detectaron cambios para guardar."})}else{if(!V.email.trim()||!((F=V.full_name)!=null&&F.trim())||V.roleId===null){e({type:"SET_ERROR",payload:"Email, nombre completo y rol son obligatorios."});return}await r({email:V.email,full_name:V.full_name,roleId:V.roleId})&&(W=!0)}W&&(ye(),Z("Usuario guardado exitosamente."))},L=V=>{R(V),me(),C(!0)},Y=async()=>{T&&await ve(T.id)},te=()=>{C(!1),R(null)},ie=V=>{k(V),me(),O(!0)},we=()=>{O(!1),k(null)},ge=async V=>{D&&await H(D.id,V)},ue=V=>{if(!V)return"Sin rol asignado";const _e=l.find(W=>W.id===V);return _e?_e.name:"Rol desconocido"},se=I||u,pe=U||f;return p.jsxs("div",{className:"space-y-6",children:[p.jsxs(ln,{to:"/admin",className:"text-sm text-primary hover:text-primary-dark inline-flex items-center group mb-2",children:[p.jsx(Sl,{className:"w-4 h-4 mr-1.5 transition-transform group-hover:-translate-x-0.5"}),"Volver al Panel de Administración"]}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[p.jsx("h1",{className:"text-3xl font-semibold text-primary mb-4 sm:mb-0",children:"Gestionar Usuarios"}),p.jsx(Se,{onClick:z,leftIcon:p.jsx(Eh,{className:"w-5 h-5"}),variant:"primary",children:"Añadir Nuevo Usuario"})]}),pe&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{children:pe}),p.jsx(Se,{onClick:me,size:"sm",variant:"ghost",className:"mt-1 text-red-600 hover:bg-red-200",children:"Descartar"})]}),(B||t.successMessage)&&p.jsxs("div",{className:"my-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{children:B||t.successMessage}),p.jsx(Se,{onClick:me,size:"sm",variant:"ghost",className:"mt-1 text-green-600 hover:bg-green-200",children:"Descartar"})]}),a.length===0&&!u?p.jsx("p",{className:"text-neutral-dark",children:"No hay usuarios registrados. Comienza añadiendo uno."}):p.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:p.jsx("ul",{className:"divide-y divide-neutral-light",children:a.sort((V,_e)=>(V.full_name||V.email).localeCompare(_e.full_name||_e.email)).map(V=>{const _e=h,W=l.find(Ae=>Ae.id===V.role_id),F=(W==null?void 0:W.name)==="Administrador",xe=V.is_master_admin===!0,Q=V.id===(d==null?void 0:d.id),be=Q||xe,Me=!be&&(_e||!F),ae=!be&&(_e||!F),Le=Ae=>Q?"No puedes gestionarte a ti mismo.":xe?"El administrador maestro no puede ser gestionado.":F&&!_e?Ae==="delete"?"Solo el administrador maestro puede eliminar otros administradores.":"Solo el administrador maestro puede editar o cambiar la contraseña de otros administradores.":Ae==="edit"?"Editar detalles del usuario":Ae==="password"?"Cambiar contraseña del usuario":Ae==="delete"?"Eliminar usuario":"",Ye=Q?"(Este eres tú)":"(Admin. Maestro no editable/eliminable)";return p.jsx("li",{className:"p-4 hover:bg-neutral-lightest transition-colors duration-150",children:p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[p.jsxs("div",{className:"flex items-center flex-grow mb-3 sm:mb-0 min-w-0",children:[p.jsx(yn,{className:"w-8 h-8 text-neutral rounded-full mr-3 flex-shrink-0"}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("h2",{className:"text-md font-semibold text-primary-dark truncate",title:V.full_name||V.email,children:V.full_name||V.email}),V.full_name&&p.jsx("p",{className:"text-xs text-neutral truncate",title:V.email,children:V.email}),p.jsxs("p",{className:"text-sm text-neutral-dark mt-0.5",children:["Rol: ",p.jsx("span",{className:"font-medium",children:ue(V.role_id)})]}),V.cargo&&p.jsxs("p",{className:"text-xs text-neutral-dark mt-0.5 flex items-center",children:[p.jsx(wj,{className:"w-3 h-3 mr-1 text-secondary"}),"Cargo: ",p.jsx("span",{className:"font-medium ml-1",children:V.cargo})]})]})]}),p.jsx("div",{className:"flex space-x-2 flex-shrink-0 self-start sm:self-center",children:be?p.jsx("span",{className:"text-xs text-neutral italic px-3 py-1.5",children:Ye}):p.jsxs(p.Fragment,{children:[p.jsx(Se,{onClick:()=>ie(V),variant:"ghost",size:"sm",leftIcon:p.jsx(xc,{className:"w-4 h-4"}),disabled:!Me||se,title:Le("password"),children:"Contraseña"}),p.jsx(Se,{onClick:()=>K(V),variant:"ghost",size:"sm",leftIcon:p.jsx(qa,{className:"w-4 h-4"}),disabled:!Me||se,title:Le("edit"),children:"Editar"}),p.jsx(Se,{onClick:()=>L(V),variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-100",leftIcon:p.jsx(zi,{className:"w-4 h-4"}),disabled:!ae||se,isLoading:se&&(T==null?void 0:T.id)===V.id,title:Le("delete"),children:"Eliminar"})]})})]})},V.id)})})}),p.jsx(Zq,{isOpen:v,onClose:ye,onSubmit:Ee,initialUserData:_,roles:l,existingUserEmails:a.map(V=>V.email.toLowerCase()),isLoading:u}),D&&p.jsx(Qq,{isOpen:N,onClose:we,onSubmit:ge,userEmail:D.email,isLoading:I}),E&&T&&p.jsxs(vn,{isOpen:E,onClose:te,title:"Confirmar Eliminación de Usuario",children:[p.jsxs("p",{className:"text-sm text-neutral-dark",children:['¿Estás seguro de que quieres eliminar al usuario "',p.jsx("strong",{children:T.full_name||T.email}),'"?',p.jsx("br",{}),"Esta acción eliminará su cuenta de autenticación y su perfil. Los documentos creados por este usuario permanecerán.",p.jsx("br",{}),p.jsx("strong",{children:"Esta acción no se puede deshacer."})]}),U&&p.jsxs("div",{className:"mt-3 p-2 bg-red-100 border border-red-300 text-red-600 rounded-md text-xs",children:["Error: ",U]}),p.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[p.jsx(Se,{variant:"ghost",onClick:te,disabled:I,children:"Cancelar"}),p.jsx(Se,{variant:"danger",onClick:Y,isLoading:I,disabled:I,children:I?"Eliminando...":"Sí, Eliminar Usuario"})]})]})]})},t7=({isOpen:t,onClose:e,documentToMove:n,onConfirmMove:r,isLoadingAction:i,errorAction:a,clearErrorAction:l})=>{const{state:u,getSubcategories:f,getCategory:d}=vr(),{mainCategories:h,allClassifications:v,isLoading:x,error:_,isLoaded:S}=u,[E,C]=A.useState(""),[T,R]=A.useState(""),[N,O]=A.useState(null),D=A.useMemo(()=>{if(!n||!S)return"N/A";const U=d(n.dewey_code);return U?`${U.code} - ${U.name}`:n.dewey_code},[n,S,d]);A.useEffect(()=>{var U,re;if(t&&n&&S){const B=d(n.dewey_code);if(B)if(B.level===1)C(B.code),R("");else if(B.level===2&&B.parent_code)C(B.parent_code),R(B.code);else{const Z=(U=h[0])==null?void 0:U.code;C(Z||""),R("")}else{const Z=(re=h[0])==null?void 0:re.code;C(Z||""),R("")}O(null),a&&l()}},[t,n,S,h,d,a,l]);const k=A.useMemo(()=>!E||!S?[]:f(E),[E,S,f]),I=async()=>{if(!n){O("No hay documento seleccionado para mover.");return}if(!T){O("Debes seleccionar una subcategoría Dewey de destino.");return}if(T===n.dewey_code){O("El documento ya está en esta clasificación. Elige una diferente.");return}O(null),a&&l(),await r(T)&&e()},j=()=>{O(null),a&&l(),e()};return!t||!n?null:p.jsx(vn,{isOpen:t,onClose:j,title:`Mover Documento: ${n.name}`,size:"md",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("p",{className:"text-sm text-neutral-dark",children:["Moviendo el documento: ",p.jsx("strong",{className:"text-primary",children:n.name})]}),p.jsxs("p",{className:"text-sm text-neutral-dark",children:["Clasificación actual: ",p.jsx("strong",{className:"text-secondary",children:D})]}),x&&p.jsx(Ft,{text:"Cargando clasificaciones..."}),_&&p.jsxs("p",{className:"text-red-500 text-sm",children:["Error cargando clasificaciones: ",_]}),S&&!_&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"mainDeweyMove",className:"block text-sm font-medium text-neutral-dark",children:"Nueva Categoría Principal Dewey"}),p.jsxs("select",{id:"mainDeweyMove",value:E,onChange:U=>{C(U.target.value),R("")},className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-default focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",disabled:i,children:[p.jsx("option",{value:"",children:"Selecciona categoría principal..."}),h.map(U=>p.jsxs("option",{value:U.code,children:[U.code," - ",U.name]},U.code))]})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"subDeweyMove",className:"block text-sm font-medium text-neutral-dark",children:["Nueva Subcategoría Dewey ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsxs("select",{id:"subDeweyMove",value:T,onChange:U=>R(U.target.value),disabled:!E||k.length===0||i,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-default focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md disabled:bg-neutral-light",required:!0,children:[p.jsx("option",{value:"",children:"Selecciona subcategoría..."}),k.map(U=>p.jsxs("option",{value:U.code,children:[U.code," - ",U.name]},U.code))]}),!E&&p.jsx("p",{className:"text-xs text-neutral-dark mt-1",children:"Selecciona primero una categoría principal."}),E&&k.length===0&&p.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No hay subcategorías disponibles para la principal seleccionada."})]})]}),N&&p.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded-md",children:N}),a&&p.jsxs("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded-md",children:["Error: ",a]}),p.jsxs("div",{className:"pt-5 flex justify-end space-x-3",children:[p.jsx(Se,{variant:"ghost",onClick:j,disabled:i,className:"text-neutral-dark",children:"Cancelar"}),p.jsx(Se,{onClick:I,variant:"primary",isLoading:i,disabled:!T||i||x||!!_,children:"Confirmar Movimiento"})]})]})})};function a2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=a2(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function xn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=a2(t))&&(r&&(r+=" "),r+=e);return r}var Jg={},Zg={},rT;function n7(){return rT||(rT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e}(Zg)),Zg}var Qg={},iT;function o2(){return iT||(iT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e}(Qg)),Qg}var ey={},aT;function s2(){return aT||(aT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e}(ey)),ey}var ty={},oT;function xx(){return oT||(oT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let a=0,l="",u="",f=!1;for(n.charCodeAt(0)===46&&(r.push(""),a++);a<i;){const d=n[a];u?d==="\\"&&a+1<i?(a++,l+=n[a]):d===u?u="":l+=d:f?d==='"'||d==="'"?u=d:d==="]"?(f=!1,r.push(l),l=""):l+=d:d==="["?(f=!0,l&&(r.push(l),l="")):d==="."?l&&(r.push(l),l=""):l+=d,a++}return l&&r.push(l),r}t.toPath=e}(ty)),ty}var sT;function bx(){return sT||(sT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=n7(),n=o2(),r=s2(),i=xx();function a(u,f,d){if(u==null)return d;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return d;const h=u[f];return h===void 0?n.isDeepKey(f)?a(u,i.toPath(f),d):d:h}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const h=u[f];return h===void 0?d:h}default:{if(Array.isArray(f))return l(u,f,d);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return d;const h=u[f];return h===void 0?d:h}}}function l(u,f,d){if(f.length===0)return d;let h=u;for(let v=0;v<f.length;v++){if(h==null||e.isUnsafeProperty(f[v]))return d;h=h[f[v]]}return h===void 0?d:h}t.get=a}(Jg)),Jg}var ny,lT;function r7(){return lT||(lT=1,ny=bx().get),ny}var i7=r7();const hl=Qr(i7);var ry={exports:{}},Ct={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function a7(){if(uT)return Ct;uT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),_=Symbol.for("react.client.reference");function S(E){if(typeof E=="object"&&E!==null){var C=E.$$typeof;switch(C){case t:switch(E=E.type,E){case n:case i:case r:case f:case d:case x:return E;default:switch(E=E&&E.$$typeof,E){case l:case u:case v:case h:return E;case a:return E;default:return C}}case e:return C}}}return Ct.ContextConsumer=a,Ct.ContextProvider=l,Ct.Element=t,Ct.ForwardRef=u,Ct.Fragment=n,Ct.Lazy=v,Ct.Memo=h,Ct.Portal=e,Ct.Profiler=i,Ct.StrictMode=r,Ct.Suspense=f,Ct.SuspenseList=d,Ct.isContextConsumer=function(E){return S(E)===a},Ct.isContextProvider=function(E){return S(E)===l},Ct.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},Ct.isForwardRef=function(E){return S(E)===u},Ct.isFragment=function(E){return S(E)===n},Ct.isLazy=function(E){return S(E)===v},Ct.isMemo=function(E){return S(E)===h},Ct.isPortal=function(E){return S(E)===e},Ct.isProfiler=function(E){return S(E)===i},Ct.isStrictMode=function(E){return S(E)===r},Ct.isSuspense=function(E){return S(E)===f},Ct.isSuspenseList=function(E){return S(E)===d},Ct.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===n||E===i||E===r||E===f||E===d||typeof E=="object"&&E!==null&&(E.$$typeof===v||E.$$typeof===h||E.$$typeof===l||E.$$typeof===a||E.$$typeof===u||E.$$typeof===_||E.getModuleId!==void 0)},Ct.typeOf=S,Ct}var cT;function o7(){return cT||(cT=1,ry.exports=a7()),ry.exports}var s7=o7(),mr=t=>t===0?0:t>0?1:-1,Jr=t=>typeof t=="number"&&t!=+t,Xu=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,st=t=>(typeof t=="number"||t instanceof Number)&&!Jr(t),Hi=t=>st(t)||typeof t=="string",l7=0,If=t=>{var e=++l7;return"".concat(t||"").concat(e)},di=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!st(e)&&typeof e!="string")return r;var a;if(Xu(e)){if(n==null)return r;var l=e.indexOf("%");a=n*parseFloat(e.slice(0,l))/100}else a=+e;return Jr(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},l2=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1},dT=(t,e)=>st(t)&&st(e)?n=>t+n*(e-t):()=>e;function u7(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):hl(r,e))===n)}var jo=t=>t===null||typeof t>"u",Cc=t=>jo(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),c7=["viewBox","children"],d7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],fT=["points","pathLength"],iy={svg:c7,polygon:fT,polyline:fT},_x=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],f7=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{_x.includes(i)&&(r[i]=a=>n[i](n,a))}),r},h7=(t,e,n)=>r=>(t(e,n,r),null),u2=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];_x.includes(i)&&typeof a=="function"&&(r||(r={}),r[i]=h7(a,e,n))}),r},hT=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",mT=null,ay=null,c2=t=>{if(t===mT&&Array.isArray(ay))return ay;var e=[];return A.Children.forEach(t,n=>{jo(n)||(s7.isFragment(n)?e=e.concat(c2(n.props.children)):e.push(n))}),ay=e,mT=t,e};function d2(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>hT(i)):r=[hT(e)],c2(t).forEach(i=>{var a=hl(i,"type.displayName")||hl(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}var m7=(t,e,n,r)=>{var i,a=(i=r&&(iy==null?void 0:iy[r]))!==null&&i!==void 0?i:[];return e.startsWith("data-")||typeof t!="function"&&(r&&a.includes(e)||d7.includes(e))||n&&_x.includes(e)},Mn=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(A.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(a=>{var l;m7((l=r)===null||l===void 0?void 0:l[a],a,e,n)&&(i[a]=r[a])}),i},p7=["children","width","height","viewBox","className","style","title","desc"];function u0(){return u0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u0.apply(null,arguments)}function g7(t,e){if(t==null)return{};var n,r,i=y7(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function y7(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wx=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:l,style:u,title:f,desc:d}=t,h=g7(t,p7),v=a||{width:r,height:i,x:0,y:0},x=xn("recharts-surface",l);return A.createElement("svg",u0({},Mn(h,!0,"svg"),{className:x,width:r,height:i,style:u,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:e}),A.createElement("title",null,f),A.createElement("desc",null,d),n)}),v7=["children","className"];function c0(){return c0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c0.apply(null,arguments)}function x7(t,e){if(t==null)return{};var n,r,i=b7(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function b7(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ml=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=x7(t,v7),a=xn("recharts-layer",r);return A.createElement("g",c0({className:a},Mn(i,!0),{ref:e}),n)}),f2=A.createContext(null),_7=()=>A.useContext(f2),oy={},sy={},ly={},pT;function w7(){return pT||(pT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const l=e(r),u=e(i);if(l===u&&l===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?u-l:l-u}return 0};t.compareValues=n}(ly)),ly}var uy={},cy={},gT;function h2(){return gT||(gT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e}(cy)),cy}var yT;function S7(){return yT||(yT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h2(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||l!=null&&Object.hasOwn(l,a)}t.isKey=i}(uy)),uy}var vT;function E7(){return vT||(vT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=w7(),n=S7(),r=xx();function i(a,l,u,f){if(a==null)return[];u=f?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(_=>String(_));const d=(_,S)=>{let E=_;for(let C=0;C<S.length&&E!=null;++C)E=E[S[C]];return E},h=(_,S)=>S==null||_==null?S:typeof _=="object"&&"key"in _?Object.hasOwn(S,_.key)?S[_.key]:d(S,_.path):typeof _=="function"?_(S):Array.isArray(_)?d(S,_):typeof S=="object"?S[_]:S,v=l.map(_=>(Array.isArray(_)&&_.length===1&&(_=_[0]),_==null||typeof _=="function"||Array.isArray(_)||n.isKey(_)?_:{key:_,path:r.toPath(_)}));return a.map(_=>({original:_,criteria:v.map(S=>h(S,_))})).slice().sort((_,S)=>{for(let E=0;E<v.length;E++){const C=e.compareValues(_.criteria[E],S.criteria[E],u[E]);if(C!==0)return C}return 0}).map(_=>_.original)}t.orderBy=i}(sy)),sy}var dy={},xT;function C7(){return xT||(xT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),l=(u,f)=>{for(let d=0;d<u.length;d++){const h=u[d];Array.isArray(h)&&f<a?l(h,f+1):i.push(h)}};return l(n,0),i}t.flatten=e}(dy)),dy}var fy={},hy={},bT;function m2(){return bT||(bT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n}(hy)),hy}var my={},py={},_T;function T7(){return _T||(_T=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e}(py)),py}var wT;function p2(){return wT||(wT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T7();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n}(my)),my}var gy={},ST;function g2(){return ST||(ST=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e}(gy)),gy}var yy={},ET;function Sx(){return ET||(ET=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e}(yy)),yy}var CT;function y2(){return CT||(CT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=m2(),n=p2(),r=g2(),i=Sx();function a(l,u,f){return r.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&e.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?i.eq(f[u],l):!1}t.isIterateeCall=a}(fy)),fy}var TT;function A7(){return TT||(TT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E7(),n=C7(),r=y2();function i(a,...l){const u=l.length;return u>1&&r.isIterateeCall(a,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),e.orderBy(a,n.flatten(l),["asc"])}t.sortBy=i}(oy)),oy}var vy,AT;function N7(){return AT||(AT=1,vy=A7().sortBy),vy}var D7=N7();const Oh=Qr(D7);function Rt(t){return function(){return t}}const v2=Math.cos,Lf=Math.sin,ti=Math.sqrt,jf=Math.PI,Rh=2*jf,d0=Math.PI,f0=2*d0,bo=1e-6,M7=f0-bo;function x2(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function O7(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return x2;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class R7{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?x2:O7(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,l){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+l}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,u=this._y1,f=r-e,d=i-n,h=l-e,v=u-n,x=h*h+v*v;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(x>bo)if(!(Math.abs(v*f-d*h)>bo)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let _=r-l,S=i-u,E=f*f+d*d,C=_*_+S*S,T=Math.sqrt(E),R=Math.sqrt(x),N=a*Math.tan((d0-Math.acos((E+x-C)/(2*T*R)))/2),O=N/R,D=N/T;Math.abs(O-1)>bo&&this._append`L${e+O*h},${n+O*v}`,this._append`A${a},${a},0,0,${+(v*_>h*S)},${this._x1=e+D*f},${this._y1=n+D*d}`}}arc(e,n,r,i,a,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),f=r*Math.sin(i),d=e+u,h=n+f,v=1^l,x=l?i-a:a-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>bo||Math.abs(this._y1-h)>bo)&&this._append`L${d},${h}`,r&&(x<0&&(x=x%f0+f0),x>M7?this._append`A${r},${r},0,1,${v},${e-u},${n-f}A${r},${r},0,1,${v},${this._x1=d},${this._y1=h}`:x>bo&&this._append`A${r},${r},0,${+(x>=d0)},${v},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ex(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new R7(e)}function Cx(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function b2(t){this._context=t}b2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function kh(t){return new b2(t)}function _2(t){return t[0]}function w2(t){return t[1]}function S2(t,e){var n=Rt(!0),r=null,i=kh,a=null,l=Ex(u);t=typeof t=="function"?t:t===void 0?_2:Rt(t),e=typeof e=="function"?e:e===void 0?w2:Rt(e);function u(f){var d,h=(f=Cx(f)).length,v,x=!1,_;for(r==null&&(a=i(_=l())),d=0;d<=h;++d)!(d<h&&n(v=f[d],d,f))===x&&((x=!x)?a.lineStart():a.lineEnd()),x&&a.point(+t(v,d,f),+e(v,d,f));if(_)return a=null,_+""||null}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Rt(+f),u):t},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Rt(+f),u):e},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Rt(!!f),u):n},u.curve=function(f){return arguments.length?(i=f,r!=null&&(a=i(r)),u):i},u.context=function(f){return arguments.length?(f==null?r=a=null:a=i(r=f),u):r},u}function rf(t,e,n){var r=null,i=Rt(!0),a=null,l=kh,u=null,f=Ex(d);t=typeof t=="function"?t:t===void 0?_2:Rt(+t),e=typeof e=="function"?e:Rt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?w2:Rt(+n);function d(v){var x,_,S,E=(v=Cx(v)).length,C,T=!1,R,N=new Array(E),O=new Array(E);for(a==null&&(u=l(R=f())),x=0;x<=E;++x){if(!(x<E&&i(C=v[x],x,v))===T)if(T=!T)_=x,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=x-1;S>=_;--S)u.point(N[S],O[S]);u.lineEnd(),u.areaEnd()}T&&(N[x]=+t(C,x,v),O[x]=+e(C,x,v),u.point(r?+r(C,x,v):N[x],n?+n(C,x,v):O[x]))}if(R)return u=null,R+""||null}function h(){return S2().defined(i).curve(l).context(a)}return d.x=function(v){return arguments.length?(t=typeof v=="function"?v:Rt(+v),r=null,d):t},d.x0=function(v){return arguments.length?(t=typeof v=="function"?v:Rt(+v),d):t},d.x1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:Rt(+v),d):r},d.y=function(v){return arguments.length?(e=typeof v=="function"?v:Rt(+v),n=null,d):e},d.y0=function(v){return arguments.length?(e=typeof v=="function"?v:Rt(+v),d):e},d.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:Rt(+v),d):n},d.lineX0=d.lineY0=function(){return h().x(t).y(e)},d.lineY1=function(){return h().x(t).y(n)},d.lineX1=function(){return h().x(r).y(e)},d.defined=function(v){return arguments.length?(i=typeof v=="function"?v:Rt(!!v),d):i},d.curve=function(v){return arguments.length?(l=v,a!=null&&(u=l(a)),d):l},d.context=function(v){return arguments.length?(v==null?a=u=null:u=l(a=v),d):a},d}class E2{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function k7(t){return new E2(t,!0)}function P7(t){return new E2(t,!1)}const Tx={draw(t,e){const n=ti(e/jf);t.moveTo(n,0),t.arc(0,0,n,0,Rh)}},I7={draw(t,e){const n=ti(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},C2=ti(1/3),L7=C2*2,j7={draw(t,e){const n=ti(e/L7),r=n*C2;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},U7={draw(t,e){const n=ti(e),r=-n/2;t.rect(r,r,n,n)}},$7=.8908130915292852,T2=Lf(jf/10)/Lf(7*jf/10),F7=Lf(Rh/10)*T2,B7=-v2(Rh/10)*T2,q7={draw(t,e){const n=ti(e*$7),r=F7*n,i=B7*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const l=Rh*a/5,u=v2(l),f=Lf(l);t.lineTo(f*n,-u*n),t.lineTo(u*r-f*i,f*r+u*i)}t.closePath()}},xy=ti(3),V7={draw(t,e){const n=-ti(e/(xy*3));t.moveTo(0,n*2),t.lineTo(-xy*n,-n),t.lineTo(xy*n,-n),t.closePath()}},Dr=-.5,Mr=ti(3)/2,h0=1/ti(12),z7=(h0/2+1)*3,G7={draw(t,e){const n=ti(e/z7),r=n/2,i=n*h0,a=r,l=n*h0+n,u=-a,f=l;t.moveTo(r,i),t.lineTo(a,l),t.lineTo(u,f),t.lineTo(Dr*r-Mr*i,Mr*r+Dr*i),t.lineTo(Dr*a-Mr*l,Mr*a+Dr*l),t.lineTo(Dr*u-Mr*f,Mr*u+Dr*f),t.lineTo(Dr*r+Mr*i,Dr*i-Mr*r),t.lineTo(Dr*a+Mr*l,Dr*l-Mr*a),t.lineTo(Dr*u+Mr*f,Dr*f-Mr*u),t.closePath()}};function H7(t,e){let n=null,r=Ex(i);t=typeof t=="function"?t:Rt(t||Tx),e=typeof e=="function"?e:Rt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Rt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Rt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Uf(){}function $f(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function A2(t){this._context=t}A2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$f(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$f(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function K7(t){return new A2(t)}function N2(t){this._context=t}N2.prototype={areaStart:Uf,areaEnd:Uf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:$f(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Y7(t){return new N2(t)}function D2(t){this._context=t}D2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$f(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function W7(t){return new D2(t)}function M2(t){this._context=t}M2.prototype={areaStart:Uf,areaEnd:Uf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function X7(t){return new M2(t)}function NT(t){return t<0?-1:1}function DT(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),l=(n-t._y1)/(i||r<0&&-0),u=(a*i+l*r)/(r+i);return(NT(a)+NT(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(u))||0}function MT(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function by(t,e,n){var r=t._x0,i=t._y0,a=t._x1,l=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*e,a-u,l-u*n,a,l)}function Ff(t){this._context=t}Ff.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:by(this,this._t0,MT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,by(this,MT(this,n=DT(this,t,e)),n);break;default:by(this,this._t0,n=DT(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function O2(t){this._context=new R2(t)}(O2.prototype=Object.create(Ff.prototype)).point=function(t,e){Ff.prototype.point.call(this,e,t)};function R2(t){this._context=t}R2.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function J7(t){return new Ff(t)}function Z7(t){return new O2(t)}function k2(t){this._context=t}k2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=OT(t),i=OT(e),a=0,l=1;l<n;++a,++l)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[l],e[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function OT(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),l=new Array(n);for(i[0]=0,a[0]=2,l[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,l[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,l[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,l[e]-=r*l[e-1];for(i[n-1]=l[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(l[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Q7(t){return new k2(t)}function Ph(t,e){this._context=t,this._t=e}Ph.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function eV(t){return new Ph(t,.5)}function tV(t){return new Ph(t,0)}function nV(t){return new Ph(t,1)}function pl(t,e){if((l=t.length)>1)for(var n=1,r,i,a=t[e[0]],l,u=a.length;n<l;++n)for(i=a,a=t[e[n]],r=0;r<u;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function m0(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function rV(t,e){return t[e]}function iV(t){const e=[];return e.key=t,e}function aV(){var t=Rt([]),e=m0,n=pl,r=rV;function i(a){var l=Array.from(t.apply(this,arguments),iV),u,f=l.length,d=-1,h;for(const v of a)for(u=0,++d;u<f;++u)(l[u][d]=[0,+r(v,l[u].key,d,a)]).data=v;for(u=0,h=Cx(e(l));u<f;++u)l[h[u]].index=u;return n(l,h),l}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Rt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Rt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?m0:typeof a=="function"?a:Rt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??pl,i):n},i}function oV(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,l;i<a;++i){for(l=n=0;n<r;++n)l+=t[n][i][1]||0;if(l)for(n=0;n<r;++n)t[n][i][1]/=l}pl(t,e)}}function sV(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var l=0,u=0;l<i;++l)u+=t[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}pl(t,e)}}function lV(t,e){if(!(!((l=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,l;r<a;++r){for(var u=0,f=0,d=0;u<l;++u){for(var h=t[e[u]],v=h[r][1]||0,x=h[r-1][1]||0,_=(v-x)/2,S=0;S<u;++S){var E=t[e[S]],C=E[r][1]||0,T=E[r-1][1]||0;_+=C-T}f+=v,d+=_*v}i[r-1][1]+=i[r-1][0]=n,f&&(n-=d/f)}i[r-1][1]+=i[r-1][0]=n,pl(t,e)}}var uV=["type","size","sizeType"];function p0(){return p0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p0.apply(null,arguments)}function RT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RT(Object(n),!0).forEach(function(r){cV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cV(t,e,n){return(e=dV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dV(t){var e=fV(t,"string");return typeof e=="symbol"?e:e+""}function fV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hV(t,e){if(t==null)return{};var n,r,i=mV(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var P2={symbolCircle:Tx,symbolCross:I7,symbolDiamond:j7,symbolSquare:U7,symbolStar:q7,symbolTriangle:V7,symbolWye:G7},pV=Math.PI/180,gV=t=>{var e="symbol".concat(Cc(t));return P2[e]||Tx},yV=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*pV;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},vV=(t,e)=>{P2["symbol".concat(Cc(t))]=e},Ax=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=hV(t,uV),a=kT(kT({},i),{},{type:e,size:n,sizeType:r}),l=()=>{var v=gV(e),x=H7().type(v).size(yV(n,r,e));return x()},{className:u,cx:f,cy:d}=a,h=Mn(a,!0);return f===+f&&d===+d&&n===+n?A.createElement("path",p0({},h,{className:xn("recharts-symbols",u),transform:"translate(".concat(f,", ").concat(d,")"),d:l()})):null};Ax.registerSymbol=vV;function g0(){return g0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g0.apply(null,arguments)}function PT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PT(Object(n),!0).forEach(function(r){Nx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nx(t,e,n){return(e=bV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bV(t){var e=_V(t,"string");return typeof e=="symbol"?e:e+""}function _V(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zr=32;class Dx extends A.PureComponent{renderIcon(e,n){var{inactiveColor:r}=this.props,i=zr/2,a=zr/6,l=zr/3,u=e.inactive?r:e.color,f=n??e.type;if(f==="none")return null;if(f==="plainline")return A.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:zr,y2:i,className:"recharts-legend-icon"});if(f==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(zr,"M").concat(2*l,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return A.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(zr/8,"h").concat(zr,"v").concat(zr*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(A.isValidElement(e.legendIcon)){var d=xV({},e);return delete d.legendIcon,A.cloneElement(e.legendIcon,d)}return A.createElement(Ax,{fill:u,cx:i,cy:i,size:zr,sizeType:"diameter",type:f})}renderItems(){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:l,itemSorter:u}=this.props,f={x:0,y:0,width:zr,height:zr},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return(u?Oh(e,u):e).map((v,x)=>{var _=v.formatter||i,S=xn({"recharts-legend-item":!0,["legend-item-".concat(x)]:!0,inactive:v.inactive});if(v.type==="none")return null;var E=v.inactive?a:v.color,C=_?_(v.value,v,x):v.value;return A.createElement("li",g0({className:S,style:d,key:"legend-item-".concat(x)},u2(this.props,v,x)),A.createElement(wx,{width:n,height:n,viewBox:f,style:h,"aria-label":"".concat(C," legend icon")},this.renderIcon(v,l)),A.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},C))})}render(){var{payload:e,layout:n,align:r}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Nx(Dx,"displayName","Legend");Nx(Dx,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"middle"});var _y={},wy={},IT;function wV(){return IT||(IT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const l=n[a],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}t.uniqBy=e}(wy)),wy}var Sy={},LT;function I2(){return LT||(LT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e}(Sy)),Sy}var Ey={},Cy={},jT;function SV(){return jT||(jT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e}(Cy)),Cy}var UT;function EV(){return UT||(UT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=p2(),n=SV();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r}(Ey)),Ey}var Ty={},Ay={},$T;function CV(){return $T||($T=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bx();function n(r){return function(i){return e.get(i,r)}}t.property=n}(Ay)),Ay}var Ny={},Dy={},My={},Oy={},FT;function L2(){return FT||(FT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e}(Oy)),Oy}var BT;function TV(){return BT||(BT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mx(),n=g2(),r=L2(),i=Sx();function a(v,x,_){return typeof _!="function"?e.isMatch(v,x):l(v,x,function S(E,C,T,R,N,O){const D=_(E,C,T,R,N,O);return D!==void 0?!!D:l(E,C,S,O)},new Map)}function l(v,x,_,S){if(x===v)return!0;switch(typeof x){case"object":return u(v,x,_,S);case"function":return Object.keys(x).length>0?l(v,{...x},_,S):i.eq(v,x);default:return n.isObject(v)?typeof x=="string"?x==="":!0:i.eq(v,x)}}function u(v,x,_,S){if(x==null)return!0;if(Array.isArray(x))return d(v,x,_,S);if(x instanceof Map)return f(v,x,_,S);if(x instanceof Set)return h(v,x,_,S);const E=Object.keys(x);if(v==null)return E.length===0;if(E.length===0)return!0;if(S&&S.has(x))return S.get(x)===v;S&&S.set(x,v);try{for(let C=0;C<E.length;C++){const T=E[C];if(!r.isPrimitive(v)&&!(T in v)||x[T]===void 0&&v[T]!==void 0||x[T]===null&&v[T]!==null||!_(v[T],x[T],T,v,x,S))return!1}return!0}finally{S&&S.delete(x)}}function f(v,x,_,S){if(x.size===0)return!0;if(!(v instanceof Map))return!1;for(const[E,C]of x.entries()){const T=v.get(E);if(_(T,C,E,v,x,S)===!1)return!1}return!0}function d(v,x,_,S){if(x.length===0)return!0;if(!Array.isArray(v))return!1;const E=new Set;for(let C=0;C<x.length;C++){const T=x[C];let R=!1;for(let N=0;N<v.length;N++){if(E.has(N))continue;const O=v[N];let D=!1;if(_(O,T,C,v,x,S)&&(D=!0),D){E.add(N),R=!0;break}}if(!R)return!1}return!0}function h(v,x,_,S){return x.size===0?!0:v instanceof Set?d([...v],[...x],_,S):!1}t.isMatchWith=a,t.isSetMatch=h}(My)),My}var qT;function Mx(){return qT||(qT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TV();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n}(Dy)),Dy}var Ry={},ky={},Py={},VT;function j2(){return VT||(VT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e}(Py)),Py}var Iy={},zT;function Ox(){return zT||(zT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e}(Iy)),Iy}var Ly={},GT;function Rx(){return GT||(GT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",l="[object Symbol]",u="[object Date]",f="[object Map]",d="[object Set]",h="[object Array]",v="[object Function]",x="[object ArrayBuffer]",_="[object Object]",S="[object Error]",E="[object DataView]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",R="[object Uint16Array]",N="[object Uint32Array]",O="[object BigUint64Array]",D="[object Int8Array]",k="[object Int16Array]",I="[object Int32Array]",j="[object BigInt64Array]",U="[object Float32Array]",re="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=x,t.arrayTag=h,t.bigInt64ArrayTag=j,t.bigUint64ArrayTag=O,t.booleanTag=i,t.dataViewTag=E,t.dateTag=u,t.errorTag=S,t.float32ArrayTag=U,t.float64ArrayTag=re,t.functionTag=v,t.int16ArrayTag=k,t.int32ArrayTag=I,t.int8ArrayTag=D,t.mapTag=f,t.numberTag=r,t.objectTag=_,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=l,t.uint16ArrayTag=R,t.uint32ArrayTag=N,t.uint8ArrayTag=C,t.uint8ClampedArrayTag=T}(Ly)),Ly}var jy={},HT;function AV(){return HT||(HT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e}(jy)),jy}var KT;function U2(){return KT||(KT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=j2(),n=Ox(),r=Rx(),i=L2(),a=AV();function l(h,v){return u(h,void 0,h,new Map,v)}function u(h,v,x,_=new Map,S=void 0){const E=S==null?void 0:S(h,v,x,_);if(E!=null)return E;if(i.isPrimitive(h))return h;if(_.has(h))return _.get(h);if(Array.isArray(h)){const C=new Array(h.length);_.set(h,C);for(let T=0;T<h.length;T++)C[T]=u(h[T],T,x,_,S);return Object.hasOwn(h,"index")&&(C.index=h.index),Object.hasOwn(h,"input")&&(C.input=h.input),C}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const C=new RegExp(h.source,h.flags);return C.lastIndex=h.lastIndex,C}if(h instanceof Map){const C=new Map;_.set(h,C);for(const[T,R]of h)C.set(T,u(R,T,x,_,S));return C}if(h instanceof Set){const C=new Set;_.set(h,C);for(const T of h)C.add(u(T,void 0,x,_,S));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const C=new(Object.getPrototypeOf(h)).constructor(h.length);_.set(h,C);for(let T=0;T<h.length;T++)C[T]=u(h[T],T,x,_,S);return C}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const C=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return _.set(h,C),f(C,h,x,_,S),C}if(typeof File<"u"&&h instanceof File){const C=new File([h],h.name,{type:h.type});return _.set(h,C),f(C,h,x,_,S),C}if(h instanceof Blob){const C=new Blob([h],{type:h.type});return _.set(h,C),f(C,h,x,_,S),C}if(h instanceof Error){const C=new h.constructor;return _.set(h,C),C.message=h.message,C.name=h.name,C.stack=h.stack,C.cause=h.cause,f(C,h,x,_,S),C}if(typeof h=="object"&&d(h)){const C=Object.create(Object.getPrototypeOf(h));return _.set(h,C),f(C,h,x,_,S),C}return h}function f(h,v,x=h,_,S){const E=[...Object.keys(v),...e.getSymbols(v)];for(let C=0;C<E.length;C++){const T=E[C],R=Object.getOwnPropertyDescriptor(h,T);(R==null||R.writable)&&(h[T]=u(v[T],T,x,_,S))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=l,t.cloneDeepWithImpl=u,t.copyProperties=f}(ky)),ky}var YT;function NV(){return YT||(YT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=U2();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n}(Ry)),Ry}var WT;function DV(){return WT||(WT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mx(),n=NV();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r}(Ny)),Ny}var Uy={},$y={},Fy={},XT;function MV(){return XT||(XT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=U2(),n=Rx();function r(i,a){return e.cloneDeepWith(i,(l,u,f,d)=>{const h=a==null?void 0:a(l,u,f,d);if(h!=null)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const v=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(v,i),v}case n.argumentsTag:{const v={};return e.copyProperties(v,i),v.length=i.length,v[Symbol.iterator]=i[Symbol.iterator],v}default:return}})}t.cloneDeepWith=r}(Fy)),Fy}var JT;function OV(){return JT||(JT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MV();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n}($y)),$y}var By={},qy={},ZT;function RV(){return ZT||(ZT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ox();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n}(qy)),qy}var QT;function kV(){return QT||(QT=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=o2(),n=m2(),r=RV(),i=xx();function a(l,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&e.isDeepKey(u)&&(l==null?void 0:l[u])==null?f=i.toPath(u):f=[u],f.length===0)return!1;let d=l;for(let h=0;h<f.length;h++){const v=f[h];if((d==null||!Object.hasOwn(d,v))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(v)&&v<d.length))return!1;d=d[v]}return!0}t.has=a}(By)),By}var eA;function PV(){return eA||(eA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mx(),n=s2(),r=OV(),i=bx(),a=kV();function l(u,f){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=r.cloneDeep(f),function(d){const h=i.get(d,u);return h===void 0?a.has(d,u):f===void 0?h===void 0:e.isMatch(h,f)}}t.matchesProperty=l}(Uy)),Uy}var tA;function IV(){return tA||(tA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I2(),n=CV(),r=DV(),i=PV();function a(l){if(l==null)return e.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}t.iteratee=a}(Ty)),Ty}var nA;function LV(){return nA||(nA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wV(),n=I2(),r=EV(),i=IV();function a(l,u=n.identity){return r.isArrayLikeObject(l)?e.uniqBy(Array.from(l),i.iteratee(u)):[]}t.uniqBy=a}(_y)),_y}var Vy,rA;function jV(){return rA||(rA=1,Vy=LV().uniqBy),Vy}var UV=jV();const iA=Qr(UV);function $2(t,e,n){return e===!0?iA(t,n):typeof e=="function"?iA(t,e):t}var zy={exports:{}},Gy={},Hy={exports:{}},Ky={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA;function $V(){if(aA)return Ky;aA=1;var t=_l();function e(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function u(v,x){var _=x(),S=r({inst:{value:_,getSnapshot:x}}),E=S[0].inst,C=S[1];return a(function(){E.value=_,E.getSnapshot=x,f(E)&&C({inst:E})},[v,_,x]),i(function(){return f(E)&&C({inst:E}),v(function(){f(E)&&C({inst:E})})},[v]),l(_),_}function f(v){var x=v.getSnapshot;v=v.value;try{var _=x();return!n(v,_)}catch{return!0}}function d(v,x){return x()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return Ky.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Ky}var oA;function FV(){return oA||(oA=1,Hy.exports=$V()),Hy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA;function BV(){if(sA)return Gy;sA=1;var t=_l(),e=FV();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,u=t.useMemo,f=t.useDebugValue;return Gy.useSyncExternalStoreWithSelector=function(d,h,v,x,_){var S=a(null);if(S.current===null){var E={hasValue:!1,value:null};S.current=E}else E=S.current;S=u(function(){function T(k){if(!R){if(R=!0,N=k,k=x(k),_!==void 0&&E.hasValue){var I=E.value;if(_(I,k))return O=I}return O=k}if(I=O,r(N,k))return I;var j=x(k);return _!==void 0&&_(I,j)?(N=k,I):(N=k,O=j)}var R=!1,N,O,D=v===void 0?null:v;return[function(){return T(h())},D===null?void 0:function(){return T(D())}]},[h,v,x,_]);var C=i(d,S[0],S[1]);return l(function(){E.hasValue=!0,E.value=C},[C]),f(C),C},Gy}var lA;function qV(){return lA||(lA=1,zy.exports=BV()),zy.exports}var VV=qV(),kx=A.createContext(null),zV=t=>t,On=()=>{var t=A.useContext(kx);return t?t.store.dispatch:zV},bf=()=>{},GV=()=>bf,HV=(t,e)=>t===e;function ot(t){var e=A.useContext(kx);return VV.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:GV,e?e.store.getState:bf,e?e.store.getState:bf,e?t:bf,HV)}function KV(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function YV(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function WV(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var uA=t=>Array.isArray(t)?t:[t];function XV(t){const e=Array.isArray(t[0])?t[0]:t;return WV(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function JV(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var ZV=class{constructor(t){this.value=t}deref(){return this.value}},QV=typeof WeakRef<"u"?WeakRef:ZV,ez=0,cA=1;function af(){return{s:ez,v:void 0,o:null,p:null}}function F2(t,e={}){let n=af();const{resultEqualityCheck:r}=e;let i,a=0;function l(){var v;let u=n;const{length:f}=arguments;for(let x=0,_=f;x<_;x++){const S=arguments[x];if(typeof S=="function"||typeof S=="object"&&S!==null){let E=u.o;E===null&&(u.o=E=new WeakMap);const C=E.get(S);C===void 0?(u=af(),E.set(S,u)):u=C}else{let E=u.p;E===null&&(u.p=E=new Map);const C=E.get(S);C===void 0?(u=af(),E.set(S,u)):u=C}}const d=u;let h;if(u.s===cA)h=u.v;else if(h=t.apply(null,arguments),a++,r){const x=((v=i==null?void 0:i.deref)==null?void 0:v.call(i))??i;x!=null&&r(x,h)&&(h=x,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new QV(h):h}return d.s=cA,d.v=h,h}return l.clearCache=()=>{n=af(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function tz(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,l=0,u,f={},d=i.pop();typeof d=="object"&&(f=d,d=i.pop()),KV(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...f},{memoize:v,memoizeOptions:x=[],argsMemoize:_=F2,argsMemoizeOptions:S=[]}=h,E=uA(x),C=uA(S),T=XV(i),R=v(function(){return a++,d.apply(null,arguments)},...E),N=_(function(){l++;const D=JV(T,arguments);return u=R.apply(null,D),u},...C);return Object.assign(N,{resultFunc:d,memoizedResultFunc:R,dependencies:T,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:v,argsMemoize:_})};return Object.assign(r,{withTypes:()=>r}),r}var oe=tz(F2),nz=Object.assign((t,e=oe)=>{YV(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((l,u,f)=>(l[n[f]]=u,l),{}))},{withTypes:()=>nz}),rz=t=>t.legend.settings,iz=t=>t.legend.size,az=t=>t.legend.payload,oz=oe([az],t=>t.flat(1));function sz(){return ot(oz)}var of=1;function B2(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-e.height)>of||Math.abs(l.left-e.left)>of||Math.abs(l.top-e.top)>of||Math.abs(l.width-e.width)>of)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Un(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var lz=typeof Symbol=="function"&&Symbol.observable||"@@observable",dA=lz,Yy=()=>Math.random().toString(36).substring(7).split("").join("."),uz={INIT:`@@redux/INIT${Yy()}`,REPLACE:`@@redux/REPLACE${Yy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Yy()}`},Bf=uz;function Px(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function q2(t,e,n){if(typeof t!="function")throw new Error(Un(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Un(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Un(1));return n(q2)(t,e)}let r=t,i=e,a=new Map,l=a,u=0,f=!1;function d(){l===a&&(l=new Map,a.forEach((C,T)=>{l.set(T,C)}))}function h(){if(f)throw new Error(Un(3));return i}function v(C){if(typeof C!="function")throw new Error(Un(4));if(f)throw new Error(Un(5));let T=!0;d();const R=u++;return l.set(R,C),function(){if(T){if(f)throw new Error(Un(6));T=!1,d(),l.delete(R),a=null}}}function x(C){if(!Px(C))throw new Error(Un(7));if(typeof C.type>"u")throw new Error(Un(8));if(typeof C.type!="string")throw new Error(Un(17));if(f)throw new Error(Un(9));try{f=!0,i=r(i,C)}finally{f=!1}return(a=l).forEach(R=>{R()}),C}function _(C){if(typeof C!="function")throw new Error(Un(10));r=C,x({type:Bf.REPLACE})}function S(){const C=v;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(Un(11));function R(){const O=T;O.next&&O.next(h())}return R(),{unsubscribe:C(R)}},[dA](){return this}}}return x({type:Bf.INIT}),{dispatch:x,subscribe:v,getState:h,replaceReducer:_,[dA]:S}}function cz(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Bf.INIT})>"u")throw new Error(Un(12));if(typeof n(void 0,{type:Bf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Un(13))})}function V2(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const l=e[a];typeof t[l]=="function"&&(n[l]=t[l])}const r=Object.keys(n);let i;try{cz(n)}catch(a){i=a}return function(l={},u){if(i)throw i;let f=!1;const d={};for(let h=0;h<r.length;h++){const v=r[h],x=n[v],_=l[v],S=x(_,u);if(typeof S>"u")throw u&&u.type,new Error(Un(14));d[v]=S,f=f||S!==_}return f=f||r.length!==Object.keys(l).length,f?d:l}}function qf(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function dz(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Un(15))};const l={getState:i.getState,dispatch:(f,...d)=>a(f,...d)},u=t.map(f=>f(l));return a=qf(...u)(i.dispatch),{...i,dispatch:a}}}function z2(t){return Px(t)&&"type"in t&&typeof t.type=="string"}var G2=Symbol.for("immer-nothing"),fA=Symbol.for("immer-draftable"),gr=Symbol.for("immer-state");function Kr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var gl=Object.getPrototypeOf;function Uo(t){return!!t&&!!t[gr]}function Ki(t){var e;return t?H2(t)||Array.isArray(t)||!!t[fA]||!!((e=t.constructor)!=null&&e[fA])||Lh(t)||jh(t):!1}var fz=Object.prototype.constructor.toString();function H2(t){if(!t||typeof t!="object")return!1;const e=gl(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===fz}function Vf(t,e){Ih(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Ih(t){const e=t[gr];return e?e.type_:Array.isArray(t)?1:Lh(t)?2:jh(t)?3:0}function y0(t,e){return Ih(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function K2(t,e,n){const r=Ih(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function hz(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Lh(t){return t instanceof Map}function jh(t){return t instanceof Set}function _o(t){return t.copy_||t.base_}function v0(t,e){if(Lh(t))return new Map(t);if(jh(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=H2(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[gr];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[l]})}return Object.create(gl(t),r)}else{const r=gl(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Ix(t,e=!1){return Uh(t)||Uo(t)||!Ki(t)||(Ih(t)>1&&(t.set=t.add=t.clear=t.delete=mz),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>Ix(r,!0))),t}function mz(){Kr(2)}function Uh(t){return Object.isFrozen(t)}var pz={};function $o(t){const e=pz[t];return e||Kr(0,t),e}var sc;function Y2(){return sc}function gz(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function hA(t,e){e&&($o("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function x0(t){b0(t),t.drafts_.forEach(yz),t.drafts_=null}function b0(t){t===sc&&(sc=t.parent_)}function mA(t){return sc=gz(sc,t)}function yz(t){const e=t[gr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function pA(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[gr].modified_&&(x0(e),Kr(4)),Ki(t)&&(t=zf(e,t),e.parent_||Gf(e,t)),e.patches_&&$o("Patches").generateReplacementPatches_(n[gr].base_,t,e.patches_,e.inversePatches_)):t=zf(e,n,[]),x0(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==G2?t:void 0}function zf(t,e,n){if(Uh(e))return e;const r=e[gr];if(!r)return Vf(e,(i,a)=>gA(t,r,e,i,a,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Gf(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,l=!1;r.type_===3&&(a=new Set(i),i.clear(),l=!0),Vf(a,(u,f)=>gA(t,r,i,u,f,n,l)),Gf(t,i,!1),n&&t.patches_&&$o("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function gA(t,e,n,r,i,a,l){if(Uo(i)){const u=a&&e&&e.type_!==3&&!y0(e.assigned_,r)?a.concat(r):void 0,f=zf(t,i,u);if(K2(n,r,f),Uo(f))t.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Ki(i)&&!Uh(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;zf(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Gf(t,i)}}function Gf(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Ix(e,n)}function vz(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Y2(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=Lx;n&&(i=[r],a=lc);const{revoke:l,proxy:u}=Proxy.revocable(i,a);return r.draft_=u,r.revoke_=l,u}var Lx={get(t,e){if(e===gr)return t;const n=_o(t);if(!y0(n,e))return xz(t,n,e);const r=n[e];return t.finalized_||!Ki(r)?r:r===Wy(t.base_,e)?(Xy(t),t.copy_[e]=w0(r,t)):r},has(t,e){return e in _o(t)},ownKeys(t){return Reflect.ownKeys(_o(t))},set(t,e,n){const r=W2(_o(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Wy(_o(t),e),a=i==null?void 0:i[gr];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(hz(n,i)&&(n!==void 0||y0(t.base_,e)))return!0;Xy(t),_0(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Wy(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Xy(t),_0(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=_o(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Kr(11)},getPrototypeOf(t){return gl(t.base_)},setPrototypeOf(){Kr(12)}},lc={};Vf(Lx,(t,e)=>{lc[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});lc.deleteProperty=function(t,e){return lc.set.call(this,t,e,void 0)};lc.set=function(t,e,n){return Lx.set.call(this,t[0],e,n,t[0])};function Wy(t,e){const n=t[gr];return(n?_o(n):t)[e]}function xz(t,e,n){var i;const r=W2(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function W2(t,e){if(!(e in t))return;let n=gl(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=gl(n)}}function _0(t){t.modified_||(t.modified_=!0,t.parent_&&_0(t.parent_))}function Xy(t){t.copy_||(t.copy_=v0(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var bz=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const l=this;return function(f=a,...d){return l.produce(f,h=>n.call(this,h,...d))}}typeof n!="function"&&Kr(6),r!==void 0&&typeof r!="function"&&Kr(7);let i;if(Ki(e)){const a=mA(this),l=w0(e,void 0);let u=!0;try{i=n(l),u=!1}finally{u?x0(a):b0(a)}return hA(a,r),pA(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===G2&&(i=void 0),this.autoFreeze_&&Ix(i,!0),r){const a=[],l=[];$o("Patches").generateReplacementPatches_(e,i,a,l),r(a,l)}return i}else Kr(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(l,...u)=>this.produceWithPatches(l,f=>e(f,...u));let r,i;return[this.produce(e,n,(l,u)=>{r=l,i=u}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ki(t)||Kr(8),Uo(t)&&(t=Ua(t));const e=mA(this),n=w0(t,void 0);return n[gr].isManual_=!0,b0(e),n}finishDraft(t,e){const n=t&&t[gr];(!n||!n.isManual_)&&Kr(9);const{scope_:r}=n;return hA(r,e),pA(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=$o("Patches").applyPatches_;return Uo(t)?r(t,e):this.produce(t,i=>r(i,e))}};function w0(t,e){const n=Lh(t)?$o("MapSet").proxyMap_(t,e):jh(t)?$o("MapSet").proxySet_(t,e):vz(t,e);return(e?e.scope_:Y2()).drafts_.push(n),n}function Ua(t){return Uo(t)||Kr(10,t),X2(t)}function X2(t){if(!Ki(t)||Uh(t))return t;const e=t[gr];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=v0(t,e.scope_.immer_.useStrictShallowCopy_)}else n=v0(t,!0);return Vf(n,(r,i)=>{K2(n,r,X2(i))}),e&&(e.finalized_=!1),n}var yr=new bz,J2=yr.produce;yr.produceWithPatches.bind(yr);yr.setAutoFreeze.bind(yr);yr.setUseStrictShallowCopy.bind(yr);yr.applyPatches.bind(yr);yr.createDraft.bind(yr);yr.finishDraft.bind(yr);function Z2(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var _z=Z2(),wz=Z2,Sz=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?qf:qf.apply(null,arguments)};function Ir(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(pr(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>z2(r)&&r.type===t,n}var Q2=class Ju extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ju.prototype)}static get[Symbol.species](){return Ju}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ju(...e[0].concat(this)):new Ju(...e.concat(this))}};function yA(t){return Ki(t)?J2(t,()=>{}):t}function sf(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Ez(t){return typeof t=="boolean"}var Cz=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let l=new Q2;return n&&(Ez(n)?l.push(_z):l.push(wz(n.extraArgument))),l},Tz="RTK_autoBatch",vA=t=>e=>{setTimeout(e,t)},Az=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,l=!1;const u=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:vA(10):t.type==="callback"?t.queueNotification:vA(t.timeout),d=()=>{l=!1,a&&(a=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const v=()=>i&&h(),x=r.subscribe(v);return u.add(h),()=>{x(),u.delete(h)}},dispatch(h){var v;try{return i=!((v=h==null?void 0:h.meta)!=null&&v[Tz]),a=!i,a&&(l||(l=!0,f(d))),r.dispatch(h)}finally{i=!0}}})},Nz=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new Q2(t);return r&&i.push(Az(typeof r=="object"?r:void 0)),i};function Dz(t){const e=Cz(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:l=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(Px(n))u=V2(n);else throw new Error(pr(1));let f;typeof r=="function"?f=r(e):f=e();let d=qf;i&&(d=Sz({trace:!1,...typeof i=="object"&&i}));const h=dz(...f),v=Nz(h);let x=typeof l=="function"?l(v):v();const _=d(...x);return q2(u,a,_)}function eO(t){const e={},n=[];let r;const i={addCase(a,l){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(pr(28));if(u in e)throw new Error(pr(29));return e[u]=l,i},addMatcher(a,l){return n.push({matcher:a,reducer:l}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function Mz(t){return typeof t=="function"}function Oz(t,e){let[n,r,i]=eO(e),a;if(Mz(t))a=()=>yA(t());else{const u=yA(t);a=()=>u}function l(u=a(),f){let d=[n[f.type],...r.filter(({matcher:h})=>h(f)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,v)=>{if(v)if(Uo(h)){const _=v(h,f);return _===void 0?h:_}else{if(Ki(h))return J2(h,x=>v(x,f));{const x=v(h,f);if(x===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return h},u)}return l.getInitialState=a,l}var Rz="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",kz=(t=21)=>{let e="",n=t;for(;n--;)e+=Rz[Math.random()*64|0];return e},Pz=Symbol.for("rtk-slice-createasyncthunk");function Iz(t,e){return`${t}/${e}`}function Lz({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Pz];return function(i){const{name:a,reducerPath:l=a}=i;if(!a)throw new Error(pr(11));const u=(typeof i.reducers=="function"?i.reducers(Uz()):i.reducers)||{},f=Object.keys(u),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(O,D){const k=typeof O=="string"?O:O.type;if(!k)throw new Error(pr(12));if(k in d.sliceCaseReducersByType)throw new Error(pr(13));return d.sliceCaseReducersByType[k]=D,h},addMatcher(O,D){return d.sliceMatchers.push({matcher:O,reducer:D}),h},exposeAction(O,D){return d.actionCreators[O]=D,h},exposeCaseReducer(O,D){return d.sliceCaseReducersByName[O]=D,h}};f.forEach(O=>{const D=u[O],k={reducerName:O,type:Iz(a,O),createNotation:typeof i.reducers=="function"};Fz(D)?qz(k,D,h,e):$z(k,D,h)});function v(){const[O={},D=[],k=void 0]=typeof i.extraReducers=="function"?eO(i.extraReducers):[i.extraReducers],I={...O,...d.sliceCaseReducersByType};return Oz(i.initialState,j=>{for(let U in I)j.addCase(U,I[U]);for(let U of d.sliceMatchers)j.addMatcher(U.matcher,U.reducer);for(let U of D)j.addMatcher(U.matcher,U.reducer);k&&j.addDefaultCase(k)})}const x=O=>O,_=new Map,S=new WeakMap;let E;function C(O,D){return E||(E=v()),E(O,D)}function T(){return E||(E=v()),E.getInitialState()}function R(O,D=!1){function k(j){let U=j[O];return typeof U>"u"&&D&&(U=sf(S,k,T)),U}function I(j=x){const U=sf(_,D,()=>new WeakMap);return sf(U,j,()=>{const re={};for(const[B,Z]of Object.entries(i.selectors??{}))re[B]=jz(Z,j,()=>sf(S,j,T),D);return re})}return{reducerPath:O,getSelectors:I,get selectors(){return I(k)},selectSlice:k}}const N={name:a,reducer:C,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:T,...R(l),injectInto(O,{reducerPath:D,...k}={}){const I=D??l;return O.inject({reducerPath:I,reducer:C},k),{...N,...R(I,!0)}}};return N}}function jz(t,e,n,r){function i(a,...l){let u=e(a);return typeof u>"u"&&r&&(u=n()),t(u,...l)}return i.unwrapped=t,i}var Ur=Lz();function Uz(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function $z({type:t,reducerName:e,createNotation:n},r,i){let a,l;if("reducer"in r){if(n&&!Bz(r))throw new Error(pr(17));a=r.reducer,l=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,l?Ir(t,l):Ir(t))}function Fz(t){return t._reducerDefinitionType==="asyncThunk"}function Bz(t){return t._reducerDefinitionType==="reducerWithPrepare"}function qz({type:t,reducerName:e},n,r,i){if(!i)throw new Error(pr(18));const{payloadCreator:a,fulfilled:l,pending:u,rejected:f,settled:d,options:h}=n,v=i(t,a,h);r.exposeAction(e,v),l&&r.addCase(v.fulfilled,l),u&&r.addCase(v.pending,u),f&&r.addCase(v.rejected,f),d&&r.addMatcher(v.settled,d),r.exposeCaseReducer(e,{fulfilled:l||lf,pending:u||lf,rejected:f||lf,settled:d||lf})}function lf(){}var Vz="task",tO="listener",nO="completed",jx="cancelled",zz=`task-${jx}`,Gz=`task-${nO}`,S0=`${tO}-${jx}`,Hz=`${tO}-${nO}`,$h=class{constructor(t){xg(this,"name","TaskAbortError");xg(this,"message");this.code=t,this.message=`${Vz} ${jx} (reason: ${t})`}},Ux=(t,e)=>{if(typeof t!="function")throw new TypeError(pr(32))},Hf=()=>{},rO=(t,e=Hf)=>(t.catch(e),t),iO=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Do=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Mo=t=>{if(t.aborted){const{reason:e}=t;throw new $h(e)}};function aO(t,e){let n=Hf;return new Promise((r,i)=>{const a=()=>i(new $h(t.reason));if(t.aborted){a();return}n=iO(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Hf})}var Kz=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof $h?"cancelled":"rejected",error:n}}finally{e==null||e()}},Kf=t=>e=>rO(aO(t,e).then(n=>(Mo(t),n))),oO=t=>{const e=Kf(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:nl}=Object,xA={},Fh="listenerMiddleware",Yz=(t,e)=>{const n=r=>iO(t,()=>Do(r,t.reason));return(r,i)=>{Ux(r);const a=new AbortController;n(a);const l=Kz(async()=>{Mo(t),Mo(a.signal);const u=await r({pause:Kf(a.signal),delay:oO(a.signal),signal:a.signal});return Mo(a.signal),u},()=>Do(a,Gz));return i!=null&&i.autoJoin&&e.push(l.catch(Hf)),{result:Kf(t)(l),cancel(){Do(a,zz)}}}},Wz=(t,e)=>{const n=async(r,i)=>{Mo(e);let a=()=>{};const u=[new Promise((f,d)=>{let h=t({predicate:r,effect:(v,x)=>{x.unsubscribe(),f([v,x.getState(),x.getOriginalState()])}});a=()=>{h(),d()}})];i!=null&&u.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await aO(e,Promise.race(u));return Mo(e),f}finally{a()}};return(r,i)=>rO(n(r,i))},sO=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Ir(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(pr(21));return Ux(a),{predicate:i,type:e,effect:a}},lO=nl(t=>{const{type:e,predicate:n,effect:r}=sO(t);return{id:kz(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(pr(22))}}},{withTypes:()=>lO}),bA=(t,e)=>{const{type:n,effect:r,predicate:i}=sO(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},E0=t=>{t.pending.forEach(e=>{Do(e,S0)})},Xz=t=>()=>{t.forEach(E0),t.clear()},_A=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},uO=nl(Ir(`${Fh}/add`),{withTypes:()=>uO}),Jz=Ir(`${Fh}/removeAll`),cO=nl(Ir(`${Fh}/remove`),{withTypes:()=>cO}),Zz=(...t)=>{console.error(`${Fh}/error`,...t)},Tc=(t={})=>{const e=new Map,{extra:n,onError:r=Zz}=t;Ux(r);const i=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),v=>{h.unsubscribe(),v!=null&&v.cancelActive&&E0(h)}),a=h=>{const v=bA(e,h)??lO(h);return i(v)};nl(a,{withTypes:()=>a});const l=h=>{const v=bA(e,h);return v&&(v.unsubscribe(),h.cancelActive&&E0(v)),!!v};nl(l,{withTypes:()=>l});const u=async(h,v,x,_)=>{const S=new AbortController,E=Wz(a,S.signal),C=[];try{h.pending.add(S),await Promise.resolve(h.effect(v,nl({},x,{getOriginalState:_,condition:(T,R)=>E(T,R).then(Boolean),take:E,delay:oO(S.signal),pause:Kf(S.signal),extra:n,signal:S.signal,fork:Yz(S.signal,C),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((T,R,N)=>{T!==S&&(Do(T,S0),N.delete(T))})},cancel:()=>{Do(S,S0),h.pending.delete(S)},throwIfCancelled:()=>{Mo(S.signal)}})))}catch(T){T instanceof $h||_A(r,T,{raisedBy:"effect"})}finally{await Promise.all(C),Do(S,Hz),h.pending.delete(S)}},f=Xz(e);return{middleware:h=>v=>x=>{if(!z2(x))return v(x);if(uO.match(x))return a(x.payload);if(Jz.match(x)){f();return}if(cO.match(x))return l(x.payload);let _=h.getState();const S=()=>{if(_===xA)throw new Error(pr(23));return _};let E;try{if(E=v(x),e.size>0){const C=h.getState(),T=Array.from(e.values());for(const R of T){let N=!1;try{N=R.predicate(x,C,_)}catch(O){N=!1,_A(r,O,{raisedBy:"predicate"})}N&&u(R,x,h,S)}}}finally{_=xA}return E},startListening:a,stopListening:l,clearListeners:f}};function pr(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Qz={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},dO=Ur({name:"chartLayout",initialState:Qz,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){t.margin.top=e.payload.top,t.margin.right=e.payload.right,t.margin.bottom=e.payload.bottom,t.margin.left=e.payload.left},setScale(t,e){t.scale=e.payload}}}),{setMargin:eG,setLayout:tG,setChartSize:nG,setScale:rG}=dO.actions,iG=dO.reducer;function wA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wA(Object(n),!0).forEach(function(r){aG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aG(t,e,n){return(e=oG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oG(t){var e=sG(t,"string");return typeof e=="symbol"?e:e+""}function sG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yf=Math.PI/180,lG=t=>t*180/Math.PI,zn=(t,e,n,r)=>({x:t+Math.cos(-Yf*r)*n,y:e+Math.sin(-Yf*r)*n}),fO=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},uG=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},cG=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,l=uG({x:n,y:r},{x:i,y:a});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,f=Math.acos(u);return r>a&&(f=2*Math.PI-f),{radius:l,angle:lG(f),angleInRadian:f}},dG=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},fG=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),l=Math.min(i,a);return t+l*360},hG=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:a}=cG({x:n,y:r},e),{innerRadius:l,outerRadius:u}=e;if(i<l||i>u||i===0)return null;var{startAngle:f,endAngle:d}=dG(e),h=a,v;if(f<=d){for(;h>d;)h-=360;for(;h<f;)h+=360;v=h>=f&&h<=d}else{for(;h>f;)h-=360;for(;h<d;)h+=360;v=h>=d&&h<=f}return v?SA(SA({},e),{},{radius:i,angle:fG(h,e)}):null};function EA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EA(Object(n),!0).forEach(function(r){mG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mG(t,e,n){return(e=pG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pG(t){var e=gG(t,"string");return typeof e=="symbol"?e:e+""}function gG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dn(t,e,n){return jo(t)||jo(e)?n:Hi(e)?hl(t,e,n):typeof e=="function"?e(t):n}var yG=(t,e,n,r,i)=>{var a,l=-1,u=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(u<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<u;f++){var d=f>0?n[f-1].coordinate:n[u-1].coordinate,h=n[f].coordinate,v=f>=u-1?n[0].coordinate:n[f+1].coordinate,x=void 0;if(mr(h-d)!==mr(v-h)){var _=[];if(mr(v-h)===mr(i[1]-i[0])){x=v;var S=h+i[1]-i[0];_[0]=Math.min(S,(S+d)/2),_[1]=Math.max(S,(S+d)/2)}else{x=d;var E=v+i[1]-i[0];_[0]=Math.min(h,(E+h)/2),_[1]=Math.max(h,(E+h)/2)}var C=[Math.min(h,(x+h)/2),Math.max(h,(x+h)/2)];if(t>C[0]&&t<=C[1]||t>=_[0]&&t<=_[1]){({index:l}=n[f]);break}}else{var T=Math.min(d,v),R=Math.max(d,v);if(t>(T+h)/2&&t<=(R+h)/2){({index:l}=n[f]);break}}}else if(e){for(var N=0;N<u;N++)if(N===0&&t<=(e[N].coordinate+e[N+1].coordinate)/2||N>0&&N<u-1&&t>(e[N].coordinate+e[N-1].coordinate)/2&&t<=(e[N].coordinate+e[N+1].coordinate)/2||N===u-1&&t>(e[N].coordinate+e[N-1].coordinate)/2){({index:l}=e[N]);break}}return l},vG=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:l,layout:u}=e;if((u==="vertical"||u==="horizontal"&&l==="middle")&&a!=="center"&&st(t[a]))return kr(kr({},t),{},{[a]:t[a]+(r||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&l!=="middle"&&st(t[l]))return kr(kr({},t),{},{[l]:t[l]+(i||0)})}return t},Go=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",CA=1e-4,xG=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-CA,a=Math.max(r[0],r[1])+CA,l=t(e[0]),u=t(e[n-1]);(l<i||l>a||u<i||u>a)&&t.domain([e[0],e[n-1]])}},bG=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0,l=0;l<e;++l){var u=Jr(t[l][n][1])?t[l][n][0]:t[l][n][1];u>=0?(t[l][n][0]=i,t[l][n][1]=i+u,i=t[l][n][1]):(t[l][n][0]=a,t[l][n][1]=a+u,a=t[l][n][1])}},_G=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0;a<e;++a){var l=Jr(t[a][n][1])?t[a][n][0]:t[a][n][1];l>=0?(t[a][n][0]=i,t[a][n][1]=i+l,i=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}},wG={sign:bG,expand:oV,none:pl,silhouette:sV,wiggle:lV,positive:_G},SG=(t,e,n)=>{var r=wG[n],i=aV().keys(e).value((a,l)=>+Dn(a,l,0)).order(m0).offset(r);return i(t)},EG=t=>{var e=t.flat(2).filter(st);return[Math.min(...e),Math.max(...e)]},CG=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],TG=(t,e,n)=>{if(t!=null)return CG(Object.keys(t).reduce((r,i)=>{var a=t[i],{stackedData:l}=a,u=l.reduce((f,d)=>{var h=EG(d.slice(e,n+1));return[Math.min(f[0],h[0]),Math.max(f[1],h[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},TA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,AA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,AG=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();return r}if(t&&e&&e.length>=2){for(var i=Oh(e,h=>h.coordinate),a=1/0,l=1,u=i.length;l<u;l++){var f=i[l],d=i[l-1];a=Math.min((f.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return 0};function NA(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return kr(kr({},e),{},{dataKey:n,payload:r,value:i,name:a})}function hO(t,e){if(t)return String(t);if(typeof e=="string")return e}function NG(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var a=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return a?{x:t,y:e}:null}return r?hG({x:t,y:e},r):null}var DG=(t,e,n,r)=>{var i=e.find(d=>d&&d.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var a=i.coordinate,{radius:l}=r;return kr(kr(kr({},r),zn(r.cx,r.cy,l,a)),{},{angle:a,radius:l})}var u=i.coordinate,{angle:f}=r;return kr(kr(kr({},r),zn(r.cx,r.cy,u,f)),{},{angle:f,radius:u})}return{x:0,y:0}},MG=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Ka=t=>t.layout.width,Ya=t=>t.layout.height,OG=t=>t.layout.scale,mO=t=>t.layout.margin,$x=oe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Fx=oe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),pO="data-recharts-item-index",gO="data-recharts-item-data-key",Bh=60;function DA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Aa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DA(Object(n),!0).forEach(function(r){RG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RG(t,e,n){return(e=kG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kG(t){var e=PG(t,"string");return typeof e=="symbol"?e:e+""}function PG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IG=t=>t.brush.height,Jn=oe([Ka,Ya,mO,IG,$x,Fx,rz,iz],(t,e,n,r,i,a,l,u)=>{var f=a.reduce((S,E)=>{var{orientation:C}=E;if(!E.mirror&&!E.hide){var T=typeof E.width=="number"?E.width:Bh;return Aa(Aa({},S),{},{[C]:S[C]+T})}return S},{left:n.left||0,right:n.right||0}),d=i.reduce((S,E)=>{var{orientation:C}=E;return!E.mirror&&!E.hide?Aa(Aa({},S),{},{[C]:hl(S,"".concat(C))+E.height}):S},{top:n.top||0,bottom:n.bottom||0}),h=Aa(Aa({},d),f),v=h.bottom;h.bottom+=r,h=vG(h,l,u);var x=t-h.left-h.right,_=e-h.top-h.bottom;return Aa(Aa({brushBottom:v},h),{},{width:Math.max(x,0),height:Math.max(_,0)})}),LG=oe(Jn,t=>({x:t.left,y:t.top,width:t.width,height:t.height}));oe(Ka,Ya,(t,e)=>({x:0,y:0,width:t,height:e}));var jG=A.createContext(null),Nl=()=>A.useContext(jG)!=null,qh=t=>t.brush,Vh=oe([qh,Jn,mO],(t,e,n)=>({height:t.height,x:st(t.x)?t.x:e.left,y:st(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:st(t.width)?t.width:e.width})),yO=()=>{var t,e=Nl(),n=ot(LG),r=ot(Vh),i=(t=ot(qh))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},UG={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},vO=()=>{var t;return(t=ot(Jn))!==null&&t!==void 0?t:UG},xO=()=>ot(Ka),bO=()=>ot(Ya),$G={top:0,right:0,bottom:0,left:0},FG=()=>{var t;return(t=ot(e=>e.layout.margin))!==null&&t!==void 0?t:$G},Ht=t=>t.layout.layoutType,_O=()=>ot(Ht),BG={settings:{layout:"horizontal",align:"center",verticalAlign:"middle"},size:{width:0,height:0},payload:[]},wO=Ur({name:"legend",initialState:BG,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Ua(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:MA,setLegendSettings:qG,addLegendPayload:VG,removeLegendPayload:zG}=wO.actions,GG=wO.reducer,HG=["contextPayload"];function C0(){return C0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C0.apply(null,arguments)}function OA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OA(Object(n),!0).forEach(function(r){Bx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bx(t,e,n){return(e=KG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KG(t){var e=YG(t,"string");return typeof e=="symbol"?e:e+""}function YG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WG(t,e){if(t==null)return{};var n,r,i=XG(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function XG(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function JG(t){return t.value}function ZG(t){var{contextPayload:e}=t,n=WG(t,HG),r=$2(e,t.payloadUniqBy,JG),i=yl(yl({},n),{},{payload:r});return A.isValidElement(t.content)?A.cloneElement(t.content,i):typeof t.content=="function"?A.createElement(t.content,i):A.createElement(Dx,i)}function QG(t,e,n,r,i,a){var{layout:l,align:u,verticalAlign:f}=e,d,h;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(u==="center"&&l==="vertical"?d={left:((r||0)-a.width)/2}:d=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(f==="middle"?h={top:((i||0)-a.height)/2}:h=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),yl(yl({},d),h)}function eH(t){var e=On();return A.useEffect(()=>{e(qG(t))},[e,t]),null}function tH(t){var e=On();return A.useEffect(()=>(e(MA(t)),()=>{e(MA({width:0,height:0}))}),[e,t]),null}function nH(t){var e=sz(),n=_7(),r=FG(),{width:i,height:a,wrapperStyle:l,portal:u}=t,[f,d]=B2([e]),h=xO(),v=bO(),x=h-(r.left||0)-(r.right||0),_=zh.getWidthOrHeight(t.layout,a,i,x),S=u?l:yl(yl({position:"absolute",width:(_==null?void 0:_.width)||i||"auto",height:(_==null?void 0:_.height)||a||"auto"},QG(l,t,r,h,v,f)),l),E=u??n;if(E==null)return null;var C=A.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:d},A.createElement(eH,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign}),A.createElement(tH,{width:f.width,height:f.height}),A.createElement(ZG,C0({},t,_,{margin:r,chartWidth:h,chartHeight:v,contextPayload:e})));return ID.createPortal(C,E)}class zh extends A.PureComponent{static getWidthOrHeight(e,n,r,i){return e==="vertical"&&st(n)?{height:n}:e==="horizontal"?{width:r||i}:null}render(){return A.createElement(nH,this.props)}}Bx(zh,"displayName","Legend");Bx(zh,"defaultProps",{align:"center",iconSize:14,layout:"horizontal",verticalAlign:"bottom"});function T0(){return T0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T0.apply(null,arguments)}function RA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RA(Object(n),!0).forEach(function(r){rH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rH(t,e,n){return(e=iH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iH(t){var e=aH(t,"string");return typeof e=="symbol"?e:e+""}function aH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oH(t){return Array.isArray(t)&&Hi(t[0])&&Hi(t[1])?t.join(" ~ "):t}var sH=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:l,itemSorter:u,wrapperClassName:f,labelClassName:d,label:h,labelFormatter:v,accessibilityLayer:x=!1}=t,_=()=>{if(a&&a.length){var D={padding:0,margin:0},k=(u?Oh(a,u):a).map((I,j)=>{if(I.type==="none")return null;var U=I.formatter||l||oH,{value:re,name:B}=I,Z=re,me=B;if(U){var H=U(re,B,I,j,a);if(Array.isArray(H))[Z,me]=H;else if(H!=null)Z=H;else return null}var ve=Jy({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:ve},Hi(me)?A.createElement("span",{className:"recharts-tooltip-item-name"},me):null,Hi(me)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},Z),A.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:D},k)}return null},S=Jy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),E=Jy({margin:0},i),C=!jo(h),T=C?h:"",R=xn("recharts-default-tooltip",f),N=xn("recharts-tooltip-label",d);C&&v&&a!==void 0&&a!==null&&(T=v(h,a));var O=x?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",T0({className:R,style:S},O),A.createElement("p",{className:N,style:E},A.isValidElement(T)?T:"".concat(T)),_())},Fu="recharts-tooltip-wrapper",lH={visibility:"hidden"};function uH(t){var{coordinate:e,translateX:n,translateY:r}=t;return xn(Fu,{["".concat(Fu,"-right")]:st(n)&&e&&st(e.x)&&n>=e.x,["".concat(Fu,"-left")]:st(n)&&e&&st(e.x)&&n<e.x,["".concat(Fu,"-bottom")]:st(r)&&e&&st(e.y)&&r>=e.y,["".concat(Fu,"-top")]:st(r)&&e&&st(e.y)&&r<e.y})}function kA(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:l,tooltipDimension:u,viewBox:f,viewBoxDimension:d}=t;if(a&&st(a[r]))return a[r];var h=n[r]-u-(i>0?i:0),v=n[r]+i;if(e[r])return l[r]?h:v;var x=f[r];if(x==null)return 0;if(l[r]){var _=h,S=x;return _<S?Math.max(v,x):Math.max(h,x)}if(d==null)return 0;var E=v+u,C=x+d;return E>C?Math.max(h,x):Math.max(v,x)}function cH(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function dH(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:l,useTranslate3d:u,viewBox:f}=t,d,h,v;return l.height>0&&l.width>0&&n?(h=kA({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),v=kA({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),d=cH({translateX:h,translateY:v,useTranslate3d:u})):d=lH,{cssProperties:d,cssClasses:uH({translateX:h,translateY:v,coordinate:n})}}function PA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PA(Object(n),!0).forEach(function(r){A0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A0(t,e,n){return(e=fH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fH(t){var e=hH(t,"string");return typeof e=="symbol"?e:e+""}function hH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class mH extends A.PureComponent{constructor(){super(...arguments),A0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),A0(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:l,hasPayload:u,isAnimationActive:f,offset:d,position:h,reverseDirection:v,useTranslate3d:x,viewBox:_,wrapperStyle:S,lastBoundingBox:E,innerRef:C,hasPortalFromProps:T}=this.props,{cssClasses:R,cssProperties:N}=dH({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:d,position:h,reverseDirection:v,tooltipBox:{height:E.height,width:E.width},useTranslate3d:x,viewBox:_}),O=T?{}:uf(uf({transition:f&&e?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=uf(uf({},O),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},S);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:R,style:D,ref:C},a)}}var pH=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Gh={isSsr:pH()},SO=()=>ot(t=>t.rootProps.accessibilityLayer);function Zr(t){return Number.isFinite(t)}function Wf(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function N0(){return N0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N0.apply(null,arguments)}function IA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IA(Object(n),!0).forEach(function(r){gH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gH(t,e,n){return(e=yH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yH(t){var e=vH(t,"string");return typeof e=="symbol"?e:e+""}function vH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jA={curveBasisClosed:Y7,curveBasisOpen:W7,curveBasis:K7,curveBumpX:k7,curveBumpY:P7,curveLinearClosed:X7,curveLinear:kh,curveMonotoneX:J7,curveMonotoneY:Z7,curveNatural:Q7,curveStep:eV,curveStepAfter:nV,curveStepBefore:tV},cf=t=>Zr(t.x)&&Zr(t.y),Bu=t=>t.x,qu=t=>t.y,xH=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Cc(t));return(n==="curveMonotone"||n==="curveBump")&&e?jA["".concat(n).concat(e==="vertical"?"Y":"X")]:jA[n]||kh},bH=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,l=xH(e,i),u=a?n.filter(cf):n,f;if(Array.isArray(r)){var d=a?r.filter(v=>cf(v)):r,h=u.map((v,x)=>LA(LA({},v),{},{base:d[x]}));return i==="vertical"?f=rf().y(qu).x1(Bu).x0(v=>v.base.x):f=rf().x(Bu).y1(qu).y0(v=>v.base.y),f.defined(cf).curve(l),f(h)}return i==="vertical"&&st(r)?f=rf().y(qu).x1(Bu).x0(r):st(r)?f=rf().x(Bu).y1(qu).y0(r):f=S2().x(Bu).y(qu),f.defined(cf).curve(l),f(u)},EO=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var a=n&&n.length?bH(t):r;return A.createElement("path",N0({},Mn(t,!1),f7(t),{className:xn("recharts-curve",e),d:a===null?void 0:a,ref:i}))},_H=["x","y","top","left","width","height","className"];function D0(){return D0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D0.apply(null,arguments)}function UA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UA(Object(n),!0).forEach(function(r){SH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SH(t,e,n){return(e=EH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EH(t){var e=CH(t,"string");return typeof e=="symbol"?e:e+""}function CH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TH(t,e){if(t==null)return{};var n,r,i=AH(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function AH(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var NH=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),DH=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:l=0,className:u}=t,f=TH(t,_H),d=wH({x:e,y:n,top:r,left:i,width:a,height:l},f);return!st(e)||!st(n)||!st(a)||!st(l)||!st(r)||!st(i)?null:A.createElement("path",D0({},Mn(d,!0),{className:xn("recharts-cross",u),d:NH(e,n,a,l,r,i)}))};function MH(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function $A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$A(Object(n),!0).forEach(function(r){RH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RH(t,e,n){return(e=kH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kH(t){var e=PH(t,"string");return typeof e=="symbol"?e:e+""}function PH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ho(t,e){var n=OH({},t),r=e,i=Object.keys(e),a=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return a}var Zy={},Qy={},ev={},FA;function IH(){return FA||(FA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}t.isPlainObject=e}(ev)),ev}var BA;function LH(){return BA||(BA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IH(),n=j2(),r=Ox(),i=Rx(),a=Sx();function l(d,h,v){return u(d,h,void 0,void 0,void 0,void 0,v)}function u(d,h,v,x,_,S,E){const C=E(d,h,v,x,_,S);if(C!==void 0)return C;if(typeof d==typeof h)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===h;case"number":return d===h||Object.is(d,h);case"function":return d===h;case"object":return f(d,h,S,E)}return f(d,h,S,E)}function f(d,h,v,x){if(Object.is(d,h))return!0;let _=r.getTag(d),S=r.getTag(h);if(_===i.argumentsTag&&(_=i.objectTag),S===i.argumentsTag&&(S=i.objectTag),_!==S)return!1;switch(_){case i.stringTag:return d.toString()===h.toString();case i.numberTag:{const T=d.valueOf(),R=h.valueOf();return a.eq(T,R)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(d.valueOf(),h.valueOf());case i.regexpTag:return d.source===h.source&&d.flags===h.flags;case i.functionTag:return d===h}v=v??new Map;const E=v.get(d),C=v.get(h);if(E!=null&&C!=null)return E===h;v.set(d,h),v.set(h,d);try{switch(_){case i.mapTag:{if(d.size!==h.size)return!1;for(const[T,R]of d.entries())if(!h.has(T)||!u(R,h.get(T),T,d,h,v,x))return!1;return!0}case i.setTag:{if(d.size!==h.size)return!1;const T=Array.from(d.values()),R=Array.from(h.values());for(let N=0;N<T.length;N++){const O=T[N],D=R.findIndex(k=>u(O,k,void 0,d,h,v,x));if(D===-1)return!1;R.splice(D,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(h)||d.length!==h.length)return!1;for(let T=0;T<d.length;T++)if(!u(d[T],h[T],T,d,h,v,x))return!1;return!0}case i.arrayBufferTag:return d.byteLength!==h.byteLength?!1:f(new Uint8Array(d),new Uint8Array(h),v,x);case i.dataViewTag:return d.byteLength!==h.byteLength||d.byteOffset!==h.byteOffset?!1:f(new Uint8Array(d),new Uint8Array(h),v,x);case i.errorTag:return d.name===h.name&&d.message===h.message;case i.objectTag:{if(!(f(d.constructor,h.constructor,v,x)||e.isPlainObject(d)&&e.isPlainObject(h)))return!1;const R=[...Object.keys(d),...n.getSymbols(d)],N=[...Object.keys(h),...n.getSymbols(h)];if(R.length!==N.length)return!1;for(let O=0;O<R.length;O++){const D=R[O],k=d[D];if(!Object.hasOwn(h,D))return!1;const I=h[D];if(!u(k,I,D,d,h,v,x))return!1}return!0}default:return!1}}finally{v.delete(d),v.delete(h)}}t.isEqualWith=l}(Qy)),Qy}var tv={},qA;function jH(){return qA||(qA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(){}t.noop=e}(tv)),tv}var VA;function UH(){return VA||(VA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LH(),n=jH();function r(i,a){return e.isEqualWith(i,a,n.noop)}t.isEqual=r}(Zy)),Zy}var nv,zA;function $H(){return zA||(zA=1,nv=UH().isEqual),nv}var FH=$H();const BH=Qr(FH);function qH(t){var e={},n=()=>null,r=!1,i=null,a=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[f,...d]=u;if(typeof f=="number"){i=t.setTimeout(a.bind(null,d),f);return}a(f),i=t.setTimeout(a.bind(null,d));return}typeof l=="object"&&(e=l,n(e)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),a(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>t}}var Xf=1e-4,CO=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],TO=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),GA=(t,e)=>n=>{var r=CO(t,e);return TO(r,n)},VH=(t,e)=>n=>{var r=CO(t,e),i=[...r.map((a,l)=>a*l).slice(1),0];return TO(i,n)},HA=function(){for(var e,n,r,i,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var f=l[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([e,r,n,i]=f[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([e,r,n,i]=l);var d=GA(e,n),h=GA(r,i),v=VH(e,n),x=S=>S>1?1:S<0?0:S,_=S=>{for(var E=S>1?1:S,C=E,T=0;T<8;++T){var R=d(C)-E,N=v(C);if(Math.abs(R-E)<Xf||N<Xf)return h(C);C=x(C-R/N)}return h(C)};return _.isStepper=!1,_},zH=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(l,u,f)=>{var d=-(l-u)*n,h=f*r,v=f+(d-h)*i/1e3,x=f*i/1e3+l;return Math.abs(x-u)<Xf&&Math.abs(v)<Xf?[u,0]:[x,v]};return a.isStepper=!0,a.dt=i,a},GH=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return HA(t);case"spring":return zH();default:if(t.split("(")[0]==="cubic-bezier")return HA(t)}return typeof t=="function"?t:null};function KA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KA(Object(n),!0).forEach(function(r){HH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HH(t,e,n){return(e=KH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KH(t){var e=YH(t,"string");return typeof e=="symbol"?e:e+""}function YH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WH=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),XH=(t,e,n)=>t.map(r=>"".concat(WH(r)," ").concat(e,"ms ").concat(n)).join(","),JH=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),uc=(t,e)=>Object.keys(e).reduce((n,r)=>YA(YA({},n),{},{[r]:t(r,e[r])}),{});function WA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WA(Object(n),!0).forEach(function(r){ZH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZH(t,e,n){return(e=QH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QH(t){var e=eK(t,"string");return typeof e=="symbol"?e:e+""}function eK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jf=(t,e,n)=>t+(e-t)*n,M0=t=>{var{from:e,to:n}=t;return e!==n},AO=(t,e,n)=>{var r=uc((i,a)=>{if(M0(a)){var[l,u]=t(a.from,a.to,a.velocity);return $n($n({},a),{},{from:l,velocity:u})}return a},e);return n<1?uc((i,a)=>M0(a)?$n($n({},a),{},{velocity:Jf(a.velocity,r[i].velocity,n),from:Jf(a.from,r[i].from,n)}):a,e):AO(t,r,n-1)};function tK(t,e,n,r,i,a){var l,u=r.reduce((x,_)=>$n($n({},x),{},{[_]:{from:t[_],velocity:0,to:e[_]}}),{}),f=()=>uc((x,_)=>_.from,u),d=()=>!Object.values(u).filter(M0).length,h=null,v=x=>{l||(l=x);var _=x-l,S=_/n.dt;u=AO(n,u,S),i($n($n($n({},t),e),f())),l=x,d()||(h=a.setTimeout(v))};return()=>(h=a.setTimeout(v),()=>{h()})}function nK(t,e,n,r,i,a,l){var u=null,f=i.reduce((v,x)=>$n($n({},v),{},{[x]:[t[x],e[x]]}),{}),d,h=v=>{d||(d=v);var x=(v-d)/r,_=uc((E,C)=>Jf(...C,n(x)),f);if(a($n($n($n({},t),e),_)),x<1)u=l.setTimeout(h);else{var S=uc((E,C)=>Jf(...C,n(1)),f);a($n($n($n({},t),e),S))}};return()=>(u=l.setTimeout(h),()=>{u()})}const rK=(t,e,n,r,i,a)=>{var l=JH(t,e);return n.isStepper===!0?tK(t,e,n,l,i,a):nK(t,e,n,r,l,i,a)};class iK{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=l=>{l-r>=n?e(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}var aK=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function O0(){return O0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O0.apply(null,arguments)}function oK(t,e){if(t==null)return{};var n,r,i=sK(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sK(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function XA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XA(Object(n),!0).forEach(function(r){Eo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eo(t,e,n){return(e=lK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lK(t){var e=uK(t,"string");return typeof e=="symbol"?e:e+""}function uK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cK(){return qH(new iK)}class qx extends A.PureComponent{constructor(e,n){super(e,n),Eo(this,"mounted",!1),Eo(this,"manager",null),Eo(this,"stopJSAnimation",null),Eo(this,"unSubscribe",null);var{isActive:r,attributeName:i,from:a,to:l,children:u,duration:f,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||f<=0){this.state={style:{}},typeof u=="function"&&(this.state={style:l});return}if(a){if(typeof u=="function"){this.state={style:a};return}this.state={style:i?{[i]:a}:a}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:n}=this.props;this.mounted=!0,!(!e||!n)&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:n,canBegin:r,attributeName:i,shouldReAnimate:a,to:l,from:u}=this.props,{style:f}=this.state;if(r){if(!n){var d={style:i?{[i]:l}:l};this.state&&f&&(i&&f[i]!==l||!i&&f!==l)&&this.setState(d);return}if(!(BH(e.to,l)&&e.canBegin&&e.isActive)){var h=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=h||a?u:e.to;if(this.state&&f){var x={style:i?{[i]:v}:v};(i&&f[i]!==v||!i&&f!==v)&&this.setState(x)}this.runAnimation(Na(Na({},this.props),{},{from:v,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:n,to:r,duration:i,easing:a,begin:l,onAnimationEnd:u,onAnimationStart:f}=e,d=rK(n,r,GH(a),i,this.changeStyle,this.manager.getTimeoutController()),h=()=>{this.stopJSAnimation=d()};this.manager.start([f,l,h,i,u])}runAnimation(e){var{begin:n,duration:r,attributeName:i,to:a,easing:l,onAnimationStart:u,onAnimationEnd:f,children:d}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof l=="function"||typeof d=="function"||l==="spring"){this.runJSAnimation(e);return}var h=i?{[i]:a}:a,v=XH(Object.keys(h),r,l);this.manager.start([u,n,Na(Na({},h),{},{transition:v}),r,f])}render(){var e=this.props,{children:n,begin:r,duration:i,attributeName:a,easing:l,isActive:u,from:f,to:d,canBegin:h,onAnimationEnd:v,shouldReAnimate:x,onAnimationReStart:_,animationManager:S}=e,E=oK(e,aK),C=A.Children.count(n),T=this.state.style;if(typeof n=="function")return n(T);if(!u||C===0||i<=0)return n;var R=N=>{var{style:O={},className:D}=N.props,k=A.cloneElement(N,Na(Na({},E),{},{style:Na(Na({},O),T),className:D}));return k};return C===1?R(A.Children.only(n)):A.createElement("div",null,A.Children.map(n,N=>R(N)))}}Eo(qx,"displayName","Animate");Eo(qx,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var dK=A.createContext(null);function cc(t){var e,n,r=A.useContext(dK);return A.createElement(qx,O0({},t,{animationManager:(e=(n=t.animationManager)!==null&&n!==void 0?n:r)!==null&&e!==void 0?e:cK()}))}function Zf(){return Zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zf.apply(null,arguments)}var JA=(t,e,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,d;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],v=0,x=4;v<x;v++)h[v]=i[v]>a?a:i[v];d="M".concat(t,",").concat(e+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(f,",").concat(t+u*h[0],",").concat(e)),d+="L ".concat(t+n-u*h[1],",").concat(e),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(f,`,
        `).concat(t+n,",").concat(e+l*h[1])),d+="L ".concat(t+n,",").concat(e+r-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(f,`,
        `).concat(t+n-u*h[2],",").concat(e+r)),d+="L ".concat(t+u*h[3],",").concat(e+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(f,`,
        `).concat(t,",").concat(e+r-l*h[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var _=Math.min(a,i);d="M ".concat(t,",").concat(e+l*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(f,",").concat(t+u*_,",").concat(e,`
            L `).concat(t+n-u*_,",").concat(e,`
            A `).concat(_,",").concat(_,",0,0,").concat(f,",").concat(t+n,",").concat(e+l*_,`
            L `).concat(t+n,",").concat(e+r-l*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(f,",").concat(t+n-u*_,",").concat(e+r,`
            L `).concat(t+u*_,",").concat(e+r,`
            A `).concat(_,",").concat(_,",0,0,").concat(f,",").concat(t,",").concat(e+r-l*_," Z")}else d="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},fK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},NO=t=>{var e=Ho(t,fK),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var T=n.current.getTotalLength();T&&i(T)}catch{}},[]);var{x:a,y:l,width:u,height:f,radius:d,className:h}=e,{animationEasing:v,animationDuration:x,animationBegin:_,isAnimationActive:S,isUpdateAnimationActive:E}=e;if(a!==+a||l!==+l||u!==+u||f!==+f||u===0||f===0)return null;var C=xn("recharts-rectangle",h);return E?A.createElement(cc,{canBegin:r>0,from:{width:u,height:f,x:a,y:l},to:{width:u,height:f,x:a,y:l},duration:x,animationEasing:v,isActive:E},T=>{var{width:R,height:N,x:O,y:D}=T;return A.createElement(cc,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:_,duration:x,isActive:S,easing:v},A.createElement("path",Zf({},Mn(e,!0),{className:C,d:JA(O,D,R,N,d),ref:n})))}):A.createElement("path",Zf({},Mn(e,!0),{className:C,d:JA(a,l,u,f,d)}))};function DO(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,l=zn(e,n,r,i),u=zn(e,n,r,a);return{points:[l,u],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R0.apply(null,arguments)}var hK=(t,e)=>{var n=mr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},df=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:l,cornerRadius:u,cornerIsExternal:f}=t,d=u*(l?1:-1)+r,h=Math.asin(u/d)/Yf,v=f?i:i+a*h,x=zn(e,n,d,v),_=zn(e,n,r,v),S=f?i-a*h:i,E=zn(e,n,d*Math.cos(h*Yf),S);return{center:x,circleTangency:_,lineTangency:E,theta:h}},MO=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:l}=t,u=hK(a,l),f=a+u,d=zn(e,n,i,a),h=zn(e,n,i,f),v="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>f),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var x=zn(e,n,r,a),_=zn(e,n,r,f);v+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=f),`,
            `).concat(x.x,",").concat(x.y," Z")}else v+="L ".concat(e,",").concat(n," Z");return v},mK=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}=t,h=mr(d-f),{circleTangency:v,lineTangency:x,theta:_}=df({cx:e,cy:n,radius:i,angle:f,sign:h,cornerRadius:a,cornerIsExternal:u}),{circleTangency:S,lineTangency:E,theta:C}=df({cx:e,cy:n,radius:i,angle:d,sign:-h,cornerRadius:a,cornerIsExternal:u}),T=u?Math.abs(f-d):Math.abs(f-d)-_-C;if(T<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):MO({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:d});var R="M ".concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,`
  `);if(r>0){var{circleTangency:N,lineTangency:O,theta:D}=df({cx:e,cy:n,radius:r,angle:f,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:k,lineTangency:I,theta:j}=df({cx:e,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),U=u?Math.abs(f-d):Math.abs(f-d)-D-j;if(U<0&&a===0)return"".concat(R,"L").concat(e,",").concat(n,"Z");R+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(U>180),",").concat(+(h>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,"Z")}else R+="L".concat(e,",").concat(n,"Z");return R},pK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},OO=t=>{var e=Ho(t,pK),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:h,className:v}=e;if(a<i||d===h)return null;var x=xn("recharts-sector",v),_=a-i,S=di(l,_,0,!0),E;return S>0&&Math.abs(d-h)<360?E=mK({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(S,_/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:h}):E=MO({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:h}),A.createElement("path",R0({},Mn(e,!0),{className:x,d:E}))};function gK(t,e,n){var r,i,a,l;if(t==="horizontal")r=e.x,a=r,i=n.top,l=n.top+n.height;else if(t==="vertical")i=e.y,l=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:u,cy:f,innerRadius:d,outerRadius:h,angle:v}=e,x=zn(u,f,d,v),_=zn(u,f,h,v);r=x.x,i=x.y,a=_.x,l=_.y}else return DO(e);return[{x:r,y:i},{x:a,y:l}]}var rv={},iv={},av={},ZA;function yK(){return ZA||(ZA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h2();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n}(av)),av}var QA;function vK(){return QA||(QA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yK();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n}(iv)),iv}var eN;function xK(){return eN||(eN=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y2(),n=vK();function r(i,a,l){l&&typeof l!="number"&&e.isIterateeCall(i,a,l)&&(a=l=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),l=l===void 0?i<a?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((a-i)/(l||1)),0),f=new Array(u);for(let d=0;d<u;d++)f[d]=i,i+=l;return f}t.range=r}(rv)),rv}var ov,tN;function bK(){return tN||(tN=1,ov=xK().range),ov}var _K=bK();const RO=Qr(_K);function $a(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wK(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vx(t){let e,n,r;t.length!==2?(e=$a,n=(u,f)=>$a(t(u),f),r=(u,f)=>t(u)-f):(e=t===$a||t===wK?t:SK,n=t,r=t);function i(u,f,d=0,h=u.length){if(d<h){if(e(f,f)!==0)return h;do{const v=d+h>>>1;n(u[v],f)<0?d=v+1:h=v}while(d<h)}return d}function a(u,f,d=0,h=u.length){if(d<h){if(e(f,f)!==0)return h;do{const v=d+h>>>1;n(u[v],f)<=0?d=v+1:h=v}while(d<h)}return d}function l(u,f,d=0,h=u.length){const v=i(u,f,d,h-1);return v>d&&r(u[v-1],f)>-r(u[v],f)?v-1:v}return{left:i,center:l,right:a}}function SK(){return 0}function kO(t){return t===null?NaN:+t}function*EK(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const CK=Vx($a),Ac=CK.right;Vx(kO).center;class nN extends Map{constructor(e,n=NK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(rN(this,e))}has(e){return super.has(rN(this,e))}set(e,n){return super.set(TK(this,e),n)}delete(e){return super.delete(AK(this,e))}}function rN({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function TK({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function AK({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function NK(t){return t!==null&&typeof t=="object"?t.valueOf():t}function DK(t=$a){if(t===$a)return PO;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function PO(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const MK=Math.sqrt(50),OK=Math.sqrt(10),RK=Math.sqrt(2);function Qf(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),l=a>=MK?10:a>=OK?5:a>=RK?2:1;let u,f,d;return i<0?(d=Math.pow(10,-i)/l,u=Math.round(t*d),f=Math.round(e*d),u/d<t&&++u,f/d>e&&--f,d=-d):(d=Math.pow(10,i)*l,u=Math.round(t/d),f=Math.round(e/d),u*d<t&&++u,f*d>e&&--f),f<u&&.5<=n&&n<2?Qf(t,e,n*2):[u,f,d]}function k0(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,l]=r?Qf(e,t,n):Qf(t,e,n);if(!(a>=i))return[];const u=a-i+1,f=new Array(u);if(r)if(l<0)for(let d=0;d<u;++d)f[d]=(a-d)/-l;else for(let d=0;d<u;++d)f[d]=(a-d)*l;else if(l<0)for(let d=0;d<u;++d)f[d]=(i+d)/-l;else for(let d=0;d<u;++d)f[d]=(i+d)*l;return f}function P0(t,e,n){return e=+e,t=+t,n=+n,Qf(t,e,n)[2]}function I0(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?P0(e,t,n):P0(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function iN(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function aN(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function IO(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?PO:DK(i);r>n;){if(r-n>600){const f=r-n+1,d=e-n+1,h=Math.log(f),v=.5*Math.exp(2*h/3),x=.5*Math.sqrt(h*v*(f-v)/f)*(d-f/2<0?-1:1),_=Math.max(n,Math.floor(e-d*v/f+x)),S=Math.min(r,Math.floor(e+(f-d)*v/f+x));IO(t,e,_,S,i)}const a=t[e];let l=n,u=r;for(Vu(t,n,e),i(t[r],a)>0&&Vu(t,n,r);l<u;){for(Vu(t,l,u),++l,--u;i(t[l],a)<0;)++l;for(;i(t[u],a)>0;)--u}i(t[n],a)===0?Vu(t,n,u):(++u,Vu(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function Vu(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function kK(t,e,n){if(t=Float64Array.from(EK(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return aN(t);if(e>=1)return iN(t);var r,i=(r-1)*e,a=Math.floor(i),l=iN(IO(t,a).subarray(0,a+1)),u=aN(t.subarray(a+1));return l+(u-l)*(i-a)}}function PK(t,e,n=kO){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),l=+n(t[a],a,t),u=+n(t[a+1],a+1,t);return l+(u-l)*(i-a)}}function IK(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function $r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qi(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const L0=Symbol("implicit");function zx(){var t=new nN,e=[],n=[],r=L0;function i(a){let l=t.get(a);if(l===void 0){if(r!==L0)return r;t.set(a,l=e.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new nN;for(const l of a)t.has(l)||t.set(l,e.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return zx(e,n).unknown(r)},$r.apply(i,arguments),i}function Gx(){var t=zx().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,l,u=!1,f=0,d=0,h=.5;delete t.unknown;function v(){var x=e().length,_=i<r,S=_?i:r,E=_?r:i;a=(E-S)/Math.max(1,x-f+d*2),u&&(a=Math.floor(a)),S+=(E-S-a*(x-f))*h,l=a*(1-f),u&&(S=Math.round(S),l=Math.round(l));var C=IK(x).map(function(T){return S+a*T});return n(_?C.reverse():C)}return t.domain=function(x){return arguments.length?(e(x),v()):e()},t.range=function(x){return arguments.length?([r,i]=x,r=+r,i=+i,v()):[r,i]},t.rangeRound=function(x){return[r,i]=x,r=+r,i=+i,u=!0,v()},t.bandwidth=function(){return l},t.step=function(){return a},t.round=function(x){return arguments.length?(u=!!x,v()):u},t.padding=function(x){return arguments.length?(f=Math.min(1,d=+x),v()):f},t.paddingInner=function(x){return arguments.length?(f=Math.min(1,x),v()):f},t.paddingOuter=function(x){return arguments.length?(d=+x,v()):d},t.align=function(x){return arguments.length?(h=Math.max(0,Math.min(1,x)),v()):h},t.copy=function(){return Gx(e(),[r,i]).round(u).paddingInner(f).paddingOuter(d).align(h)},$r.apply(v(),arguments)}function LO(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return LO(e())},t}function LK(){return LO(Gx.apply(null,arguments).paddingInner(1))}function Hx(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function jO(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Nc(){}var dc=.7,eh=1/dc,rl="\\s*([+-]?\\d+)\\s*",fc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jK=/^#([0-9a-f]{3,8})$/,UK=new RegExp(`^rgb\\(${rl},${rl},${rl}\\)$`),$K=new RegExp(`^rgb\\(${fi},${fi},${fi}\\)$`),FK=new RegExp(`^rgba\\(${rl},${rl},${rl},${fc}\\)$`),BK=new RegExp(`^rgba\\(${fi},${fi},${fi},${fc}\\)$`),qK=new RegExp(`^hsl\\(${fc},${fi},${fi}\\)$`),VK=new RegExp(`^hsla\\(${fc},${fi},${fi},${fc}\\)$`),oN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hx(Nc,hc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:sN,formatHex:sN,formatHex8:zK,formatHsl:GK,formatRgb:lN,toString:lN});function sN(){return this.rgb().formatHex()}function zK(){return this.rgb().formatHex8()}function GK(){return UO(this).formatHsl()}function lN(){return this.rgb().formatRgb()}function hc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=jK.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?uN(e):n===3?new ir(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ff(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ff(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=UK.exec(t))?new ir(e[1],e[2],e[3],1):(e=$K.exec(t))?new ir(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=FK.exec(t))?ff(e[1],e[2],e[3],e[4]):(e=BK.exec(t))?ff(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=qK.exec(t))?fN(e[1],e[2]/100,e[3]/100,1):(e=VK.exec(t))?fN(e[1],e[2]/100,e[3]/100,e[4]):oN.hasOwnProperty(t)?uN(oN[t]):t==="transparent"?new ir(NaN,NaN,NaN,0):null}function uN(t){return new ir(t>>16&255,t>>8&255,t&255,1)}function ff(t,e,n,r){return r<=0&&(t=e=n=NaN),new ir(t,e,n,r)}function HK(t){return t instanceof Nc||(t=hc(t)),t?(t=t.rgb(),new ir(t.r,t.g,t.b,t.opacity)):new ir}function j0(t,e,n,r){return arguments.length===1?HK(t):new ir(t,e,n,r??1)}function ir(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Hx(ir,j0,jO(Nc,{brighter(t){return t=t==null?eh:Math.pow(eh,t),new ir(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dc:Math.pow(dc,t),new ir(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ir(Oo(this.r),Oo(this.g),Oo(this.b),th(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cN,formatHex:cN,formatHex8:KK,formatRgb:dN,toString:dN}));function cN(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function KK(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function dN(){const t=th(this.opacity);return`${t===1?"rgb(":"rgba("}${Oo(this.r)}, ${Oo(this.g)}, ${Oo(this.b)}${t===1?")":`, ${t})`}`}function th(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Oo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Co(t){return t=Oo(t),(t<16?"0":"")+t.toString(16)}function fN(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Yr(t,e,n,r)}function UO(t){if(t instanceof Yr)return new Yr(t.h,t.s,t.l,t.opacity);if(t instanceof Nc||(t=hc(t)),!t)return new Yr;if(t instanceof Yr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),l=NaN,u=a-i,f=(a+i)/2;return u?(e===a?l=(n-r)/u+(n<r)*6:n===a?l=(r-e)/u+2:l=(e-n)/u+4,u/=f<.5?a+i:2-a-i,l*=60):u=f>0&&f<1?0:l,new Yr(l,u,f,t.opacity)}function YK(t,e,n,r){return arguments.length===1?UO(t):new Yr(t,e,n,r??1)}function Yr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Hx(Yr,YK,jO(Nc,{brighter(t){return t=t==null?eh:Math.pow(eh,t),new Yr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dc:Math.pow(dc,t),new Yr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ir(sv(t>=240?t-240:t+120,i,r),sv(t,i,r),sv(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Yr(hN(this.h),hf(this.s),hf(this.l),th(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=th(this.opacity);return`${t===1?"hsl(":"hsla("}${hN(this.h)}, ${hf(this.s)*100}%, ${hf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hN(t){return t=(t||0)%360,t<0?t+360:t}function hf(t){return Math.max(0,Math.min(1,t||0))}function sv(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Kx=t=>()=>t;function WK(t,e){return function(n){return t+n*e}}function XK(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function JK(t){return(t=+t)==1?$O:function(e,n){return n-e?XK(e,n,t):Kx(isNaN(e)?n:e)}}function $O(t,e){var n=e-t;return n?WK(t,n):Kx(isNaN(t)?e:t)}const mN=function t(e){var n=JK(e);function r(i,a){var l=n((i=j0(i)).r,(a=j0(a)).r),u=n(i.g,a.g),f=n(i.b,a.b),d=$O(i.opacity,a.opacity);return function(h){return i.r=l(h),i.g=u(h),i.b=f(h),i.opacity=d(h),i+""}}return r.gamma=t,r}(1);function ZK(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function QK(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function eY(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=Dl(t[l],e[l]);for(;l<n;++l)a[l]=e[l];return function(u){for(l=0;l<r;++l)a[l]=i[l](u);return a}}function tY(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function nh(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function nY(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Dl(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var U0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lv=new RegExp(U0.source,"g");function rY(t){return function(){return t}}function iY(t){return function(e){return t(e)+""}}function aY(t,e){var n=U0.lastIndex=lv.lastIndex=0,r,i,a,l=-1,u=[],f=[];for(t=t+"",e=e+"";(r=U0.exec(t))&&(i=lv.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),u[l]?u[l]+=a:u[++l]=a),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,f.push({i:l,x:nh(r,i)})),n=lv.lastIndex;return n<e.length&&(a=e.slice(n),u[l]?u[l]+=a:u[++l]=a),u.length<2?f[0]?iY(f[0].x):rY(e):(e=f.length,function(d){for(var h=0,v;h<e;++h)u[(v=f[h]).i]=v.x(d);return u.join("")})}function Dl(t,e){var n=typeof e,r;return e==null||n==="boolean"?Kx(e):(n==="number"?nh:n==="string"?(r=hc(e))?(e=r,mN):aY:e instanceof hc?mN:e instanceof Date?tY:QK(e)?ZK:Array.isArray(e)?eY:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?nY:nh)(t,e)}function Yx(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function oY(t,e){e===void 0&&(e=t,t=Dl);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return a[u](l-u)}}function sY(t){return function(){return t}}function rh(t){return+t}var pN=[0,1];function Wn(t){return t}function $0(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:sY(isNaN(e)?NaN:.5)}function lY(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function uY(t,e,n){var r=t[0],i=t[1],a=e[0],l=e[1];return i<r?(r=$0(i,r),a=n(l,a)):(r=$0(r,i),a=n(a,l)),function(u){return a(r(u))}}function cY(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)i[l]=$0(t[l],t[l+1]),a[l]=n(e[l],e[l+1]);return function(u){var f=Ac(t,u,1,r)-1;return a[f](i[f](u))}}function Dc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Hh(){var t=pN,e=pN,n=Dl,r,i,a,l=Wn,u,f,d;function h(){var x=Math.min(t.length,e.length);return l!==Wn&&(l=lY(t[0],t[x-1])),u=x>2?cY:uY,f=d=null,v}function v(x){return x==null||isNaN(x=+x)?a:(f||(f=u(t.map(r),e,n)))(r(l(x)))}return v.invert=function(x){return l(i((d||(d=u(e,t.map(r),nh)))(x)))},v.domain=function(x){return arguments.length?(t=Array.from(x,rh),h()):t.slice()},v.range=function(x){return arguments.length?(e=Array.from(x),h()):e.slice()},v.rangeRound=function(x){return e=Array.from(x),n=Yx,h()},v.clamp=function(x){return arguments.length?(l=x?!0:Wn,h()):l!==Wn},v.interpolate=function(x){return arguments.length?(n=x,h()):n},v.unknown=function(x){return arguments.length?(a=x,v):a},function(x,_){return r=x,i=_,h()}}function Wx(){return Hh()(Wn,Wn)}function dY(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ih(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function vl(t){return t=ih(Math.abs(t)),t?t[1]:NaN}function fY(t,e){return function(n,r){for(var i=n.length,a=[],l=0,u=t[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),a.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=t[l=(l+1)%t.length];return a.reverse().join(e)}}function hY(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var mY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mc(t){if(!(e=mY.exec(t)))throw new Error("invalid format: "+t);var e;return new Xx({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}mc.prototype=Xx.prototype;function Xx(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Xx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pY(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var FO;function gY(t,e){var n=ih(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(FO=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ih(t,Math.max(0,e+a-1))[0]}function gN(t,e){var n=ih(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const yN={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:dY,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gN(t*100,e),r:gN,s:gY,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vN(t){return t}var xN=Array.prototype.map,bN=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function yY(t){var e=t.grouping===void 0||t.thousands===void 0?vN:fY(xN.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?vN:hY(xN.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function d(v){v=mc(v);var x=v.fill,_=v.align,S=v.sign,E=v.symbol,C=v.zero,T=v.width,R=v.comma,N=v.precision,O=v.trim,D=v.type;D==="n"?(R=!0,D="g"):yN[D]||(N===void 0&&(N=12),O=!0,D="g"),(C||x==="0"&&_==="=")&&(C=!0,x="0",_="=");var k=E==="$"?n:E==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",I=E==="$"?r:/[%p]/.test(D)?l:"",j=yN[D],U=/[defgprs%]/.test(D);N=N===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function re(B){var Z=k,me=I,H,ve,z;if(D==="c")me=j(B)+me,B="";else{B=+B;var K=B<0||1/B<0;if(B=isNaN(B)?f:j(Math.abs(B),N),O&&(B=pY(B)),K&&+B==0&&S!=="+"&&(K=!1),Z=(K?S==="("?S:u:S==="-"||S==="("?"":S)+Z,me=(D==="s"?bN[8+FO/3]:"")+me+(K&&S==="("?")":""),U){for(H=-1,ve=B.length;++H<ve;)if(z=B.charCodeAt(H),48>z||z>57){me=(z===46?i+B.slice(H+1):B.slice(H))+me,B=B.slice(0,H);break}}}R&&!C&&(B=e(B,1/0));var ye=Z.length+B.length+me.length,Ee=ye<T?new Array(T-ye+1).join(x):"";switch(R&&C&&(B=e(Ee+B,Ee.length?T-me.length:1/0),Ee=""),_){case"<":B=Z+B+me+Ee;break;case"=":B=Z+Ee+B+me;break;case"^":B=Ee.slice(0,ye=Ee.length>>1)+Z+B+me+Ee.slice(ye);break;default:B=Ee+Z+B+me;break}return a(B)}return re.toString=function(){return v+""},re}function h(v,x){var _=d((v=mc(v),v.type="f",v)),S=Math.max(-8,Math.min(8,Math.floor(vl(x)/3)))*3,E=Math.pow(10,-S),C=bN[8+S/3];return function(T){return _(E*T)+C}}return{format:d,formatPrefix:h}}var mf,Jx,BO;vY({thousands:",",grouping:[3],currency:["$",""]});function vY(t){return mf=yY(t),Jx=mf.format,BO=mf.formatPrefix,mf}function xY(t){return Math.max(0,-vl(Math.abs(t)))}function bY(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vl(e)/3)))*3-vl(Math.abs(t)))}function _Y(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vl(e)-vl(t))+1}function qO(t,e,n,r){var i=I0(t,e,n),a;switch(r=mc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=bY(i,l))&&(r.precision=a),BO(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=_Y(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=xY(i))&&(r.precision=a-(r.type==="%")*2);break}}return Jx(r)}function Wa(t){var e=t.domain;return t.ticks=function(n){var r=e();return k0(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return qO(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,l=r[i],u=r[a],f,d,h=10;for(u<l&&(d=l,l=u,u=d,d=i,i=a,a=d);h-- >0;){if(d=P0(l,u,n),d===f)return r[i]=l,r[a]=u,e(r);if(d>0)l=Math.floor(l/d)*d,u=Math.ceil(u/d)*d;else if(d<0)l=Math.ceil(l*d)/d,u=Math.floor(u*d)/d;else break;f=d}return t},t}function VO(){var t=Wx();return t.copy=function(){return Dc(t,VO())},$r.apply(t,arguments),Wa(t)}function zO(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,rh),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return zO(t).unknown(e)},t=arguments.length?Array.from(t,rh):[0,1],Wa(n)}function GO(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],l;return a<i&&(l=n,n=r,r=l,l=i,i=a,a=l),t[n]=e.floor(i),t[r]=e.ceil(a),t}function _N(t){return Math.log(t)}function wN(t){return Math.exp(t)}function wY(t){return-Math.log(-t)}function SY(t){return-Math.exp(-t)}function EY(t){return isFinite(t)?+("1e"+t):t<0?0:t}function CY(t){return t===10?EY:t===Math.E?Math.exp:e=>Math.pow(t,e)}function TY(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function SN(t){return(e,n)=>-t(-e,n)}function Zx(t){const e=t(_N,wN),n=e.domain;let r=10,i,a;function l(){return i=TY(r),a=CY(r),n()[0]<0?(i=SN(i),a=SN(a),t(wY,SY)):t(_N,wN),e}return e.base=function(u){return arguments.length?(r=+u,l()):r},e.domain=function(u){return arguments.length?(n(u),l()):n()},e.ticks=u=>{const f=n();let d=f[0],h=f[f.length-1];const v=h<d;v&&([d,h]=[h,d]);let x=i(d),_=i(h),S,E;const C=u==null?10:+u;let T=[];if(!(r%1)&&_-x<C){if(x=Math.floor(x),_=Math.ceil(_),d>0){for(;x<=_;++x)for(S=1;S<r;++S)if(E=x<0?S/a(-x):S*a(x),!(E<d)){if(E>h)break;T.push(E)}}else for(;x<=_;++x)for(S=r-1;S>=1;--S)if(E=x>0?S/a(-x):S*a(x),!(E<d)){if(E>h)break;T.push(E)}T.length*2<C&&(T=k0(d,h,C))}else T=k0(x,_,Math.min(_-x,C)).map(a);return v?T.reverse():T},e.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=mc(f)).precision==null&&(f.trim=!0),f=Jx(f)),u===1/0)return f;const d=Math.max(1,r*u/e.ticks().length);return h=>{let v=h/a(Math.round(i(h)));return v*r<r-.5&&(v*=r),v<=d?f(h):""}},e.nice=()=>n(GO(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),e}function HO(){const t=Zx(Hh()).domain([1,10]);return t.copy=()=>Dc(t,HO()).base(t.base()),$r.apply(t,arguments),t}function EN(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function CN(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Qx(t){var e=1,n=t(EN(e),CN(e));return n.constant=function(r){return arguments.length?t(EN(e=+r),CN(e)):e},Wa(n)}function KO(){var t=Qx(Hh());return t.copy=function(){return Dc(t,KO()).constant(t.constant())},$r.apply(t,arguments)}function TN(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function AY(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function NY(t){return t<0?-t*t:t*t}function eb(t){var e=t(Wn,Wn),n=1;function r(){return n===1?t(Wn,Wn):n===.5?t(AY,NY):t(TN(n),TN(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Wa(e)}function tb(){var t=eb(Hh());return t.copy=function(){return Dc(t,tb()).exponent(t.exponent())},$r.apply(t,arguments),t}function DY(){return tb.apply(null,arguments).exponent(.5)}function AN(t){return Math.sign(t)*t*t}function MY(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function YO(){var t=Wx(),e=[0,1],n=!1,r;function i(a){var l=MY(t(a));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(a){return t.invert(AN(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,rh)).map(AN)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return YO(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},$r.apply(i,arguments),Wa(i)}function WO(){var t=[],e=[],n=[],r;function i(){var l=0,u=Math.max(1,e.length);for(n=new Array(u-1);++l<u;)n[l-1]=PK(t,l/u);return a}function a(l){return l==null||isNaN(l=+l)?r:e[Ac(n,l)]}return a.invertExtent=function(l){var u=e.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},a.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let u of l)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort($a),i()},a.range=function(l){return arguments.length?(e=Array.from(l),i()):e.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return WO().domain(t).range(e).unknown(r)},$r.apply(a,arguments)}function XO(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function l(f){return f!=null&&f<=f?i[Ac(r,f,0,n)]:a}function u(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*e-(f-n)*t)/(n+1);return l}return l.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,u()):[t,e]},l.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,u()):i.slice()},l.invertExtent=function(f){var d=i.indexOf(f);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},l.unknown=function(f){return arguments.length&&(a=f),l},l.thresholds=function(){return r.slice()},l.copy=function(){return XO().domain([t,e]).range(i).unknown(a)},$r.apply(Wa(l),arguments)}function JO(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Ac(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var l=e.indexOf(a);return[t[l-1],t[l]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return JO().domain(t).range(e).unknown(n)},$r.apply(i,arguments)}const uv=new Date,cv=new Date;function bn(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const l=i(a),u=i.ceil(a);return a-l<u-a?l:u},i.offset=(a,l)=>(e(a=new Date(+a),l==null?1:Math.floor(l)),a),i.range=(a,l,u)=>{const f=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<l)||!(u>0))return f;let d;do f.push(d=new Date(+a)),e(a,u),t(a);while(d<a&&a<l);return f},i.filter=a=>bn(l=>{if(l>=l)for(;t(l),!a(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;e(l,-1),!a(l););else for(;--u>=0;)for(;e(l,1),!a(l););}),n&&(i.count=(a,l)=>(uv.setTime(+a),cv.setTime(+l),t(uv),t(cv),Math.floor(n(uv,cv))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?l=>r(l)%a===0:l=>i.count(0,l)%a===0):i)),i}const ah=bn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ah.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?bn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ah);ah.range;const Bi=1e3,Pr=Bi*60,qi=Pr*60,Yi=qi*24,nb=Yi*7,NN=Yi*30,dv=Yi*365,To=bn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Bi)},(t,e)=>(e-t)/Bi,t=>t.getUTCSeconds());To.range;const rb=bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bi)},(t,e)=>{t.setTime(+t+e*Pr)},(t,e)=>(e-t)/Pr,t=>t.getMinutes());rb.range;const ib=bn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Pr)},(t,e)=>(e-t)/Pr,t=>t.getUTCMinutes());ib.range;const ab=bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bi-t.getMinutes()*Pr)},(t,e)=>{t.setTime(+t+e*qi)},(t,e)=>(e-t)/qi,t=>t.getHours());ab.range;const ob=bn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*qi)},(t,e)=>(e-t)/qi,t=>t.getUTCHours());ob.range;const Mc=bn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pr)/Yi,t=>t.getDate()-1);Mc.range;const Kh=bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Yi,t=>t.getUTCDate()-1);Kh.range;const ZO=bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Yi,t=>Math.floor(t/Yi));ZO.range;function Ko(t){return bn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Pr)/nb)}const Yh=Ko(0),oh=Ko(1),OY=Ko(2),RY=Ko(3),xl=Ko(4),kY=Ko(5),PY=Ko(6);Yh.range;oh.range;OY.range;RY.range;xl.range;kY.range;PY.range;function Yo(t){return bn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/nb)}const Wh=Yo(0),sh=Yo(1),IY=Yo(2),LY=Yo(3),bl=Yo(4),jY=Yo(5),UY=Yo(6);Wh.range;sh.range;IY.range;LY.range;bl.range;jY.range;UY.range;const sb=bn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sb.range;const lb=bn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());lb.range;const Wi=bn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Wi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:bn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Wi.range;const Xi=bn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Xi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:bn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Xi.range;function QO(t,e,n,r,i,a){const l=[[To,1,Bi],[To,5,5*Bi],[To,15,15*Bi],[To,30,30*Bi],[a,1,Pr],[a,5,5*Pr],[a,15,15*Pr],[a,30,30*Pr],[i,1,qi],[i,3,3*qi],[i,6,6*qi],[i,12,12*qi],[r,1,Yi],[r,2,2*Yi],[n,1,nb],[e,1,NN],[e,3,3*NN],[t,1,dv]];function u(d,h,v){const x=h<d;x&&([d,h]=[h,d]);const _=v&&typeof v.range=="function"?v:f(d,h,v),S=_?_.range(d,+h+1):[];return x?S.reverse():S}function f(d,h,v){const x=Math.abs(h-d)/v,_=Vx(([,,C])=>C).right(l,x);if(_===l.length)return t.every(I0(d/dv,h/dv,v));if(_===0)return ah.every(Math.max(I0(d,h,v),1));const[S,E]=l[x/l[_-1][2]<l[_][2]/x?_-1:_];return S.every(E)}return[u,f]}const[$Y,FY]=QO(Xi,lb,Wh,ZO,ob,ib),[BY,qY]=QO(Wi,sb,Yh,Mc,ab,rb);function fv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function hv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function zu(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function VY(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,l=t.shortDays,u=t.months,f=t.shortMonths,d=Gu(i),h=Hu(i),v=Gu(a),x=Hu(a),_=Gu(l),S=Hu(l),E=Gu(u),C=Hu(u),T=Gu(f),R=Hu(f),N={a:K,A:ye,b:Ee,B:L,c:null,d:PN,e:PN,f:fW,g:wW,G:EW,H:uW,I:cW,j:dW,L:eR,m:hW,M:mW,p:Y,q:te,Q:jN,s:UN,S:pW,u:gW,U:yW,V:vW,w:xW,W:bW,x:null,X:null,y:_W,Y:SW,Z:CW,"%":LN},O={a:ie,A:we,b:ge,B:ue,c:null,d:IN,e:IN,f:DW,g:$W,G:BW,H:TW,I:AW,j:NW,L:nR,m:MW,M:OW,p:se,q:pe,Q:jN,s:UN,S:RW,u:kW,U:PW,V:IW,w:LW,W:jW,x:null,X:null,y:UW,Y:FW,Z:qW,"%":LN},D={a:re,A:B,b:Z,B:me,c:H,d:RN,e:RN,f:aW,g:ON,G:MN,H:kN,I:kN,j:tW,L:iW,m:eW,M:nW,p:U,q:QY,Q:sW,s:lW,S:rW,u:YY,U:WY,V:XY,w:KY,W:JY,x:ve,X:z,y:ON,Y:MN,Z:ZY,"%":oW};N.x=k(n,N),N.X=k(r,N),N.c=k(e,N),O.x=k(n,O),O.X=k(r,O),O.c=k(e,O);function k(V,_e){return function(W){var F=[],xe=-1,Q=0,be=V.length,Me,ae,Le;for(W instanceof Date||(W=new Date(+W));++xe<be;)V.charCodeAt(xe)===37&&(F.push(V.slice(Q,xe)),(ae=DN[Me=V.charAt(++xe)])!=null?Me=V.charAt(++xe):ae=Me==="e"?" ":"0",(Le=_e[Me])&&(Me=Le(W,ae)),F.push(Me),Q=xe+1);return F.push(V.slice(Q,xe)),F.join("")}}function I(V,_e){return function(W){var F=zu(1900,void 0,1),xe=j(F,V,W+="",0),Q,be;if(xe!=W.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(_e&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(Q=hv(zu(F.y,0,1)),be=Q.getUTCDay(),Q=be>4||be===0?sh.ceil(Q):sh(Q),Q=Kh.offset(Q,(F.V-1)*7),F.y=Q.getUTCFullYear(),F.m=Q.getUTCMonth(),F.d=Q.getUTCDate()+(F.w+6)%7):(Q=fv(zu(F.y,0,1)),be=Q.getDay(),Q=be>4||be===0?oh.ceil(Q):oh(Q),Q=Mc.offset(Q,(F.V-1)*7),F.y=Q.getFullYear(),F.m=Q.getMonth(),F.d=Q.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),be="Z"in F?hv(zu(F.y,0,1)).getUTCDay():fv(zu(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(be+5)%7:F.w+F.U*7-(be+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,hv(F)):fv(F)}}function j(V,_e,W,F){for(var xe=0,Q=_e.length,be=W.length,Me,ae;xe<Q;){if(F>=be)return-1;if(Me=_e.charCodeAt(xe++),Me===37){if(Me=_e.charAt(xe++),ae=D[Me in DN?_e.charAt(xe++):Me],!ae||(F=ae(V,W,F))<0)return-1}else if(Me!=W.charCodeAt(F++))return-1}return F}function U(V,_e,W){var F=d.exec(_e.slice(W));return F?(V.p=h.get(F[0].toLowerCase()),W+F[0].length):-1}function re(V,_e,W){var F=_.exec(_e.slice(W));return F?(V.w=S.get(F[0].toLowerCase()),W+F[0].length):-1}function B(V,_e,W){var F=v.exec(_e.slice(W));return F?(V.w=x.get(F[0].toLowerCase()),W+F[0].length):-1}function Z(V,_e,W){var F=T.exec(_e.slice(W));return F?(V.m=R.get(F[0].toLowerCase()),W+F[0].length):-1}function me(V,_e,W){var F=E.exec(_e.slice(W));return F?(V.m=C.get(F[0].toLowerCase()),W+F[0].length):-1}function H(V,_e,W){return j(V,e,_e,W)}function ve(V,_e,W){return j(V,n,_e,W)}function z(V,_e,W){return j(V,r,_e,W)}function K(V){return l[V.getDay()]}function ye(V){return a[V.getDay()]}function Ee(V){return f[V.getMonth()]}function L(V){return u[V.getMonth()]}function Y(V){return i[+(V.getHours()>=12)]}function te(V){return 1+~~(V.getMonth()/3)}function ie(V){return l[V.getUTCDay()]}function we(V){return a[V.getUTCDay()]}function ge(V){return f[V.getUTCMonth()]}function ue(V){return u[V.getUTCMonth()]}function se(V){return i[+(V.getUTCHours()>=12)]}function pe(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var _e=k(V+="",N);return _e.toString=function(){return V},_e},parse:function(V){var _e=I(V+="",!1);return _e.toString=function(){return V},_e},utcFormat:function(V){var _e=k(V+="",O);return _e.toString=function(){return V},_e},utcParse:function(V){var _e=I(V+="",!0);return _e.toString=function(){return V},_e}}}var DN={"-":"",_:" ",0:"0"},Rn=/^\s*\d+/,zY=/^%/,GY=/[\\^$*+?|[\]().{}]/g;function pt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function HY(t){return t.replace(GY,"\\$&")}function Gu(t){return new RegExp("^(?:"+t.map(HY).join("|")+")","i")}function Hu(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function KY(t,e,n){var r=Rn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function YY(t,e,n){var r=Rn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function WY(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function XY(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function JY(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function MN(t,e,n){var r=Rn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ON(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ZY(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function QY(t,e,n){var r=Rn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function eW(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function RN(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function tW(t,e,n){var r=Rn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function kN(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function nW(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rW(t,e,n){var r=Rn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function iW(t,e,n){var r=Rn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function aW(t,e,n){var r=Rn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function oW(t,e,n){var r=zY.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function sW(t,e,n){var r=Rn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function lW(t,e,n){var r=Rn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function PN(t,e){return pt(t.getDate(),e,2)}function uW(t,e){return pt(t.getHours(),e,2)}function cW(t,e){return pt(t.getHours()%12||12,e,2)}function dW(t,e){return pt(1+Mc.count(Wi(t),t),e,3)}function eR(t,e){return pt(t.getMilliseconds(),e,3)}function fW(t,e){return eR(t,e)+"000"}function hW(t,e){return pt(t.getMonth()+1,e,2)}function mW(t,e){return pt(t.getMinutes(),e,2)}function pW(t,e){return pt(t.getSeconds(),e,2)}function gW(t){var e=t.getDay();return e===0?7:e}function yW(t,e){return pt(Yh.count(Wi(t)-1,t),e,2)}function tR(t){var e=t.getDay();return e>=4||e===0?xl(t):xl.ceil(t)}function vW(t,e){return t=tR(t),pt(xl.count(Wi(t),t)+(Wi(t).getDay()===4),e,2)}function xW(t){return t.getDay()}function bW(t,e){return pt(oh.count(Wi(t)-1,t),e,2)}function _W(t,e){return pt(t.getFullYear()%100,e,2)}function wW(t,e){return t=tR(t),pt(t.getFullYear()%100,e,2)}function SW(t,e){return pt(t.getFullYear()%1e4,e,4)}function EW(t,e){var n=t.getDay();return t=n>=4||n===0?xl(t):xl.ceil(t),pt(t.getFullYear()%1e4,e,4)}function CW(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+pt(e/60|0,"0",2)+pt(e%60,"0",2)}function IN(t,e){return pt(t.getUTCDate(),e,2)}function TW(t,e){return pt(t.getUTCHours(),e,2)}function AW(t,e){return pt(t.getUTCHours()%12||12,e,2)}function NW(t,e){return pt(1+Kh.count(Xi(t),t),e,3)}function nR(t,e){return pt(t.getUTCMilliseconds(),e,3)}function DW(t,e){return nR(t,e)+"000"}function MW(t,e){return pt(t.getUTCMonth()+1,e,2)}function OW(t,e){return pt(t.getUTCMinutes(),e,2)}function RW(t,e){return pt(t.getUTCSeconds(),e,2)}function kW(t){var e=t.getUTCDay();return e===0?7:e}function PW(t,e){return pt(Wh.count(Xi(t)-1,t),e,2)}function rR(t){var e=t.getUTCDay();return e>=4||e===0?bl(t):bl.ceil(t)}function IW(t,e){return t=rR(t),pt(bl.count(Xi(t),t)+(Xi(t).getUTCDay()===4),e,2)}function LW(t){return t.getUTCDay()}function jW(t,e){return pt(sh.count(Xi(t)-1,t),e,2)}function UW(t,e){return pt(t.getUTCFullYear()%100,e,2)}function $W(t,e){return t=rR(t),pt(t.getUTCFullYear()%100,e,2)}function FW(t,e){return pt(t.getUTCFullYear()%1e4,e,4)}function BW(t,e){var n=t.getUTCDay();return t=n>=4||n===0?bl(t):bl.ceil(t),pt(t.getUTCFullYear()%1e4,e,4)}function qW(){return"+0000"}function LN(){return"%"}function jN(t){return+t}function UN(t){return Math.floor(+t/1e3)}var Hs,iR,aR;VW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function VW(t){return Hs=VY(t),iR=Hs.format,Hs.parse,aR=Hs.utcFormat,Hs.utcParse,Hs}function zW(t){return new Date(t)}function GW(t){return t instanceof Date?+t:+new Date(+t)}function ub(t,e,n,r,i,a,l,u,f,d){var h=Wx(),v=h.invert,x=h.domain,_=d(".%L"),S=d(":%S"),E=d("%I:%M"),C=d("%I %p"),T=d("%a %d"),R=d("%b %d"),N=d("%B"),O=d("%Y");function D(k){return(f(k)<k?_:u(k)<k?S:l(k)<k?E:a(k)<k?C:r(k)<k?i(k)<k?T:R:n(k)<k?N:O)(k)}return h.invert=function(k){return new Date(v(k))},h.domain=function(k){return arguments.length?x(Array.from(k,GW)):x().map(zW)},h.ticks=function(k){var I=x();return t(I[0],I[I.length-1],k??10)},h.tickFormat=function(k,I){return I==null?D:d(I)},h.nice=function(k){var I=x();return(!k||typeof k.range!="function")&&(k=e(I[0],I[I.length-1],k??10)),k?x(GO(I,k)):h},h.copy=function(){return Dc(h,ub(t,e,n,r,i,a,l,u,f,d))},h}function HW(){return $r.apply(ub(BY,qY,Wi,sb,Yh,Mc,ab,rb,To,iR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function KW(){return $r.apply(ub($Y,FY,Xi,lb,Wh,Kh,ob,ib,To,aR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xh(){var t=0,e=1,n,r,i,a,l=Wn,u=!1,f;function d(v){return v==null||isNaN(v=+v)?f:l(i===0?.5:(v=(a(v)-n)*i,u?Math.max(0,Math.min(1,v)):v))}d.domain=function(v){return arguments.length?([t,e]=v,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(v){return arguments.length?(u=!!v,d):u},d.interpolator=function(v){return arguments.length?(l=v,d):l};function h(v){return function(x){var _,S;return arguments.length?([_,S]=x,l=v(_,S),d):[l(0),l(1)]}}return d.range=h(Dl),d.rangeRound=h(Yx),d.unknown=function(v){return arguments.length?(f=v,d):f},function(v){return a=v,n=v(t),r=v(e),i=n===r?0:1/(r-n),d}}function Xa(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function oR(){var t=Wa(Xh()(Wn));return t.copy=function(){return Xa(t,oR())},Qi.apply(t,arguments)}function sR(){var t=Zx(Xh()).domain([1,10]);return t.copy=function(){return Xa(t,sR()).base(t.base())},Qi.apply(t,arguments)}function lR(){var t=Qx(Xh());return t.copy=function(){return Xa(t,lR()).constant(t.constant())},Qi.apply(t,arguments)}function cb(){var t=eb(Xh());return t.copy=function(){return Xa(t,cb()).exponent(t.exponent())},Qi.apply(t,arguments)}function YW(){return cb.apply(null,arguments).exponent(.5)}function uR(){var t=[],e=Wn;function n(r){if(r!=null&&!isNaN(r=+r))return e((Ac(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort($a),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>kK(t,a/r))},n.copy=function(){return uR(e).domain(t)},Qi.apply(n,arguments)}function Jh(){var t=0,e=.5,n=1,r=1,i,a,l,u,f,d=Wn,h,v=!1,x;function _(E){return isNaN(E=+E)?x:(E=.5+((E=+h(E))-a)*(r*E<r*a?u:f),d(v?Math.max(0,Math.min(1,E)):E))}_.domain=function(E){return arguments.length?([t,e,n]=E,i=h(t=+t),a=h(e=+e),l=h(n=+n),u=i===a?0:.5/(a-i),f=a===l?0:.5/(l-a),r=a<i?-1:1,_):[t,e,n]},_.clamp=function(E){return arguments.length?(v=!!E,_):v},_.interpolator=function(E){return arguments.length?(d=E,_):d};function S(E){return function(C){var T,R,N;return arguments.length?([T,R,N]=C,d=oY(E,[T,R,N]),_):[d(0),d(.5),d(1)]}}return _.range=S(Dl),_.rangeRound=S(Yx),_.unknown=function(E){return arguments.length?(x=E,_):x},function(E){return h=E,i=E(t),a=E(e),l=E(n),u=i===a?0:.5/(a-i),f=a===l?0:.5/(l-a),r=a<i?-1:1,_}}function cR(){var t=Wa(Jh()(Wn));return t.copy=function(){return Xa(t,cR())},Qi.apply(t,arguments)}function dR(){var t=Zx(Jh()).domain([.1,1,10]);return t.copy=function(){return Xa(t,dR()).base(t.base())},Qi.apply(t,arguments)}function fR(){var t=Qx(Jh());return t.copy=function(){return Xa(t,fR()).constant(t.constant())},Qi.apply(t,arguments)}function db(){var t=eb(Jh());return t.copy=function(){return Xa(t,db()).exponent(t.exponent())},Qi.apply(t,arguments)}function WW(){return db.apply(null,arguments).exponent(.5)}const Zu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Gx,scaleDiverging:cR,scaleDivergingLog:dR,scaleDivergingPow:db,scaleDivergingSqrt:WW,scaleDivergingSymlog:fR,scaleIdentity:zO,scaleImplicit:L0,scaleLinear:VO,scaleLog:HO,scaleOrdinal:zx,scalePoint:LK,scalePow:tb,scaleQuantile:WO,scaleQuantize:XO,scaleRadial:YO,scaleSequential:oR,scaleSequentialLog:sR,scaleSequentialPow:cb,scaleSequentialQuantile:uR,scaleSequentialSqrt:YW,scaleSequentialSymlog:lR,scaleSqrt:DY,scaleSymlog:KO,scaleThreshold:JO,scaleTime:HW,scaleUtc:KW,tickFormat:qO},Symbol.toStringTag,{value:"Module"}));var Ml=t=>t.chartData,fb=oe([Ml],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),XW=(t,e,n,r)=>r?fb(t):Ml(t);function pc(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Zr(e)&&Zr(n))return!0}return!1}function $N(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function JW(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(Zr(n))i=n;else if(typeof n=="function")return;if(Zr(r))a=r;else if(typeof r=="function")return;var l=[i,a];if(pc(l))return l}}function ZW(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(pc(r))return $N(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,l,u;if(i==="auto")e!=null&&(l=Math.min(...e));else if(st(i))l=i;else if(typeof i=="function")try{e!=null&&(l=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&TA.test(i)){var f=TA.exec(i);if(f==null||e==null)l=void 0;else{var d=+f[1];l=e[0]-d}}else l=e==null?void 0:e[0];if(a==="auto")e!=null&&(u=Math.max(...e));else if(st(a))u=a;else if(typeof a=="function")try{e!=null&&(u=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&AA.test(a)){var h=AA.exec(a);if(h==null||e==null)u=void 0;else{var v=+h[1];u=e[1]+v}}else u=e==null?void 0:e[1];var x=[l,u];if(pc(x))return e==null?x:$N(x,e,n)}}}var Ol=1e9,QW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},mb,Bt=!0,Lr="[DecimalError] ",Ro=Lr+"Invalid argument: ",hb=Lr+"Exponent out of range: ",Rl=Math.floor,wo=Math.pow,eX=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hr,Nn=1e7,Lt=7,hR=9007199254740991,lh=Rl(hR/Lt),Oe={};Oe.absoluteValue=Oe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Oe.comparedTo=Oe.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Oe.decimalPlaces=Oe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Lt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Oe.dividedBy=Oe.div=function(t){return Vi(this,new this.constructor(t))};Oe.dividedToIntegerBy=Oe.idiv=function(t){var e=this,n=e.constructor;return Nt(Vi(e,new n(t),0,1),n.precision)};Oe.equals=Oe.eq=function(t){return!this.cmp(t)};Oe.exponent=function(){return un(this)};Oe.greaterThan=Oe.gt=function(t){return this.cmp(t)>0};Oe.greaterThanOrEqualTo=Oe.gte=function(t){return this.cmp(t)>=0};Oe.isInteger=Oe.isint=function(){return this.e>this.d.length-2};Oe.isNegative=Oe.isneg=function(){return this.s<0};Oe.isPositive=Oe.ispos=function(){return this.s>0};Oe.isZero=function(){return this.s===0};Oe.lessThan=Oe.lt=function(t){return this.cmp(t)<0};Oe.lessThanOrEqualTo=Oe.lte=function(t){return this.cmp(t)<1};Oe.logarithm=Oe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(hr))throw Error(Lr+"NaN");if(n.s<1)throw Error(Lr+(n.s?"NaN":"-Infinity"));return n.eq(hr)?new r(0):(Bt=!1,e=Vi(gc(n,a),gc(t,a),a),Bt=!0,Nt(e,i))};Oe.minus=Oe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?gR(e,t):mR(e,(t.s=-t.s,t))};Oe.modulo=Oe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Lr+"NaN");return n.s?(Bt=!1,e=Vi(n,t,0,1).times(t),Bt=!0,n.minus(e)):Nt(new r(n),i)};Oe.naturalExponential=Oe.exp=function(){return pR(this)};Oe.naturalLogarithm=Oe.ln=function(){return gc(this)};Oe.negated=Oe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Oe.plus=Oe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?mR(e,t):gR(e,(t.s=-t.s,t))};Oe.precision=Oe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ro+t);if(e=un(i)+1,r=i.d.length-1,n=r*Lt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Oe.squareRoot=Oe.sqrt=function(){var t,e,n,r,i,a,l,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(Lr+"NaN")}for(t=un(u),Bt=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=ui(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Rl((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new f(e)):r=new f(i.toString()),n=f.precision,i=l=n+3;;)if(a=r,r=a.plus(Vi(u,a,l+2)).times(.5),ui(a.d).slice(0,l)===(e=ui(r.d)).slice(0,l)){if(e=e.slice(l-3,l+1),i==l&&e=="4999"){if(Nt(a,n+1,0),a.times(a).eq(u)){r=a;break}}else if(e!="9999")break;l+=4}return Bt=!0,Nt(r,n)};Oe.times=Oe.mul=function(t){var e,n,r,i,a,l,u,f,d,h=this,v=h.constructor,x=h.d,_=(t=new v(t)).d;if(!h.s||!t.s)return new v(0);for(t.s*=h.s,n=h.e+t.e,f=x.length,d=_.length,f<d&&(a=x,x=_,_=a,l=f,f=d,d=l),a=[],l=f+d,r=l;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=f+r;i>r;)u=a[i]+_[r]*x[i-r-1]+e,a[i--]=u%Nn|0,e=u/Nn|0;a[i]=(a[i]+e)%Nn|0}for(;!a[--l];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Bt?Nt(t,v.precision):t};Oe.toDecimalPlaces=Oe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(gi(t,0,Ol),e===void 0?e=r.rounding:gi(e,0,8),Nt(n,t+un(n)+1,e))};Oe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Fo(r,!0):(gi(t,0,Ol),e===void 0?e=i.rounding:gi(e,0,8),r=Nt(new i(r),t+1,e),n=Fo(r,!0,t+1)),n};Oe.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Fo(i):(gi(t,0,Ol),e===void 0?e=a.rounding:gi(e,0,8),r=Nt(new a(i),t+un(i)+1,e),n=Fo(r.abs(),!1,t+un(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Oe.toInteger=Oe.toint=function(){var t=this,e=t.constructor;return Nt(new e(t),un(t)+1,e.rounding)};Oe.toNumber=function(){return+this};Oe.toPower=Oe.pow=function(t){var e,n,r,i,a,l,u=this,f=u.constructor,d=12,h=+(t=new f(t));if(!t.s)return new f(hr);if(u=new f(u),!u.s){if(t.s<1)throw Error(Lr+"Infinity");return u}if(u.eq(hr))return u;if(r=f.precision,t.eq(hr))return Nt(u,r);if(e=t.e,n=t.d.length-1,l=e>=n,a=u.s,l){if((n=h<0?-h:h)<=hR){for(i=new f(hr),e=Math.ceil(r/Lt+4),Bt=!1;n%2&&(i=i.times(u),BN(i.d,e)),n=Rl(n/2),n!==0;)u=u.times(u),BN(u.d,e);return Bt=!0,t.s<0?new f(hr).div(i):Nt(i,r)}}else if(a<0)throw Error(Lr+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,Bt=!1,i=t.times(gc(u,r+d)),Bt=!0,i=pR(i),i.s=a,i};Oe.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=un(i),r=Fo(i,n<=a.toExpNeg||n>=a.toExpPos)):(gi(t,1,Ol),e===void 0?e=a.rounding:gi(e,0,8),i=Nt(new a(i),t,e),n=un(i),r=Fo(i,t<=n||n<=a.toExpNeg,t)),r};Oe.toSignificantDigits=Oe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(gi(t,1,Ol),e===void 0?e=r.rounding:gi(e,0,8)),Nt(new r(n),t,e)};Oe.toString=Oe.valueOf=Oe.val=Oe.toJSON=Oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=un(t),n=t.constructor;return Fo(t,e<=n.toExpNeg||e>=n.toExpPos)};function mR(t,e){var n,r,i,a,l,u,f,d,h=t.constructor,v=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Bt?Nt(e,v):e;if(f=t.d,d=e.d,l=t.e,i=e.e,f=f.slice(),a=l-i,a){for(a<0?(r=f,a=-a,u=d.length):(r=d,i=l,u=f.length),l=Math.ceil(v/Lt),u=l>u?l+1:u+1,a>u&&(a=u,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(u=f.length,a=d.length,u-a<0&&(a=u,r=d,d=f,f=r),n=0;a;)n=(f[--a]=f[a]+d[a]+n)/Nn|0,f[a]%=Nn;for(n&&(f.unshift(n),++i),u=f.length;f[--u]==0;)f.pop();return e.d=f,e.e=i,Bt?Nt(e,v):e}function gi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ro+t)}function ui(t){var e,n,r,i=t.length-1,a="",l=t[0];if(i>0){for(a+=l,e=1;e<i;e++)r=t[e]+"",n=Lt-r.length,n&&(a+=Ra(n)),a+=r;l=t[e],r=l+"",n=Lt-r.length,n&&(a+=Ra(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var Vi=function(){function t(r,i){var a,l=0,u=r.length;for(r=r.slice();u--;)a=r[u]*i+l,r[u]=a%Nn|0,l=a/Nn|0;return l&&r.unshift(l),r}function e(r,i,a,l){var u,f;if(a!=l)f=a>l?1:-1;else for(u=f=0;u<a;u++)if(r[u]!=i[u]){f=r[u]>i[u]?1:-1;break}return f}function n(r,i,a){for(var l=0;a--;)r[a]-=l,l=r[a]<i[a]?1:0,r[a]=l*Nn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,l){var u,f,d,h,v,x,_,S,E,C,T,R,N,O,D,k,I,j,U=r.constructor,re=r.s==i.s?1:-1,B=r.d,Z=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Lr+"Division by zero");for(f=r.e-i.e,I=Z.length,D=B.length,_=new U(re),S=_.d=[],d=0;Z[d]==(B[d]||0);)++d;if(Z[d]>(B[d]||0)&&--f,a==null?R=a=U.precision:l?R=a+(un(r)-un(i))+1:R=a,R<0)return new U(0);if(R=R/Lt+2|0,d=0,I==1)for(h=0,Z=Z[0],R++;(d<D||h)&&R--;d++)N=h*Nn+(B[d]||0),S[d]=N/Z|0,h=N%Z|0;else{for(h=Nn/(Z[0]+1)|0,h>1&&(Z=t(Z,h),B=t(B,h),I=Z.length,D=B.length),O=I,E=B.slice(0,I),C=E.length;C<I;)E[C++]=0;j=Z.slice(),j.unshift(0),k=Z[0],Z[1]>=Nn/2&&++k;do h=0,u=e(Z,E,I,C),u<0?(T=E[0],I!=C&&(T=T*Nn+(E[1]||0)),h=T/k|0,h>1?(h>=Nn&&(h=Nn-1),v=t(Z,h),x=v.length,C=E.length,u=e(v,E,x,C),u==1&&(h--,n(v,I<x?j:Z,x))):(h==0&&(u=h=1),v=Z.slice()),x=v.length,x<C&&v.unshift(0),n(E,v,C),u==-1&&(C=E.length,u=e(Z,E,I,C),u<1&&(h++,n(E,I<C?j:Z,C))),C=E.length):u===0&&(h++,E=[0]),S[d++]=h,u&&E[0]?E[C++]=B[O]||0:(E=[B[O]],C=1);while((O++<D||E[0]!==void 0)&&R--)}return S[0]||S.shift(),_.e=f,Nt(_,l?a+un(_)+1:a)}}();function pR(t,e){var n,r,i,a,l,u,f=0,d=0,h=t.constructor,v=h.precision;if(un(t)>16)throw Error(hb+un(t));if(!t.s)return new h(hr);for(Bt=!1,u=v,l=new h(.03125);t.abs().gte(.1);)t=t.times(l),d+=5;for(r=Math.log(wo(2,d))/Math.LN10*2+5|0,u+=r,n=i=a=new h(hr),h.precision=u;;){if(i=Nt(i.times(t),u),n=n.times(++f),l=a.plus(Vi(i,n,u)),ui(l.d).slice(0,u)===ui(a.d).slice(0,u)){for(;d--;)a=Nt(a.times(a),u);return h.precision=v,e==null?(Bt=!0,Nt(a,v)):a}a=l}}function un(t){for(var e=t.e*Lt,n=t.d[0];n>=10;n/=10)e++;return e}function mv(t,e,n){if(e>t.LN10.sd())throw Bt=!0,n&&(t.precision=n),Error(Lr+"LN10 precision limit exceeded");return Nt(new t(t.LN10),e)}function Ra(t){for(var e="";t--;)e+="0";return e}function gc(t,e){var n,r,i,a,l,u,f,d,h,v=1,x=10,_=t,S=_.d,E=_.constructor,C=E.precision;if(_.s<1)throw Error(Lr+(_.s?"NaN":"-Infinity"));if(_.eq(hr))return new E(0);if(e==null?(Bt=!1,d=C):d=e,_.eq(10))return e==null&&(Bt=!0),mv(E,d);if(d+=x,E.precision=d,n=ui(S),r=n.charAt(0),a=un(_),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)_=_.times(t),n=ui(_.d),r=n.charAt(0),v++;a=un(_),r>1?(_=new E("0."+n),a++):_=new E(r+"."+n.slice(1))}else return f=mv(E,d+2,C).times(a+""),_=gc(new E(r+"."+n.slice(1)),d-x).plus(f),E.precision=C,e==null?(Bt=!0,Nt(_,C)):_;for(u=l=_=Vi(_.minus(hr),_.plus(hr),d),h=Nt(_.times(_),d),i=3;;){if(l=Nt(l.times(h),d),f=u.plus(Vi(l,new E(i),d)),ui(f.d).slice(0,d)===ui(u.d).slice(0,d))return u=u.times(2),a!==0&&(u=u.plus(mv(E,d+2,C).times(a+""))),u=Vi(u,new E(v),d),E.precision=C,e==null?(Bt=!0,Nt(u,C)):u;u=f,i+=2}}function FN(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Rl(n/Lt),t.d=[],r=(n+1)%Lt,n<0&&(r+=Lt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Lt;r<i;)t.d.push(+e.slice(r,r+=Lt));e=e.slice(r),r=Lt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Bt&&(t.e>lh||t.e<-lh))throw Error(hb+n)}else t.s=0,t.e=0,t.d=[0];return t}function Nt(t,e,n){var r,i,a,l,u,f,d,h,v=t.d;for(l=1,a=v[0];a>=10;a/=10)l++;if(r=e-l,r<0)r+=Lt,i=e,d=v[h=0];else{if(h=Math.ceil((r+1)/Lt),a=v.length,h>=a)return t;for(d=a=v[h],l=1;a>=10;a/=10)l++;r%=Lt,i=r-Lt+l}if(n!==void 0&&(a=wo(10,l-i-1),u=d/a%10|0,f=e<0||v[h+1]!==void 0||d%a,f=n<4?(u||f)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(r>0?i>0?d/wo(10,l-i):0:v[h-1])%10&1||n==(t.s<0?8:7))),e<1||!v[0])return f?(a=un(t),v.length=1,e=e-a-1,v[0]=wo(10,(Lt-e%Lt)%Lt),t.e=Rl(-e/Lt)||0):(v.length=1,v[0]=t.e=t.s=0),t;if(r==0?(v.length=h,a=1,h--):(v.length=h+1,a=wo(10,Lt-r),v[h]=i>0?(d/wo(10,l-i)%wo(10,i)|0)*a:0),f)for(;;)if(h==0){(v[0]+=a)==Nn&&(v[0]=1,++t.e);break}else{if(v[h]+=a,v[h]!=Nn)break;v[h--]=0,a=1}for(r=v.length;v[--r]===0;)v.pop();if(Bt&&(t.e>lh||t.e<-lh))throw Error(hb+un(t));return t}function gR(t,e){var n,r,i,a,l,u,f,d,h,v,x=t.constructor,_=x.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new x(t),Bt?Nt(e,_):e;if(f=t.d,v=e.d,r=e.e,d=t.e,f=f.slice(),l=d-r,l){for(h=l<0,h?(n=f,l=-l,u=v.length):(n=v,r=d,u=f.length),i=Math.max(Math.ceil(_/Lt),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=f.length,u=v.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(f[i]!=v[i]){h=f[i]<v[i];break}l=0}for(h&&(n=f,f=v,v=n,e.s=-e.s),u=f.length,i=v.length-u;i>0;--i)f[u++]=0;for(i=v.length;i>l;){if(f[--i]<v[i]){for(a=i;a&&f[--a]===0;)f[a]=Nn-1;--f[a],f[i]+=Nn}f[i]-=v[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(e.d=f,e.e=r,Bt?Nt(e,_):e):new x(0)}function Fo(t,e,n){var r,i=un(t),a=ui(t.d),l=a.length;return e?(n&&(r=n-l)>0?a=a.charAt(0)+"."+a.slice(1)+Ra(r):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ra(-i-1)+a,n&&(r=n-l)>0&&(a+=Ra(r))):i>=l?(a+=Ra(i+1-l),n&&(r=n-i-1)>0&&(a=a+"."+Ra(r))):((r=i+1)<l&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(a+="."),a+=Ra(r))),t.s<0?"-"+a:a}function BN(t,e){if(t.length>e)return t.length=e,!0}function yR(t){var e,n,r;function i(a){var l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,a instanceof i){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Ro+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return FN(l,a.toString())}else if(typeof a!="string")throw Error(Ro+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,eX.test(a))FN(l,a);else throw Error(Ro+a)}if(i.prototype=Oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=yR,i.config=i.set=tX,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function tX(t){if(!t||typeof t!="object")throw Error(Lr+"Object expected");var e,n,r,i=["precision",1,Ol,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Rl(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Ro+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ro+n+": "+r);return this}var mb=yR(QW);hr=new mb(1);const vt=mb;var nX=t=>t,vR={},xR=t=>t===vR,qN=t=>function e(){return arguments.length===0||arguments.length===1&&xR(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},bR=(t,e)=>t===1?e:qN(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(l=>l!==vR).length;return a>=t?e(...r):bR(t-a,qN(function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];var d=r.map(h=>xR(h)?u.shift():h);return e(...d,...u)}))}),Zh=t=>bR(t.length,t),F0=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},rX=Zh((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),iX=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return nX;var i=n.reverse(),a=i[0],l=i.slice(1);return function(){return l.reduce((u,f)=>f(u),a(...arguments))}},B0=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),_R=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e&&i.every((l,u)=>{var f;return l===((f=e)===null||f===void 0?void 0:f[u])})||(e=i,n=t(...i)),n}};function wR(t){var e;return t===0?e=1:e=Math.floor(new vt(t).abs().log(10).toNumber())+1,e}function SR(t,e,n){for(var r=new vt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}Zh((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});Zh((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});Zh((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var ER=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},CR=(t,e,n)=>{if(t.lte(0))return new vt(0);var r=wR(t.toNumber()),i=new vt(10).pow(r),a=t.div(i),l=r!==1?.05:.1,u=new vt(Math.ceil(a.div(l).toNumber())).add(n).mul(l),f=u.mul(i);return e?new vt(f.toNumber()):new vt(Math.ceil(f.toNumber()))},aX=(t,e,n)=>{var r=new vt(1),i=new vt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new vt(10).pow(wR(t)-1),i=new vt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new vt(Math.floor(t)))}else t===0?i=new vt(Math.floor((e-1)/2)):n||(i=new vt(Math.floor(t)));var l=Math.floor((e-1)/2),u=iX(rX(f=>i.add(new vt(f-l).mul(r)).toNumber()),F0);return u(0,e)},TR=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new vt(0),tickMin:new vt(0),tickMax:new vt(0)};var l=CR(new vt(n).sub(e).div(r-1),i,a),u;e<=0&&n>=0?u=new vt(0):(u=new vt(e).add(n).div(2),u=u.sub(new vt(u).mod(l)));var f=Math.ceil(u.sub(e).div(l).toNumber()),d=Math.ceil(new vt(n).sub(u).div(l).toNumber()),h=f+d+1;return h>r?TR(e,n,r,i,a+1):(h<r&&(d=n>0?d+(r-h):d,f=n>0?f:f+(r-h)),{step:l,tickMin:u.sub(new vt(f).mul(l)),tickMax:u.add(new vt(d).mul(l))})};function oX(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[l,u]=ER([e,n]);if(l===-1/0||u===1/0){var f=u===1/0?[l,...F0(0,r-1).map(()=>1/0)]:[...F0(0,r-1).map(()=>-1/0),u];return e>n?B0(f):f}if(l===u)return aX(l,r,i);var{step:d,tickMin:h,tickMax:v}=TR(l,u,a,i,0),x=SR(h,v.add(new vt(.1).mul(d)),d);return e>n?B0(x):x}function sX(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=ER([n,r]);if(a===-1/0||l===1/0)return[n,r];if(a===l)return[a];var u=Math.max(e,2),f=CR(new vt(l).sub(a).div(u-1),i,0),d=[...SR(new vt(a),new vt(l).sub(new vt(.99).mul(f)),f),l];return n>r?B0(d):d}var lX=_R(oX),uX=_R(sX),cX=t=>t.rootProps.barCategoryGap,Oc=t=>t.rootProps.stackOffset,pb=t=>t.options.chartName,gb=t=>t.rootProps.syncId,AR=t=>t.rootProps.syncMethod,yb=t=>t.options.eventEmitter,$i={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},fr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Qh=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},dX={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$i.angleAxisId,includeHidden:!1,name:void 0,reversed:$i.reversed,scale:$i.scale,tick:$i.tick,tickCount:void 0,ticks:void 0,type:$i.type,unit:void 0},fX={allowDataOverflow:fr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fr.scale,tick:fr.tick,tickCount:fr.tickCount,ticks:void 0,type:fr.type,unit:void 0},hX={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$i.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$i.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$i.scale,tick:$i.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},mX={allowDataOverflow:fr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fr.scale,tick:fr.tick,tickCount:fr.tickCount,ticks:void 0,type:"category",unit:void 0},vb=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?hX:dX,xb=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?mX:fX,em=t=>t.polarOptions,bb=oe([Ka,Ya,Jn],fO),NR=oe([em,bb],(t,e)=>{if(t!=null)return di(t.innerRadius,e,0)}),DR=oe([em,bb],(t,e)=>{if(t!=null)return di(t.outerRadius,e,e*.8)}),pX=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},MR=oe([em],pX);oe([vb,MR],Qh);var OR=oe([bb,NR,DR],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});oe([xb,OR],Qh);var gX=oe([Ht,em,NR,DR,Ka,Ya],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:l,cy:u,startAngle:f,endAngle:d}=e;return{cx:di(l,i,i/2),cy:di(u,a,a/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:d,clockWise:!1}}}),en=(t,e)=>e,Rc=(t,e,n)=>n;function VN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VN(Object(n),!0).forEach(function(r){yX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yX(t,e,n){return(e=vX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vX(t){var e=xX(t,"string");return typeof e=="symbol"?e:e+""}function xX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q0=[0,"auto"],bX={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},kl=(t,e)=>{var n=t.cartesianAxis.xAxis[e];return n??bX},_X={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:q0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Bh},Pl=(t,e)=>{var n=t.cartesianAxis.yAxis[e];return n??_X},wX={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},_b=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??wX},tn=(t,e,n)=>{switch(e){case"xAxis":return kl(t,n);case"yAxis":return Pl(t,n);case"zAxis":return _b(t,n);case"angleAxis":return vb(t,n);case"radiusAxis":return xb(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},SX=(t,e,n)=>{switch(e){case"xAxis":return kl(t,n);case"yAxis":return Pl(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},kc=(t,e,n)=>{switch(e){case"xAxis":return kl(t,n);case"yAxis":return Pl(t,n);case"angleAxis":return vb(t,n);case"radiusAxis":return xb(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},RR=t=>t.graphicalItems.countOfBars>0;function wb(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var EX=t=>t.graphicalItems.cartesianItems,CX=oe([en,Rc],wb),Sb=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Pc=oe([EX,tn,CX],Sb),kR=t=>t.filter(e=>e.stackId===void 0),TX=oe([Pc],kR),Eb=t=>t.map(e=>e.data).filter(Boolean).flat(1),AX=oe([Pc],Eb),Cb=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},tm=oe([AX,XW],Cb),Tb=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Dn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Dn(i,r)}))):t.map(r=>({value:r})),nm=oe([tm,tn,Pc],Tb);function PR(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Wo(t){return t.filter(e=>Hi(e)||e instanceof Date).map(Number).filter(e=>Jr(e)===!1)}function NX(t,e,n){return!n||typeof e!="number"||Jr(e)?[]:n.length?Wo(n.flatMap(r=>{var i=Dn(t,r.dataKey),a,l;if(Array.isArray(i)?[a,l]=i:a=l=i,!(!Zr(a)||!Zr(l)))return[e-a,e+l]})):[]}var IR=(t,e,n)=>{var r={},i=e.reduce((a,l)=>(l.stackId==null||(a[l.stackId]==null&&(a[l.stackId]=[]),a[l.stackId].push(l)),a),r);return Object.fromEntries(Object.entries(i).map(a=>{var[l,u]=a,f=u.map(d=>d.dataKey);return[l,{stackedData:SG(t,f,n),graphicalItems:u}]}))},DX=oe([tm,Pc,Oc],IR),LR=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var a=TG(t,r,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},MX=oe([DX,Ml,en],LR),jR=(t,e,n,r)=>n.length>0?t.flatMap(i=>n.flatMap(a=>{var l,u,f=(l=a.errorBars)===null||l===void 0?void 0:l.filter(h=>PR(r,h)),d=Dn(i,(u=e.dataKey)!==null&&u!==void 0?u:a.dataKey);return{value:d,errorDomain:NX(i,d,f)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(i=>({value:Dn(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})),OX=oe(tm,tn,TX,en,jR);function RX(t){var{value:e}=t;if(Hi(e)||e instanceof Date)return e}var kX=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Wo(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},PX=(t,e,n)=>{var r=t.map(RX).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&l2(r))?RO(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},Ab=t=>{var e;if(t==null||!("domain"in t))return q0;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Wo(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:q0},Nb=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),l=Math.min(...a),u=Math.max(...a);return[l,u]}},UR=t=>t.referenceElements.dots,Il=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),IX=oe([UR,en,Rc],Il),$R=t=>t.referenceElements.areas,LX=oe([$R,en,Rc],Il),FR=t=>t.referenceElements.lines,jX=oe([FR,en,Rc],Il),BR=(t,e)=>{var n=Wo(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},UX=oe(IX,en,BR),qR=(t,e)=>{var n=Wo(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},$X=oe([LX,en],qR),VR=(t,e)=>{var n=Wo(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},FX=oe(jX,en,VR),BX=oe(UX,FX,$X,(t,e,n)=>Nb(t,n,e)),zR=oe([tn],Ab),Db=(t,e,n,r,i)=>{var a=JW(e,t.allowDataOverflow);return a??ZW(e,Nb(n,i,kX(r)),t.allowDataOverflow)},qX=oe([tn,zR,MX,OX,BX],Db),VX=[0,1],Mb=(t,e,n,r,i,a,l)=>{if(!(t==null||n==null||n.length===0)){var{dataKey:u,type:f}=t,d=Go(e,a);return d&&u==null?RO(0,n.length):f==="category"?PX(r,t,d):i==="expand"?VX:l}},Ob=oe([tn,Ht,tm,nm,Oc,en,qX],Mb),GR=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:l}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var u="scale".concat(Cc(a));return u in Zu?u:"point"}}},Ll=oe([tn,Ht,RR,pb,en],GR);function zX(t){if(t!=null){if(t in Zu)return Zu[t]();var e="scale".concat(Cc(t));if(e in Zu)return Zu[e]()}}function Rb(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=zX(e);if(i!=null){var a=i.domain(n).range(r);return xG(a),a}}}var kb=(t,e,n)=>{var r=Ab(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&pc(t))return lX(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&t!=null)return uX(t,e.tickCount,e.allowDecimals)}},Pb=oe([Ob,kc,Ll],kb),Ib=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&pc(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],l=e[1],u=n[n.length-1];return[Math.min(i,a),Math.max(l,u)]}return e},GX=oe([tn,Ob,Pb,en],Ib),HX=oe(nm,tn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Wo(t.map(u=>u.value))).sort((u,f)=>u-f);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var l=r[a+1]-r[a];n=Math.min(n,l)}return n/i}}),HR=oe(HX,Ht,cX,Jn,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!Zr(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var l=di(n,t*a),u=t*a/2;return u-l-(u-l)/a*l}return 0}),KX=(t,e)=>{var n=kl(t,e);return n==null||typeof n.padding!="string"?0:HR(t,"xAxis",e,n.padding)},YX=(t,e)=>{var n=Pl(t,e);return n==null||typeof n.padding!="string"?0:HR(t,"yAxis",e,n.padding)},WX=oe(kl,KX,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),XX=oe(Pl,YX,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),JX=oe([Jn,WX,Vh,qh,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),ZX=oe([Jn,Ht,XX,Vh,qh,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:l}=i;return a?[r.height-l.bottom,l.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Ic=(t,e,n,r)=>{var i;switch(e){case"xAxis":return JX(t,n,r);case"yAxis":return ZX(t,n,r);case"zAxis":return(i=_b(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return MR(t);case"radiusAxis":return OR(t,n);default:return}},KR=oe([tn,Ic],Qh),rm=oe([tn,Ll,GX,KR],Rb);oe(Pc,en,(t,e)=>t.flatMap(n=>{var r;return(r=n.errorBars)!==null&&r!==void 0?r:[]}).filter(n=>PR(e,n)));function YR(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var im=(t,e)=>e,am=(t,e,n)=>n,QX=oe($x,im,am,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(YR)),eJ=oe(Fx,im,am,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(YR)),WR=(t,e)=>({width:t.width,height:e.height}),tJ=(t,e)=>{var n=typeof e.width=="number"?e.width:Bh;return{width:n,height:t.height}};oe(Jn,kl,WR);var nJ=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},rJ=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}};oe(Ya,Jn,QX,im,am,(t,e,n,r,i)=>{var a={},l;return n.forEach(u=>{var f=WR(e,u);l==null&&(l=nJ(e,r,t));var d=r==="top"&&!i||r==="bottom"&&i;a[u.id]=l-Number(d)*f.height,l+=(d?-1:1)*f.height}),a});oe(Ka,Jn,eJ,im,am,(t,e,n,r,i)=>{var a={},l;return n.forEach(u=>{var f=tJ(e,u);l==null&&(l=rJ(e,r,t));var d=r==="left"&&!i||r==="right"&&i;a[u.id]=l-Number(d)*f.width,l+=(d?-1:1)*f.width}),a});oe(Jn,Pl,(t,e)=>{var n=typeof e.width=="number"?e.width:Bh;return{width:n,height:t.height}});var XR=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:l}=n,u=Go(t,r),f=e.map(d=>d.value);if(l&&u&&a==="category"&&i&&l2(f))return f}},Lb=oe([Ht,nm,tn,en],XR),JR=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,l=Go(t,r);if(l&&(i==="number"||a!=="auto"))return e.map(u=>u.value)}},jb=oe([Ht,nm,kc,en],JR);oe([Ht,SX,Ll,rm,Lb,jb,Ic,Pb,en],(t,e,n,r,i,a,l,u,f)=>{if(e==null)return null;var d=Go(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:u,range:l,realScaleType:n,scale:r}});var iJ=(t,e,n,r,i,a,l,u,f)=>{if(!(e==null||r==null)){var d=Go(t,f),{type:h,ticks:v,tickCount:x}=e,_=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=h==="category"&&r.bandwidth?r.bandwidth()/_:0;S=f==="angleAxis"&&a!=null&&a.length>=2?mr(a[0]-a[1])*2*S:S;var E=v||i;if(E){var C=E.map((T,R)=>{var N=l?l.indexOf(T):T;return{index:R,coordinate:r(N)+S,value:T,offset:S}});return C.filter(T=>!Jr(T.coordinate))}return d&&u?u.map((T,R)=>({coordinate:r(T)+S,value:T,index:R,offset:S})):r.ticks?r.ticks(x).map(T=>({coordinate:r(T)+S,value:T,offset:S})):r.domain().map((T,R)=>({coordinate:r(T)+S,value:l?l[T]:T,index:R,offset:S}))}};oe([Ht,kc,Ll,rm,Pb,Ic,Lb,jb,en],iJ);var aJ=(t,e,n,r,i,a,l)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var u=Go(t,l),{tickCount:f}=e,d=0;return d=l==="angleAxis"&&(r==null?void 0:r.length)>=2?mr(r[0]-r[1])*2*d:d,u&&a?a.map((h,v)=>({coordinate:n(h)+d,value:h,index:v,offset:d})):n.ticks?n.ticks(f).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,v)=>({coordinate:n(h)+d,value:i?i[h]:h,index:v,offset:d}))}};oe([Ht,kc,rm,Ic,Lb,jb,en],aJ);oe(tn,rm,(t,e)=>{if(!(t==null||e==null))return uh(uh({},t),{},{scale:e})});var oJ=oe([tn,Ll,Ob,KR],Rb);oe((t,e,n)=>_b(t,n),oJ,(t,e)=>{if(!(t==null||e==null))return uh(uh({},t),{},{scale:e})});var sJ=oe([Ht,$x,Fx],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ZR=t=>t.options.defaultTooltipEventType,QR=t=>t.options.validateTooltipEventTypes;function ek(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function Ub(t,e){var n=ZR(t),r=QR(t);return ek(e,n,r)}function lJ(t){return ot(e=>Ub(e,t))}var tk=(t,e)=>{var n,r=Number(e);if(!(Jr(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},uJ=t=>t.tooltip.settings,Pa={active:!1,index:null,dataKey:void 0,coordinate:void 0},cJ={itemInteraction:{click:Pa,hover:Pa},axisInteraction:{click:Pa,hover:Pa},keyboardInteraction:Pa,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},nk=Ur({name:"tooltip",initialState:cJ,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Ua(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:dJ,removeTooltipEntrySettings:fJ,setTooltipSettingsState:hJ,setActiveMouseOverItemIndex:rk,mouseLeaveItem:mJ,mouseLeaveChart:ik,setActiveClickItemIndex:pJ,setMouseOverAxisIndex:ak,setMouseClickAxisIndex:gJ,setSyncInteraction:V0,setKeyboardInteraction:z0}=nk.actions,yJ=nk.reducer;function zN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zN(Object(n),!0).forEach(function(r){vJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vJ(t,e,n){return(e=xJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xJ(t){var e=bJ(t,"string");return typeof e=="symbol"?e:e+""}function bJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _J(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function wJ(t){return t.index!=null}var ok=(t,e,n,r)=>{if(e==null)return Pa;var i=_J(t,e,n);if(i==null)return Pa;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(wJ(i)){if(a)return pf(pf({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return pf(pf({},Pa),{},{coordinate:i.coordinate})},$b=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!Zr(r))return n;var i=0,a=1/0;return e.length>0&&(a=e.length-1),String(Math.max(i,Math.min(r,a)))},sk=(t,e,n,r,i,a,l,u)=>{if(!(a==null||u==null)){var f=l[0],d=f==null?void 0:u(f.positions,a);if(d!=null)return d;var h=i==null?void 0:i[Number(a)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},lk=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.dataKey)===i})},om=t=>t.options.tooltipPayloadSearcher,jl=t=>t.tooltip,kn=t=>{var e=Ht(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Ul=t=>t.tooltip.settings.axisId,Gn=t=>{var e=kn(t),n=Ul(t);return kc(t,e,n)},Fb=oe([Gn,Ht,RR,pb,kn],GR),SJ=oe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),EJ=oe([kn,Ul],wb),sm=oe([SJ,Gn,EJ],Sb),CJ=oe([sm],Eb),Xo=oe([CJ,Ml],Cb),Bb=oe([Xo,Gn,sm],Tb),TJ=oe([Gn],Ab),AJ=oe([Xo,sm,Oc],IR),NJ=oe([AJ,Ml,kn],LR),DJ=oe([sm],kR),MJ=oe([Xo,Gn,DJ,kn],jR),OJ=oe([UR,kn,Ul],Il),RJ=oe([OJ,kn],BR),kJ=oe([$R,kn,Ul],Il),PJ=oe([kJ,kn],qR),IJ=oe([FR,kn,Ul],Il),LJ=oe([IJ,kn],VR),jJ=oe([RJ,LJ,PJ],Nb),UJ=oe([Gn,TJ,NJ,MJ,jJ],Db),uk=oe([Gn,Ht,Xo,Bb,Oc,kn,UJ],Mb),$J=oe([uk,Gn,Fb],kb),FJ=oe([Gn,uk,$J,kn],Ib),ck=t=>{var e=kn(t),n=Ul(t),r=!1;return Ic(t,e,n,r)},dk=oe([Gn,ck],Qh),fk=oe([Gn,Fb,FJ,dk],Rb),BJ=oe([Ht,Bb,Gn,kn],XR),qJ=oe([Ht,Bb,Gn,kn],JR),VJ=(t,e,n,r,i,a,l,u)=>{if(e){var{type:f}=e,d=Go(t,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,v=f==="category"&&r.bandwidth?r.bandwidth()/h:0;return v=u==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?mr(i[0]-i[1])*2*v:v,d&&l?l.map((x,_)=>({coordinate:r(x)+v,value:x,index:_,offset:v})):r.domain().map((x,_)=>({coordinate:r(x)+v,value:a?a[x]:x,index:_,offset:v}))}}},ea=oe([Ht,Gn,Fb,fk,ck,BJ,qJ,kn],VJ),hk=oe([ZR,QR,uJ],(t,e,n)=>ek(n.shared,t,e)),mk=t=>t.tooltip.settings.trigger,qb=t=>t.tooltip.settings.defaultIndex,lm=oe([jl,hk,mk,qb],ok),ch=oe([lm,Xo],$b),zJ=oe([ea,ch],tk),GJ=oe([lm],t=>{if(t)return t.dataKey}),HJ=oe([jl,hk,mk,qb],lk),KJ=oe([Ka,Ya,Ht,Jn,ea,qb,HJ,om],sk),YJ=oe([lm,KJ],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),WJ=oe([lm],t=>t.active);function GN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GN(Object(n),!0).forEach(function(r){XJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XJ(t,e,n){return(e=JJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JJ(t){var e=ZJ(t,"string");return typeof e=="symbol"?e:e+""}function ZJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QJ=()=>ot(Gn),eZ=()=>{var t=QJ(),e=ot(ea),n=ot(fk);return AG(HN(HN({},t),{},{scale:n}),e)};function KN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KN(Object(n),!0).forEach(function(r){tZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tZ(t,e,n){return(e=nZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nZ(t){var e=rZ(t,"string");return typeof e=="symbol"?e:e+""}function rZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iZ=()=>ot(pb),Vb=(t,e)=>e,pk=(t,e,n)=>n,zb=(t,e,n,r)=>r;function aZ(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}var oZ=oe(ea,t=>Oh(t,e=>e.coordinate)),Gb=oe([jl,Vb,pk,zb],ok),gk=oe([Gb,Xo],$b),sZ=(t,e,n)=>{if(e!=null){var r=jl(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},yk=oe([jl,Vb,pk,zb],lk),dh=oe([Ka,Ya,Ht,Jn,ea,zb,yk,om],sk),lZ=oe([Gb,dh],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),vk=oe(ea,gk,tk);function uZ(t,e){return t??e}var cZ=(t,e,n,r,i,a,l)=>{if(!(e==null||a==null)){var{chartData:u,computedData:f,dataStartIndex:d,dataEndIndex:h}=n,v=[];return t.reduce((x,_)=>{var S,{dataDefinedOnItem:E,settings:C}=_,T=uZ(E,u),R=aZ(T,d,h),N=(S=C==null?void 0:C.dataKey)!==null&&S!==void 0?S:r==null?void 0:r.dataKey,O=C==null?void 0:C.nameKey,D;if(r!=null&&r.dataKey&&!(r!=null&&r.allowDuplicatedCategory)&&Array.isArray(R)&&l==="axis"?D=u7(R,r.dataKey,i):D=a(R,e,f,O),Array.isArray(D))D.forEach(I=>{var j=YN(YN({},C),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});x.push(NA({tooltipEntrySettings:j,dataKey:I.dataKey,payload:I.payload,value:Dn(I.payload,I.dataKey),name:I.name}))});else{var k;x.push(NA({tooltipEntrySettings:C,dataKey:N,payload:D,value:Dn(D,N),name:(k=Dn(D,O))!==null&&k!==void 0?k:C==null?void 0:C.name}))}return x},v)}},dZ=oe([yk,gk,Ml,Gn,vk,om,Vb],cZ),fZ=oe([Gb],t=>({isActive:t.active,activeIndex:t.index})),hZ=(t,e,n,r,i,a,l,u)=>{if(!(!t||!e||!r||!i||!a)){var f=NG(t.chartX,t.chartY,e,n,u);if(f){var d=MG(f,e),h=yG(d,l,a,r,i),v=DG(e,a,h,f);return{activeIndex:String(h),activeCoordinate:v}}}};function G0(){return G0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G0.apply(null,arguments)}function WN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WN(Object(n),!0).forEach(function(r){mZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mZ(t,e,n){return(e=pZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pZ(t){var e=gZ(t,"string");return typeof e=="symbol"?e:e+""}function gZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yZ(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:a,layout:l,cursor:u,tooltipEventType:f,chartName:d}=t,h=e,v=n,x=r;if(!u||!h||d!=="ScatterChart"&&f!=="axis")return null;var _,S;if(d==="ScatterChart")_=h,S=DH;else if(d==="BarChart")_=MH(l,h,i,a),S=NO;else if(l==="radial"){var{cx:E,cy:C,radius:T,startAngle:R,endAngle:N}=DO(h);_={cx:E,cy:C,startAngle:R,endAngle:N,innerRadius:T,outerRadius:T},S=OO}else _={points:gK(l,h,i)},S=EO;var O=typeof u=="object"&&"className"in u?u.className:void 0,D=gf(gf(gf(gf({stroke:"#ccc",pointerEvents:"none"},i),_),Mn(u,!1)),{},{payload:v,payloadIndex:x,className:xn("recharts-tooltip-cursor",O)});return A.isValidElement(u)?A.cloneElement(u,D):A.createElement(S,D)}function vZ(t){var e=eZ(),n=vO(),r=_O(),i=iZ();return A.createElement(yZ,G0({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var xk=A.createContext(null),xZ=()=>A.useContext(xk),pv={exports:{}},XN;function bZ(){return XN||(XN=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,h){this.fn=f,this.context=d,this.once=h||!1}function a(f,d,h,v,x){if(typeof h!="function")throw new TypeError("The listener must be a function");var _=new i(h,v||f,x),S=n?n+d:d;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],_]:f._events[S].push(_):(f._events[S]=_,f._eventsCount++),f}function l(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],h,v;if(this._eventsCount===0)return d;for(v in h=this._events)e.call(h,v)&&d.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},u.prototype.listeners=function(d){var h=n?n+d:d,v=this._events[h];if(!v)return[];if(v.fn)return[v.fn];for(var x=0,_=v.length,S=new Array(_);x<_;x++)S[x]=v[x].fn;return S},u.prototype.listenerCount=function(d){var h=n?n+d:d,v=this._events[h];return v?v.fn?1:v.length:0},u.prototype.emit=function(d,h,v,x,_,S){var E=n?n+d:d;if(!this._events[E])return!1;var C=this._events[E],T=arguments.length,R,N;if(C.fn){switch(C.once&&this.removeListener(d,C.fn,void 0,!0),T){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,h),!0;case 3:return C.fn.call(C.context,h,v),!0;case 4:return C.fn.call(C.context,h,v,x),!0;case 5:return C.fn.call(C.context,h,v,x,_),!0;case 6:return C.fn.call(C.context,h,v,x,_,S),!0}for(N=1,R=new Array(T-1);N<T;N++)R[N-1]=arguments[N];C.fn.apply(C.context,R)}else{var O=C.length,D;for(N=0;N<O;N++)switch(C[N].once&&this.removeListener(d,C[N].fn,void 0,!0),T){case 1:C[N].fn.call(C[N].context);break;case 2:C[N].fn.call(C[N].context,h);break;case 3:C[N].fn.call(C[N].context,h,v);break;case 4:C[N].fn.call(C[N].context,h,v,x);break;default:if(!R)for(D=1,R=new Array(T-1);D<T;D++)R[D-1]=arguments[D];C[N].fn.apply(C[N].context,R)}}return!0},u.prototype.on=function(d,h,v){return a(this,d,h,v,!1)},u.prototype.once=function(d,h,v){return a(this,d,h,v,!0)},u.prototype.removeListener=function(d,h,v,x){var _=n?n+d:d;if(!this._events[_])return this;if(!h)return l(this,_),this;var S=this._events[_];if(S.fn)S.fn===h&&(!x||S.once)&&(!v||S.context===v)&&l(this,_);else{for(var E=0,C=[],T=S.length;E<T;E++)(S[E].fn!==h||x&&!S[E].once||v&&S[E].context!==v)&&C.push(S[E]);C.length?this._events[_]=C.length===1?C[0]:C:l(this,_)}return this},u.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}(pv)),pv.exports}var _Z=bZ();const wZ=Qr(_Z);var yc=new wZ,H0="recharts.syncEvent.tooltip",JN="recharts.syncEvent.brush";function SZ(t,e){if(e){var n=Number.parseInt(e,10);if(!Jr(n))return t==null?void 0:t[n]}}var EZ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},bk=Ur({name:"options",initialState:EZ,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),CZ=bk.reducer,{createEventEmitter:TZ}=bk.actions;function AZ(t){return t.tooltip.syncInteraction}var NZ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},_k=Ur({name:"chartData",initialState:NZ,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:ZN,setDataStartEndIndexes:DZ,setComputedData:Zte}=_k.actions,MZ=_k.reducer,wk=()=>{};function OZ(){var t=ot(gb),e=ot(yb),n=On(),r=ot(AR),i=ot(ea),a=_O(),l=yO(),u=ot(f=>f.rootProps.className);A.useEffect(()=>{if(t==null)return wk;var f=(d,h,v)=>{if(e!==v&&t===d){if(r==="index"){n(h);return}if(i!=null){var x;if(typeof r=="function"){var _={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},S=r(i,_);x=i[S]}else r==="value"&&(x=i.find(k=>String(k.value)===h.payload.label));var{coordinate:E}=h.payload;if(x==null||h.payload.active===!1||E==null||l==null){n(V0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:C,y:T}=E,R=Math.min(C,l.x+l.width),N=Math.min(T,l.y+l.height),O={x:a==="horizontal"?x.coordinate:R,y:a==="horizontal"?N:x.coordinate},D=V0({active:h.payload.active,coordinate:O,dataKey:h.payload.dataKey,index:String(x.index),label:h.payload.label});n(D)}}};return yc.on(H0,f),()=>{yc.off(H0,f)}},[u,n,e,t,r,i,a,l])}function RZ(){var t=ot(gb),e=ot(yb),n=On();A.useEffect(()=>{if(t==null)return wk;var r=(i,a,l)=>{e!==l&&t===i&&n(DZ(a))};return yc.on(JN,r),()=>{yc.off(JN,r)}},[n,e,t])}function kZ(){var t=On();A.useEffect(()=>{t(TZ())},[t]),OZ(),RZ()}function PZ(t,e,n,r,i,a){var l=ot(x=>sZ(x,t,e)),u=ot(yb),f=ot(gb),d=ot(AR),h=ot(AZ),v=h==null?void 0:h.active;A.useEffect(()=>{if(!v&&f!=null&&u!=null){var x=V0({active:a,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});yc.emit(H0,f,x,u)}},[v,n,l,i,r,u,f,d,a])}function QN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QN(Object(n),!0).forEach(function(r){IZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IZ(t,e,n){return(e=LZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LZ(t){var e=jZ(t,"string");return typeof e=="symbol"?e:e+""}function jZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UZ(t){return t.dataKey}function $Z(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(sH,e)}var tD=[],FZ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Gh.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function BZ(t){var e=Ho(t,FZ),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:a,content:l,filterNull:u,isAnimationActive:f,offset:d,payloadUniqBy:h,position:v,reverseDirection:x,useTranslate3d:_,wrapperStyle:S,cursor:E,shared:C,trigger:T,defaultIndex:R,portal:N,axisId:O}=e,D=On(),k=typeof R=="number"?String(R):R;A.useEffect(()=>{D(hJ({shared:C,trigger:T,axisId:O,active:n,defaultIndex:k}))},[D,C,T,O,n,k]);var I=yO(),j=SO(),U=lJ(C),{activeIndex:re,isActive:B}=ot(ge=>fZ(ge,U,T,k)),Z=ot(ge=>dZ(ge,U,T,k)),me=ot(ge=>vk(ge,U,T,k)),H=ot(ge=>lZ(ge,U,T,k)),ve=Z,z=xZ(),K=n??B,[ye,Ee]=B2([ve,K]),L=U==="axis"?me:void 0;PZ(U,T,H,L,re,K);var Y=N??z;if(Y==null)return null;var te=ve??tD;K||(te=tD),u&&te.length&&(te=$2(ve.filter(ge=>ge.value!=null&&(ge.hide!==!0||e.includeHidden)),h,UZ));var ie=te.length>0,we=A.createElement(mH,{allowEscapeViewBox:r,animationDuration:i,animationEasing:a,isAnimationActive:f,active:K,coordinate:H,hasPayload:ie,offset:d,position:v,reverseDirection:x,useTranslate3d:_,viewBox:I,wrapperStyle:S,lastBoundingBox:ye,innerRef:Ee,hasPortalFromProps:!!N},$Z(l,eD(eD({},e),{},{payload:te,label:L,active:K,coordinate:H,accessibilityLayer:j})));return A.createElement(A.Fragment,null,ID.createPortal(we,Y),K&&A.createElement(vZ,{cursor:E,tooltipEventType:U,coordinate:H,payload:ve,index:re}))}var gv={},yv={},vv={},nD;function qZ(){return nD||(nD=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let l,u=null;const f=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),h=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},v=()=>{d&&h(),E()};let x=null;const _=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,v()},r)},S=()=>{x!==null&&(clearTimeout(x),x=null)},E=()=>{S(),l=void 0,u=null},C=()=>{S(),h()},T=function(...R){if(i!=null&&i.aborted)return;l=this,u=R;const N=x==null;_(),f&&N&&h()};return T.schedule=_,T.cancel=E,T.flush=C,i==null||i.addEventListener("abort",E,{once:!0}),T}t.debounce=e}(vv)),vv}var rD;function VZ(){return rD||(rD=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qZ();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:u=!0,maxWait:f}=a,d=Array(2);l&&(d[0]="leading"),u&&(d[1]="trailing");let h,v=null;const x=e.debounce(function(...E){h=r.apply(this,E),v=null},i,{edges:d}),_=function(...E){return f!=null&&(v===null&&(v=Date.now()),Date.now()-v>=f)?(h=r.apply(this,E),v=Date.now(),x.cancel(),x.schedule(),h):(x.apply(this,E),h)},S=()=>(x.flush(),h);return _.cancel=x.cancel,_.flush=S,_}t.debounce=n}(yv)),yv}var iD;function zZ(){return iD||(iD=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VZ();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:l=!0,trailing:u=!0}=a;return e.debounce(r,i,{leading:l,trailing:u,maxWait:i})}t.throttle=n}(gv)),gv}var xv,aD;function GZ(){return aD||(aD=1,xv=zZ().throttle),xv}var HZ=GZ();const KZ=Qr(HZ);var bv=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _v(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){YZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YZ(t,e,n){return(e=WZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WZ(t){var e=XZ(t,"string");return typeof e=="symbol"?e:e+""}function XZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JZ=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:l=0,minHeight:u,maxHeight:f,children:d,debounce:h=0,id:v,className:x,onResize:_,style:S={}}=t,E=A.useRef(null),C=A.useRef();C.current=_,A.useImperativeHandle(e,()=>E.current);var[T,R]=A.useState({containerWidth:r.width,containerHeight:r.height}),N=A.useCallback((D,k)=>{R(I=>{var j=Math.round(D),U=Math.round(k);return I.containerWidth===j&&I.containerHeight===U?I:{containerWidth:j,containerHeight:U}})},[]);A.useEffect(()=>{var D=U=>{var re,{width:B,height:Z}=U[0].contentRect;N(B,Z),(re=C.current)===null||re===void 0||re.call(C,B,Z)};h>0&&(D=KZ(D,h,{trailing:!0,leading:!1}));var k=new ResizeObserver(D),{width:I,height:j}=E.current.getBoundingClientRect();return N(I,j),k.observe(E.current),()=>{k.disconnect()}},[N,h]);var O=A.useMemo(()=>{var{containerWidth:D,containerHeight:k}=T;if(D<0||k<0)return null;bv(Xu(i)||Xu(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),bv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var I=Xu(i)?D:i,j=Xu(a)?k:a;return n&&n>0&&(I?j=I/n:j&&(I=j*n),f&&j>f&&(j=f)),bv(I>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,j,i,a,l,u,n),A.Children.map(d,U=>A.cloneElement(U,{width:I,height:j,style:_v({height:"100%",width:"100%",maxHeight:j,maxWidth:I},U.props.style)}))},[n,d,a,f,u,l,T,i]);return A.createElement("div",{id:v?"".concat(v):void 0,className:xn("recharts-responsive-container",x),style:_v(_v({},S),{},{width:i,height:a,minWidth:l,minHeight:u,maxHeight:f}),ref:E},O)}),um=t=>null;um.displayName="Cell";function sD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sD(Object(n),!0).forEach(function(r){ZZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZZ(t,e,n){return(e=QZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QZ(t){var e=eQ(t,"string");return typeof e=="symbol"?e:e+""}function eQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ks={widthCache:{},cacheCount:0},tQ=2e3,nQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lD="recharts_measurement_span";function rQ(t){var e=K0({},t);return Object.keys(e).forEach(n=>{e[n]||delete e[n]}),e}var uD=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Gh.isSsr)return{width:0,height:0};var r=rQ(n),i=JSON.stringify({text:e,copyStyle:r});if(Ks.widthCache[i])return Ks.widthCache[i];try{var a=document.getElementById(lD);a||(a=document.createElement("span"),a.setAttribute("id",lD),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var l=K0(K0({},nQ),r);Object.assign(a.style,l),a.textContent="".concat(e);var u=a.getBoundingClientRect(),f={width:u.width,height:u.height};return Ks.widthCache[i]=f,++Ks.cacheCount>tQ&&(Ks.cacheCount=0,Ks.widthCache={}),f}catch{return{width:0,height:0}}},cD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,aQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Sk={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},oQ=Object.keys(Sk),Js="NaN";function sQ(t,e){return t*Sk[e]}class rr{static parse(e){var n,[,r,i]=(n=aQ.exec(e))!==null&&n!==void 0?n:[];return new rr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Jr(e)&&(this.unit=""),n!==""&&!iQ.test(n)&&(this.num=NaN,this.unit=""),oQ.includes(n)&&(this.num=sQ(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new rr(NaN,""):new rr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new rr(NaN,""):new rr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new rr(NaN,""):new rr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new rr(NaN,""):new rr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Jr(this.num)}}function Ek(t){if(t.includes(Js))return Js;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=cD.exec(e))!==null&&n!==void 0?n:[],l=rr.parse(r??""),u=rr.parse(a??""),f=i==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return Js;e=e.replace(cD,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,h,v,x]=(d=dD.exec(e))!==null&&d!==void 0?d:[],_=rr.parse(h??""),S=rr.parse(x??""),E=v==="+"?_.add(S):_.subtract(S);if(E.isNaN())return Js;e=e.replace(dD,E.toString())}return e}var fD=/\(([^()]*)\)/;function lQ(t){for(var e=t,n;(n=fD.exec(e))!=null;){var[,r]=n;e=e.replace(fD,Ek(r))}return e}function uQ(t){var e=t.replace(/\s+/g,"");return e=lQ(e),e=Ek(e),e}function cQ(t){try{return uQ(t)}catch{return Js}}function wv(t){var e=cQ(t.slice(5,-1));return e===Js?"":e}var dQ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],fQ=["dx","dy","angle","className","breakAll"];function Y0(){return Y0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y0.apply(null,arguments)}function hD(t,e){if(t==null)return{};var n,r,i=hQ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hQ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ck=/[ \f\n\r\t\v\u2028\u2029]+/,Tk=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];jo(e)||(n?i=e.toString().split(""):i=e.toString().split(Ck));var a=i.map(u=>({word:u,width:uD(u,r).width})),l=n?0:uD(" ",r).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}},mQ=(t,e,n,r,i)=>{var{maxLines:a,children:l,style:u,breakAll:f}=t,d=st(a),h=l,v=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce((Z,me)=>{var{word:H,width:ve}=me,z=Z[Z.length-1];if(z&&(r==null||i||z.width+ve+n<Number(r)))z.words.push(H),z.width+=ve+n;else{var K={words:[H],width:ve};Z.push(K)}return Z},[])},x=v(e),_=re=>re.reduce((B,Z)=>B.width>Z.width?B:Z);if(!d||i)return x;var S=x.length>a||_(x).width>Number(r);if(!S)return x;for(var E="…",C=re=>{var B=h.slice(0,re),Z=Tk({breakAll:f,style:u,children:B+E}).wordsWithComputedWidth,me=v(Z),H=me.length>a||_(me).width>Number(r);return[H,me]},T=0,R=h.length-1,N=0,O;T<=R&&N<=h.length-1;){var D=Math.floor((T+R)/2),k=D-1,[I,j]=C(k),[U]=C(D);if(!I&&!U&&(T=D+1),I&&U&&(R=D-1),!I&&U){O=j;break}N++}return O||x},mD=t=>{var e=jo(t)?[]:t.toString().split(Ck);return[{words:e}]},pQ=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:l}=t;if((e||n)&&!Gh.isSsr){var u,f,d=Tk({breakAll:a,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:v}=d;u=h,f=v}else return mD(r);return mQ({breakAll:a,children:r,maxLines:l,style:i},u,f,e,n)}return mD(r)},pD="#808080",Ak=A.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:f="end",fill:d=pD}=t,h=hD(t,dQ),v=A.useMemo(()=>pQ({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:x,dy:_,angle:S,className:E,breakAll:C}=h,T=hD(h,fQ);if(!Hi(n)||!Hi(r))return null;var R=n+(st(x)?x:0),N=r+(st(_)?_:0),O;switch(f){case"start":O=wv("calc(".concat(a,")"));break;case"middle":O=wv("calc(".concat((v.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:O=wv("calc(".concat(v.length-1," * -").concat(i,")"));break}var D=[];if(l){var k=v[0].width,{width:I}=h;D.push("scale(".concat(st(I)?I/k:1,")"))}return S&&D.push("rotate(".concat(S,", ").concat(R,", ").concat(N,")")),D.length&&(T.transform=D.join(" ")),A.createElement("text",Y0({},Mn(T,!0),{ref:e,x:R,y:N,className:xn("recharts-text",E),textAnchor:u,fill:d.includes("url")?pD:d}),v.map((j,U)=>{var re=j.words.join(C?"":" ");return A.createElement("tspan",{x:R,dy:U===0?O:i,key:"".concat(re,"-").concat(U)},re)}))});Ak.displayName="Text";var Nk=t=>t.graphicalItems.polarItems,gQ=oe([en,Rc],wb),Hb=oe([Nk,tn,gQ],Sb),yQ=oe([Hb],Eb),Kb=oe([yQ,fb],Cb),vQ=oe([Kb,tn,Hb],Tb),xQ=oe([Kb,tn,Hb],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,l=Dn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Dn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]}))),gD=()=>{},bQ=oe([tn,zR,gD,xQ,gD],Db),Dk=oe([tn,Ht,Kb,vQ,Oc,en,bQ],Mb),_Q=oe([Dk,tn,Ll],kb);oe([tn,Dk,_Q,en],Ib);var wQ={radiusAxis:{},angleAxis:{}},Mk=Ur({name:"polarAxis",initialState:wQ,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Qte,removeRadiusAxis:ene,addAngleAxis:tne,removeAngleAxis:nne}=Mk.actions,SQ=Mk.reducer;function yD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(n),!0).forEach(function(r){EQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EQ(t,e,n){return(e=CQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CQ(t){var e=TQ(t,"string");return typeof e=="symbol"?e:e+""}function TQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yb=(t,e)=>e,AQ=[],Wb=(t,e,n)=>(n==null?void 0:n.length)===0?AQ:n,Ok=oe([fb,Yb,Wb],(t,e,n)=>{var{chartData:r}=t,i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>vD(vD({},e.presentationProps),a.props))),i!=null)return i}),NQ=oe([Ok,Yb,Wb],(t,e,n)=>{if(t!=null)return t.map((r,i)=>{var a,l=Dn(r,e.nameKey,e.name),u;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=e.fill,{value:hO(l,e.dataKey),color:u,payload:r,type:e.legendType}})}),DQ=oe([Nk,Yb],(t,e)=>{if(t.some(n=>n.type==="pie"&&e.dataKey===n.dataKey&&e.data===n.data))return e}),MQ=oe([Ok,DQ,Wb,Jn],(t,e,n,r)=>{if(!(e==null||t==null))return xee({offset:r,pieSettings:e,displayedData:t,cells:n})}),OQ={countOfBars:0,cartesianItems:[],polarItems:[]},Rk=Ur({name:"graphicalItems",initialState:OQ,reducers:{addBar(t){t.countOfBars+=1},removeBar(t){t.countOfBars-=1},addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},removeCartesianGraphicalItem(t,e){var n=Ua(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Ua(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addBar:rne,removeBar:ine,addCartesianGraphicalItem:ane,removeCartesianGraphicalItem:one,addPolarGraphicalItem:RQ,removePolarGraphicalItem:kQ}=Rk.actions,PQ=Rk.reducer;function IQ(t){var e=On();return A.useEffect(()=>(e(RQ(t)),()=>{e(kQ(t))}),[e,t]),null}var Sv={},xD;function LQ(){return xD||(xD=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e}(Sv)),Sv}var Ev,bD;function jQ(){return bD||(bD=1,Ev=LQ().isPlainObject),Ev}var UQ=jQ();const $Q=Qr(UQ);function fh(){return fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fh.apply(null,arguments)}var _D=(t,e,n,r,i)=>{var a=n-r,l;return l="M ".concat(t,",").concat(e),l+="L ".concat(t+n,",").concat(e),l+="L ".concat(t+n-a/2,",").concat(e+i),l+="L ".concat(t+n-a/2-r,",").concat(e+i),l+="L ".concat(t,",").concat(e," Z"),l},FQ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BQ=t=>{var e=Ho(t,FQ),n=A.useRef(),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&i(C)}catch{}},[]);var{x:a,y:l,upperWidth:u,lowerWidth:f,height:d,className:h}=e,{animationEasing:v,animationDuration:x,animationBegin:_,isUpdateAnimationActive:S}=e;if(a!==+a||l!==+l||u!==+u||f!==+f||d!==+d||u===0&&f===0||d===0)return null;var E=xn("recharts-trapezoid",h);return S?A.createElement(cc,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:d,x:a,y:l},to:{upperWidth:u,lowerWidth:f,height:d,x:a,y:l},duration:x,animationEasing:v,isActive:S},C=>{var{upperWidth:T,lowerWidth:R,height:N,x:O,y:D}=C;return A.createElement(cc,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:_,duration:x,easing:v},A.createElement("path",fh({},Mn(e,!0),{className:E,d:_D(O,D,T,R,N),ref:n})))}):A.createElement("g",null,A.createElement("path",fh({},Mn(e,!0),{className:E,d:_D(a,l,u,f,d)})))},qQ=["option","shapeType","propTransformer","activeClassName","isActive"];function VQ(t,e){if(t==null)return{};var n,r,i=zQ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zQ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function wD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wD(Object(n),!0).forEach(function(r){GQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GQ(t,e,n){return(e=HQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HQ(t){var e=KQ(t,"string");return typeof e=="symbol"?e:e+""}function KQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YQ(t,e){return hh(hh({},e),t)}function WQ(t,e){return t==="symbols"}function SD(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(NO,n);case"trapezoid":return A.createElement(BQ,n);case"sector":return A.createElement(OO,n);case"symbols":if(WQ(e))return A.createElement(Ax,n);break;default:return null}}function XQ(t){return A.isValidElement(t)?t.props:t}function JQ(t){var{option:e,shapeType:n,propTransformer:r=YQ,activeClassName:i="recharts-active-shape",isActive:a}=t,l=VQ(t,qQ),u;if(A.isValidElement(e))u=A.cloneElement(e,hh(hh({},l),XQ(e)));else if(typeof e=="function")u=e(l);else if($Q(e)&&typeof e!="boolean"){var f=r(e,l);u=A.createElement(SD,{shapeType:n,elementProps:f})}else{var d=l;u=A.createElement(SD,{shapeType:n,elementProps:d})}return a?A.createElement(ml,{className:i},u):u}var ZQ=(t,e)=>{var n=On();return(r,i)=>a=>{t==null||t(r,i,a),n(rk({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},QQ=t=>{var e=On();return(n,r)=>i=>{t==null||t(n,r,i),e(mJ())}},eee=(t,e)=>{var n=On();return(r,i)=>a=>{t==null||t(r,i,a),n(pJ({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function tee(t){var{fn:e,args:n}=t,r=On(),i=Nl();return A.useEffect(()=>{if(!i){var a=e(n);return r(dJ(a)),()=>{r(fJ(a))}}},[e,n,r,i]),null}var nee=()=>{};function ree(t){var{legendPayload:e}=t,n=On(),r=ot(Ht);return A.useEffect(()=>r!=="centric"&&r!=="radial"?nee:(n(VG(e)),()=>{n(zG(e))}),[n,r,e]),null}function iee(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(If(e)),r=A.useRef(t);return r.current!==t&&(n.current=If(e),r.current=t),n.current}var aee=["onMouseEnter","onClick","onMouseLeave"];function oee(t,e){if(t==null)return{};var n,r,i=see(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function see(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ED(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(n),!0).forEach(function(r){cm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cm(t,e,n){return(e=lee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lee(t){var e=uee(t,"string");return typeof e=="symbol"?e:e+""}function uee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bo(){return Bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bo.apply(null,arguments)}function cee(t){var e=A.useMemo(()=>Mn(t,!1),[t]),n=A.useMemo(()=>d2(t.children,um),[t.children]),r=A.useMemo(()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:e}),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,e]),i=ot(a=>NQ(a,r,n));return A.createElement(ree,{legendPayload:i})}function dee(t){var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:l,name:u,hide:f,tooltipType:d}=t;return{dataDefinedOnItem:r==null?void 0:r.map(h=>h.tooltipPayload),positions:r==null?void 0:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:l,dataKey:e,nameKey:n,name:hO(u,e),hide:f,type:d,color:l,unit:""}}}var fee=(t,e)=>t>e?"start":t<e?"end":"middle",hee=(t,e,n)=>typeof e=="function"?e(t):di(e,n,n*.8),mee=(t,e,n)=>{var{top:r,left:i,width:a,height:l}=e,u=fO(a,l),f=i+di(t.cx,a,a/2),d=r+di(t.cy,l,l/2),h=di(t.innerRadius,u,0),v=hee(n,t.outerRadius,u),x=t.maxRadius||Math.sqrt(a*a+l*l)/2;return{cx:f,cy:d,innerRadius:h,outerRadius:v,maxRadius:x}},pee=(t,e)=>{var n=mr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},gee=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=xn("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return A.createElement(EO,Bo({},e,{type:"linear",className:n}))},yee=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=xn("recharts-pie-label-text",typeof t!="boolean"&&typeof t!="function"?t.className:"");return A.createElement(Ak,Bo({},e,{alignmentBaseline:"middle",className:i}),r)};function vee(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:l}=n;if(!r||!i||!e)return null;var u=Mn(n,!1),f=Mn(i,!1),d=Mn(a,!1),h=typeof i=="object"&&"offsetRadius"in i&&i.offsetRadius||20,v=e.map((x,_)=>{var S=(x.startAngle+x.endAngle)/2,E=zn(x.cx,x.cy,x.outerRadius+h,S),C=Wt(Wt(Wt(Wt({},u),x),{},{stroke:"none"},f),{},{index:_,textAnchor:fee(E.x,x.cx)},E),T=Wt(Wt(Wt(Wt({},u),x),{},{fill:"none",stroke:x.fill},d),{},{index:_,points:[zn(x.cx,x.cy,x.outerRadius,S),E],key:"line"});return A.createElement(ml,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(_)},a&&gee(a,T),yee(i,C,Dn(x,l)))});return A.createElement(ml,{className:"recharts-pie-labels"},v)}function kk(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,showLabels:a}=t,l=ot(ch),{onMouseEnter:u,onClick:f,onMouseLeave:d}=i,h=oee(i,aee),v=ZQ(u,i.dataKey),x=QQ(d),_=eee(f,i.dataKey);return e==null?null:A.createElement(A.Fragment,null,e.map((S,E)=>{if((S==null?void 0:S.startAngle)===0&&(S==null?void 0:S.endAngle)===0&&e.length!==1)return null;var C=n&&String(E)===l,T=l?r:null,R=C?n:T,N=Wt(Wt({},S),{},{stroke:S.stroke,tabIndex:-1,[pO]:E,[gO]:i.dataKey});return A.createElement(ml,Bo({tabIndex:-1,className:"recharts-pie-sector"},u2(h,S,E),{onMouseEnter:v(S,E),onMouseLeave:x(S,E),onClick:_(S,E),key:"sector-".concat(S==null?void 0:S.startAngle,"-").concat(S==null?void 0:S.endAngle,"-").concat(S.midAngle,"-").concat(E)}),A.createElement(JQ,Bo({option:R,isActive:C,shapeType:"sector"},N)))}),A.createElement(vee,{sectors:e,props:i,showLabels:a}))}function xee(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:l,startAngle:u,endAngle:f,dataKey:d,nameKey:h,tooltipType:v}=n,x=Math.abs(n.minAngle),_=pee(u,f),S=Math.abs(_),E=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,C=r.filter(k=>Dn(k,d,0)!==0).length,T=(S>=360?C:C-1)*E,R=S-C*x-T,N=r.reduce((k,I)=>{var j=Dn(I,d,0);return k+(st(j)?j:0)},0),O;if(N>0){var D;O=r.map((k,I)=>{var j=Dn(k,d,0),U=Dn(k,h,I),re=mee(n,a,k),B=(st(j)?j:0)/N,Z,me=Wt(Wt({},k),i&&i[I]&&i[I].props);I?Z=D.endAngle+mr(_)*E*(j!==0?1:0):Z=u;var H=Z+mr(_)*((j!==0?x:0)+B*R),ve=(Z+H)/2,z=(re.innerRadius+re.outerRadius)/2,K=[{name:U,value:j,payload:me,dataKey:d,type:v}],ye=zn(re.cx,re.cy,z,ve);return D=Wt(Wt(Wt(Wt({},n.presentationProps),{},{percent:B,cornerRadius:l,name:U,tooltipPayload:K,midAngle:ve,middleRadius:z,tooltipPosition:ye},me),re),{},{value:Dn(k,d),startAngle:Z,endAngle:H,payload:me,paddingAngle:mr(_)*E}),D})}return O}function bee(t){var{props:e,previousSectorsRef:n}=t,{sectors:r,isAnimationActive:i,animationBegin:a,animationDuration:l,animationEasing:u,activeShape:f,inactiveShape:d,onAnimationStart:h,onAnimationEnd:v}=e,x=iee(e,"recharts-pie-"),_=n.current,[S,E]=A.useState(!0),C=A.useCallback(()=>{typeof v=="function"&&v(),E(!1)},[v]),T=A.useCallback(()=>{typeof h=="function"&&h(),E(!0)},[h]);return A.createElement(cc,{begin:a,duration:l,isActive:i,easing:u,from:{t:0},to:{t:1},onAnimationStart:T,onAnimationEnd:C,key:x},R=>{var{t:N}=R,O=[],D=r&&r[0],k=D.startAngle;return r.forEach((I,j)=>{var U=_&&_[j],re=j>0?hl(I,"paddingAngle",0):0;if(U){var B=dT(U.endAngle-U.startAngle,I.endAngle-I.startAngle),Z=Wt(Wt({},I),{},{startAngle:k+re,endAngle:k+B(N)+re});O.push(Z),k=Z.endAngle}else{var{endAngle:me,startAngle:H}=I,ve=dT(0,me-H),z=ve(N),K=Wt(Wt({},I),{},{startAngle:k+re,endAngle:k+z+re});O.push(K),k=K.endAngle}}),n.current=O,A.createElement(ml,null,A.createElement(kk,{sectors:O,activeShape:f,inactiveShape:d,allOtherPieProps:e,showLabels:!S}))})}function _ee(t){var{sectors:e,isAnimationActive:n,activeShape:r,inactiveShape:i}=t,a=A.useRef(null),l=a.current;return n&&e&&e.length&&(!l||l!==e)?A.createElement(bee,{props:t,previousSectorsRef:a}):A.createElement(kk,{sectors:e,activeShape:r,inactiveShape:i,allOtherPieProps:t,showLabels:!0})}function wee(t){var{hide:e,className:n,rootTabIndex:r}=t,i=xn("recharts-pie",n);return e?null:A.createElement(ml,{tabIndex:r,className:i},A.createElement(_ee,t))}var Pk={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Gh.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function See(t){var e=Ho(t,Pk),n=A.useMemo(()=>d2(t.children,um),[t.children]),r=Mn(e,!1),i=A.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:r}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,r]),a=ot(l=>MQ(l,i,n));return A.createElement(A.Fragment,null,A.createElement(tee,{fn:dee,args:Wt(Wt({},e),{},{sectors:a})}),A.createElement(wee,Bo({},e,{sectors:a})))}class Xb extends A.PureComponent{constructor(){super(...arguments),cm(this,"id",If("recharts-pie-"))}render(){return A.createElement(A.Fragment,null,A.createElement(IQ,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),A.createElement(cee,this.props),A.createElement(See,this.props),this.props.children)}}cm(Xb,"displayName","Pie");cm(Xb,"defaultProps",Pk);var Eee=t=>{var{chartData:e}=t,n=On(),r=Nl();return A.useEffect(()=>r?()=>{}:(n(ZN(e)),()=>{n(ZN(void 0))}),[e,n,r]),null},CD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Ik=Ur({name:"brush",initialState:CD,reducers:{setBrushSettings(t,e){return e.payload==null?CD:e.payload}}}),{setBrushSettings:sne}=Ik.actions,Cee=Ik.reducer,Tee={dots:[],areas:[],lines:[]},Lk=Ur({name:"referenceElements",initialState:Tee,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ua(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ua(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ua(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:lne,removeDot:une,addArea:cne,removeArea:dne,addLine:fne,removeLine:hne}=Lk.actions,Aee=Lk.reducer,Nee=A.createContext(void 0),Dee=t=>{var{children:e}=t,[n]=A.useState("".concat(If("recharts"),"-clip")),r=vO();if(r==null)return null;var{left:i,top:a,height:l,width:u}=r;return A.createElement(Nee.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:l,width:u}))),e)};function TD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(n),!0).forEach(function(r){Mee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mee(t,e,n){return(e=Oee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oee(t){var e=Ree(t,"string");return typeof e=="symbol"?e:e+""}function Ree(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kee={xAxis:{},yAxis:{},zAxis:{}},jk=Ur({name:"cartesianAxis",initialState:kee,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=AD(AD({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:mne,removeXAxis:pne,addYAxis:gne,removeYAxis:yne,addZAxis:vne,removeZAxis:xne,updateYAxisWidth:bne}=jk.actions,Pee=jk.reducer,Cv={exports:{}},Tv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ND;function Iee(){if(ND)return Tv;ND=1;var t=_l();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,l=t.useMemo,u=t.useDebugValue;return Tv.useSyncExternalStoreWithSelector=function(f,d,h,v,x){var _=i(null);if(_.current===null){var S={hasValue:!1,value:null};_.current=S}else S=_.current;_=l(function(){function C(D){if(!T){if(T=!0,R=D,D=v(D),x!==void 0&&S.hasValue){var k=S.value;if(x(k,D))return N=k}return N=D}if(k=N,n(R,D))return k;var I=v(D);return x!==void 0&&x(k,I)?(R=D,k):(R=D,N=I)}var T=!1,R,N,O=h===void 0?null:h;return[function(){return C(d())},O===null?void 0:function(){return C(O())}]},[d,h,v,x]);var E=r(f,_[0],_[1]);return a(function(){S.hasValue=!0,S.value=E},[E]),u(E),E},Tv}var DD;function Lee(){return DD||(DD=1,Cv.exports=Iee()),Cv.exports}Lee();function jee(t){t()}function Uee(){let t=null,e=null;return{clear(){t=null,e=null},notify(){jee(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var MD={notify(){},get:()=>[]};function $ee(t,e){let n,r=MD,i=0,a=!1;function l(E){h();const C=r.subscribe(E);let T=!1;return()=>{T||(T=!0,C(),v())}}function u(){r.notify()}function f(){S.onStateChange&&S.onStateChange()}function d(){return a}function h(){i++,n||(n=t.subscribe(f),r=Uee())}function v(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=MD)}function x(){a||(a=!0,h())}function _(){a&&(a=!1,v())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:d,trySubscribe:x,tryUnsubscribe:_,getListeners:()=>r};return S}var Fee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bee=Fee(),qee=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Vee=qee(),zee=()=>Bee||Vee?A.useLayoutEffect:A.useEffect,Gee=zee(),Av=Symbol.for("react-redux-context"),Nv=typeof globalThis<"u"?globalThis:{};function Hee(){if(!A.createContext)return{};const t=Nv[Av]??(Nv[Av]=new Map);let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var Kee=Hee();function Yee(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const f=$ee(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),l=A.useMemo(()=>i.getState(),[i]);Gee(()=>{const{subscription:f}=a;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[a,l]);const u=n||Kee;return A.createElement(u.Provider,{value:a},e)}var Wee=Yee,Xee=(t,e)=>e,Jb=oe([Xee,Ht,gX,kn,dk,ea,oZ,Jn],hZ),Zb=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},Uk=Ir("mouseClick"),$k=Tc();$k.startListening({actionCreator:Uk,effect:(t,e)=>{var n=t.payload,r=Jb(e.getState(),Zb(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(gJ({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var W0=Ir("mouseMove"),Fk=Tc();Fk.startListening({actionCreator:W0,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=Ub(r,r.tooltip.settings.shared),a=Jb(r,Zb(n));i==="axis"&&((a==null?void 0:a.activeIndex)!=null?e.dispatch(ak({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(ik()))}});function Jee(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var OD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Bk=Ur({name:"rootProps",initialState:OD,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:OD.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),Zee=Bk.reducer,{updateOptions:Qee}=Bk.actions,qk=Ur({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:ete}=qk.actions,tte=qk.reducer,Vk=Ir("keyDown"),zk=Ir("focus"),Qb=Tc();Qb.startListening({actionCreator:Vk,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=Number($b(i,Xo(n))),u=ea(n);if(a==="Enter"){var f=dh(n,"axis","hover",String(i.index));e.dispatch(z0({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:f}));return}var d=sJ(n),h=d==="left-to-right"?1:-1,v=a==="ArrowRight"?1:-1,x=l+v*h;if(!(u==null||x>=u.length||x<0)){var _=dh(n,"axis","hover",String(x));e.dispatch(z0({active:!0,activeIndex:x.toString(),activeDataKey:void 0,activeCoordinate:_}))}}}}});Qb.startListening({actionCreator:zk,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",l=dh(n,"axis","hover",String(a));e.dispatch(z0({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:l}))}}}});var Or=Ir("externalEvent"),Gk=Tc();Gk.startListening({actionCreator:Or,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:YJ(n),activeDataKey:GJ(n),activeIndex:ch(n),activeLabel:zJ(n),activeTooltipIndex:ch(n),isTooltipActive:WJ(n)};t.payload.handler(r,t.payload.reactEvent)}}});var nte=oe([jl],t=>t.tooltipItemPayloads),rte=oe([nte,om,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var l=e(a,n);return l}}}),Hk=Ir("touchMove"),Kk=Tc();Kk.startListening({actionCreator:Hk,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=Ub(r,r.tooltip.settings.shared);if(i==="axis"){var a=Jb(r,Zb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&e.dispatch(ak({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],f=document.elementFromPoint(u.clientX,u.clientY);if(!f||!f.getAttribute)return;var d=f.getAttribute(pO),h=(l=f.getAttribute(gO))!==null&&l!==void 0?l:void 0,v=rte(e.getState(),d,h);e.dispatch(rk({activeDataKey:h,activeIndex:d,activeCoordinate:v}))}}});var ite=V2({brush:Cee,cartesianAxis:Pee,chartData:MZ,graphicalItems:PQ,layout:iG,legend:GG,options:CZ,polarAxis:SQ,polarOptions:tte,referenceElements:Aee,rootProps:Zee,tooltip:yJ}),ate=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Dz({reducer:ite,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([$k.middleware,Fk.middleware,Qb.middleware,Gk.middleware,Kk.middleware]),devTools:{serialize:{replacer:Jee},name:"recharts-".concat(n)}})};function ote(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Nl(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=ate(e,r));var l=kx;return A.createElement(Wee,{context:l,store:a.current},n)}function ste(t){var{layout:e,width:n,height:r,margin:i}=t,a=On(),l=Nl();return A.useEffect(()=>{l||(a(tG(e)),a(nG({width:n,height:r})),a(eG(i)))},[a,l,e,n,r,i]),null}function lte(t){var e=On();return A.useEffect(()=>{e(Qee(t))},[e,t]),null}var ute=["children"];function cte(t,e){if(t==null)return{};var n,r,i=dte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function dte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mh.apply(null,arguments)}var fte={width:"100%",height:"100%"},hte=A.forwardRef((t,e)=>{var n=xO(),r=bO(),i=SO();if(!Wf(n)||!Wf(r))return null;var{children:a,otherAttributes:l,title:u,desc:f}=t,d,h;return typeof l.tabIndex=="number"?d=l.tabIndex:d=i?0:void 0,typeof l.role=="string"?h=l.role:h=i?"application":void 0,A.createElement(wx,mh({},l,{title:u,desc:f,role:h,tabIndex:d,width:n,height:r,style:fte,ref:e}),a)}),mte=t=>{var{children:e}=t,n=ot(Vh);if(!n)return null;var{width:r,height:i,y:a,x:l}=n;return A.createElement(wx,{width:r,height:i,x:l,y:a},e)},RD=A.forwardRef((t,e)=>{var{children:n}=t,r=cte(t,ute),i=Nl();return i?A.createElement(mte,null,n):A.createElement(hte,mh({ref:e},r),n)});function pte(){var t=On(),[e,n]=A.useState(null),r=ot(OG);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Zr(a)&&a!==r&&t(rG(a))}},[e,t,r]),n}function kD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gte(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kD(Object(n),!0).forEach(function(r){yte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yte(t,e,n){return(e=vte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vte(t){var e=xte(t,"string");return typeof e=="symbol"?e:e+""}function xte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bte=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:l,onDoubleClick:u,onMouseDown:f,onMouseEnter:d,onMouseLeave:h,onMouseMove:v,onMouseUp:x,onTouchEnd:_,onTouchMove:S,onTouchStart:E,style:C,width:T}=t,R=On(),[N,O]=A.useState(null),[D,k]=A.useState(null);kZ();var I=pte(),j=A.useCallback(te=>{I(te),typeof e=="function"&&e(te),O(te),k(te)},[I,e,O,k]),U=A.useCallback(te=>{R(Uk(te)),R(Or({handler:a,reactEvent:te}))},[R,a]),re=A.useCallback(te=>{R(W0(te)),R(Or({handler:d,reactEvent:te}))},[R,d]),B=A.useCallback(te=>{R(ik()),R(Or({handler:h,reactEvent:te}))},[R,h]),Z=A.useCallback(te=>{R(W0(te)),R(Or({handler:v,reactEvent:te}))},[R,v]),me=A.useCallback(()=>{R(zk())},[R]),H=A.useCallback(te=>{R(Vk(te.key))},[R]),ve=A.useCallback(te=>{R(Or({handler:l,reactEvent:te}))},[R,l]),z=A.useCallback(te=>{R(Or({handler:u,reactEvent:te}))},[R,u]),K=A.useCallback(te=>{R(Or({handler:f,reactEvent:te}))},[R,f]),ye=A.useCallback(te=>{R(Or({handler:x,reactEvent:te}))},[R,x]),Ee=A.useCallback(te=>{R(Or({handler:E,reactEvent:te}))},[R,E]),L=A.useCallback(te=>{R(Hk(te)),R(Or({handler:S,reactEvent:te}))},[R,S]),Y=A.useCallback(te=>{R(Or({handler:_,reactEvent:te}))},[R,_]);return A.createElement(xk.Provider,{value:N},A.createElement(f2.Provider,{value:D},A.createElement("div",{className:xn("recharts-wrapper",r),style:gte({position:"relative",cursor:"default",width:T,height:i},C),role:"application",onClick:U,onContextMenu:ve,onDoubleClick:z,onFocus:me,onKeyDown:H,onMouseDown:K,onMouseEnter:re,onMouseLeave:B,onMouseMove:Z,onMouseUp:ye,onTouchEnd:Y,onTouchMove:L,onTouchStart:Ee,ref:j},n)))}),_te=["children","className","width","height","style","compact","title","desc"];function wte(t,e){if(t==null)return{};var n,r,i=Ste(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ste(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ete=A.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:a,style:l,compact:u,title:f,desc:d}=t,h=wte(t,_te),v=Mn(h,!1);return u?A.createElement(RD,{otherAttributes:v,title:f,desc:d},n):A.createElement(bte,{className:r,style:l,width:i,height:a,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(RD,{otherAttributes:v,title:f,desc:d,ref:e},A.createElement(Dee,null,n)))});function Cte(t){var e=On();return A.useEffect(()=>{e(ete(t))},[e,t]),null}var Tte=["width","height","layout"];function X0(){return X0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X0.apply(null,arguments)}function Ate(t,e){if(t==null)return{};var n,r,i=Nte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Dte={top:5,right:5,bottom:5,left:5},Mte={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Dte,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Ote=A.forwardRef(function(e,n){var r,i=Ho(e.categoricalChartProps,Mte),{width:a,height:l,layout:u}=i,f=Ate(i,Tte);if(!Wf(a)||!Wf(l))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:v,tooltipPayloadSearcher:x}=e,_={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:v,tooltipPayloadSearcher:x,eventEmitter:void 0};return A.createElement(ote,{preloadedState:{options:_},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:d},A.createElement(Eee,{chartData:i.data}),A.createElement(ste,{width:a,height:l,layout:u,margin:i.margin}),A.createElement(lte,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),A.createElement(Cte,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(Ete,X0({width:a,height:l},f,{ref:n})))}),Rte=["item"],kte={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Pte=A.forwardRef((t,e)=>{var n=Ho(t,kte);return A.createElement(Ote,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Rte,tooltipPayloadSearcher:SZ,categoricalChartProps:n,ref:e})});const Ite=["#0088FE","#00C49F","#FFBB28","#FF8042","#A230ED","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF"],Lte=["#4CAF50","#FF9800"],jte=()=>{const{state:t}=ei(),{documents:e,isLoading:n}=t,{state:r,getCategory:i}=vr(),{mainCategories:a,allClassifications:l,isLoading:u,isLoaded:f}=r,d=A.useMemo(()=>{if(!f||e.length===0)return[];const S={};return e.forEach(E=>{const C=E.dewey_code;let T=C.substring(0,3);if(!(C.includes(".")&&T==="000")){const R=l.find(N=>N.code===C&&N.level===2);R&&R.parent_code&&(T=R.parent_code)}S[T]=(S[T]||0)+1}),a.filter(E=>S[E.code]>0).map(E=>({name:`${E.name} (${E.code})`,value:S[E.code]||0})).sort((E,C)=>C.value-E.value)},[e,a,l,f]),h=A.useMemo(()=>{if(!f||e.length===0)return[];const S={};return e.forEach(E=>{S[E.dewey_code]=(S[E.dewey_code]||0)+1}),Object.entries(S).map(([E,C])=>{const T=i(E);return{name:T?`${T.name} (${T.code})`:`Desconocido (${E})`,value:C}}).filter(E=>E.value>0).sort((E,C)=>C.value-E.value)},[e,i,f]),v=A.useMemo(()=>{if(e.length===0)return[];let S=0,E=0;e.forEach(T=>{T.physical_location_id?S++:E++});const C=[];return S>0&&C.push({name:"Documentos Físicos",value:S}),E>0&&C.push({name:"Documentos Digitales",value:E}),C},[e]);if(n||u)return p.jsx(Ft,{text:"Cargando estadísticas..."});if(!f||e.length===0)return p.jsx("p",{className:"text-center text-neutral-dark py-4",children:"No hay datos suficientes para mostrar estadísticas."});const x=({active:S,payload:E})=>S&&E&&E.length?p.jsxs("div",{className:"bg-white p-2 border border-neutral-light shadow-md rounded text-sm",children:[p.jsx("p",{className:"font-semibold",children:`${E[0].name}`}),p.jsx("p",{className:"text-primary",children:`Documentos: ${E[0].value}`})]}):null,_=(S,E,C=Ite)=>S.length===0?p.jsxs("div",{className:"w-full p-2",children:[p.jsx("h3",{className:"text-lg font-semibold text-neutral-dark mb-2 text-center",children:E}),p.jsx("div",{className:"h-64 flex items-center justify-center bg-neutral-lightest rounded-md",children:p.jsx("p",{className:"text-neutral-dark",children:"No hay datos para esta gráfica."})})]}):p.jsxs("div",{className:"w-full p-2",children:[p.jsx("h3",{className:"text-lg font-semibold text-neutral-dark mb-2 text-center",children:E}),p.jsx(JZ,{width:"100%",height:300,children:p.jsxs(Pte,{children:[p.jsx(Xb,{data:S,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:R})=>`${(R*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",children:S.map((T,R)=>p.jsx(um,{fill:C[R%C.length]},`cell-${R}`))}),p.jsx(BZ,{content:p.jsx(x,{})}),p.jsx(zh,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px",overflowY:"auto",maxHeight:"80px"}})]})})]});return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 pt-4",children:[_(d,"Distribución por Categoría Principal"),_(h,"Distribución por Subcategoría"),_(v,"Distribución Físico vs. Digital",Lte)]})},Ute=({document:t,onOpenMoveModal:e,onOpenEditModal:n,currentDeweyName:r,uploaderName:i,physicalLocationString:a,isUpdatingThis:l,isEditingThis:u})=>{const f=h=>{switch(h){case Te.PDF:return p.jsx(xh,{className:"w-5 h-5 text-red-500"});case Te.JPG:case Te.PNG:return p.jsx(bh,{className:"w-5 h-5 text-blue-500"});case Te.DOCX:return p.jsx(_h,{className:"w-5 h-5 text-sky-600"});case Te.TXT:return p.jsx(wh,{className:"w-5 h-5 text-gray-500"});default:return p.jsx(Sh,{className:"w-5 h-5 text-gray-400"})}},d=l||u;return p.jsx("li",{className:"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow duration-150",children:p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start",children:[p.jsxs("div",{className:"flex items-start mb-2 sm:mb-0 flex-grow min-w-0",children:[p.jsx("span",{className:"mt-1 mr-3 flex-shrink-0",children:f(t.type)}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("p",{className:"font-semibold text-neutral-dark truncate",title:t.name,children:t.name}),p.jsxs("p",{className:"text-xs text-secondary-dark truncate",title:`Clasificación: ${r}`,children:["Clasif: ",p.jsx("span",{className:"font-medium",children:r})]}),p.jsxs("p",{className:"text-xs text-neutral-dark truncate",title:`Subido por: ${i}`,children:[p.jsx(yn,{className:"w-3 h-3 inline mr-0.5"})," ",i]}),t.physical_location_id&&p.jsxs("p",{className:"text-xs text-neutral-dark truncate",title:`Ubicación: ${a}`,children:[p.jsx(mi,{className:"w-3 h-3 inline mr-0.5 text-green-600"})," ",a]}),!t.physical_location_id&&p.jsxs("p",{className:"text-xs text-neutral-dark italic",children:[p.jsx(mi,{className:"w-3 h-3 inline mr-0.5 text-neutral"})," Digital"]})]})]}),p.jsxs("div",{className:"self-start sm:self-center mt-2 sm:mt-0 flex space-x-2 flex-shrink-0",children:[p.jsx(Se,{onClick:()=>n(t),variant:"ghost",size:"sm",leftIcon:p.jsx(qa,{className:"w-4 h-4"}),disabled:d,className:"text-secondary hover:bg-secondary-light",children:"Editar"}),p.jsx(Se,{onClick:()=>e(t),variant:"ghost",size:"sm",leftIcon:p.jsx(hi,{className:"w-4 h-4"}),isLoading:l,disabled:d,className:"text-primary hover:bg-primary-light",children:l?"Moviendo...":"Cambiar Clasif."})]})]})})},$te=()=>{const{state:t,updateDocumentDeweyCode:e,dispatch:n}=ei(),{documents:r,isLoading:i,isUpdating:a,updateError:l}=t,{state:u}=Fn(),{allUsers:f,usersSuccessfullyLoadedFromDB:d,currentRole:h}=u,{state:v,getCategory:x}=vr(),{state:_,getLocationById:S}=yi(),[E,C]=A.useState(""),[T,R]=A.useState("uploadDate"),[N,O]=A.useState("desc"),[D,k]=A.useState(""),[I,j]=A.useState(!1),[U,re]=A.useState(null),[B,Z]=A.useState(!1),[me,H]=A.useState(null);A.useEffect(()=>{T==="name"||T==="dewey_code"?O("asc"):T==="uploadDate"&&O("desc")},[T]);const ve=A.useMemo(()=>d?new Map(f.map(se=>[se.id,se])):new Map,[f,d]),z=se=>{if(!se)return"Sistema/Desconocido";const pe=ve.get(se);return pe?pe.full_name||pe.email:`Usuario Desconocido (ID: ${se.substring(0,8)}...)`},K=se=>{if(!v.isLoaded)return se;const pe=x(se);return pe?`${pe.code} - ${pe.name}`:se},ye=se=>{if(!se||!_.isLoaded)return"Digital";const pe=S(se);return pe?`${pe.office}, ${pe.shelf}, ${pe.row_level}`:"Ubicación Desconocida"},Ee=A.useMemo(()=>{let se=r;if(D&&(se=se.filter(pe=>pe.user_id===D)),E){const pe=$t(E);se=se.filter(V=>$t(V.name).includes(pe)||$t(K(V.dewey_code)).includes(pe)||$t(z(V.user_id)).includes(pe)||V.physical_location_id&&$t(ye(V.physical_location_id)).includes(pe))}return[...se].sort((pe,V)=>{let _e,W;return T==="name"?(_e=pe.name.toLowerCase(),W=V.name.toLowerCase()):T==="dewey_code"?(_e=K(pe.dewey_code).toLowerCase(),W=K(V.dewey_code).toLowerCase()):(_e=new Date(pe.uploadDate).getTime(),W=new Date(V.uploadDate).getTime()),_e<W?N==="asc"?-1:1:_e>W?N==="asc"?1:-1:0})},[r,E,T,N,D,K,z,ye,v.isLoaded,_.isLoaded]),L=A.useMemo(()=>{if(!D)return null;const se=r.filter(V=>V.user_id===D);if(se.length===0)return{total:0,byType:{},user:f.find(V=>V.id===D)};const pe=se.reduce((V,_e)=>(V.byType[_e.type]=(V.byType[_e.type]||0)+1,V),{byType:{}});return{total:se.length,byType:pe.byType,user:f.find(V=>V.id===D)}},[D,r,f]),Y=se=>{re(se),j(!0),l&&n({type:"CLEAR_UPDATE_ERROR"})},te=()=>{j(!1),re(null)},ie=async se=>U?!!await e(U.id,se):!1,we=se=>{H(se),Z(!0),l&&n({type:"CLEAR_UPDATE_ERROR"})},ge=()=>{Z(!1),H(null)},ue=()=>{n({type:"CLEAR_UPDATE_ERROR"})};return i||u.isLoading||v.isLoading||_.isLoading?p.jsx(Ft,{text:"Cargando datos de administración de documentos...",className:"mt-10"}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs(ln,{to:"/admin",className:"text-sm text-primary hover:text-primary-dark inline-flex items-center group mb-2",children:[p.jsx(Sl,{className:"w-4 h-4 mr-1.5 transition-transform group-hover:-translate-x-0.5"}),"Volver al Panel de Administración"]}),p.jsx("h1",{className:"text-3xl font-semibold text-primary",children:"Gestionar Documentos"}),p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[p.jsxs("h2",{className:"text-2xl font-semibold text-primary-dark mb-4 flex items-center",children:[p.jsx(Sj,{className:"w-6 h-6 mr-2 text-secondary"}),"Estadísticas de Clasificación"]}),p.jsx(jte,{})]}),p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-xl font-semibold text-primary-dark mb-3",children:"Filtrar y Ordenar Documentos"}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 items-end",children:[p.jsxs("div",{className:"flex-grow",children:[p.jsx("label",{htmlFor:"searchDocs",className:"block text-sm font-medium text-neutral-dark",children:"Buscar Documentos"}),p.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(gh,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{type:"text",id:"searchDocs",className:"focus:ring-primary focus:border-primary block w-full pl-10 sm:text-sm border-neutral-default rounded-md py-2",placeholder:"Buscar por nombre, clasificación, cargador, ubicación...",value:E,onChange:se=>C(se.target.value)})]})]}),p.jsxs("div",{className:"flex items-end space-x-2",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"sortKeyDocs",className:"block text-sm font-medium text-neutral-dark",children:"Ordenar por"}),p.jsxs("select",{id:"sortKeyDocs",value:T,onChange:se=>R(se.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-default focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:[p.jsx("option",{value:"uploadDate",children:"Fecha de subida"}),p.jsx("option",{value:"name",children:"Nombre"}),p.jsx("option",{value:"dewey_code",children:"Clasificación"})]})]}),p.jsx(Se,{onClick:()=>O(se=>se==="asc"?"desc":"asc"),variant:"ghost",size:"md",className:"p-2",title:N==="asc"?"Orden Ascendente":"Orden Descendente",children:N==="asc"?p.jsx(HD,{className:"w-5 h-5"}):p.jsx(KD,{className:"w-5 h-5"})})]})]}),p.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-light",children:p.jsxs("div",{children:[p.jsx("label",{htmlFor:"userFilter",className:"block text-sm font-medium text-neutral-dark",children:"Filtrar por Usuario"}),p.jsxs("select",{id:"userFilter",value:D,onChange:se=>k(se.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-neutral-default focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:[p.jsx("option",{value:"",children:"Todos los usuarios"}),f.sort((se,pe)=>(se.full_name||se.email).localeCompare(pe.full_name||pe.email)).map(se=>p.jsx("option",{value:se.id,children:se.full_name||se.email},se.id))]})]})})]}),l&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{className:"font-semibold",children:"Error al Actualizar Documento:"}),p.jsx("p",{children:l}),p.jsx(Se,{onClick:ue,size:"sm",variant:"ghost",className:"mt-1 text-red-600 hover:bg-red-200",children:"Descartar"})]}),L&&L.user&&p.jsxs("div",{className:"my-6 bg-primary-light p-4 rounded-lg shadow-md border-l-4 border-primary",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h3",{className:"text-xl font-semibold text-primary-dark",children:["Mostrando documentos de: ",p.jsx("span",{className:"text-secondary-dark",children:L.user.full_name||L.user.email})]}),p.jsx(Se,{onClick:()=>k(""),size:"sm",variant:"ghost",leftIcon:p.jsx(No,{className:"w-4 h-4"}),children:"Limpiar Filtro de Usuario"})]}),p.jsxs("div",{className:"mt-3 text-sm text-neutral-dark space-y-1",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Total de documentos:"})," ",L.total]}),Object.keys(L.byType).length>0&&p.jsxs("p",{children:[p.jsx("strong",{children:"Desglose por tipo:"})," ",Object.entries(L.byType).map(([se,pe])=>`${se}: ${pe}`).join(", ")]})]})]}),Ee.length===0?p.jsx("p",{className:"text-center text-neutral-dark py-6",children:"No se encontraron documentos con los filtros actuales."}):p.jsx("ul",{className:"space-y-3",children:Ee.map(se=>p.jsx(Ute,{document:se,onOpenMoveModal:Y,onOpenEditModal:we,currentDeweyName:K(se.dewey_code),uploaderName:z(se.user_id),physicalLocationString:ye(se.physical_location_id),isUpdatingThis:a&&((U==null?void 0:U.id)===se.id||(me==null?void 0:me.id)===se.id)},se.id))}),p.jsx(t7,{isOpen:I,onClose:te,documentToMove:U,onConfirmMove:ie,isLoadingAction:a,errorAction:l,clearErrorAction:ue}),p.jsx(vx,{isOpen:B,onClose:ge,documentToEdit:me,userRolePermissions:h})]})},Fte=({isOpen:t,onClose:e,onSubmit:n,initialLocationData:r,isLoadingAction:i,errorAction:a,clearErrorAction:l})=>{const[u,f]=A.useState(""),[d,h]=A.useState(""),[v,x]=A.useState(""),[_,S]=A.useState(null),{state:E}=yi(),C=!!r;A.useEffect(()=>{t&&(S(null),a&&l(),r?(f(r.office),h(r.shelf),x(r.row_level)):(f(""),h(""),x("")))},[t,r,a,l]);const T=async N=>{if(N.preventDefault(),S(null),a&&l(),!u.trim()||!d.trim()||!v.trim()){S("Todos los campos (Oficina, Estante, Nivel/Fila) son obligatorios.");return}const O=u.trim(),D=d.trim(),k=v.trim();if(E.locations.some(j=>j.office.toLowerCase()===O.toLowerCase()&&j.shelf.toLowerCase()===D.toLowerCase()&&j.row_level.toLowerCase()===k.toLowerCase()&&(!C||j.id!==(r==null?void 0:r.id)))){S("Ya existe una ubicación con estos mismos detalles (Oficina, Estante, Nivel/Fila).");return}await n({office:O,shelf:D,rowLevel:k},r==null?void 0:r.id)},R=_||a;return p.jsx(vn,{isOpen:t,onClose:e,title:C?"Editar Ubicación Física":"Añadir Nueva Ubicación Física",size:"md",children:p.jsxs("form",{onSubmit:T,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"locationOffice",className:"block text-sm font-medium text-neutral-dark",children:["Oficina ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"locationOffice",value:u,onChange:N=>f(N.target.value),disabled:i,className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light",required:!0})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"locationShelf",className:"block text-sm font-medium text-neutral-dark",children:["Estante ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"locationShelf",value:d,onChange:N=>h(N.target.value),disabled:i,className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light",required:!0})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"locationRowLevel",className:"block text-sm font-medium text-neutral-dark",children:["Nivel/Fila ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"locationRowLevel",value:v,onChange:N=>x(N.target.value),disabled:i,className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:bg-neutral-light",required:!0})]}),R&&p.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md",children:R}),p.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[p.jsx(Se,{type:"button",variant:"ghost",onClick:e,className:"text-neutral-dark",disabled:i,children:"Cancelar"}),p.jsx(Se,{type:"submit",variant:"primary",isLoading:i,disabled:i,children:C?"Guardar Cambios":"Crear Ubicación"})]})]})})},Yk=({isOpen:t,onClose:e,documentsToList:n,modalTitle:r})=>{const i=A.useMemo(()=>[...n].sort((l,u)=>new Date(u.uploadDate).getTime()-new Date(l.uploadDate).getTime()),[n]),a=l=>{switch(l){case Te.PDF:return p.jsx(xh,{className:"w-5 h-5 text-red-500 flex-shrink-0"});case Te.JPG:case Te.PNG:return p.jsx(bh,{className:"w-5 h-5 text-blue-500 flex-shrink-0"});case Te.DOCX:return p.jsx(_h,{className:"w-5 h-5 text-sky-600 flex-shrink-0"});case Te.TXT:return p.jsx(wh,{className:"w-5 h-5 text-gray-500 flex-shrink-0"});default:return p.jsx(Sh,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})}};return t?p.jsxs(vn,{isOpen:t,onClose:e,title:r,size:"lg",children:[i.length===0?p.jsx("p",{className:"text-neutral-dark text-center py-4",children:"No hay documentos que coincidan con esta selección."}):p.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:i.map(l=>p.jsxs("div",{className:"p-3 border border-neutral-light rounded-md flex items-center space-x-3",children:[a(l.type),p.jsxs("div",{className:"flex-grow min-w-0",children:[p.jsx("p",{className:"text-sm font-medium text-neutral-dark truncate",title:l.name,children:l.name}),p.jsxs("p",{className:"text-xs text-neutral",children:["Subido: ",new Date(l.uploadDate).toLocaleDateString()]})]})]},l.id))}),p.jsx("div",{className:"mt-6 flex justify-end",children:p.jsx(Se,{onClick:e,variant:"primary",children:"Cerrar"})})]}):null},Bte=()=>{const{state:t,dispatch:e,addLocation:n,updateLocation:r,deleteLocation:i}=yi(),{locations:a,isLoading:l,isUpdating:u,isDeleting:f,error:d,updateError:h,deleteError:v}=t,{state:x,nullifyDocumentsLocation:_}=ei(),{documents:S}=x,{state:E}=Fn(),C=Vo(),[T,R]=A.useState(!1),[N,O]=A.useState(null),[D,k]=A.useState(!1),[I,j]=A.useState(null),[U,re]=A.useState(""),[B,Z]=A.useState({}),[me,H]=A.useState(!1),[ve,z]=A.useState([]),[K,ye]=A.useState(""),Ee=A.useMemo(()=>{const F={};return S.forEach(xe=>{xe.physical_location_id&&(F[xe.physical_location_id]=(F[xe.physical_location_id]||0)+1)}),F},[S]),L=A.useMemo(()=>{const F=new Map;a.forEach(Q=>{F.has(Q.office)||F.set(Q.office,{shelvesMap:new Map,docCount:0});const be=F.get(Q.office);be.shelvesMap.has(Q.shelf)||be.shelvesMap.set(Q.shelf,[]),be.shelvesMap.get(Q.shelf).push(Q)});const xe=[];for(const[Q,be]of F.entries()){const Me=[];let ae=0;for(const[Le,Ye]of be.shelvesMap.entries()){const Ae=[];let lt=0;Ye.sort((ct,Be)=>ct.row_level.localeCompare(Be.row_level)).forEach(ct=>{const Be=Ee[ct.id]||0;lt+=Be,Ae.push({id:`location-${ct.id}`,name:ct.row_level,type:"row_level",documentCount:Be,originalLocation:ct})}),ae+=lt,Me.push({id:`shelf-${Q}-${Le}`,name:Le,type:"shelf",documentCount:lt,children:Ae.sort((ct,Be)=>ct.name.localeCompare(Be.name)),parentOfficeName:Q})}xe.push({id:`office-${Q}`,name:Q,type:"office",documentCount:ae,children:Me.sort((Le,Ye)=>Le.name.localeCompare(Ye.name))})}return xe.sort((Q,be)=>Q.name.localeCompare(be.name))},[a,Ee]),Y=F=>{Z(xe=>({...xe,[F]:!xe[F]}))},te=()=>{O(null),(d||h||v)&&e({type:"CLEAR_ACTION_ERRORS"}),R(!0)},ie=F=>{O(F),(d||h||v)&&e({type:"CLEAR_ACTION_ERRORS"}),R(!0)},we=()=>{R(!1),O(null)},ge=async(F,xe)=>{var be,Me;let Q=!1;xe?await r(xe,F,(be=E.supabaseUser)==null?void 0:be.id)&&(Q=!0):await n(F.office,F.shelf,F.rowLevel,(Me=E.supabaseUser)==null?void 0:Me.id)&&(Q=!0),Q&&we()},ue=F=>{j(F);const xe=Ee[F.id]||0;xe>0?re(`Esta ubicación tiene ${xe} documento(s) asignado(s).
Si se borra, la ubicación de esto(s) archivo(s) se entenderá como digital.
¿Continuar?`):re(`¿Estás seguro de que quieres eliminar la ubicación: ${F.office} - ${F.shelf} - ${F.row_level}?`),(d||h||v)&&e({type:"CLEAR_ACTION_ERRORS"}),k(!0)},se=async()=>{if(I){const F=await i(I.id);F.success&&(F.updatedDocIds&&F.updatedDocIds.length>0&&_(F.updatedDocIds),k(!1),j(null))}},pe=()=>{e({type:"CLEAR_ACTION_ERRORS"})},V=(F,xe,Q,be)=>{let Me=[],ae="";F==="office"?(Me=S.filter(Le=>Le.physicalOffice===xe),ae=`Documentos en Oficina: ${xe}`):F==="shelf"&&be?(Me=S.filter(Le=>Le.physicalOffice===be&&Le.physicalShelf===xe),ae=`Documentos en Estante: ${xe} (Oficina: ${be})`):F==="row_level"&&Q&&(Me=S.filter(Le=>Le.physical_location_id===Q.id),ae=`Documentos en: ${Q.office} / ${Q.shelf} / ${Q.row_level}`),z(Me),ye(ae),H(!0)};if(l&&!t.isLoaded)return p.jsx(Ft,{text:"Cargando ubicaciones físicas...",className:"mt-10"});const _e=h||v||d,W=(F,xe=0)=>{const Q=B[F.id]||!1,be=F.children&&F.children.length>0,Me=F.type==="row_level";let ae="",Le=p.jsx(mi,{className:"w-5 h-5 mr-2 text-neutral-dark flex-shrink-0"});switch(F.type){case"office":ae="Oficina: ",Le=p.jsx(hi,{className:"w-5 h-5 mr-2 text-primary flex-shrink-0"});break;case"shelf":ae="Estante: ",Le=p.jsx(hi,{className:"w-5 h-5 mr-2 text-sky-600 flex-shrink-0"});break;case"row_level":ae="Nivel/Fila: ",Le=p.jsx(mi,{className:"w-5 h-5 mr-2 text-amber-600 flex-shrink-0"});break}return p.jsxs("div",{className:`py-1 ${xe>0?`ml-${xe*4}`:""}`,children:[p.jsxs("div",{className:`flex items-center p-2 rounded transition-colors duration-150 ${xe===0?"bg-neutral-lightest":xe===1?"bg-sky-50":"bg-amber-50"} hover:bg-opacity-70`,children:[be&&p.jsx("button",{onClick:()=>Y(F.id),className:"mr-2 p-1 focus:outline-none",children:Q?p.jsx(rx,{className:"w-5 h-5 text-neutral-dark"}):p.jsx(yh,{className:"w-5 h-5 text-neutral-dark"})}),!be&&!Me&&p.jsx("div",{className:"w-8 mr-2"}),Le,p.jsxs("span",{className:"font-medium text-neutral-dark flex-grow truncate",title:F.name,children:[p.jsx("span",{className:"font-semibold",children:ae}),F.name]}),F.documentCount>0?p.jsxs(Se,{variant:"ghost",size:"sm",onClick:()=>V(F.type,F.name,F.originalLocation,F.parentOfficeName),className:"px-2 py-1 text-xs rounded text-primary hover:underline",title:`Ver ${F.documentCount} documento(s) en ${ae}${F.name}`,children:["(",F.documentCount,")"]}):p.jsxs("span",{className:"px-2 py-1 text-xs text-neutral",children:["(",F.documentCount,")"]}),Me&&F.originalLocation&&p.jsxs("div",{className:"flex space-x-1 ml-2 flex-shrink-0",children:[p.jsx(Se,{onClick:()=>ie(F.originalLocation),variant:"ghost",size:"sm",className:"p-1",title:"Editar ubicación",disabled:u||f,children:p.jsx(qa,{className:"w-4 h-4 text-secondary"})}),p.jsx(Se,{onClick:()=>ue(F.originalLocation),variant:"ghost",size:"sm",className:"p-1",title:"Eliminar ubicación",disabled:u||f||f&&(I==null?void 0:I.id)===F.originalLocation.id,isLoading:f&&(I==null?void 0:I.id)===F.originalLocation.id,children:p.jsx(zi,{className:"w-4 h-4 text-red-500"})})]})]}),Q&&be&&p.jsx("div",{className:"mt-1 border-l-2 border-neutral-light pl-2",children:F.children.map(Ye=>W(Ye,xe+1))})]},F.id)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs(Se,{onClick:()=>C("/admin"),variant:"ghost",className:"text-sm text-primary hover:text-primary-dark inline-flex items-center group mb-2",children:[p.jsx(Sl,{className:"w-4 h-4 mr-1.5 transition-transform group-hover:-translate-x-0.5"}),"Volver al Panel de Administración"]}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[p.jsx("h1",{className:"text-3xl font-semibold text-primary mb-4 sm:mb-0",children:"Gestionar Ubicaciones Físicas"}),p.jsx(Se,{onClick:te,leftIcon:p.jsx(Eh,{className:"w-5 h-5"}),variant:"primary",disabled:u||f,children:"Añadir Nueva Ubicación"})]}),_e&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{className:"font-semibold",children:"Error:"}),p.jsx("p",{children:_e}),p.jsx(Se,{onClick:pe,size:"sm",variant:"ghost",className:"mt-1 text-red-600 hover:bg-red-200",children:"Descartar"})]}),L.length===0&&!l?p.jsx("p",{className:"text-neutral-dark text-center py-6 bg-white shadow-md rounded-lg",children:"No hay ubicaciones físicas registradas. Comienza añadiendo una."}):p.jsx("div",{className:"bg-white shadow-md rounded-lg p-4 space-y-1",children:L.map(F=>W(F,0))}),p.jsx(Fte,{isOpen:T,onClose:we,onSubmit:ge,initialLocationData:N,isLoadingAction:u,errorAction:h,clearErrorAction:pe}),p.jsx(Mh,{isOpen:D,onClose:()=>{f||k(!1)},onConfirm:se,title:"Confirmar Eliminación de Ubicación",message:p.jsx("p",{className:"text-sm text-neutral-dark whitespace-pre-wrap",children:U}),confirmText:"Sí, Eliminar",confirmButtonVariant:"danger"}),p.jsx(Yk,{isOpen:me,onClose:()=>H(!1),documentsToList:ve,modalTitle:K})]})},qte=()=>{const{state:t,addConfidentialClassification:e,updateClassification:n,deleteClassification:r}=vr(),{state:i}=ei(),[a,l]=A.useState(""),[u,f]=A.useState(""),[d,h]=A.useState(!1),[v,x]=A.useState(!1),[_,S]=A.useState(null),[E,C]=A.useState(""),[T,R]=A.useState(""),[N,O]=A.useState(!1),[D,k]=A.useState(null),[I,j]=A.useState(!1),[U,re]=A.useState(""),[B,Z]=A.useState(!1),[me,H]=A.useState(null),[ve,z]=A.useState(!1),[K,ye]=A.useState([]),[Ee,L]=A.useState(""),Y=A.useMemo(()=>t.allClassifications.filter(W=>W.is_confidential&&W.level===2).sort((W,F)=>W.code.localeCompare(F.code)),[t.allClassifications]),te=A.useMemo(()=>{const W={};return i.documents.forEach(F=>{W[F.dewey_code]=(W[F.dewey_code]||0)+1}),W},[i.documents]),ie=()=>{const W=t.allClassifications.filter(Q=>Q.code.startsWith("C")&&Q.level===2).map(Q=>parseInt(Q.code.substring(1),10)).filter(Q=>!isNaN(Q));if(W.length===0)return"1";const F=new Set(W);let xe=1;for(;F.has(xe);)xe++;return String(xe)},we=()=>{H(null),l(""),f(ie()),h(!0)},ge=async()=>{if(!a.trim()){H("El nombre de la clasificación no puede estar vacío.");return}if(!u.trim()||isNaN(parseInt(u,10))||parseInt(u,10)<=0){H("El código debe ser un número positivo.");return}if(parseInt(u,10)===0){H("El código 'C00' está reservado para la categoría principal y no se puede usar.");return}const W=`C${String(u).padStart(2,"0")}`;if(t.allClassifications.some(xe=>xe.code===W)){H(`La clasificación con el código ${W} ya existe.`);return}H(null),Z(!0);const F=await e(a,W);Z(!1),F?(h(!1),l(""),f("")):H("Error al crear la clasificación. Es posible que ya exista un nombre o código similar, o hubo un problema con la base de datos.")},ue=W=>{H(null),S(W),C(W.name),R(W.code.substring(1)),x(!0)},se=async()=>{if(!_)return;if(!E.trim()){H("El nombre no puede estar vacío.");return}if(!T.trim()||isNaN(parseInt(T,10))||parseInt(T,10)<=0){H("El código debe ser un número positivo.");return}if(parseInt(T,10)===0){H("El código 'C00' está reservado para la categoría principal y no se puede usar.");return}const W=`C${String(T).padStart(2,"0")}`;if(t.allClassifications.some(be=>be.code===W&&be.code!==_.code)){H(`Ya existe otra clasificación con el código ${W}.`);return}const F=E.trim()!==_.name,xe=W!==_.code;if(!F&&!xe){H("No se han realizado cambios.");return}H(null),Z(!0);const Q=await n(_.code,{newCode:W,name:E.trim()});Z(!1),Q?(x(!1),S(null)):H("Error al actualizar la clasificación. Intente de nuevo.")},pe=W=>{H(null);const F=te[W.code]||0;if(F>0){re(`No se puede eliminar "${W.name}" porque tiene ${F} documento(s) asociado(s).`),j(!0);return}k(W),O(!0)},V=async()=>{if(D){Z(!0);const W=await r(D.code);Z(!1),W?(O(!1),k(null)):(H("Error al eliminar la clasificación. La base de datos puede estar restringiendo la eliminación si hay documentos asociados."),O(!1))}},_e=W=>{const F=i.documents.filter(xe=>xe.dewey_code===W.code);ye(F),L(`Documentos en: ${W.name} (${W.code})`),z(!0)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs(ln,{to:"/admin",className:"text-sm text-primary hover:text-primary-dark inline-flex items-center group mb-2",children:[p.jsx(Sl,{className:"w-4 h-4 mr-1.5 transition-transform group-hover:-translate-x-0.5"}),"Volver al Panel de Administración"]}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[p.jsx("h1",{className:"text-3xl font-semibold text-primary mb-4 sm:mb-0",children:"Gestionar Clasificaciones Confidenciales"}),p.jsx(Se,{onClick:we,leftIcon:p.jsx(Eh,{className:"w-5 h-5"}),variant:"primary",children:"Crear Clasificación"})]}),p.jsx("p",{className:"text-sm text-neutral-dark",children:'Aquí puedes añadir o eliminar sub-clasificaciones dentro de la categoría principal "Confidencial". Estas clasificaciones solo serán visibles y utilizables por administradores.'}),me&&p.jsxs("div",{className:"my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md shadow text-sm",role:"alert",children:[p.jsx("p",{children:me}),p.jsx(Se,{onClick:()=>H(null),size:"sm",variant:"ghost",className:"text-red-600 mt-1",children:"Descartar"})]}),t.isLoading?p.jsx(Ft,{text:"Cargando clasificaciones..."}):p.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:p.jsx("ul",{className:"divide-y divide-neutral-light",children:Y.map(W=>p.jsxs("li",{className:"p-4 hover:bg-neutral-lightest transition-colors duration-150 flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsxs("h2",{className:"font-semibold text-neutral-dark flex items-center",children:[p.jsx(El,{className:"w-4 h-4 mr-2 text-secondary"}),W.name," ",p.jsxs("span",{className:"text-neutral ml-2",children:["(",W.code,")"]})]}),p.jsxs("div",{className:"text-xs text-neutral-dark mt-1",children:["Documentos en esta clasificación:",(te[W.code]||0)>0?p.jsx("button",{onClick:()=>_e(W),className:"font-bold text-primary hover:underline ml-1 p-0 bg-transparent border-none cursor-pointer","aria-label":`Ver ${te[W.code]} documentos en ${W.name}`,children:te[W.code]}):p.jsx("span",{className:"font-bold ml-1",children:te[W.code]||0})]})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx(Se,{onClick:()=>ue(W),variant:"ghost",size:"sm",leftIcon:p.jsx(qa,{className:"w-4 h-4"}),"aria-label":`Editar ${W.name}`,disabled:B,title:`Editar ${W.name}`,children:"Editar"}),p.jsx(Se,{onClick:()=>pe(W),variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-100",leftIcon:p.jsx(zi,{className:"w-4 h-4"}),"aria-label":`Eliminar ${W.name}`,disabled:B,title:`Eliminar ${W.name}`,children:"Eliminar"})]})]},W.code))})}),p.jsx(vn,{isOpen:d,onClose:()=>h(!1),title:"Crear Nueva Clasificación Confidencial",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"classificationCode",className:"block text-sm font-medium text-neutral-dark",children:["Código (sólo número) ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[p.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-neutral bg-neutral-lightest text-neutral-dark sm:text-sm",children:"C"}),p.jsx("input",{type:"number",id:"classificationCode",value:u,onChange:W=>f(W.target.value),className:"flex-1 block w-full min-w-0 rounded-none rounded-r-md px-3 py-2 border border-neutral focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Ej: 1",min:"1",disabled:B})]})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"classificationName",className:"block text-sm font-medium text-neutral-dark",children:["Nombre de la Nueva Clasificación ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"classificationName",value:a,onChange:W=>l(W.target.value),className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Ej: Proyectos Secretos",disabled:B})]}),me&&p.jsx("p",{className:"text-sm text-red-500",children:me}),p.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[p.jsx(Se,{variant:"ghost",onClick:()=>h(!1),disabled:B,children:"Cancelar"}),p.jsx(Se,{onClick:ge,isLoading:B,children:"Crear"})]})]})}),p.jsx(vn,{isOpen:v,onClose:()=>x(!1),title:`Editar Clasificación: ${_==null?void 0:_.name}`,children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"editedClassificationCode",className:"block text-sm font-medium text-neutral-dark",children:["Código (sólo número) ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[p.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-neutral bg-neutral-lightest text-neutral-dark sm:text-sm",children:"C"}),p.jsx("input",{type:"number",id:"editedClassificationCode",value:T,onChange:W=>R(W.target.value),className:"flex-1 block w-full min-w-0 rounded-none rounded-r-md px-3 py-2 border border-neutral focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",min:"1",disabled:B})]})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"editedClassificationName",className:"block text-sm font-medium text-neutral-dark",children:["Nuevo Nombre ",p.jsx("span",{className:"text-red-500",children:"*"})]}),p.jsx("input",{type:"text",id:"editedClassificationName",value:E,onChange:W=>C(W.target.value),className:"mt-1 block w-full px-3 py-2 border border-neutral rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",disabled:B})]}),me&&p.jsx("p",{className:"text-sm text-red-500",children:me}),p.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[p.jsx(Se,{variant:"ghost",onClick:()=>x(!1),disabled:B,children:"Cancelar"}),p.jsx(Se,{onClick:se,isLoading:B,children:"Actualizar"})]})]})}),p.jsx(vn,{isOpen:I,onClose:()=>j(!1),title:"No se puede eliminar",children:p.jsxs("div",{className:"space-y-4",children:[p.jsx("p",{className:"text-sm text-neutral-dark",children:U}),p.jsx("div",{className:"pt-4 flex justify-end",children:p.jsx(Se,{onClick:()=>j(!1),children:"Cerrar"})})]})}),D&&p.jsx(Mh,{isOpen:N,onClose:()=>O(!1),onConfirm:V,title:"Confirmar Eliminación",message:`¿Estás seguro de que quieres eliminar la clasificación "${D.name}"? Esta acción no se puede deshacer.`,confirmText:"Sí, Eliminar",confirmButtonVariant:"danger"}),p.jsx(Yk,{isOpen:ve,onClose:()=>z(!1),documentsToList:K,modalTitle:Ee})]})},vo=({children:t,adminOnly:e,requiredPermission:n})=>{const{state:r}=Fn(),{supabaseUser:i,currentRole:a,isInitialLoadComplete:l,isLoading:u}=r,f=Zi();return!l||u?p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-neutral-light",children:p.jsx(Ft,{text:"Verificando acceso...",size:"lg"})}):i?e&&(a==null?void 0:a.name)!=="Administrador"?(console.warn(`[ProtectedRoute] Access denied: Admin only route. Current role: ${a==null?void 0:a.name}`),p.jsx(Ao,{to:"/",state:{from:f},replace:!0})):n==="canUploadDocuments"&&!(a!=null&&a.canUploadDocuments)?(console.warn(`[ProtectedRoute] Access denied: Missing '${n}' permission. Current role: ${a==null?void 0:a.name}, canUpload: ${a==null?void 0:a.canUploadDocuments}`),p.jsx(Ao,{to:"/",state:{from:f,message:"No tienes permiso para acceder a esta página."},replace:!0})):t:p.jsx(Ao,{to:"/login",state:{from:f},replace:!0})},Vte=()=>p.jsx(Gq,{children:p.jsxs(GD,{children:[p.jsx(Tn,{path:"/",element:p.jsx(k5,{})}),p.jsx(Tn,{path:"/upload",element:p.jsx(vo,{requiredPermission:"canUploadDocuments",children:p.jsx(Iq,{})})}),p.jsx(Tn,{path:"/documents",element:p.jsx(jq,{})}),p.jsx(Tn,{path:"/classifications",element:p.jsx(Bq,{})}),p.jsx(Tn,{path:"/classifications/:mainCategoryCode/:subCategoryCode",element:p.jsx(qq,{})}),p.jsx(Tn,{path:"/admin",element:p.jsx(vo,{adminOnly:!0,children:p.jsx(Kq,{})})}),p.jsx(Tn,{path:"/admin/roles",element:p.jsx(vo,{adminOnly:!0,children:p.jsx(Jq,{})})}),p.jsx(Tn,{path:"/admin/users",element:p.jsx(vo,{adminOnly:!0,children:p.jsx(e7,{})})}),p.jsx(Tn,{path:"/admin/documents",element:p.jsx(vo,{adminOnly:!0,children:p.jsx($te,{})})}),p.jsx(Tn,{path:"/admin/locations",element:p.jsx(vo,{adminOnly:!0,children:p.jsx(Bte,{})})}),p.jsx(Tn,{path:"/admin/confidential-classifications",element:p.jsx(vo,{adminOnly:!0,children:p.jsx(qte,{})})}),p.jsx(Tn,{path:"*",element:p.jsx(Ao,{to:"/",replace:!0})})]})}),zte=()=>{const{state:t}=Fn(),{supabaseUser:e,isInitialLoadComplete:n,isLoading:r}=t,{state:i,loadInitialDocuments:a,dispatch:l}=ei(),{state:u,loadDeweyClassifications:f,dispatch:d}=vr(),{state:h,loadInitialLocations:v,dispatch:x}=yi();if(A.useEffect(()=>{console.log("[App.tsx] Data Load useEffect triggered. Conditions:",{isInitialLoadComplete:n,hasSupabaseUser:!!e,isDocumentInitialLoadPerformed:i.initialLoadPerformed,isDeweyLoaded:u.isLoaded,isLocationLoaded:h.isLoaded}),n&&e&&(i.initialLoadPerformed||(console.log("App.tsx: Usuario autenticado. Cargando documentos..."),a()),u.isLoaded||(console.log("App.tsx: Usuario autenticado. Cargando clasificaciones Dewey..."),f()),u.isLoaded&&!h.isLoaded&&(console.log("App.tsx: Usuario autenticado y Dewey cargado. Cargando ubicaciones físicas..."),v()))},[n,e,i.initialLoadPerformed,a,u.isLoaded,f,h.isLoaded,v]),A.useEffect(()=>{n&&!e&&(i.initialLoadPerformed&&(console.log("[App.tsx] User logged out. Resetting document state."),l({type:"USER_LOGGED_OUT_RESET"})),u.isLoaded&&(console.log("[App.tsx] User logged out. Resetting Dewey classifications state."),d({type:"USER_LOGGED_OUT_RESET"})),h.isLoaded&&(console.log("[App.tsx] User logged out. Resetting physical locations state."),x({type:"USER_LOGGED_OUT_RESET"})))},[n,e,l,d,x]),console.log("[App.tsx Render] Current state:",{isInitialLoadComplete:n,supabaseUser:e==null?void 0:e.id,userStoreIsLoading:r,deweyIsLoaded:u.isLoaded,locationIsLoaded:h.isLoaded,deweyError:u.error,locationError:h.error}),!n||e&&(!u.isLoaded||!h.isLoaded)&&!u.error&&!h.error){let _="Iniciando aplicación...";return n&&e?r?_="Verificando sesión...":!u.isLoaded&&!u.error?_="Cargando clasificaciones Dewey...":!h.isLoaded&&!h.error?_="Cargando ubicaciones físicas...":u.error?_=`Error cargando Dewey: ${u.error}. Reintentando...`:h.error&&(_=`Error cargando Ubicaciones: ${h.error}. Reintentando...`):r&&(_="Iniciando sesión y cargando datos..."),p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-neutral-light",children:p.jsx(Ft,{text:_,size:"lg"})})}return p.jsx(mj,{children:p.jsx(GD,{children:e?p.jsxs(p.Fragment,{children:[p.jsx(Tn,{path:"/login",element:p.jsx(Ao,{to:"/",replace:!0})}),p.jsx(Tn,{path:"/register",element:p.jsx(Ao,{to:"/",replace:!0})}),p.jsx(Tn,{path:"/*",element:p.jsx(Vte,{})})]}):p.jsxs(p.Fragment,{children:[p.jsx(Tn,{path:"/login",element:p.jsx(Hq,{})}),p.jsx(Tn,{path:"*",element:p.jsx(Ao,{to:"/login",replace:!0})})]})})})},Wk=document.getElementById("root");if(!Wk)throw new Error("Could not find root element to mount to");const Gte=gL.createRoot(Wk);Gte.render(p.jsx(J0.StrictMode,{children:p.jsx(R5,{children:p.jsx(Cq,{children:p.jsx(Aq,{children:p.jsx(Sq,{children:p.jsx(Rq,{children:p.jsxs(Fq,{children:[" ",p.jsx(zte,{})]})})})})})})}));
